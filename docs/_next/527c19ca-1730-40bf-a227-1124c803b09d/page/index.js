module.exports=__NEXT_REGISTER_PAGE("/",function(){var e=webpackJsonp([0],{108:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(9);n["k"]._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(){var e=function(e){n["i"].call(this,e);this._labels={};this.autoRemoveChildren=true===this.vars.autoRemoveChildren;this.smoothChildTiming=true===this.vars.smoothChildTiming;this._sortChildren=true;this._onUpdate=this.vars.onUpdate;var t=this.vars,r,i;for(i in t){r=t[i];o(r)&&-1!==r.join("").indexOf("{self}")&&(t[i]=this._swapSelfInParams(r))}o(t.tweens)&&this.add(t.tweens,0,t.align,t.stagger)},t=1e-10,r=n["l"]._internals,i=e._internals={},a=r.isSelector,o=r.isArray,s=r.lazyTweens,l=r.lazyRender,c=n["k"]._gsDefine.globals,u=function(e){var t={},r;for(r in e)t[r]=e[r];return t},h=function(e,t,r){var n=e.cycle,i,a;for(i in n){a=n[i];e[i]="function"===typeof a?a(r,t[r]):a[r%a.length]}delete e.cycle},f=i.pauseCallback=function(){},p=function(e){var t=[],r=e.length,n;for(n=0;n!==r;t.push(e[n++]));return t},d=e.prototype=new n["i"];e.version="2.0.2";d.constructor=e;d.kill()._gc=d._forcingPlayhead=d._hasPause=false;d.to=function(e,t,r,i){var a=r.repeat&&c.TweenMax||n["l"];return t?this.add(new a(e,t,r),i):this.set(e,r,i)};d.from=function(e,t,r,i){return this.add((r.repeat&&c.TweenMax||n["l"]).from(e,t,r),i)};d.fromTo=function(e,t,r,i,a){var o=i.repeat&&c.TweenMax||n["l"];return t?this.add(o.fromTo(e,t,r,i),a):this.set(e,i,a)};d.staggerTo=function(t,r,i,o,s,l,c,f){var d=new e({onComplete:l,onCompleteParams:c,callbackScope:f,smoothChildTiming:this.smoothChildTiming}),m=i.cycle,v,g;"string"===typeof t&&(t=n["l"].selector(t)||t);t=t||[];a(t)&&(t=p(t));o=o||0;if(o<0){t=p(t);t.reverse();o*=-1}for(g=0;g<t.length;g++){v=u(i);if(v.startAt){v.startAt=u(v.startAt);v.startAt.cycle&&h(v.startAt,t,g)}if(m){h(v,t,g);if(null!=v.duration){r=v.duration;delete v.duration}}d.to(t[g],r,v,g*o)}return this.add(d,s)};d.staggerFrom=function(e,t,r,n,i,a,o,s){r.immediateRender=false!=r.immediateRender;r.runBackwards=true;return this.staggerTo(e,t,r,n,i,a,o,s)};d.staggerFromTo=function(e,t,r,n,i,a,o,s,l){n.startAt=r;n.immediateRender=false!=n.immediateRender&&false!=r.immediateRender;return this.staggerTo(e,t,n,i,a,o,s,l)};d.call=function(e,t,r,i){return this.add(n["l"].delayedCall(0,e,t,r),i)};d.set=function(e,t,r){r=this._parseTimeOrLabel(r,0,true);null==t.immediateRender&&(t.immediateRender=r===this._time&&!this._paused);return this.add(new n["l"](e,0,t),r)};e.exportRoot=function(t,r){t=t||{};null==t.smoothChildTiming&&(t.smoothChildTiming=true);var i=new e(t),a=i._timeline,o,s,l,c;null==r&&(r=true);a._remove(i,true);i._startTime=0;i._rawPrevTime=i._time=i._totalTime=a._time;l=a._first;while(l){c=l._next;if(!r||!(l instanceof n["l"]&&l.target===l.vars.onComplete)){s=l._startTime-l._delay;s<0&&(o=1);i.add(l,s)}l=c}a.add(i,0);o&&i.totalDuration();return i};d.add=function(t,r,i,a){var s,l,c,u,h,f;"number"!==typeof r&&(r=this._parseTimeOrLabel(r,0,true,t));if(!(t instanceof n["a"])){if(t instanceof Array||t&&t.push&&o(t)){i=i||"normal";a=a||0;s=r;l=t.length;for(c=0;c<l;c++){o(u=t[c])&&(u=new e({tweens:u}));this.add(u,s);"string"!==typeof u&&"function"!==typeof u&&("sequence"===i?s=u._startTime+u.totalDuration()/u._timeScale:"start"===i&&(u._startTime-=u.delay()));s+=a}return this._uncache(true)}if("string"===typeof t)return this.addLabel(t,r);if("function"!==typeof t)throw"Cannot add "+t+" into the timeline; it is not a tween, timeline, function, or string.";t=n["l"].delayedCall(0,t)}n["i"].prototype.add.call(this,t,r);if(t._time){s=Math.max(0,Math.min(t.totalDuration(),(this.rawTime()-t._startTime)*t._timeScale));Math.abs(s-t._totalTime)>1e-5&&t.render(s,false,false)}if((this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration()){h=this;f=h.rawTime()>t._startTime;while(h._timeline){f&&h._timeline.smoothChildTiming?h.totalTime(h._totalTime,true):h._gc&&h._enabled(true,false);h=h._timeline}}return this};d.remove=function(e){if(e instanceof n["a"]){this._remove(e,false);var t=e._timeline=e.vars.useFrames?n["a"]._rootFramesTimeline:n["a"]._rootTimeline;e._startTime=(e._paused?e._pauseTime:t._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale;return this}if(e instanceof Array||e&&e.push&&o(e)){var r=e.length;while(--r>-1)this.remove(e[r]);return this}if("string"===typeof e)return this.removeLabel(e);return this.kill(null,e)};d._remove=function(e,t){n["i"].prototype._remove.call(this,e,t);var r=this._last;if(r){if(this._time>this.duration()){this._time=this._duration;this._totalTime=this._totalDuration}}else this._time=this._totalTime=this._duration=this._totalDuration=0;return this};d.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,true,e))};d.insert=d.insertMultiple=function(e,t,r,n){return this.add(e,t||0,r,n)};d.appendMultiple=function(e,t,r,n){return this.add(e,this._parseTimeOrLabel(null,t,true,e),r,n)};d.addLabel=function(e,t){this._labels[e]=this._parseTimeOrLabel(t);return this};d.addPause=function(e,t,r,i){var a=n["l"].delayedCall(0,f,r,i||this);a.vars.onComplete=a.vars.onReverseComplete=t;a.data="isPause";this._hasPause=true;return this.add(a,e)};d.removeLabel=function(e){delete this._labels[e];return this};d.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1};d._parseTimeOrLabel=function(e,t,r,i){var a,s;if(i instanceof n["a"]&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&o(i))){s=i.length;while(--s>-1)i[s]instanceof n["a"]&&i[s].timeline===this&&this.remove(i[s])}a="number"!==typeof e||t?this.duration()>99999999999?this.recent().endTime(false):this._duration:0;if("string"===typeof t)return this._parseTimeOrLabel(t,r&&"number"===typeof e&&null==this._labels[t]?e-a:0,r);t=t||0;if("string"!==typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=a);else{s=e.indexOf("=");if(-1===s){if(null==this._labels[e])return r?this._labels[e]=a+t:t;return this._labels[e]+t}t=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1));e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,r):a}return Number(e)+t};d.seek=function(e,t){return this.totalTime("number"===typeof e?e:this._parseTimeOrLabel(e),false!==t)};d.stop=function(){return this.paused(true)};d.gotoAndPlay=function(e,t){return this.play(e,t)};d.gotoAndStop=function(e,t){return this.pause(e,t)};d.render=function(e,r,n){this._gc&&this._enabled(true,false);var i=this._time,a=this._dirty?this.totalDuration():this._totalDuration,o=this._startTime,c=this._timeScale,u=this._paused,h,f,p,d,m,v,g;i!==this._time&&(e+=this._time-i);if(e>=a-1e-7&&e>=0){this._totalTime=this._time=a;if(!this._reversed&&!this._hasPausedChild()){f=true;d="onComplete";m=!!this._timeline.autoRemoveChildren;if(0===this._duration&&(e<=0&&e>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===t)&&this._rawPrevTime!==e&&this._first){m=true;this._rawPrevTime>t&&(d="onReverseComplete")}}this._rawPrevTime=this._duration||!r||e||this._rawPrevTime===e?e:t;e=a+1e-4}else if(e<1e-7){this._totalTime=this._time=0;if(0!==i||0===this._duration&&this._rawPrevTime!==t&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0)){d="onReverseComplete";f=this._reversed}if(e<0){this._active=false;if(this._timeline.autoRemoveChildren&&this._reversed){m=f=true;d="onReverseComplete"}else this._rawPrevTime>=0&&this._first&&(m=true);this._rawPrevTime=e}else{this._rawPrevTime=this._duration||!r||e||this._rawPrevTime===e?e:t;if(0===e&&f){h=this._first;while(h&&0===h._startTime){h._duration||(f=false);h=h._next}}e=0;this._initted||(m=true)}}else{if(this._hasPause&&!this._forcingPlayhead&&!r){if(e>=i){h=this._first;while(h&&h._startTime<=e&&!v){h._duration||"isPause"!==h.data||h.ratio||0===h._startTime&&0===this._rawPrevTime||(v=h);h=h._next}}else{h=this._last;while(h&&h._startTime>=e&&!v){h._duration||"isPause"===h.data&&h._rawPrevTime>0&&(v=h);h=h._prev}}if(v){this._time=e=v._startTime;this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)}}this._totalTime=this._time=this._rawPrevTime=e}if(!(this._time!==i&&this._first||n||m||v))return;this._initted||(this._initted=true);this._active||!this._paused&&this._time!==i&&e>0&&(this._active=true);0===i&&this.vars.onStart&&(0===this._time&&this._duration||r||this._callback("onStart"));g=this._time;if(g>=i){h=this._first;while(h){p=h._next;if(g!==this._time||this._paused&&!u)break;if(h._active||h._startTime<=g&&!h._paused&&!h._gc){v===h&&this.pause();h._reversed?h.render((h._dirty?h.totalDuration():h._totalDuration)-(e-h._startTime)*h._timeScale,r,n):h.render((e-h._startTime)*h._timeScale,r,n)}h=p}}else{h=this._last;while(h){p=h._prev;if(g!==this._time||this._paused&&!u)break;if(h._active||h._startTime<=i&&!h._paused&&!h._gc){if(v===h){v=h._prev;while(v&&v.endTime()>this._time){v.render(v._reversed?v.totalDuration()-(e-v._startTime)*v._timeScale:(e-v._startTime)*v._timeScale,r,n);v=v._prev}v=null;this.pause()}h._reversed?h.render((h._dirty?h.totalDuration():h._totalDuration)-(e-h._startTime)*h._timeScale,r,n):h.render((e-h._startTime)*h._timeScale,r,n)}h=p}}if(this._onUpdate&&!r){s.length&&l();this._callback("onUpdate")}if(d&&!this._gc&&(o===this._startTime||c!==this._timeScale)&&(0===this._time||a>=this.totalDuration())){if(f){s.length&&l();this._timeline.autoRemoveChildren&&this._enabled(false,false);this._active=false}!r&&this.vars[d]&&this._callback(d)}};d._hasPausedChild=function(){var t=this._first;while(t){if(t._paused||t instanceof e&&t._hasPausedChild())return true;t=t._next}return false};d.getChildren=function(e,t,r,i){i=i||-9999999999;var a=[],o=this._first,s=0;while(o){if(o._startTime<i);else if(o instanceof n["l"])false!==t&&(a[s++]=o);else{false!==r&&(a[s++]=o);if(false!==e){a=a.concat(o.getChildren(true,t,r));s=a.length}}o=o._next}return a};d.getTweensOf=function(e,t){var r=this._gc,i=[],a=0,o,s;r&&this._enabled(true,true);o=n["l"].getTweensOf(e);s=o.length;while(--s>-1)(o[s].timeline===this||t&&this._contains(o[s]))&&(i[a++]=o[s]);r&&this._enabled(false,true);return i};d.recent=function(){return this._recent};d._contains=function(e){var t=e.timeline;while(t){if(t===this)return true;t=t.timeline}return false};d.shiftChildren=function(e,t,r){r=r||0;var n=this._first,i=this._labels,a;while(n){n._startTime>=r&&(n._startTime+=e);n=n._next}if(t)for(a in i)i[a]>=r&&(i[a]+=e);return this._uncache(true)};d._kill=function(e,t){if(!e&&!t)return this._enabled(false,false);var r=t?this.getTweensOf(t):this.getChildren(true,true,false),n=r.length,i=false;while(--n>-1)r[n]._kill(e,t)&&(i=true);return i};d.clear=function(e){var t=this.getChildren(false,true,true),r=t.length;this._time=this._totalTime=0;while(--r>-1)t[r]._enabled(false,false);false!==e&&(this._labels={});return this._uncache(true)};d.invalidate=function(){var e=this._first;while(e){e.invalidate();e=e._next}return n["a"].prototype.invalidate.call(this)};d._enabled=function(e,t){if(e===this._gc){var r=this._first;while(r){r._enabled(e,true);r=r._next}}return n["i"].prototype._enabled.call(this,e,t)};d.totalTime=function(e,t,r){this._forcingPlayhead=true;var i=n["a"].prototype.totalTime.apply(this,arguments);this._forcingPlayhead=false;return i};d.duration=function(e){if(!arguments.length){this._dirty&&this.totalDuration();return this._duration}0!==this.duration()&&0!==e&&this.timeScale(this._duration/e);return this};d.totalDuration=function(e){if(!arguments.length){if(this._dirty){var t=0,r=this._last,n=999999999999,i,a;while(r){i=r._prev;r._dirty&&r.totalDuration();if(r._startTime>n&&this._sortChildren&&!r._paused&&!this._calculatingDuration){this._calculatingDuration=1;this.add(r,r._startTime-r._delay);this._calculatingDuration=0}else n=r._startTime;if(r._startTime<0&&!r._paused){t-=r._startTime;if(this._timeline.smoothChildTiming){this._startTime+=r._startTime/this._timeScale;this._time-=r._startTime;this._totalTime-=r._startTime;this._rawPrevTime-=r._startTime}this.shiftChildren(-r._startTime,false,-9999999999);n=0}a=r._startTime+r._totalDuration/r._timeScale;a>t&&(t=a);r=i}this._duration=this._totalDuration=t;this._dirty=false}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this};d.paused=function(e){if(!e){var t=this._first,r=this._time;while(t){t._startTime===r&&"isPause"===t.data&&(t._rawPrevTime=0);t=t._next}}return n["a"].prototype.paused.apply(this,arguments)};d.usesFrames=function(){var e=this._timeline;while(e._timeline)e=e._timeline;return e===n["a"]._rootFramesTimeline};d.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale};return e},true);var i=n["m"].TimelineLite;n["k"]._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(){var e=function(e){i.call(this,e);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._cycle=0;this._yoyo=true===this.vars.yoyo;this._dirty=true},t=1e-10,r=n["l"]._internals,a=r.lazyTweens,o=r.lazyRender,s=n["k"]._gsDefine.globals,l=new n["b"](null,null,1,0),c=e.prototype=new i;c.constructor=e;c.kill()._gc=false;e.version="2.0.2";c.invalidate=function(){this._yoyo=true===this.vars.yoyo;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._uncache(true);return i.prototype.invalidate.call(this)};c.addCallback=function(e,t,r,i){return this.add(n["l"].delayedCall(0,e,r,i),t)};c.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else{var r=this.getTweensOf(e,false),n=r.length,i=this._parseTimeOrLabel(t);while(--n>-1)r[n]._startTime===i&&r[n]._enabled(false,false)}return this};c.removePause=function(e){return this.removeCallback(i._internals.pauseCallback,e)};c.tweenTo=function(e,t){t=t||{};var r={ease:l,useFrames:this.usesFrames(),immediateRender:false,lazy:false},i=t.repeat&&s.TweenMax||n["l"],a,o,c;for(o in t)r[o]=t[o];r.time=this._parseTimeOrLabel(e);a=Math.abs(Number(r.time)-this._time)/this._timeScale||.001;c=new i(this,a,r);r.onStart=function(){c.target.paused(true);c.vars.time===c.target.time()||a!==c.duration()||c.isFromTo||c.duration(Math.abs(c.vars.time-c.target.time())/c.target._timeScale).render(c.time(),true,true);t.onStart&&t.onStart.apply(t.onStartScope||t.callbackScope||c,t.onStartParams||[])};return c};c.tweenFromTo=function(e,t,r){r=r||{};e=this._parseTimeOrLabel(e);r.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this};r.immediateRender=false!==r.immediateRender;var n=this.tweenTo(t,r);n.isFromTo=1;return n.duration(Math.abs(n.vars.time-e)/this._timeScale||.001)};c.render=function(e,r,n){this._gc&&this._enabled(true,false);var i=this._time,s=this._dirty?this.totalDuration():this._totalDuration,l=this._duration,c=this._totalTime,u=this._startTime,h=this._timeScale,f=this._rawPrevTime,p=this._paused,d=this._cycle,m,v,g,y,x,b,_,w;i!==this._time&&(e+=this._time-i);if(e>=s-1e-7&&e>=0){if(!this._locked){this._totalTime=s;this._cycle=this._repeat}if(!this._reversed&&!this._hasPausedChild()){v=true;y="onComplete";x=!!this._timeline.autoRemoveChildren;if(0===this._duration&&(e<=0&&e>=-1e-7||f<0||f===t)&&f!==e&&this._first){x=true;f>t&&(y="onReverseComplete")}}this._rawPrevTime=this._duration||!r||e||this._rawPrevTime===e?e:t;if(this._yoyo&&0!==(1&this._cycle))this._time=e=0;else{this._time=l;e=l+1e-4}}else if(e<1e-7){this._locked||(this._totalTime=this._cycle=0);this._time=0;if(0!==i||0===l&&f!==t&&(f>0||e<0&&f>=0)&&!this._locked){y="onReverseComplete";v=this._reversed}if(e<0){this._active=false;if(this._timeline.autoRemoveChildren&&this._reversed){x=v=true;y="onReverseComplete"}else f>=0&&this._first&&(x=true);this._rawPrevTime=e}else{this._rawPrevTime=l||!r||e||this._rawPrevTime===e?e:t;if(0===e&&v){m=this._first;while(m&&0===m._startTime){m._duration||(v=false);m=m._next}}e=0;this._initted||(x=true)}}else{0===l&&f<0&&(x=true);this._time=this._rawPrevTime=e;if(!this._locked){this._totalTime=e;if(0!==this._repeat){b=l+this._repeatDelay;this._cycle=this._totalTime/b>>0;0!==this._cycle&&this._cycle===this._totalTime/b&&c<=e&&this._cycle--;this._time=this._totalTime-this._cycle*b;this._yoyo&&0!==(1&this._cycle)&&(this._time=l-this._time);if(this._time>l){this._time=l;e=l+1e-4}else this._time<0?this._time=e=0:e=this._time}}if(this._hasPause&&!this._forcingPlayhead&&!r){e=this._time;if(e>=i||this._repeat&&d!==this._cycle){m=this._first;while(m&&m._startTime<=e&&!_){m._duration||"isPause"!==m.data||m.ratio||0===m._startTime&&0===this._rawPrevTime||(_=m);m=m._next}}else{m=this._last;while(m&&m._startTime>=e&&!_){m._duration||"isPause"===m.data&&m._rawPrevTime>0&&(_=m);m=m._prev}}if(_&&_._startTime<l){this._time=e=_._startTime;this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)}}}if(this._cycle!==d&&!this._locked){var S=this._yoyo&&0!==(1&d),T=S===(this._yoyo&&0!==(1&this._cycle)),M=this._totalTime,E=this._cycle,A=this._rawPrevTime,R=this._time;this._totalTime=d*l;this._cycle<d?S=!S:this._totalTime+=l;this._time=i;this._rawPrevTime=0===l?f-1e-4:f;this._cycle=d;this._locked=true;i=S?0:l;this.render(i,r,0===l);if(!r&&!this._gc&&this.vars.onRepeat){this._cycle=E;this._locked=false;this._callback("onRepeat")}if(i!==this._time)return;if(T){this._cycle=d;this._locked=true;i=S?l+1e-4:-1e-4;this.render(i,true,false)}this._locked=false;if(this._paused&&!p)return;this._time=R;this._totalTime=M;this._cycle=E;this._rawPrevTime=A}if(!(this._time!==i&&this._first||n||x||_)){c!==this._totalTime&&this._onUpdate&&(r||this._callback("onUpdate"));return}this._initted||(this._initted=true);this._active||!this._paused&&this._totalTime!==c&&e>0&&(this._active=true);0===c&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||r||this._callback("onStart"));w=this._time;if(w>=i){m=this._first;while(m){g=m._next;if(w!==this._time||this._paused&&!p)break;if(m._active||m._startTime<=this._time&&!m._paused&&!m._gc){_===m&&this.pause();m._reversed?m.render((m._dirty?m.totalDuration():m._totalDuration)-(e-m._startTime)*m._timeScale,r,n):m.render((e-m._startTime)*m._timeScale,r,n)}m=g}}else{m=this._last;while(m){g=m._prev;if(w!==this._time||this._paused&&!p)break;if(m._active||m._startTime<=i&&!m._paused&&!m._gc){if(_===m){_=m._prev;while(_&&_.endTime()>this._time){_.render(_._reversed?_.totalDuration()-(e-_._startTime)*_._timeScale:(e-_._startTime)*_._timeScale,r,n);_=_._prev}_=null;this.pause()}m._reversed?m.render((m._dirty?m.totalDuration():m._totalDuration)-(e-m._startTime)*m._timeScale,r,n):m.render((e-m._startTime)*m._timeScale,r,n)}m=g}}if(this._onUpdate&&!r){a.length&&o();this._callback("onUpdate")}if(y&&!this._locked&&!this._gc&&(u===this._startTime||h!==this._timeScale)&&(0===this._time||s>=this.totalDuration())){if(v){a.length&&o();this._timeline.autoRemoveChildren&&this._enabled(false,false);this._active=false}!r&&this.vars[y]&&this._callback(y)}};c.getActive=function(e,t,r){null==e&&(e=true);null==t&&(t=true);null==r&&(r=false);var n=[],i=this.getChildren(e,t,r),a=0,o=i.length,s,l;for(s=0;s<o;s++){l=i[s];l.isActive()&&(n[a++]=l)}return n};c.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t=this.getLabelsArray(),r=t.length,n;for(n=0;n<r;n++)if(t[n].time>e)return t[n].name;return null};c.getLabelBefore=function(e){null==e&&(e=this._time);var t=this.getLabelsArray(),r=t.length;while(--r>-1)if(t[r].time<e)return t[r].name;return null};c.getLabelsArray=function(){var e=[],t=0,r;for(r in this._labels)e[t++]={time:this._labels[r],name:r};e.sort(function(e,t){return e.time-t.time});return e};c.invalidate=function(){this._locked=false;return i.prototype.invalidate.call(this)};c.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0};c.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0};c.totalDuration=function(e){if(!arguments.length){if(this._dirty){i.prototype.totalDuration.call(this);this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat}return this._totalDuration}return-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this};c.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();e>this._duration&&(e=this._duration);this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay));return this.totalTime(e,t)};c.repeat=function(e){if(!arguments.length)return this._repeat;this._repeat=e;return this._uncache(true)};c.repeatDelay=function(e){if(!arguments.length)return this._repeatDelay;this._repeatDelay=e;return this._uncache(true)};c.yoyo=function(e){if(!arguments.length)return this._yoyo;this._yoyo=e;return this};c.currentLabel=function(e){if(!arguments.length)return this.getLabelBefore(this._time+1e-8);return this.seek(e,true)};return e},true);var a=n["m"].TimelineMax;n["k"]._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(){var e=function(e){var t=[],r=e.length,n;for(n=0;n!==r;t.push(e[n++]));return t},t=function(e,t,r){var n=e.cycle,i,a;for(i in n){a=n[i];e[i]="function"===typeof a?a(r,t[r]):a[r%a.length]}delete e.cycle},r=function(e,t,i){n["l"].call(this,e,t,i);this._cycle=0;this._yoyo=true===this.vars.yoyo||!!this.vars.yoyoEase;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._repeat&&this._uncache(true);this.render=r.prototype.render},i=1e-10,a=n["l"]._internals,o=a.isSelector,s=a.isArray,l=r.prototype=n["l"].to({},.1,{}),c=[];r.version="2.0.2";l.constructor=r;l.kill()._gc=false;r.killTweensOf=r.killDelayedCallsTo=n["l"].killTweensOf;r.getTweensOf=n["l"].getTweensOf;r.lagSmoothing=n["l"].lagSmoothing;r.ticker=n["l"].ticker;r.render=n["l"].render;l.invalidate=function(){this._yoyo=true===this.vars.yoyo||!!this.vars.yoyoEase;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._yoyoEase=null;this._uncache(true);return n["l"].prototype.invalidate.call(this)};l.updateTo=function(e,t){var r=this.ratio,i=this.vars.immediateRender||e.immediateRender,a;if(t&&this._startTime<this._timeline._time){this._startTime=this._timeline._time;this._uncache(false);this._gc?this._enabled(true,false):this._timeline.insert(this,this._startTime-this._delay)}for(a in e)this.vars[a]=e[a];if(this._initted||i)if(t){this._initted=false;i&&this.render(0,true,true)}else{this._gc&&this._enabled(true,false);this._notifyPluginsOfEnabled&&this._firstPT&&n["l"]._onPluginEvent("_onDisable",this);if(this._time/this._duration>.998){var o=this._totalTime;this.render(0,true,false);this._initted=false;this.render(o,true,false)}else{this._initted=false;this._init();if(this._time>0||i){var s=1/(1-r),l=this._firstPT,c;while(l){c=l.s+l.c;l.c*=s;l.s=c-l.c;l=l._next}}}}return this};l.render=function(e,t,r){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var o=this._dirty?this.totalDuration():this._totalDuration,s=this._time,l=this._totalTime,c=this._cycle,u=this._duration,h=this._rawPrevTime,f,p,d,m,v,g,y,x,b;if(e>=o-1e-7&&e>=0){this._totalTime=o;this._cycle=this._repeat;if(this._yoyo&&0!==(1&this._cycle)){this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0}else{this._time=u;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1}if(!this._reversed){f=true;p="onComplete";r=r||this._timeline.autoRemoveChildren}if(0===u&&(this._initted||!this.vars.lazy||r)){this._startTime===this._timeline._duration&&(e=0);if((h<0||e<=0&&e>=-1e-7||h===i&&"isPause"!==this.data)&&h!==e){r=true;h>i&&(p="onReverseComplete")}this._rawPrevTime=x=!t||e||h===e?e:i}}else if(e<1e-7){this._totalTime=this._time=this._cycle=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(0!==l||0===u&&h>0){p="onReverseComplete";f=this._reversed}if(e<0){this._active=false;if(0===u&&(this._initted||!this.vars.lazy||r)){h>=0&&(r=true);this._rawPrevTime=x=!t||e||h===e?e:i}}this._initted||(r=true)}else{this._totalTime=this._time=e;if(0!==this._repeat){m=u+this._repeatDelay;this._cycle=this._totalTime/m>>0;0!==this._cycle&&this._cycle===this._totalTime/m&&l<=e&&this._cycle--;this._time=this._totalTime-this._cycle*m;if(this._yoyo&&0!==(1&this._cycle)){this._time=u-this._time;b=this._yoyoEase||this.vars.yoyoEase;if(b){if(!this._yoyoEase)if(true!==b||this._initted)this._yoyoEase=b=true===b?this._ease:b instanceof n["b"]?b:n["b"].map[b];else{b=this.vars.ease;this._yoyoEase=b=b?b instanceof n["b"]?b:"function"===typeof b?new n["b"](b,this.vars.easeParams):n["b"].map[b]||n["l"].defaultEase:n["l"].defaultEase}this.ratio=b?1-b.getRatio((u-this._time)/u):0}}this._time>u?this._time=u:this._time<0&&(this._time=0)}if(this._easeType&&!b){v=this._time/u;g=this._easeType;y=this._easePower;(1===g||3===g&&v>=.5)&&(v=1-v);3===g&&(v*=2);1===y?v*=v:2===y?v*=v*v:3===y?v*=v*v*v:4===y&&(v*=v*v*v*v);1===g?this.ratio=1-v:2===g?this.ratio=v:this._time/u<.5?this.ratio=v/2:this.ratio=1-v/2}else b||(this.ratio=this._ease.getRatio(this._time/u))}if(s===this._time&&!r&&c===this._cycle){l!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"));return}if(!this._initted){this._init();if(!this._initted||this._gc)return;if(!r&&this._firstPT&&(false!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)){this._time=s;this._totalTime=l;this._rawPrevTime=h;this._cycle=c;a.lazyTweens.push(this);this._lazy=[e,t];return}!this._time||f||b?f&&this._ease._calcEnd&&!b&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/u)}false!==this._lazy&&(this._lazy=false);this._active||!this._paused&&this._time!==s&&e>=0&&(this._active=true);if(0===l){2===this._initted&&e>0&&this._init();this._startAt&&(e>=0?this._startAt.render(e,true,r):p||(p="_dummyGS"));this.vars.onStart&&(0===this._totalTime&&0!==u||t||this._callback("onStart"))}d=this._firstPT;while(d){d.f?d.t[d.p](d.c*this.ratio+d.s):d.t[d.p]=d.c*this.ratio+d.s;d=d._next}if(this._onUpdate){e<0&&this._startAt&&this._startTime&&this._startAt.render(e,true,r);t||(this._totalTime!==l||p)&&this._callback("onUpdate")}this._cycle!==c&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat"));if(p&&(!this._gc||r)){e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,true,r);if(f){this._timeline.autoRemoveChildren&&this._enabled(false,false);this._active=false}!t&&this.vars[p]&&this._callback(p);0===u&&this._rawPrevTime===i&&x!==i&&(this._rawPrevTime=0)}};r.to=function(e,t,n){return new r(e,t,n)};r.from=function(e,t,n){n.runBackwards=true;n.immediateRender=false!=n.immediateRender;return new r(e,t,n)};r.fromTo=function(e,t,n,i){i.startAt=n;i.immediateRender=false!=i.immediateRender&&false!=n.immediateRender;return new r(e,t,i)};r.staggerTo=r.allTo=function(i,a,l,u,h,f,p){u=u||0;var d=0,m=[],v=function(){l.onComplete&&l.onComplete.apply(l.onCompleteScope||this,arguments);h.apply(p||l.callbackScope||this,f||c)},g=l.cycle,y=l.startAt&&l.startAt.cycle,x,b,_,w;if(!s(i)){"string"===typeof i&&(i=n["l"].selector(i)||i);o(i)&&(i=e(i))}i=i||[];if(u<0){i=e(i);i.reverse();u*=-1}x=i.length-1;for(_=0;_<=x;_++){b={};for(w in l)b[w]=l[w];if(g){t(b,i,_);if(null!=b.duration){a=b.duration;delete b.duration}}if(y){y=b.startAt={};for(w in l.startAt)y[w]=l.startAt[w];t(b.startAt,i,_)}b.delay=d+(b.delay||0);_===x&&h&&(b.onComplete=v);m[_]=new r(i[_],a,b);d+=u}return m};r.staggerFrom=r.allFrom=function(e,t,n,i,a,o,s){n.runBackwards=true;n.immediateRender=false!=n.immediateRender;return r.staggerTo(e,t,n,i,a,o,s)};r.staggerFromTo=r.allFromTo=function(e,t,n,i,a,o,s,l){i.startAt=n;i.immediateRender=false!=i.immediateRender&&false!=n.immediateRender;return r.staggerTo(e,t,i,a,o,s,l)};r.delayedCall=function(e,t,n,i,a){return new r(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:false,useFrames:a,overwrite:0})};r.set=function(e,t){return new r(e,0,t)};r.isTweening=function(e){return n["l"].getTweensOf(e,true).length>0};var u=function(e,t){var r=[],i=0,a=e._first;while(a){if(a instanceof n["l"])r[i++]=a;else{t&&(r[i++]=a);r=r.concat(u(a,t));i=r.length}a=a._next}return r},h=r.getAllTweens=function(e){return u(n["a"]._rootTimeline,e).concat(u(n["a"]._rootFramesTimeline,e))};r.killAll=function(e,t,r,i){null==t&&(t=true);null==r&&(r=true);var a=h(false!=i),o=a.length,s=t&&r&&i,l,c,u;for(u=0;u<o;u++){c=a[u];(s||c instanceof n["i"]||(l=c.target===c.vars.onComplete)&&r||t&&!l)&&(e?c.totalTime(c._reversed?0:c.totalDuration()):c._enabled(false,false))}};r.killChildTweensOf=function(t,i){if(null==t)return;var l=a.tweenLookup,c,u,h,f,p;"string"===typeof t&&(t=n["l"].selector(t)||t);o(t)&&(t=e(t));if(s(t)){f=t.length;while(--f>-1)r.killChildTweensOf(t[f],i);return}c=[];for(h in l){u=l[h].target.parentNode;while(u){u===t&&(c=c.concat(l[h].tweens));u=u.parentNode}}p=c.length;for(f=0;f<p;f++){i&&c[f].totalTime(c[f].totalDuration());c[f]._enabled(false,false)}};var f=function(e,t,r,i){t=false!==t;r=false!==r;i=false!==i;var a=h(i),o=t&&r&&i,s=a.length,l,c;while(--s>-1){c=a[s];(o||c instanceof n["i"]||(l=c.target===c.vars.onComplete)&&r||t&&!l)&&c.paused(e)}};r.pauseAll=function(e,t,r){f(true,e,t,r)};r.resumeAll=function(e,t,r){f(false,e,t,r)};r.globalTimeScale=function(e){var t=n["a"]._rootTimeline,r=n["l"].ticker.time;if(!arguments.length)return t._timeScale;e=e||i;t._startTime=r-(r-t._startTime)*t._timeScale/e;t=n["a"]._rootFramesTimeline;r=n["l"].ticker.frame;t._startTime=r-(r-t._startTime)*t._timeScale/e;t._timeScale=n["a"]._rootTimeline._timeScale=e;return e};l.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()};l.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()};l.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();e>this._duration&&(e=this._duration);this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay));return this.totalTime(e,t)};l.duration=function(e){if(!arguments.length)return this._duration;return n["a"].prototype.duration.call(this,e)};l.totalDuration=function(e){if(!arguments.length){if(this._dirty){this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat;this._dirty=false}return this._totalDuration}return-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1))};l.repeat=function(e){if(!arguments.length)return this._repeat;this._repeat=e;return this._uncache(true)};l.repeatDelay=function(e){if(!arguments.length)return this._repeatDelay;this._repeatDelay=e;return this._uncache(true)};l.yoyo=function(e){if(!arguments.length)return this._yoyo;this._yoyo=e;return this};return r},true);var o=n["m"].TweenMax;var s=o;n["k"]._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(){var e=function(){n["j"].call(this,"css");this._overwriteProps.length=0;this.setRatio=e.prototype.setRatio},t=n["k"]._gsDefine.globals,r,i,a,o,s={},l=e.prototype=new n["j"]("css");l.constructor=e;e.version="2.0.2";e.API=2;e.defaultTransformPerspective=0;e.defaultSkewType="compensated";e.defaultSmoothOrigin=true;l="px";e.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var c=/(?:\-|\.|\b)(\d|\.|e\-)+/g,u=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,h=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,f=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,p=/(?:\d|\-|\+|=|#|\.)*/g,d=/opacity *= *([^)]*)/i,m=/opacity:([^;]*)/i,v=/alpha\(opacity *=.+?\)/i,g=/^(rgb|hsl)/,y=/([A-Z])/g,x=/-([a-z])/gi,b=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,_=function(e,t){return t.toUpperCase()},w=/(?:Left|Right|Width)/i,S=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,T=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,M=/,(?=[^\)]*(?:\(|$))/gi,E=/[\s,\(]/i,A=Math.PI/180,R=180/Math.PI,P={},C={style:{}},L=n["k"].document||{createElement:function(){return C}},O=function(e,t){return L.createElementNS?L.createElementNS(t||"http://www.w3.org/1999/xhtml",e):L.createElement(e)},I=O("div"),B=O("img"),U=e._internals={_specialProps:s},D=(n["k"].navigator||{}).userAgent||"",k,N,F,G,z,H,V=function(){var e=D.indexOf("Android"),t=O("a");F=-1!==D.indexOf("Safari")&&-1===D.indexOf("Chrome")&&(-1===e||parseFloat(D.substr(e+8,2))>3);z=F&&parseFloat(D.substr(D.indexOf("Version/")+8,2))<6;G=-1!==D.indexOf("Firefox");(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(D)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(D))&&(H=parseFloat(RegExp.$1));if(!t)return false;t.style.cssText="top:1px;opacity:.55;";return/^0.55/.test(t.style.opacity)}(),j=function(e){return d.test("string"===typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},W=function(e){n["k"].console&&console.log(e)},X,q,Y="",Z="",J=function(e,t){t=t||I;var r=t.style,n,i;if(void 0!==r[e])return e;e=e.charAt(0).toUpperCase()+e.substr(1);n=["O","Moz","ms","Ms","Webkit"];i=5;while(--i>-1&&void 0===r[n[i]+e]);if(i>=0){Z=3===i?"ms":n[i];Y="-"+Z.toLowerCase()+"-";return Z+e}return null},Q=("undefined"!==typeof window?window:L.defaultView||{getComputedStyle:function(){}}).getComputedStyle,K=e.getStyle=function(e,t,r,n,i){var a;if(!V&&"opacity"===t)return j(e);!n&&e.style[t]?a=e.style[t]:(r=r||Q(e))?a=r[t]||r.getPropertyValue(t)||r.getPropertyValue(t.replace(y,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]);return null==i||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:i},$=U.convertToPixels=function(t,r,i,a,o){if("px"===a||!a&&"lineHeight"!==r)return i;if("auto"===a||!i)return 0;var s=w.test(r),l=t,c=I.style,u=i<0,h=1===i,f,p,d;u&&(i=-i);h&&(i*=100);if("lineHeight"!==r||a)if("%"===a&&-1!==r.indexOf("border"))f=i/100*(s?t.clientWidth:t.clientHeight);else{c.cssText="border:0 solid red;position:"+K(t,"position")+";line-height:0;";if("%"!==a&&l.appendChild&&"v"!==a.charAt(0)&&"rem"!==a)c[s?"borderLeftWidth":"borderTopWidth"]=i+a;else{l=t.parentNode||L.body;-1!==K(l,"display").indexOf("flex")&&(c.position="absolute");p=l._gsCache;d=n["l"].ticker.frame;if(p&&s&&p.time===d)return p.width*i/100;c[s?"width":"height"]=i+a}l.appendChild(I);f=parseFloat(I[s?"offsetWidth":"offsetHeight"]);l.removeChild(I);if(s&&"%"===a&&false!==e.cacheWidths){p=l._gsCache=l._gsCache||{};p.time=d;p.width=f/i*100}0!==f||o||(f=$(t,r,i,a,true))}else{p=Q(t).lineHeight;t.style.lineHeight=i;f=parseFloat(Q(t).lineHeight);t.style.lineHeight=p}h&&(f/=100);return u?-f:f},ee=U.calculateOffset=function(e,t,r){if("absolute"!==K(e,"position",r))return 0;var n="left"===t?"Left":"Top",i=K(e,"margin"+n,r);return e["offset"+n]-($(e,t,parseFloat(i),i.replace(p,""))||0)},te=function(e,t){var r={},n,i,a;if(t=t||Q(e,null))if(n=t.length)while(--n>-1){a=t[n];-1!==a.indexOf("-transform")&&Pe!==a||(r[a.replace(x,_)]=t.getPropertyValue(a))}else for(n in t)-1!==n.indexOf("Transform")&&Re!==n||(r[n]=t[n]);else if(t=e.currentStyle||e.style)for(n in t)"string"===typeof n&&void 0===r[n]&&(r[n.replace(x,_)]=t[n]);V||(r.opacity=j(e));i=je(e,t,false);r.rotation=i.rotation;r.skewX=i.skewX;r.scaleX=i.scaleX;r.scaleY=i.scaleY;r.x=i.x;r.y=i.y;if(Le){r.z=i.z;r.rotationX=i.rotationX;r.rotationY=i.rotationY;r.scaleZ=i.scaleZ}r.filters&&delete r.filters;return r},re=function(e,t,r,n,i){var a={},o=e.style,s,l,c;for(l in r)if("cssText"!==l&&"length"!==l&&isNaN(l)&&(t[l]!==(s=r[l])||i&&i[l])&&-1===l.indexOf("Origin")&&("number"===typeof s||"string"===typeof s)){a[l]="auto"!==s||"left"!==l&&"top"!==l?""!==s&&"auto"!==s&&"none"!==s||"string"!==typeof t[l]||""===t[l].replace(f,"")?s:0:ee(e,l);void 0!==o[l]&&(c=new ye(o,l,o[l],c))}if(n)for(l in n)"className"!==l&&(a[l]=n[l]);return{difs:a,firstMPT:c}},ne={width:["Left","Right"],height:["Top","Bottom"]},ie=["marginLeft","marginRight","marginTop","marginBottom"],ae=function(e,t,r){if("svg"===(e.nodeName+"").toLowerCase())return(r||Q(e))[t]||0;if(e.getCTM&&ze(e))return e.getBBox()[t]||0;var n=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),i=ne[t],a=i.length;r=r||Q(e,null);while(--a>-1){n-=parseFloat(K(e,"padding"+i[a],r,true))||0;n-=parseFloat(K(e,"border"+i[a]+"Width",r,true))||0}return n},oe=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";null!=e&&""!==e||(e="0 0");var r=e.split(" "),n=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":r[0],i=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":r[1],a;if(r.length>3&&!t){r=e.split(", ").join(",").split(",");e=[];for(a=0;a<r.length;a++)e.push(oe(r[a]));return e.join(",")}null==i?i="center"===n?"50%":"0":"center"===i&&(i="50%");("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%");e=n+" "+i+(r.length>2?" "+r[2]:"");if(t){t.oxp=-1!==n.indexOf("%");t.oyp=-1!==i.indexOf("%");t.oxr="="===n.charAt(1);t.oyr="="===i.charAt(1);t.ox=parseFloat(n.replace(f,""));t.oy=parseFloat(i.replace(f,""));t.v=e}return t||e},se=function(e,t){"function"===typeof e&&(e=e(q,X));return"string"===typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},le=function(e,t){"function"===typeof e&&(e=e(q,X));var r="string"===typeof e&&"="===e.charAt(1);"string"===typeof e&&"v"===e.charAt(e.length-2)&&(e=(r?e.substr(0,2):0)+window["inner"+("vh"===e.substr(-2)?"Height":"Width")]*(parseFloat(r?e.substr(2):e)/100));return null==e?t:r?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},ce=function(e,t,r,n){var i=1e-6,a,o,s,l,c;"function"===typeof e&&(e=e(q,X));if(null==e)l=t;else if("number"===typeof e)l=e;else{a=360;o=e.split("_");c="="===e.charAt(1);s=(c?parseInt(e.charAt(0)+"1",10)*parseFloat(o[0].substr(2)):parseFloat(o[0]))*(-1===e.indexOf("rad")?1:R)-(c?0:t);if(o.length){n&&(n[r]=t+s);if(-1!==e.indexOf("short")){s%=a;s!==s%(a/2)&&(s=s<0?s+a:s-a)}-1!==e.indexOf("_cw")&&s<0?s=(s+9999999999*a)%a-(s/a|0)*a:-1!==e.indexOf("ccw")&&s>0&&(s=(s-9999999999*a)%a-(s/a|0)*a)}l=t+s}l<i&&l>-i&&(l=0);return l},ue={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},he=function(e,t,r){e=e<0?e+1:e>1?e-1:e;return 255*(6*e<1?t+(r-t)*e*6:e<.5?r:3*e<2?t+(r-t)*(2/3-e)*6:t)+.5|0},fe=e.parseColor=function(e,t){var r,n,i,a,o,s,l,h,f,p,d;if(e)if("number"===typeof e)r=[e>>16,e>>8&255,255&e];else{","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));if(ue[e])r=ue[e];else if("#"===e.charAt(0)){if(4===e.length){n=e.charAt(1);i=e.charAt(2);a=e.charAt(3);e="#"+n+n+i+i+a+a}e=parseInt(e.substr(1),16);r=[e>>16,e>>8&255,255&e]}else if("hsl"===e.substr(0,3)){r=d=e.match(c);if(t){if(-1!==e.indexOf("="))return e.match(u)}else{o=Number(r[0])%360/360;s=Number(r[1])/100;l=Number(r[2])/100;i=l<=.5?l*(s+1):l+s-l*s;n=2*l-i;r.length>3&&(r[3]=Number(r[3]));r[0]=he(o+1/3,n,i);r[1]=he(o,n,i);r[2]=he(o-1/3,n,i)}}else r=e.match(c)||ue.transparent;r[0]=Number(r[0]);r[1]=Number(r[1]);r[2]=Number(r[2]);r.length>3&&(r[3]=Number(r[3]))}else r=ue.black;if(t&&!d){n=r[0]/255;i=r[1]/255;a=r[2]/255;h=Math.max(n,i,a);f=Math.min(n,i,a);l=(h+f)/2;if(h===f)o=s=0;else{p=h-f;s=l>.5?p/(2-h-f):p/(h+f);o=h===n?(i-a)/p+(i<a?6:0):h===i?(a-n)/p+2:(n-i)/p+4;o*=60}r[0]=o+.5|0;r[1]=100*s+.5|0;r[2]=100*l+.5|0}return r},pe=function(e,t){var r=e.match(de)||[],n=0,i="",a,o,s;if(!r.length)return e;for(a=0;a<r.length;a++){o=r[a];s=e.substr(n,e.indexOf(o,n)-n);n+=s.length+o.length;o=fe(o,t);3===o.length&&o.push(1);i+=s+(t?"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+o[3]:"rgba("+o.join(","))+")"}return i+e.substr(n)},de="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(l in ue)de+="|"+l+"\\b";de=new RegExp(de+")","gi");e.colorStringFilter=function(e){var t=e[0]+" "+e[1],r;if(de.test(t)){r=-1!==t.indexOf("hsl(")||-1!==t.indexOf("hsla(");e[0]=pe(e[0],r);e[1]=pe(e[1],r)}de.lastIndex=0};n["l"].defaultStringFilter||(n["l"].defaultStringFilter=e.colorStringFilter);var me=function(e,t,r,n){if(null==e)return function(e){return e};var i=t?(e.match(de)||[""])[0]:"",a=e.split(i).join("").match(h)||[],o=e.substr(0,e.indexOf(a[0])),s=")"===e.charAt(e.length-1)?")":"",l=-1!==e.indexOf(" ")?" ":",",u=a.length,f=u>0?a[0].replace(c,""):"",p;if(!u)return function(e){return e};if(t){p=function(e){var t,c,d,m;if("number"===typeof e)e+=f;else if(n&&M.test(e)){m=e.replace(M,"|").split("|");for(d=0;d<m.length;d++)m[d]=p(m[d]);return m.join(",")}t=(e.match(de)||[i])[0];c=e.split(t).join("").match(h)||[];d=c.length;if(u>d--)while(++d<u)c[d]=r?c[(d-1)/2|0]:a[d];return o+c.join(l)+l+t+s+(-1!==e.indexOf("inset")?" inset":"")};return p}p=function(e){var t,i,c;if("number"===typeof e)e+=f;else if(n&&M.test(e)){i=e.replace(M,"|").split("|");for(c=0;c<i.length;c++)i[c]=p(i[c]);return i.join(",")}t=e.match(h)||[];c=t.length;if(u>c--)while(++c<u)t[c]=r?t[(c-1)/2|0]:a[c];return o+t.join(l)+s};return p},ve=function(e){e=e.split(",");return function(t,r,n,i,a,o,s){var l=(r+"").split(" "),c;s={};for(c=0;c<4;c++)s[e[c]]=l[c]=l[c]||l[(c-1)/2>>0];return i.parse(t,s,a,o)}},ge=U._setPluginRatio=function(e){this.plugin.setRatio(e);var t=this.data,r=t.proxy,n=t.firstMPT,i=1e-6,a,o,s,l,c;while(n){a=r[n.v];n.r?a=n.r(a):a<i&&a>-i&&(a=0);n.t[n.p]=a;n=n._next}t.autoRotate&&(t.autoRotate.rotation=t.mod?t.mod.call(this._tween,r.rotation,this.t,this._tween):r.rotation);if(1===e||0===e){n=t.firstMPT;c=1===e?"e":"b";while(n){o=n.t;if(o.type){if(1===o.type){l=o.xs0+o.s+o.xs1;for(s=1;s<o.l;s++)l+=o["xn"+s]+o["xs"+(s+1)];o[c]=l}}else o[c]=o.s+o.xs0;n=n._next}}},ye=function(e,t,r,n,i){this.t=e;this.p=t;this.v=r;this.r=i;if(n){n._prev=this;this._next=n}},xe=U._parseToProxy=function(e,t,r,n,i,a){var o=n,s={},l={},c=r._transform,u=P,h,f,p,d,m;r._transform=null;P=t;n=m=r.parse(e,t,n,i);P=u;if(a){r._transform=c;if(o){o._prev=null;o._prev&&(o._prev._next=null)}}while(n&&n!==o){if(n.type<=1){f=n.p;l[f]=n.s+n.c;s[f]=n.s;if(!a){d=new ye(n,"s",f,d,n.r);n.c=0}if(1===n.type){h=n.l;while(--h>0){p="xn"+h;f=n.p+"_"+p;l[f]=n.data[p];s[f]=n[p];a||(d=new ye(n,p,f,d,n.rxp[p]))}}}n=n._next}return{proxy:s,end:l,firstMPT:d,pt:m}},be=U.CSSPropTween=function(e,t,n,i,a,s,l,c,u,h,f){this.t=e;this.p=t;this.s=n;this.c=i;this.n=l||t;e instanceof be||o.push(this.n);this.r=c?"function"===typeof c?c:Math.round:c;this.type=s||0;if(u){this.pr=u;r=true}this.b=void 0===h?n:h;this.e=void 0===f?n+i:f;if(a){this._next=a;a._prev=this}},_e=function(e,t,r,n,i,a){var o=new be(e,t,r,n-r,i,-1,a);o.b=r;o.e=o.xs0=n;return o},we=e.parseComplex=function(t,r,n,i,a,o,s,l,h,f){n=n||o||"";"function"===typeof i&&(i=i(q,X));s=new be(t,r,0,0,s,f?2:1,null,false,l,n,i);i+="";if(a&&de.test(i+n)){i=[n,i];e.colorStringFilter(i);n=i[0];i=i[1]}var p=n.split(", ").join(",").split(" "),d=i.split(", ").join(",").split(" "),m=p.length,v=false!==k,g,y,x,b,_,w,S,T,E,A,R,P,C;if(-1!==i.indexOf(",")||-1!==n.indexOf(",")){if(-1!==(i+n).indexOf("rgb")||-1!==(i+n).indexOf("hsl")){p=p.join(" ").replace(M,", ").split(" ");d=d.join(" ").replace(M,", ").split(" ")}else{p=p.join(" ").split(",").join(", ").split(" ");d=d.join(" ").split(",").join(", ").split(" ")}m=p.length}if(m!==d.length){p=(o||"").split(" ");m=p.length}s.plugin=h;s.setRatio=f;de.lastIndex=0;for(g=0;g<m;g++){b=p[g];_=d[g]+"";T=parseFloat(b);if(T||0===T)s.appendXtra("",T,se(_,T),_.replace(u,""),!(!v||-1===_.indexOf("px"))&&Math.round,true);else if(a&&de.test(b)){P=_.indexOf(")")+1;P=")"+(P?_.substr(P):"");C=-1!==_.indexOf("hsl")&&V;A=_;b=fe(b,C);_=fe(_,C);E=b.length+_.length>6;if(E&&!V&&0===_[3]){s["xs"+s.l]+=s.l?" transparent":"transparent";s.e=s.e.split(d[g]).join("transparent")}else{V||(E=false);C?s.appendXtra(A.substr(0,A.indexOf("hsl"))+(E?"hsla(":"hsl("),b[0],se(_[0],b[0]),",",false,true).appendXtra("",b[1],se(_[1],b[1]),"%,",false).appendXtra("",b[2],se(_[2],b[2]),E?"%,":"%"+P,false):s.appendXtra(A.substr(0,A.indexOf("rgb"))+(E?"rgba(":"rgb("),b[0],_[0]-b[0],",",Math.round,true).appendXtra("",b[1],_[1]-b[1],",",Math.round).appendXtra("",b[2],_[2]-b[2],E?",":P,Math.round);if(E){b=b.length<4?1:b[3];s.appendXtra("",b,(_.length<4?1:_[3])-b,P,false)}}de.lastIndex=0}else{w=b.match(c);if(w){S=_.match(u);if(!S||S.length!==w.length)return s;x=0;for(y=0;y<w.length;y++){R=w[y];A=b.indexOf(R,x);s.appendXtra(b.substr(x,A-x),Number(R),se(S[y],R),"",!(!v||"px"!==b.substr(A+R.length,2))&&Math.round,0===y);x=A+R.length}s["xs"+s.l]+=b.substr(x)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+_:_}}if(-1!==i.indexOf("=")&&s.data){P=s.xs0+s.data.s;for(g=1;g<s.l;g++)P+=s["xs"+g]+s.data["xn"+g];s.e=P+s["xs"+g]}if(!s.l){s.type=-1;s.xs0=s.e}return s.xfirst||s},Se=9;l=be.prototype;l.l=l.pr=0;while(--Se>0){l["xn"+Se]=0;l["xs"+Se]=""}l.xs0="";l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null;l.appendXtra=function(e,t,r,n,i,a){var o=this,s=o.l;o["xs"+s]+=a&&(s||o["xs"+s])?" "+e:e||"";if(!r&&0!==s&&!o.plugin){o["xs"+s]+=t+(n||"");return o}o.l++;o.type=o.setRatio?2:1;o["xs"+o.l]=n||"";if(s>0){o.data["xn"+s]=t+r;o.rxp["xn"+s]=i;o["xn"+s]=t;if(!o.plugin){o.xfirst=new be(o,"xn"+s,t,r,o.xfirst||o,0,o.n,i,o.pr);o.xfirst.xs0=0}return o}o.data={s:t+r};o.rxp={};o.s=t;o.c=r;o.r=i;return o};var Te=function(e,t){t=t||{};this.p=t.prefix&&J(e)||e;s[e]=s[this.p]=this;this.format=t.formatter||me(t.defaultValue,t.color,t.collapsible,t.multi);t.parser&&(this.parse=t.parser);this.clrs=t.color;this.multi=t.multi;this.keyword=t.keyword;this.dflt=t.defaultValue;this.pr=t.priority||0},Me=U._registerComplexSpecialProp=function(e,t,r){"object"!==typeof t&&(t={parser:r});var n=e.split(","),i=t.defaultValue,a,o;r=r||[i];for(a=0;a<n.length;a++){t.prefix=0===a&&t.prefix;t.defaultValue=r[a]||i;o=new Te(n[a],t)}},Ee=U._registerPluginProp=function(e){if(!s[e]){var r=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Me(e,{parser:function(e,n,i,a,o,l,c){var u=t.com.greensock.plugins[r];if(!u){W("Error: "+r+" js file not loaded.");return o}u._cssRegister();return s[i].parse(e,n,i,a,o,l,c)}})}};l=Te.prototype;l.parseComplex=function(e,t,r,n,i,a){var o=this.keyword,s,l,c,u,h,f;if(this.multi)if(M.test(r)||M.test(t)){l=t.replace(M,"|").split("|");c=r.replace(M,"|").split("|")}else if(o){l=[t];c=[r]}if(c){u=c.length>l.length?c.length:l.length;for(s=0;s<u;s++){t=l[s]=l[s]||this.dflt;r=c[s]=c[s]||this.dflt;if(o){h=t.indexOf(o);f=r.indexOf(o);h!==f&&(-1===f?l[s]=l[s].split(o).join(""):-1===h&&(l[s]+=" "+o))}}t=l.join(", ");r=c.join(", ")}return we(e,this.p,t,r,this.clrs,this.dflt,n,this.pr,i,a)};l.parse=function(e,t,r,n,i,o,s){return this.parseComplex(e.style,this.format(K(e,this.p,a,false,this.dflt)),this.format(t),i,o)};e.registerSpecialProp=function(e,t,r){Me(e,{parser:function(e,n,i,a,o,s,l){var c=new be(e,i,0,0,o,2,i,false,r);c.plugin=s;c.setRatio=t(e,n,a._tween,i);return c},priority:r})};e.useSVGTransformAttr=true;var Ae="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Re=J("transform"),Pe=Y+"transform",Ce=J("transformOrigin"),Le=null!==J("perspective"),Oe=U.Transform=function(){this.perspective=parseFloat(e.defaultTransformPerspective)||0;this.force3D=!(false===e.defaultForce3D||!Le)&&(e.defaultForce3D||"auto")},Ie=n["k"].SVGElement,Be,Ue=function(e,t,r){var n=L.createElementNS("http://www.w3.org/2000/svg",e),i=/([a-z])([A-Z])/g,a;for(a in r)n.setAttributeNS(null,a.replace(i,"$1-$2").toLowerCase(),r[a]);t.appendChild(n);return n},De=L.documentElement||{},ke=function(){var e=H||/Android/i.test(D)&&!n["k"].chrome,t,r,i;if(L.createElementNS&&!e){t=Ue("svg",De);r=Ue("rect",t,{width:100,height:50,x:100});i=r.getBoundingClientRect().width;r.style[Ce]="50% 50%";r.style[Re]="scaleX(0.5)";e=i===r.getBoundingClientRect().width&&!(G&&Le);De.removeChild(t)}return e}(),Ne=function(t,r,n,i,a,o){var s=t._gsTransform,l=Ve(t,true),c,u,h,f,p,d,m,v,g,y,x,b,_,w;if(s){_=s.xOrigin;w=s.yOrigin}if(!i||(c=i.split(" ")).length<2){m=t.getBBox();0===m.x&&0===m.y&&m.width+m.height===0&&(m={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0});r=oe(r).split(" ");c=[(-1!==r[0].indexOf("%")?parseFloat(r[0])/100*m.width:parseFloat(r[0]))+m.x,(-1!==r[1].indexOf("%")?parseFloat(r[1])/100*m.height:parseFloat(r[1]))+m.y]}n.xOrigin=f=parseFloat(c[0]);n.yOrigin=p=parseFloat(c[1]);if(i&&l!==He){d=l[0];m=l[1];v=l[2];g=l[3];y=l[4];x=l[5];b=d*g-m*v;if(b){u=f*(g/b)+p*(-v/b)+(v*x-g*y)/b;h=f*(-m/b)+p*(d/b)-(d*x-m*y)/b;f=n.xOrigin=c[0]=u;p=n.yOrigin=c[1]=h}}if(s){if(o){n.xOffset=s.xOffset;n.yOffset=s.yOffset;s=n}if(a||false!==a&&false!==e.defaultSmoothOrigin){u=f-_;h=p-w;s.xOffset+=u*l[0]+h*l[2]-u;s.yOffset+=u*l[1]+h*l[3]-h}else s.xOffset=s.yOffset=0}o||t.setAttribute("data-svg-origin",c.join(" "))},Fe=function(e){var t=O("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,n=this.nextSibling,i=this.style.cssText,a;De.appendChild(t);t.appendChild(this);this.style.display="block";if(e)try{a=this.getBBox();this._originalGetBBox=this.getBBox;this.getBBox=Fe}catch(e){}else this._originalGetBBox&&(a=this._originalGetBBox());n?r.insertBefore(this,n):r.appendChild(this);De.removeChild(t);this.style.cssText=i;return a},Ge=function(e){try{return e.getBBox()}catch(t){return Fe.call(e,true)}},ze=function(e){return!!(Ie&&e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Ge(e))},He=[1,0,0,1,0,0],Ve=function(e,t){var r=e._gsTransform||new Oe,n=1e5,i=e.style,a,o,s,l,u,h;if(Re)o=K(e,Pe,null,true);else if(e.currentStyle){o=e.currentStyle.filter.match(S);o=o&&4===o.length?[o[0].substr(4),Number(o[2].substr(4)),Number(o[1].substr(4)),o[3].substr(4),r.x||0,r.y||0].join(","):""}a=!o||"none"===o||"matrix(1, 0, 0, 1, 0, 0)"===o;if(Re&&((h=!Q(e)||"none"===Q(e).display)||!e.parentNode)){if(h){l=i.display;i.display="block"}if(!e.parentNode){u=1;De.appendChild(e)}o=K(e,Pe,null,true);a=!o||"none"===o||"matrix(1, 0, 0, 1, 0, 0)"===o;l?i.display=l:h&&Ye(i,"display");u&&De.removeChild(e)}if(r.svg||e.getCTM&&ze(e)){if(a&&-1!==(i[Re]+"").indexOf("matrix")){o=i[Re];a=0}s=e.getAttribute("transform");if(a&&s){s=e.transform.baseVal.consolidate().matrix;o="matrix("+s.a+","+s.b+","+s.c+","+s.d+","+s.e+","+s.f+")";a=0}}if(a)return He;s=(o||"").match(c)||[];Se=s.length;while(--Se>-1){l=Number(s[Se]);s[Se]=(u=l-(l|=0))?(u*n+(u<0?-.5:.5)|0)/n+l:l}return t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s},je=U.getTransform=function(t,r,i,a){if(t._gsTransform&&i&&!a)return t._gsTransform;var o=i&&t._gsTransform||new Oe,s=o.scaleX<0,l=2e-5,c=1e5,u=Le&&(parseFloat(K(t,Ce,r,false,"0 0 0").split(" ")[2])||o.zOrigin)||0,h=parseFloat(e.defaultTransformPerspective)||0,f,p,d,m,v,g;o.svg=!!(t.getCTM&&ze(t));if(o.svg){Ne(t,K(t,Ce,r,false,"50% 50%")+"",o,t.getAttribute("data-svg-origin"));Be=e.useSVGTransformAttr||ke}f=Ve(t);if(f!==He){if(16===f.length){var y=f[0],x=f[1],b=f[2],_=f[3],w=f[4],S=f[5],T=f[6],M=f[7],E=f[8],A=f[9],P=f[10],C=f[12],L=f[13],O=f[14],I=f[11],B=Math.atan2(T,P),U,D,k,N,F,G;if(o.zOrigin){O=-o.zOrigin;C=E*O-f[12];L=A*O-f[13];O=P*O+o.zOrigin-f[14]}o.rotationX=B*R;if(B){F=Math.cos(-B);G=Math.sin(-B);U=w*F+E*G;D=S*F+A*G;k=T*F+P*G;E=w*-G+E*F;A=S*-G+A*F;P=T*-G+P*F;I=M*-G+I*F;w=U;S=D;T=k}B=Math.atan2(-b,P);o.rotationY=B*R;if(B){F=Math.cos(-B);G=Math.sin(-B);U=y*F-E*G;D=x*F-A*G;k=b*F-P*G;A=x*G+A*F;P=b*G+P*F;I=_*G+I*F;y=U;x=D;b=k}B=Math.atan2(x,y);o.rotation=B*R;if(B){F=Math.cos(B);G=Math.sin(B);U=y*F+x*G;D=w*F+S*G;k=E*F+A*G;x=x*F-y*G;S=S*F-w*G;A=A*F-E*G;y=U;w=D;E=k}if(o.rotationX&&Math.abs(o.rotationX)+Math.abs(o.rotation)>359.9){o.rotationX=o.rotation=0;o.rotationY=180-o.rotationY}B=Math.atan2(w,S);o.scaleX=(Math.sqrt(y*y+x*x+b*b)*c+.5|0)/c;o.scaleY=(Math.sqrt(S*S+T*T)*c+.5|0)/c;o.scaleZ=(Math.sqrt(E*E+A*A+P*P)*c+.5|0)/c;y/=o.scaleX;w/=o.scaleY;x/=o.scaleX;S/=o.scaleY;if(Math.abs(B)>l){o.skewX=B*R;w=0;"simple"!==o.skewType&&(o.scaleY*=1/Math.cos(B))}else o.skewX=0;o.perspective=I?1/(I<0?-I:I):0;o.x=C;o.y=L;o.z=O;if(o.svg){o.x-=o.xOrigin-(o.xOrigin*y-o.yOrigin*w);o.y-=o.yOrigin-(o.yOrigin*x-o.xOrigin*S)}}else if(!Le||a||!f.length||o.x!==f[4]||o.y!==f[5]||!o.rotationX&&!o.rotationY){var z=f.length>=6,H=z?f[0]:1,V=f[1]||0,j=f[2]||0,W=z?f[3]:1;o.x=f[4]||0;o.y=f[5]||0;d=Math.sqrt(H*H+V*V);m=Math.sqrt(W*W+j*j);v=H||V?Math.atan2(V,H)*R:o.rotation||0;g=j||W?Math.atan2(j,W)*R+v:o.skewX||0;o.scaleX=d;o.scaleY=m;o.rotation=v;o.skewX=g;if(Le){o.rotationX=o.rotationY=o.z=0;o.perspective=h;o.scaleZ=1}if(o.svg){o.x-=o.xOrigin-(o.xOrigin*H+o.yOrigin*j);o.y-=o.yOrigin-(o.xOrigin*V+o.yOrigin*W)}}if(Math.abs(o.skewX)>90&&Math.abs(o.skewX)<270)if(s){o.scaleX*=-1;o.skewX+=o.rotation<=0?180:-180;o.rotation+=o.rotation<=0?180:-180}else{o.scaleY*=-1;o.skewX+=o.skewX<=0?180:-180}o.zOrigin=u;for(p in o)o[p]<l&&o[p]>-l&&(o[p]=0)}if(i){t._gsTransform=o;o.svg&&(Be&&t.style[Re]?n["l"].delayedCall(.001,function(){Ye(t.style,Re)}):!Be&&t.getAttribute("transform")&&n["l"].delayedCall(.001,function(){t.removeAttribute("transform")}))}return o},We=function(e){var t=this.data,r=-t.rotation*A,n=r+t.skewX*A,i=1e5,a=(Math.cos(r)*t.scaleX*i|0)/i,o=(Math.sin(r)*t.scaleX*i|0)/i,s=(Math.sin(n)*-t.scaleY*i|0)/i,l=(Math.cos(n)*t.scaleY*i|0)/i,c=this.t.style,u=this.t.currentStyle,h,f;if(!u)return;f=o;o=-s;s=-f;h=u.filter;c.filter="";var m=this.t.offsetWidth,v=this.t.offsetHeight,g="absolute"!==u.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+o+", M21="+s+", M22="+l,x=t.x+m*t.xPercent/100,b=t.y+v*t.yPercent/100,_,w;if(null!=t.ox){_=(t.oxp?m*t.ox*.01:t.ox)-m/2;w=(t.oyp?v*t.oy*.01:t.oy)-v/2;x+=_-(_*a+w*o);b+=w-(_*s+w*l)}if(g){_=m/2;w=v/2;y+=", Dx="+(_-(_*a+w*o)+x)+", Dy="+(w-(_*s+w*l)+b)+")"}else y+=", sizingMethod='auto expand')";-1!==h.indexOf("DXImageTransform.Microsoft.Matrix(")?c.filter=h.replace(T,y):c.filter=y+" "+h;0!==e&&1!==e||1===a&&0===o&&0===s&&1===l&&(g&&-1===y.indexOf("Dx=0, Dy=0")||d.test(h)&&100!==parseFloat(RegExp.$1)||-1===h.indexOf(("gradient(",h.indexOf("Alpha")))&&c.removeAttribute("filter"));if(!g){var S=H<8?1:-1,M,E,R;_=t.ieOffsetX||0;w=t.ieOffsetY||0;t.ieOffsetX=Math.round((m-((a<0?-a:a)*m+(o<0?-o:o)*v))/2+x);t.ieOffsetY=Math.round((v-((l<0?-l:l)*v+(s<0?-s:s)*m))/2+b);for(Se=0;Se<4;Se++){E=ie[Se];M=u[E];f=-1!==M.indexOf("px")?parseFloat(M):$(this.t,E,parseFloat(M),M.replace(p,""))||0;R=f!==t[E]?Se<2?-t.ieOffsetX:-t.ieOffsetY:Se<2?_-t.ieOffsetX:w-t.ieOffsetY;c[E]=(t[E]=Math.round(f-R*(0===Se||2===Se?1:S)))+"px"}}},Xe=U.set3DTransformRatio=U.setTransformRatio=function(e){var t=this.data,r=this.t.style,n=t.rotation,i=t.rotationX,a=t.rotationY,o=t.scaleX,s=t.scaleY,l=t.scaleZ,c=t.x,u=t.y,h=t.z,f=t.svg,p=t.perspective,d=t.force3D,m=t.skewY,v=t.skewX,g,y,x,b,_,w,S,T,M,E,R,P,C,L,O,I,B,U,D,k,N,F,z;if(m){v+=m;n+=m}if(((1===e||0===e)&&"auto"===d&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!d)&&!h&&!p&&!a&&!i&&1===l||Be&&f||!Le){if(n||v||f){n*=A;F=v*A;z=1e5;y=Math.cos(n)*o;_=Math.sin(n)*o;x=Math.sin(n-F)*-s;w=Math.cos(n-F)*s;if(F&&"simple"===t.skewType){g=Math.tan(F-m*A);g=Math.sqrt(1+g*g);x*=g;w*=g;if(m){g=Math.tan(m*A);g=Math.sqrt(1+g*g);y*=g;_*=g}}if(f){c+=t.xOrigin-(t.xOrigin*y+t.yOrigin*x)+t.xOffset;u+=t.yOrigin-(t.xOrigin*_+t.yOrigin*w)+t.yOffset;if(Be&&(t.xPercent||t.yPercent)){O=this.t.getBBox();c+=.01*t.xPercent*O.width;u+=.01*t.yPercent*O.height}O=1e-6;c<O&&c>-O&&(c=0);u<O&&u>-O&&(u=0)}D=(y*z|0)/z+","+(_*z|0)/z+","+(x*z|0)/z+","+(w*z|0)/z+","+c+","+u+")";f&&Be?this.t.setAttribute("transform","matrix("+D):r[Re]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+D}else r[Re]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+o+",0,0,"+s+","+c+","+u+")";return}if(G){O=1e-4;o<O&&o>-O&&(o=l=2e-5);s<O&&s>-O&&(s=l=2e-5);!p||t.z||t.rotationX||t.rotationY||(p=0)}if(n||v){n*=A;I=y=Math.cos(n);B=_=Math.sin(n);if(v){n-=v*A;I=Math.cos(n);B=Math.sin(n);if("simple"===t.skewType){g=Math.tan((v-m)*A);g=Math.sqrt(1+g*g);I*=g;B*=g;if(t.skewY){g=Math.tan(m*A);g=Math.sqrt(1+g*g);y*=g;_*=g}}}x=-B;w=I}else{if(!(a||i||1!==l||p||f)){r[Re]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) translate3d(":"translate3d(")+c+"px,"+u+"px,"+h+"px)"+(1!==o||1!==s?" scale("+o+","+s+")":"");return}y=w=1;x=_=0}E=1;b=S=T=M=R=P=0;C=p?-1/p:0;L=t.zOrigin;O=1e-6;k=",";N="0";n=a*A;if(n){I=Math.cos(n);B=Math.sin(n);T=-B;R=C*-B;b=y*B;S=_*B;E=I;C*=I;y*=I;_*=I}n=i*A;if(n){I=Math.cos(n);B=Math.sin(n);g=x*I+b*B;U=w*I+S*B;M=E*B;P=C*B;b=x*-B+b*I;S=w*-B+S*I;E*=I;C*=I;x=g;w=U}if(1!==l){b*=l;S*=l;E*=l;C*=l}if(1!==s){x*=s;w*=s;M*=s;P*=s}if(1!==o){y*=o;_*=o;T*=o;R*=o}if(L||f){if(L){c+=b*-L;u+=S*-L;h+=E*-L+L}if(f){c+=t.xOrigin-(t.xOrigin*y+t.yOrigin*x)+t.xOffset;u+=t.yOrigin-(t.xOrigin*_+t.yOrigin*w)+t.yOffset}c<O&&c>-O&&(c=N);u<O&&u>-O&&(u=N);h<O&&h>-O&&(h=0)}D=t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix3d(":"matrix3d(";D+=(y<O&&y>-O?N:y)+k+(_<O&&_>-O?N:_)+k+(T<O&&T>-O?N:T);D+=k+(R<O&&R>-O?N:R)+k+(x<O&&x>-O?N:x)+k+(w<O&&w>-O?N:w);if(i||a||1!==l){D+=k+(M<O&&M>-O?N:M)+k+(P<O&&P>-O?N:P)+k+(b<O&&b>-O?N:b);D+=k+(S<O&&S>-O?N:S)+k+(E<O&&E>-O?N:E)+k+(C<O&&C>-O?N:C)+k}else D+=",0,0,0,0,1,0,";D+=c+k+u+k+h+k+(p?1+-h/p:1)+")";r[Re]=D};l=Oe.prototype;l.x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=l.xOffset=l.yOffset=0;l.scaleX=l.scaleY=l.scaleZ=1;Me("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,r,n,i,o,s,l){if(i._lastParsedTransform===l)return o;i._lastParsedTransform=l;var c=l.scale&&"function"===typeof l.scale?l.scale:0,u;if("function"===typeof l[n]){u=l[n];l[n]=r}c&&(l.scale=c(q,t));var h=t._gsTransform,f=t.style,p=1e-6,d=Ae.length,m=l,v={},g="transformOrigin",y=je(t,a,true,m.parseTransform),x=m.transform&&("function"===typeof m.transform?m.transform(q,X):m.transform),b,_,w,S,T,M,E,R,C;y.skewType=m.skewType||y.skewType||e.defaultSkewType;i._transform=y;"rotationZ"in m&&(m.rotation=m.rotationZ);if(x&&"string"===typeof x&&Re){_=I.style;_[Re]=x;_.display="block";_.position="absolute";if(-1!==x.indexOf("%")){_.width=K(t,"width");_.height=K(t,"height")}L.body.appendChild(I);b=je(I,null,false);"simple"===y.skewType&&(b.scaleY*=Math.cos(b.skewX*A));if(y.svg){M=y.xOrigin;E=y.yOrigin;b.x-=y.xOffset;b.y-=y.yOffset;if(m.transformOrigin||m.svgOrigin){x={};Ne(t,oe(m.transformOrigin),x,m.svgOrigin,m.smoothOrigin,true);M=x.xOrigin;E=x.yOrigin;b.x-=x.xOffset-y.xOffset;b.y-=x.yOffset-y.yOffset}if(M||E){R=Ve(I,true);b.x-=M-(M*R[0]+E*R[2]);b.y-=E-(M*R[1]+E*R[3])}}L.body.removeChild(I);b.perspective||(b.perspective=y.perspective);null!=m.xPercent&&(b.xPercent=le(m.xPercent,y.xPercent));null!=m.yPercent&&(b.yPercent=le(m.yPercent,y.yPercent))}else if("object"===typeof m){b={scaleX:le(null!=m.scaleX?m.scaleX:m.scale,y.scaleX),scaleY:le(null!=m.scaleY?m.scaleY:m.scale,y.scaleY),scaleZ:le(m.scaleZ,y.scaleZ),x:le(m.x,y.x),y:le(m.y,y.y),z:le(m.z,y.z),xPercent:le(m.xPercent,y.xPercent),yPercent:le(m.yPercent,y.yPercent),perspective:le(m.transformPerspective,y.perspective)};T=m.directionalRotation;if(null!=T)if("object"===typeof T)for(_ in T)m[_]=T[_];else m.rotation=T;if("string"===typeof m.x&&-1!==m.x.indexOf("%")){b.x=0;b.xPercent=le(m.x,y.xPercent)}if("string"===typeof m.y&&-1!==m.y.indexOf("%")){b.y=0;b.yPercent=le(m.y,y.yPercent)}b.rotation=ce("rotation"in m?m.rotation:"shortRotation"in m?m.shortRotation+"_short":y.rotation,y.rotation,"rotation",v);if(Le){b.rotationX=ce("rotationX"in m?m.rotationX:"shortRotationX"in m?m.shortRotationX+"_short":y.rotationX||0,y.rotationX,"rotationX",v);b.rotationY=ce("rotationY"in m?m.rotationY:"shortRotationY"in m?m.shortRotationY+"_short":y.rotationY||0,y.rotationY,"rotationY",v)}b.skewX=ce(m.skewX,y.skewX);b.skewY=ce(m.skewY,y.skewY)}if(Le&&null!=m.force3D){y.force3D=m.force3D;S=true}w=y.force3D||y.z||y.rotationX||y.rotationY||b.z||b.rotationX||b.rotationY||b.perspective;w||null==m.scale||(b.scaleZ=1);while(--d>-1){C=Ae[d];x=b[C]-y[C];if(x>p||x<-p||null!=m[C]||null!=P[C]){S=true;o=new be(y,C,y[C],x,o);C in v&&(o.e=v[C]);o.xs0=0;o.plugin=s;i._overwriteProps.push(o.n)}}x=m.transformOrigin;if(y.svg&&(x||m.svgOrigin)){M=y.xOffset;E=y.yOffset;Ne(t,oe(x),b,m.svgOrigin,m.smoothOrigin);o=_e(y,"xOrigin",(h?y:b).xOrigin,b.xOrigin,o,g);o=_e(y,"yOrigin",(h?y:b).yOrigin,b.yOrigin,o,g);if(M!==y.xOffset||E!==y.yOffset){o=_e(y,"xOffset",h?M:y.xOffset,y.xOffset,o,g);o=_e(y,"yOffset",h?E:y.yOffset,y.yOffset,o,g)}x="0px 0px"}if(x||Le&&w&&y.zOrigin)if(Re){S=true;C=Ce;x=(x||K(t,C,a,false,"50% 50%"))+"";o=new be(f,C,0,0,o,-1,g);o.b=f[C];o.plugin=s;if(Le){_=y.zOrigin;x=x.split(" ");y.zOrigin=(x.length>2&&!(0!==_&&"0px"===x[2])?parseFloat(x[2]):_)||0;o.xs0=o.e=x[0]+" "+(x[1]||"50%")+" 0px";o=new be(y,"zOrigin",0,0,o,-1,o.n);o.b=_;o.xs0=o.e=y.zOrigin}else o.xs0=o.e=x}else oe(x+"",y);S&&(i._transformType=y.svg&&Be||!w&&3!==this._transformType?2:3);u&&(l[n]=u);c&&(l.scale=c);return o},prefix:true});Me("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:true,color:true,multi:true,keyword:"inset"});Me("borderRadius",{defaultValue:"0px",parser:function(e,t,r,n,o,s){t=this.format(t);var l=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],c=e.style,u,h,f,p,d,m,v,g,y,x,b,_,w,S,T,M;y=parseFloat(e.offsetWidth);x=parseFloat(e.offsetHeight);u=t.split(" ");for(h=0;h<l.length;h++){this.p.indexOf("border")&&(l[h]=J(l[h]));d=p=K(e,l[h],a,false,"0px");if(-1!==d.indexOf(" ")){p=d.split(" ");d=p[0];p=p[1]}m=f=u[h];v=parseFloat(d);_=d.substr((v+"").length);w="="===m.charAt(1);if(w){g=parseInt(m.charAt(0)+"1",10);m=m.substr(2);g*=parseFloat(m);b=m.substr((g+"").length-(g<0?1:0))||""}else{g=parseFloat(m);b=m.substr((g+"").length)}""===b&&(b=i[r]||_);if(b!==_){S=$(e,"borderLeft",v,_);T=$(e,"borderTop",v,_);if("%"===b){d=S/y*100+"%";p=T/x*100+"%"}else if("em"===b){M=$(e,"borderLeft",1,"em");d=S/M+"em";p=T/M+"em"}else{d=S+"px";p=T+"px"}if(w){m=parseFloat(d)+g+b;f=parseFloat(p)+g+b}}o=we(c,l[h],d+" "+p,m+" "+f,false,"0px",o)}return o},prefix:true,formatter:me("0px 0px 0px 0px",false,true)});Me("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,r,n,i,o){return we(e.style,r,this.format(K(e,r,a,false,"0px 0px")),this.format(t),false,"0px",i)},prefix:true,formatter:me("0px 0px",false,true)});Me("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,r,n,i,o){var s="background-position",l=a||Q(e,null),c=this.format((l?H?l.getPropertyValue(s+"-x")+" "+l.getPropertyValue(s+"-y"):l.getPropertyValue(s):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),u=this.format(t),h,f,p,d,m,v;if(-1!==c.indexOf("%")!==(-1!==u.indexOf("%"))&&u.split(",").length<2){v=K(e,"backgroundImage").replace(b,"");if(v&&"none"!==v){h=c.split(" ");f=u.split(" ");B.setAttribute("src",v);p=2;while(--p>-1){c=h[p];d=-1!==c.indexOf("%");if(d!==(-1!==f[p].indexOf("%"))){m=0===p?e.offsetWidth-B.width:e.offsetHeight-B.height;h[p]=d?parseFloat(c)/100*m+"px":parseFloat(c)/m*100+"%"}}c=h.join(" ")}}return this.parseComplex(e.style,c,u,i,o)},formatter:oe});Me("backgroundSize",{defaultValue:"0 0",formatter:function(e){e+="";return"co"===e.substr(0,2)?e:oe(-1===e.indexOf(" ")?e+" "+e:e)}});Me("perspective",{defaultValue:"0px",prefix:true});Me("perspectiveOrigin",{defaultValue:"50% 50%",prefix:true});Me("transformStyle",{prefix:true});Me("backfaceVisibility",{prefix:true});Me("userSelect",{prefix:true});Me("margin",{parser:ve("marginTop,marginRight,marginBottom,marginLeft")});Me("padding",{parser:ve("paddingTop,paddingRight,paddingBottom,paddingLeft")});Me("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,r,n,i,o){var s,l,c;if(H<9){l=e.currentStyle;c=H<8?" ":",";s="rect("+l.clipTop+c+l.clipRight+c+l.clipBottom+c+l.clipLeft+")";t=this.format(t).split(",").join(c)}else{s=this.format(K(e,this.p,a,false,this.dflt));t=this.format(t)}return this.parseComplex(e.style,s,t,i,o)}});Me("textShadow",{defaultValue:"0px 0px 0px #999",color:true,multi:true});Me("autoRound,strictUnits",{parser:function(e,t,r,n,i){return i}});Me("border",{defaultValue:"0px solid #000",parser:function(e,t,r,n,i,o){var s=K(e,"borderTopWidth",a,false,"0px"),l=this.format(t).split(" "),c=l[0].replace(p,"");"px"!==c&&(s=parseFloat(s)/$(e,"borderTopWidth",1,c)+c);return this.parseComplex(e.style,this.format(s+" "+K(e,"borderTopStyle",a,false,"solid")+" "+K(e,"borderTopColor",a,false,"#000")),l.join(" "),i,o)},color:true,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(de)||["#000"])[0]}});Me("borderWidth",{parser:ve("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")});Me("float,cssFloat,styleFloat",{parser:function(e,t,r,n,i,a){var o=e.style,s="cssFloat"in o?"cssFloat":"styleFloat";return new be(o,s,0,0,i,-1,r,false,0,o[s],t)}});var qe=function(e){var t=this.t,r=t.filter||K(this.data,"filter")||"",n=this.s+this.c*e|0,i;if(100===n)if(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")){t.removeAttribute("filter");i=!K(this.data,"filter")}else{t.filter=r.replace(v,"");i=true}if(!i){this.xn1&&(t.filter=r=r||"alpha(opacity="+n+")");-1===r.indexOf("pacity")?0===n&&this.xn1||(t.filter=r+" alpha(opacity="+n+")"):t.filter=r.replace(d,"opacity="+n)}};Me("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,r,n,i,o){var s=parseFloat(K(e,"opacity",a,false,"1")),l=e.style,c="autoAlpha"===r;"string"===typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+s);c&&1===s&&"hidden"===K(e,"visibility",a)&&0!==t&&(s=0);if(V)i=new be(l,"opacity",s,t-s,i);else{i=new be(l,"opacity",100*s,100*(t-s),i);i.xn1=c?1:0;l.zoom=1;i.type=2;i.b="alpha(opacity="+i.s+")";i.e="alpha(opacity="+(i.s+i.c)+")";i.data=e;i.plugin=o;i.setRatio=qe}if(c){i=new be(l,"visibility",0,0,i,-1,null,false,0,0!==s?"inherit":"hidden",0===t?"hidden":"inherit");i.xs0="inherit";n._overwriteProps.push(i.n);n._overwriteProps.push(r)}return i}});var Ye=function(e,t){if(t)if(e.removeProperty){"ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t);e.removeProperty(t.replace(y,"-$1").toLowerCase())}else e.removeAttribute(t)},Ze=function(e){this.t._gsClassPT=this;if(1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);var t=this.data,r=this.t.style;while(t){t.v?r[t.p]=t.v:Ye(r,t.p);t=t._next}1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Me("className",{parser:function(e,t,n,i,o,s,l){var c=e.getAttribute("class")||"",u=e.style.cssText,h,f,p,d,m;o=i._classNamePT=new be(e,n,0,0,o,2);o.setRatio=Ze;o.pr=-11;r=true;o.b=c;f=te(e,a);p=e._gsClassPT;if(p){d={};m=p.data;while(m){d[m.p]=1;m=m._next}p.setRatio(1)}e._gsClassPT=o;o.e="="!==t.charAt(1)?t:c.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):"");e.setAttribute("class",o.e);h=re(e,f,te(e),l,d);e.setAttribute("class",c);o.data=h.firstMPT;e.style.cssText=u;o=o.xfirst=i.parse(e,h.difs,o,s);return o}});var Je=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t=this.t.style,r=s.transform.parse,n,i,a,o,l;if("all"===this.e){t.cssText="";o=true}else{n=this.e.split(" ").join("").split(",");a=n.length;while(--a>-1){i=n[a];s[i]&&(s[i].parse===r?o=true:i="transformOrigin"===i?Ce:s[i].p);Ye(t,i)}}if(o){Ye(t,Re);l=this.t._gsTransform;if(l){if(l.svg){this.t.removeAttribute("data-svg-origin");this.t.removeAttribute("transform")}delete this.t._gsTransform}}}};Me("clearProps",{parser:function(e,t,n,i,a){a=new be(e,n,0,0,a,2);a.setRatio=Je;a.e=t;a.pr=-10;a.data=i._tween;r=true;return a}});l="bezier,throwProps,physicsProps,physics2D".split(",");Se=l.length;while(Se--)Ee(l[Se]);l=e.prototype;l._firstPT=l._lastParsedTransform=l._transform=null;l._onInitTween=function(t,n,l,c){if(!t.nodeType)return false;this._target=X=t;this._tween=l;this._vars=n;q=c;k=n.autoRound;r=false;i=n.suffixMap||e.suffixMap;a=Q(t,"");o=this._overwriteProps;var u=t.style,h,f,p,d,v,g,y,x,b;if(N&&""===u.zIndex){h=K(t,"zIndex",a);"auto"!==h&&""!==h||this._addLazySet(u,"zIndex",0)}if("string"===typeof n){d=u.cssText;h=te(t,a);u.cssText=d+";"+n;h=re(t,h,te(t)).difs;!V&&m.test(n)&&(h.opacity=parseFloat(RegExp.$1));n=h;u.cssText=d}n.className?this._firstPT=f=s.className.parse(t,n.className,"className",this,null,null,n):this._firstPT=f=this.parse(t,n,null);if(this._transformType){b=3===this._transformType;if(Re){if(F){N=true;if(""===u.zIndex){y=K(t,"zIndex",a);"auto"!==y&&""!==y||this._addLazySet(u,"zIndex",0)}z&&this._addLazySet(u,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(b?"visible":"hidden"))}}else u.zoom=1;p=f;while(p&&p._next)p=p._next;x=new be(t,"transform",0,0,null,2);this._linkCSSP(x,null,p);x.setRatio=Re?Xe:We;x.data=this._transform||je(t,a,true);x.tween=l;x.pr=-1;o.pop()}if(r){while(f){g=f._next;p=d;while(p&&p.pr>f.pr)p=p._next;(f._prev=p?p._prev:v)?f._prev._next=f:d=f;(f._next=p)?p._prev=f:v=f;f=g}this._firstPT=d}return true};l.parse=function(e,t,r,n){var o=e.style,l,c,u,h,f,d,m,v,y,x;for(l in t){d=t[l];"function"===typeof d&&(d=d(q,X));c=s[l];if(c)r=c.parse(e,d,l,this,r,n,t);else{if("--"===l.substr(0,2)){this._tween._propLookup[l]=this._addTween.call(this._tween,e.style,"setProperty",Q(e).getPropertyValue(l)+"",d+"",l,false,l);continue}f=K(e,l,a)+"";y="string"===typeof d;if("color"===l||"fill"===l||"stroke"===l||-1!==l.indexOf("Color")||y&&g.test(d)){if(!y){d=fe(d);d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"}r=we(o,l,f,d,true,"transparent",r,0,n)}else if(y&&E.test(d))r=we(o,l,f,d,true,null,r,0,n);else{u=parseFloat(f);m=u||0===u?f.substr((u+"").length):"";if(""===f||"auto"===f)if("width"===l||"height"===l){u=ae(e,l,a);m="px"}else if("left"===l||"top"===l){u=ee(e,l,a);m="px"}else{u="opacity"!==l?0:1;m=""}x=y&&"="===d.charAt(1);if(x){h=parseInt(d.charAt(0)+"1",10);d=d.substr(2);h*=parseFloat(d);v=d.replace(p,"")}else{h=parseFloat(d);v=y?d.replace(p,""):""}""===v&&(v=l in i?i[l]:m);d=h||0===h?(x?h+u:h)+v:t[l];if(m!==v&&(""!==v||"lineHeight"===l)&&(h||0===h)&&u){u=$(e,l,u,m);if("%"===v){u/=$(e,l,100,"%")/100;true!==t.strictUnits&&(f=u+"%")}else if("em"===v||"rem"===v||"vw"===v||"vh"===v)u/=$(e,l,1,v);else if("px"!==v){h=$(e,l,h,v);v="px"}x&&(h||0===h)&&(d=h+u+v)}x&&(h+=u);if(!u&&0!==u||!h&&0!==h)if(void 0!==o[l]&&(d||d+""!=="NaN"&&null!=d)){r=new be(o,l,h||u||0,0,r,-1,l,false,0,f,d);r.xs0="none"!==d||"display"!==l&&-1===l.indexOf("Style")?d:f}else W("invalid "+l+" tween value: "+t[l]);else{r=new be(o,l,u,h-u,r,0,l,false!==k&&("px"===v||"zIndex"===l),0,f,d);r.xs0=v}}}n&&r&&!r.plugin&&(r.plugin=n)}return r};l.setRatio=function(e){var t=this._firstPT,r=1e-6,n,i,a;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||!(this._tween._time===this._tween._duration||0===this._tween._time)||-1e-6===this._tween._rawPrevTime)while(t){n=t.c*e+t.s;t.r?n=t.r(n):n<r&&n>-r&&(n=0);if(t.type)if(1===t.type){a=t.l;if(2===a)t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2;else if(3===a)t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3;else if(4===a)t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4;else if(5===a)t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4+t.xn4+t.xs5;else{i=t.xs0+n+t.xs1;for(a=1;a<t.l;a++)i+=t["xn"+a]+t["xs"+(a+1)];t.t[t.p]=i}}else-1===t.type?t.t[t.p]=t.xs0:t.setRatio&&t.setRatio(e);else t.t[t.p]=n+t.xs0;t=t._next}else while(t){2!==t.type?t.t[t.p]=t.b:t.setRatio(e);t=t._next}else while(t){if(2!==t.type)if(t.r&&-1!==t.type){n=t.r(t.s+t.c);if(t.type){if(1===t.type){a=t.l;i=t.xs0+n+t.xs1;for(a=1;a<t.l;a++)i+=t["xn"+a]+t["xs"+(a+1)];t.t[t.p]=i}}else t.t[t.p]=n+t.xs0}else t.t[t.p]=t.e;else t.setRatio(e);t=t._next}};l._enableTransforms=function(e){this._transform=this._transform||je(this._target,a,true);this._transformType=this._transform.svg&&Be||!e&&3!==this._transformType?2:3};var Qe=function(e){this.t[this.p]=this.e;this.data._linkCSSP(this,this._next,null,true)};l._addLazySet=function(e,t,r){var n=this._firstPT=new be(e,t,0,0,this._firstPT,2);n.e=r;n.setRatio=Qe;n.data=this};l._linkCSSP=function(e,t,r,n){if(e){t&&(t._prev=e);e._next&&(e._next._prev=e._prev);if(e._prev)e._prev._next=e._next;else if(this._firstPT===e){this._firstPT=e._next;n=true}r?r._next=e:n||null!==this._firstPT||(this._firstPT=e);e._next=t;e._prev=r}return e};l._mod=function(e){var t=this._firstPT;while(t){"function"===typeof e[t.p]&&(t.r=e[t.p]);t=t._next}};l._kill=function(e){var t=e,r,i,a;if(e.autoAlpha||e.alpha){t={};for(i in e)t[i]=e[i];t.opacity=1;t.autoAlpha&&(t.visibility=1)}if(e.className&&(r=this._classNamePT)){a=r.xfirst;a&&a._prev?this._linkCSSP(a._prev,r._next,a._prev._prev):a===this._firstPT&&(this._firstPT=r._next);r._next&&this._linkCSSP(r._next,r._next._next,a._prev);this._classNamePT=null}r=this._firstPT;while(r){if(r.plugin&&r.plugin!==i&&r.plugin._kill){r.plugin._kill(e);i=r.plugin}r=r._next}return n["j"].prototype._kill.call(this,t)};var Ke=function(e,t,r){var n,i,a,o;if(e.slice){i=e.length;while(--i>-1)Ke(e[i],t,r);return}n=e.childNodes;i=n.length;while(--i>-1){a=n[i];o=a.type;if(a.style){t.push(te(a));r&&r.push(a)}1!==o&&9!==o&&11!==o||!a.childNodes.length||Ke(a,t,r)}};e.cascadeTo=function(e,t,r){var i=n["l"].to(e,t,r),a=[i],o=[],s=[],l=[],c=n["l"]._internals.reservedProps,u,h,f,p;e=i._targets||i.target;Ke(e,o,l);i.render(t,true,true);Ke(e,s);i.render(0,true,true);i._enabled(true);u=l.length;while(--u>-1){h=re(l[u],o[u],s[u]);if(h.firstMPT){h=h.difs;for(f in r)c[f]&&(h[f]=r[f]);p={};for(f in h)p[f]=o[u][f];a.push(n["l"].fromTo(l[u],t,p,h))}}return a};n["j"].activate([e]);return e},true);var l=n["m"].CSSPlugin;var c=n["k"]._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,r,n){var i,a;if("function"!==typeof e.setAttribute)return false;for(i in t){a=t[i];"function"===typeof a&&(a=a(n,e));this._addTween(e,"setAttribute",e.getAttribute(i)+"",a+"",i,false,i);this._overwriteProps.push(i)}return true}});var u=n["k"]._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(e,t,r){this._tween=r;return true}}),h=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(r){return(Math.round(r/e)*e*t|0)/t}},f=function(e,t){while(e){e.f||e.blob||(e.m=t||Math.round);e=e._next}},p=u.prototype;p._onInitAllProps=function(){var e=this._tween,t=e.vars.roundProps,r={},n=e._propLookup.roundProps,i,a,o,s;if("object"!==typeof t||t.push){"string"===typeof t&&(t=t.split(","));o=t.length;while(--o>-1)r[t[o]]=Math.round}else for(s in t)r[s]=h(t[s]);for(s in r){i=e._firstPT;while(i){a=i._next;if(i.pg)i.t._mod(r);else if(i.n===s)if(2===i.f&&i.t)f(i.t._firstPT,r[s]);else{this._add(i.t,s,i.s,i.c,r[s]);a&&(a._prev=i._prev);i._prev?i._prev._next=a:e._firstPT===i&&(e._firstPT=a);i._next=i._prev=null;e._propLookup[s]=n}i=a}}return false};p._add=function(e,t,r,n,i){this._addTween(e,t,r,r+n,t,i||Math.round);this._overwriteProps.push(t)};var d=n["k"]._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,r,n){"object"!==typeof t&&(t={rotation:t});this.finals={};var i=true===t.useRadians?2*Math.PI:360,a=1e-6,o,s,l,c,u,h;for(o in t)if("useRadians"!==o){c=t[o];"function"===typeof c&&(c=c(n,e));h=(c+"").split("_");s=h[0];l=parseFloat("function"!==typeof e[o]?e[o]:e[o.indexOf("set")||"function"!==typeof e["get"+o.substr(3)]?o:"get"+o.substr(3)]());c=this.finals[o]="string"===typeof s&&"="===s.charAt(1)?l+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0;u=c-l;if(h.length){s=h.join("_");if(-1!==s.indexOf("short")){u%=i;u!==u%(i/2)&&(u=u<0?u+i:u-i)}-1!==s.indexOf("_cw")&&u<0?u=(u+9999999999*i)%i-(u/i|0)*i:-1!==s.indexOf("ccw")&&u>0&&(u=(u-9999999999*i)%i-(u/i|0)*i)}if(u>a||u<-a){this._addTween(e,o,l,l+u,o);this._overwriteProps.push(o)}}return true},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else{t=this._firstPT;while(t){t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p];t=t._next}}}});d._autoCSS=true;var m=180/Math.PI,v=[],g=[],y=[],x={},b=n["k"]._gsDefine.globals,_=function(e,t,r,n){r===n&&(r=n-(n-t)/1e6);e===t&&(t=e+(r-e)/1e6);this.a=e;this.b=t;this.c=r;this.d=n;this.da=n-e;this.ca=r-e;this.ba=t-e},w=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",S=function(e,t,r,n){var i={a:e},a={},o={},s={c:n},l=(e+t)/2,c=(t+r)/2,u=(r+n)/2,h=(l+c)/2,f=(c+u)/2,p=(f-h)/8;i.b=l+(e-l)/4;a.b=h+p;i.c=a.a=(i.b+a.b)/2;a.c=o.a=(h+f)/2;o.b=f-p;s.b=u+(n-u)/4;o.c=s.a=(o.b+s.b)/2;return[i,a,o,s]},T=function(e,t,r,n,i){var a=e.length-1,o=0,s=e[0].a,l,c,u,h,f,p,d,m,x,b,_,w,T;for(l=0;l<a;l++){f=e[o];c=f.a;u=f.d;h=e[o+1].d;if(i){_=v[l];w=g[l];T=(w+_)*t*.25/(n?.5:y[l]||.5);p=u-(u-c)*(n?.5*t:0!==_?T/_:0);d=u+(h-u)*(n?.5*t:0!==w?T/w:0);m=u-(p+((d-p)*(3*_/(_+w)+.5)/4||0))}else{p=u-(u-c)*t*.5;d=u+(h-u)*t*.5;m=u-(p+d)/2}p+=m;d+=m;f.c=x=p;f.b=0!==l?s:s=f.a+.6*(f.c-f.a);f.da=u-c;f.ca=x-c;f.ba=s-c;if(r){b=S(c,s,x,u);e.splice(o,1,b[0],b[1],b[2],b[3]);o+=4}else o++;s=d}f=e[o];f.b=s;f.c=s+.4*(f.d-s);f.da=f.d-f.a;f.ca=f.c-f.a;f.ba=s-f.a;if(r){b=S(f.a,s,f.c,f.d);e.splice(o,1,b[0],b[1],b[2],b[3])}},M=function(e,t,r,n){var i=[],a,o,s,l,c,u;if(n){e=[n].concat(e);o=e.length;while(--o>-1)"string"===typeof(u=e[o][t])&&"="===u.charAt(1)&&(e[o][t]=n[t]+Number(u.charAt(0)+u.substr(2)))}a=e.length-2;if(a<0){i[0]=new _(e[0][t],0,0,e[0][t]);return i}for(o=0;o<a;o++){s=e[o][t];l=e[o+1][t];i[o]=new _(s,0,0,l);if(r){c=e[o+2][t];v[o]=(v[o]||0)+(l-s)*(l-s);g[o]=(g[o]||0)+(c-l)*(c-l)}}i[o]=new _(e[o][t],0,0,e[o+1][t]);return i},E=function(e,t,r,n,i,a){var o={},s=[],l=a||e[0],c,u,h,f,p,d,m,b;i="string"===typeof i?","+i+",":w;null==t&&(t=1);for(u in e[0])s.push(u);if(e.length>1){b=e[e.length-1];m=true;c=s.length;while(--c>-1){u=s[c];if(Math.abs(l[u]-b[u])>.05){m=false;break}}if(m){e=e.concat();a&&e.unshift(a);e.push(e[1]);a=e[e.length-3]}}v.length=g.length=y.length=0;c=s.length;while(--c>-1){u=s[c];x[u]=-1!==i.indexOf(","+u+",");o[u]=M(e,u,x[u],a)}c=v.length;while(--c>-1){v[c]=Math.sqrt(v[c]);g[c]=Math.sqrt(g[c])}if(!n){c=s.length;while(--c>-1)if(x[u]){h=o[s[c]];d=h.length-1;for(f=0;f<d;f++){p=h[f+1].da/g[f]+h[f].da/v[f]||0;y[f]=(y[f]||0)+p*p}}c=y.length;while(--c>-1)y[c]=Math.sqrt(y[c])}c=s.length;f=r?4:1;while(--c>-1){u=s[c];h=o[u];T(h,t,r,n,x[u]);if(m){h.splice(0,f);h.splice(h.length-f,f)}}return o},A=function(e,t,r){t=t||"soft";var n={},i="cubic"===t?3:2,a="soft"===t,o=[],s,l,c,u,h,f,p,d,m,v,g;a&&r&&(e=[r].concat(e));if(null==e||e.length<i+1)throw"invalid Bezier data";for(m in e[0])o.push(m);f=o.length;while(--f>-1){m=o[f];n[m]=h=[];v=0;d=e.length;for(p=0;p<d;p++){s=null==r?e[p][m]:"string"===typeof(g=e[p][m])&&"="===g.charAt(1)?r[m]+Number(g.charAt(0)+g.substr(2)):Number(g);a&&p>1&&p<d-1&&(h[v++]=(s+h[v-2])/2);h[v++]=s}d=v-i+1;v=0;for(p=0;p<d;p+=i){s=h[p];l=h[p+1];c=h[p+2];u=2===i?0:h[p+3];h[v++]=g=3===i?new _(s,l,c,u):new _(s,(2*l+s)/3,(2*l+c)/3,c)}h.length=v}return n},R=function(e,t,r){var n=1/r,i=e.length,a,o,s,l,c,u,h,f,p,d,m;while(--i>-1){d=e[i];s=d.a;l=d.d-s;c=d.c-s;u=d.b-s;a=o=0;for(f=1;f<=r;f++){h=n*f;p=1-h;a=o-(o=(h*h*l+3*p*(h*c+p*u))*h);m=i*r+f-1;t[m]=(t[m]||0)+a*a}}},P=function(e,t){t=t>>0||6;var r=[],n=[],i=0,a=0,o=t-1,s=[],l=[],c,u,h,f;for(c in e)R(e[c],r,t);h=r.length;for(u=0;u<h;u++){i+=Math.sqrt(r[u]);f=u%t;l[f]=i;if(f===o){a+=i;f=u/t>>0;s[f]=l;n[f]=a;i=0;l=[]}}return{length:a,lengths:n,segments:s}},C=n["k"]._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:true,init:function(e,t,r){this._target=e;t instanceof Array&&(t={values:t});this._func={};this._mod={};this._props=[];this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var n=t.values||[],i={},a=n[0],o=t.autoRotate||r.vars.orientToBezier,s,l,c,u,h;this._autoRotate=o?o instanceof Array?o:[["x","y","rotation",true===o?0:Number(o)||0]]:null;for(s in a)this._props.push(s);c=this._props.length;while(--c>-1){s=this._props[c];this._overwriteProps.push(s);l=this._func[s]="function"===typeof e[s];i[s]=l?e[s.indexOf("set")||"function"!==typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(e[s]);h||i[s]!==n[0][s]&&(h=i)}this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?E(n,isNaN(t.curviness)?1:t.curviness,false,"thruBasic"===t.type,t.correlate,h):A(n,t.type,i);this._segCount=this._beziers[s].length;if(this._timeRes){var f=P(this._beziers,this._timeRes);this._length=f.length;this._lengths=f.lengths;this._segments=f.segments;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(o=this._autoRotate){this._initialRotations=[];o[0]instanceof Array||(this._autoRotate=o=[o]);c=o.length;while(--c>-1){for(u=0;u<3;u++){s=o[c][u];this._func[s]="function"===typeof e[s]&&e[s.indexOf("set")||"function"!==typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]}s=o[c][2];this._initialRotations[c]=(this._func[s]?this._func[s].call(this._target):this._target[s])||0;this._overwriteProps.push(s)}}this._startRatio=r.vars.runBackwards?1:0;return true},set:function(e){var t=this._segCount,r=this._func,n=this._target,i=e!==this._startRatio,a,o,s,l,c,u,h,f,p,d;if(this._timeRes){p=this._lengths;d=this._curSeg;e*=this._length;s=this._li;if(e>this._l2&&s<t-1){f=t-1;while(s<f&&(this._l2=p[++s])<=e);this._l1=p[s-1];this._li=s;this._curSeg=d=this._segments[s];this._s2=d[this._s1=this._si=0]}else if(e<this._l1&&s>0){while(s>0&&(this._l1=p[--s])>=e);0===s&&e<this._l1?this._l1=0:s++;this._l2=p[s];this._li=s;this._curSeg=d=this._segments[s];this._s1=d[(this._si=d.length-1)-1]||0;this._s2=d[this._si]}a=s;e-=this._l1;s=this._si;if(e>this._s2&&s<d.length-1){f=d.length-1;while(s<f&&(this._s2=d[++s])<=e);this._s1=d[s-1];this._si=s}else if(e<this._s1&&s>0){while(s>0&&(this._s1=d[--s])>=e);0===s&&e<this._s1?this._s1=0:s++;this._s2=d[s];this._si=s}u=(s+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else{a=e<0?0:e>=1?t-1:t*e>>0;u=(e-a*(1/t))*t}o=1-u;s=this._props.length;while(--s>-1){l=this._props[s];c=this._beziers[l][a];h=(u*u*c.da+3*o*(u*c.ca+o*c.ba))*u+c.a;this._mod[l]&&(h=this._mod[l](h,n));r[l]?n[l](h):n[l]=h}if(this._autoRotate){var v=this._autoRotate,g,y,x,b,_,w,S;s=v.length;while(--s>-1){l=v[s][2];w=v[s][3]||0;S=true===v[s][4]?1:m;c=this._beziers[v[s][0]];g=this._beziers[v[s][1]];if(c&&g){c=c[a];g=g[a];y=c.a+(c.b-c.a)*u;b=c.b+(c.c-c.b)*u;y+=(b-y)*u;b+=(c.c+(c.d-c.c)*u-b)*u;x=g.a+(g.b-g.a)*u;_=g.b+(g.c-g.b)*u;x+=(_-x)*u;_+=(g.c+(g.d-g.c)*u-_)*u;h=i?Math.atan2(_-x,b-y)*S+w:this._initialRotations[s];this._mod[l]&&(h=this._mod[l](h,n));r[l]?n[l](h):n[l]=h}}}}}),L=C.prototype;C.bezierThrough=E;C.cubicToQuadratic=S;C._autoCSS=true;C.quadraticToCubic=function(e,t,r){return new _(e,(2*t+e)/3,(2*t+r)/3,r)};C._cssRegister=function(){var e=b.CSSPlugin;if(!e)return;var t=e._internals,r=t._parseToProxy,n=t._setPluginRatio,i=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,o,s,l){t instanceof Array&&(t={values:t});l=new C;var c=t.values,u=c.length-1,h=[],f={},p,d,m;if(u<0)return s;for(p=0;p<=u;p++){m=r(e,c[p],o,s,l,u!==p);h[p]=m.end}for(d in t)f[d]=t[d];f.values=h;s=new i(e,"bezier",0,0,m.pt,2);s.data=m;s.plugin=l;s.setRatio=n;0===f.autoRotate&&(f.autoRotate=true);if(f.autoRotate&&!(f.autoRotate instanceof Array)){p=true===f.autoRotate?0:Number(f.autoRotate);f.autoRotate=null!=m.end.left?[["left","top","rotation",p,false]]:null!=m.end.x&&[["x","y","rotation",p,false]]}if(f.autoRotate){o._transform||o._enableTransforms(false);m.autoRotate=o._target._gsTransform;m.proxy.rotation=m.autoRotate.rotation||0;o._overwriteProps.push("rotation")}l._onInitTween(m.proxy,f,o._tween);return s}})};L._mod=function(e){var t=this._overwriteProps,r=t.length,n;while(--r>-1){n=e[t[r]];n&&"function"===typeof n&&(this._mod[t[r]]=n)}};L._kill=function(e){var t=this._props,r,n;for(r in this._beziers)if(r in e){delete this._beziers[r];delete this._func[r];n=t.length;while(--n>-1)t[n]===r&&t.splice(n,1)}t=this._autoRotate;if(t){n=t.length;while(--n>-1)e[t[n][2]]&&t.splice(n,1)}return this._super._kill.call(this,e)};n["k"]._gsDefine("easing.Back",["easing.Ease"],function(){var e=n["k"].GreenSockGlobals||n["k"],t=e.com.greensock,r=2*Math.PI,i=Math.PI/2,a=t._class,o=function(e,t){var r=a("easing."+e,function(){},true),i=r.prototype=new n["b"];i.constructor=r;i.getRatio=t;return r},s=n["b"].register||function(){},l=function(e,t,r,n,i){var o=a("easing."+e,{easeOut:new t,easeIn:new r,easeInOut:new n},true);s(o,e);return o},c=function(e,t,r){this.t=e;this.v=t;if(r){this.next=r;r.prev=this;this.c=r.v-t;this.gap=r.t-e}},u=function(e,t){var r=a("easing."+e,function(e){this._p1=e||0===e?e:1.70158;this._p2=1.525*this._p1},true),i=r.prototype=new n["b"];i.constructor=r;i.getRatio=t;i.config=function(e){return new r(e)};return r},h=l("Back",u("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),u("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),u("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),f=a("easing.SlowMo",function(e,t,r){t=t||0===t?t:.7;null==e?e=.7:e>1&&(e=1);this._p=1!==e?t:0;this._p1=(1-e)/2;this._p2=e;this._p3=this._p1+this._p2;this._calcEnd=true===r},true),p=f.prototype=new n["b"],d,m,v,g;p.constructor=f;p.getRatio=function(e){var t=e+(.5-e)*this._p;if(e<this._p1)return this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t;if(e>this._p3)return this._calcEnd?1===e?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e;return this._calcEnd?1:t};f.ease=new f(.7,.7);p.config=f.config=function(e,t,r){return new f(e,t,r)};d=a("easing.SteppedEase",function(e,t){e=e||1;this._p1=1/e;this._p2=e+(t?0:1);this._p3=t?1:0},true);p=d.prototype=new n["b"];p.constructor=d;p.getRatio=function(e){e<0?e=0:e>=1&&(e=.999999999);return((this._p2*e|0)+this._p3)*this._p1};p.config=d.config=function(e,t){return new d(e,t)};m=a("easing.ExpoScaleEase",function(e,t,r){this._p1=Math.log(t/e);this._p2=t-e;this._p3=e;this._ease=r},true);p=m.prototype=new n["b"];p.constructor=m;p.getRatio=function(e){this._ease&&(e=this._ease.getRatio(e));return(this._p3*Math.exp(this._p1*e)-this._p3)/this._p2};p.config=m.config=function(e,t,r){return new m(e,t,r)};v=a("easing.RoughEase",function(e){e=e||{};var t=e.taper||"none",r=[],i=0,a=0|(e.points||20),o=a,s=false!==e.randomize,l=true===e.clamp,u=e.template instanceof n["b"]?e.template:null,h="number"===typeof e.strength?.4*e.strength:.4,f,p,d,m,v,g;while(--o>-1){f=s?Math.random():1/a*o;p=u?u.getRatio(f):f;if("none"===t)d=h;else if("out"===t){m=1-f;d=m*m*h}else if("in"===t)d=f*f*h;else if(f<.5){m=2*f;d=m*m*.5*h}else{m=2*(1-f);d=m*m*.5*h}s?p+=Math.random()*d-.5*d:o%2?p+=.5*d:p-=.5*d;l&&(p>1?p=1:p<0&&(p=0));r[i++]={x:f,y:p}}r.sort(function(e,t){return e.x-t.x});g=new c(1,1,null);o=a;while(--o>-1){v=r[o];g=new c(v.x,v.y,g)}this._prev=new c(0,0,0!==g.t?g:g.next)},true);p=v.prototype=new n["b"];p.constructor=v;p.getRatio=function(e){var t=this._prev;if(e>t.t){while(t.next&&e>=t.t)t=t.next;t=t.prev}else while(t.prev&&e<=t.t)t=t.prev;this._prev=t;return t.v+(e-t.t)/t.gap*t.c};p.config=function(e){return new v(e)};v.ease=new v;l("Bounce",o("BounceOut",function(e){if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75)return 7.5625*(e-=1.5/2.75)*e+.75;if(e<2.5/2.75)return 7.5625*(e-=2.25/2.75)*e+.9375;return 7.5625*(e-=2.625/2.75)*e+.984375}),o("BounceIn",function(e){if((e=1-e)<1/2.75)return 1-7.5625*e*e;if(e<2/2.75)return 1-(7.5625*(e-=1.5/2.75)*e+.75);if(e<2.5/2.75)return 1-(7.5625*(e-=2.25/2.75)*e+.9375);return 1-(7.5625*(e-=2.625/2.75)*e+.984375)}),o("BounceInOut",function(e){var t=e<.5;e=t?1-2*e:2*e-1;e<1/2.75?e*=7.5625*e:e=e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375;return t?.5*(1-e):.5*e+.5}));l("Circ",o("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),o("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),o("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}));g=function(e,t,i){var o=a("easing."+e,function(e,t){this._p1=e>=1?e:1;this._p2=(t||i)/(e<1?e:1);this._p3=this._p2/r*(Math.asin(1/this._p1)||0);this._p2=r/this._p2},true),s=o.prototype=new n["b"];s.constructor=o;s.getRatio=t;s.config=function(e,t){return new o(e,t)};return o};l("Elastic",g("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),g("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),g("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45));l("Expo",o("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),o("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),o("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))}));l("Sine",o("SineOut",function(e){return Math.sin(e*i)}),o("SineIn",function(e){return 1-Math.cos(e*i)}),o("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)}));a("easing.EaseLookup",{find:function(e){return n["b"].map[e]}},true);s(e.SlowMo,"SlowMo","ease,");s(v,"RoughEase","ease,");s(d,"SteppedEase","ease,");return h},true);var O=n["m"].Back;var I=n["m"].Elastic;var B=n["m"].Bounce;var U=n["m"].RoughEase;var D=n["m"].SlowMo;var k=n["m"].SteppedEase;var N=n["m"].Circ;var F=n["m"].Expo;var G=n["m"].Sine;var z=n["m"].ExpoScaleEase;var H=o;H._autoActivated=[i,a,l,c,C,u,d,O,I,B,U,D,k,N,F,G,z];r.d(t,"default",function(){return H});r.d(t,"TweenLite",function(){return n["l"]});r.d(t,"TweenMax",function(){return H});r.d(t,"TimelineLite",function(){return i});r.d(t,"TimelineMax",function(){return a});r.d(t,"CSSPlugin",function(){return l});r.d(t,"AttrPlugin",function(){return c});r.d(t,"BezierPlugin",function(){return C});r.d(t,"RoundPropsPlugin",function(){return u});r.d(t,"DirectionalRotationPlugin",function(){return d});r.d(t,"TweenPlugin",function(){return n["j"]});r.d(t,"Ease",function(){return n["b"]});r.d(t,"Power0",function(){return n["d"]});r.d(t,"Power1",function(){return n["e"]});r.d(t,"Power2",function(){return n["f"]});r.d(t,"Power3",function(){return n["g"]});r.d(t,"Power4",function(){return n["h"]});r.d(t,"Linear",function(){return n["c"]});r.d(t,"Back",function(){return O});r.d(t,"Elastic",function(){return I});r.d(t,"Bounce",function(){return B});r.d(t,"RoughEase",function(){return U});r.d(t,"SlowMo",function(){return D});r.d(t,"SteppedEase",function(){return k});r.d(t,"Circ",function(){return N});r.d(t,"Expo",function(){return F});r.d(t,"Sine",function(){return G});r.d(t,"ExpoScaleEase",function(){return z});r.d(t,"_gsScope",function(){return n["k"]})},109:function(e,t,r){(function(t){var r;var r;(function(t){var r;true;e.exports=t()})(function(){var e,n,i;return function(){function e(t,n,i){function a(s,l){if(!n[s]){if(!t[s]){var c="function"==typeof r&&r;if(!l&&c)return r(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){var r=t[s][1][e];return a(r||e)},h,h.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof r&&r,s=0;s<i.length;s++)a(i[s]);return a}return e}()({1:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Vertices");var a=e("../geometry/Vector");var o=e("../core/Sleeping");var s=e("../render/Render");var l=e("../core/Common");var c=e("../geometry/Bounds");var u=e("../geometry/Axes");(function(){n._inertiaScale=4;n._nextCollidingGroupId=1;n._nextNonCollidingGroupId=-1;n._nextCategory=1;n.create=function(t){var r={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:i.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:false,isStatic:false,isSleeping:false,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:true,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}};var n=l.extend(r,t);e(n,t);return n};n.nextGroup=function(e){if(e)return n._nextNonCollidingGroupId--;return n._nextCollidingGroupId++};n.nextCategory=function(){n._nextCategory=n._nextCategory<<1;return n._nextCategory};var e=function(e,t){t=t||{};n.set(e,{bounds:e.bounds||c.create(e.vertices),positionPrev:e.positionPrev||a.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e});i.rotate(e.vertices,e.angle,e.position);u.rotate(e.axes,e.angle);c.update(e.bounds,e.vertices,e.velocity);n.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var r=e.isStatic?"#2e2b44":l.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]),o="#000";e.render.fillStyle=e.render.fillStyle||r;e.render.strokeStyle=e.render.strokeStyle||o;e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x);e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};n.set=function(e,t,r){var i;if("string"===typeof t){i=t;t={};t[i]=r}for(i in t){r=t[i];if(!t.hasOwnProperty(i))continue;switch(i){case"isStatic":n.setStatic(e,r);break;case"isSleeping":o.set(e,r);break;case"mass":n.setMass(e,r);break;case"density":n.setDensity(e,r);break;case"inertia":n.setInertia(e,r);break;case"vertices":n.setVertices(e,r);break;case"position":n.setPosition(e,r);break;case"angle":n.setAngle(e,r);break;case"velocity":n.setVelocity(e,r);break;case"angularVelocity":n.setAngularVelocity(e,r);break;case"parts":n.setParts(e,r);break;default:e[i]=r}}};n.setStatic=function(e,t){for(var r=0;r<e.parts.length;r++){var n=e.parts[r];n.isStatic=t;if(t){n._original={restitution:n.restitution,friction:n.friction,mass:n.mass,inertia:n.inertia,density:n.density,inverseMass:n.inverseMass,inverseInertia:n.inverseInertia};n.restitution=0;n.friction=1;n.mass=n.inertia=n.density=Infinity;n.inverseMass=n.inverseInertia=0;n.positionPrev.x=n.position.x;n.positionPrev.y=n.position.y;n.anglePrev=n.angle;n.angularVelocity=0;n.speed=0;n.angularSpeed=0;n.motion=0}else if(n._original){n.restitution=n._original.restitution;n.friction=n._original.friction;n.mass=n._original.mass;n.inertia=n._original.inertia;n.density=n._original.density;n.inverseMass=n._original.inverseMass;n.inverseInertia=n._original.inverseInertia;delete n._original}}};n.setMass=function(e,t){var r=e.inertia/(e.mass/6);e.inertia=r*(t/6);e.inverseInertia=1/e.inertia;e.mass=t;e.inverseMass=1/e.mass;e.density=e.mass/e.area};n.setDensity=function(e,t){n.setMass(e,t*e.area);e.density=t};n.setInertia=function(e,t){e.inertia=t;e.inverseInertia=1/e.inertia};n.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=i.create(t,e);e.axes=u.fromVertices(e.vertices);e.area=i.area(e.vertices);n.setMass(e,e.density*e.area);var r=i.centre(e.vertices);i.translate(e.vertices,r,-1);n.setInertia(e,n._inertiaScale*i.inertia(e.vertices,e.mass));i.translate(e.vertices,e.position);c.update(e.bounds,e.vertices,e.velocity)};n.setParts=function(e,t,r){var a;t=t.slice(0);e.parts.length=0;e.parts.push(e);e.parent=e;for(a=0;a<t.length;a++){var o=t[a];if(o!==e){o.parent=e;e.parts.push(o)}}if(1===e.parts.length)return;r="undefined"===typeof r||r;if(r){var s=[];for(a=0;a<t.length;a++)s=s.concat(t[a].vertices);i.clockwiseSort(s);var l=i.hull(s),c=i.centre(l);n.setVertices(e,l);i.translate(e.vertices,c)}var u=n._totalProperties(e);e.area=u.area;e.parent=e;e.position.x=u.centre.x;e.position.y=u.centre.y;e.positionPrev.x=u.centre.x;e.positionPrev.y=u.centre.y;n.setMass(e,u.mass);n.setInertia(e,u.inertia);n.setPosition(e,u.centre)};n.setPosition=function(e,t){var r=a.sub(t,e.position);e.positionPrev.x+=r.x;e.positionPrev.y+=r.y;for(var n=0;n<e.parts.length;n++){var o=e.parts[n];o.position.x+=r.x;o.position.y+=r.y;i.translate(o.vertices,r);c.update(o.bounds,o.vertices,e.velocity)}};n.setAngle=function(e,t){var r=t-e.angle;e.anglePrev+=r;for(var n=0;n<e.parts.length;n++){var o=e.parts[n];o.angle+=r;i.rotate(o.vertices,r,e.position);u.rotate(o.axes,r);c.update(o.bounds,o.vertices,e.velocity);n>0&&a.rotateAbout(o.position,r,e.position,o.position)}};n.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x;e.positionPrev.y=e.position.y-t.y;e.velocity.x=t.x;e.velocity.y=t.y;e.speed=a.magnitude(e.velocity)};n.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t;e.angularVelocity=t;e.angularSpeed=Math.abs(e.angularVelocity)};n.translate=function(e,t){n.setPosition(e,a.add(e.position,t))};n.rotate=function(e,t,r){if(r){var i=Math.cos(t),a=Math.sin(t),o=e.position.x-r.x,s=e.position.y-r.y;n.setPosition(e,{x:r.x+(o*i-s*a),y:r.y+(o*a+s*i)});n.setAngle(e,e.angle+t)}else n.setAngle(e,e.angle+t)};n.scale=function(e,t,r,a){var o=0,s=0;a=a||e.position;for(var l=0;l<e.parts.length;l++){var h=e.parts[l];i.scale(h.vertices,t,r,a);h.axes=u.fromVertices(h.vertices);h.area=i.area(h.vertices);n.setMass(h,e.density*h.area);i.translate(h.vertices,{x:-h.position.x,y:-h.position.y});n.setInertia(h,n._inertiaScale*i.inertia(h.vertices,h.mass));i.translate(h.vertices,{x:h.position.x,y:h.position.y});if(l>0){o+=h.area;s+=h.inertia}h.position.x=a.x+(h.position.x-a.x)*t;h.position.y=a.y+(h.position.y-a.y)*r;c.update(h.bounds,h.vertices,e.velocity)}if(e.parts.length>1){e.area=o;if(!e.isStatic){n.setMass(e,e.density*o);n.setInertia(e,s)}}e.circleRadius&&(t===r?e.circleRadius*=t:e.circleRadius=null)};n.update=function(e,t,r,n){var o=Math.pow(t*r*e.timeScale,2);var s=1-e.frictionAir*r*e.timeScale,l=e.position.x-e.positionPrev.x,h=e.position.y-e.positionPrev.y;e.velocity.x=l*s*n+e.force.x/e.mass*o;e.velocity.y=h*s*n+e.force.y/e.mass*o;e.positionPrev.x=e.position.x;e.positionPrev.y=e.position.y;e.position.x+=e.velocity.x;e.position.y+=e.velocity.y;e.angularVelocity=(e.angle-e.anglePrev)*s*n+e.torque/e.inertia*o;e.anglePrev=e.angle;e.angle+=e.angularVelocity;e.speed=a.magnitude(e.velocity);e.angularSpeed=Math.abs(e.angularVelocity);for(var f=0;f<e.parts.length;f++){var p=e.parts[f];i.translate(p.vertices,e.velocity);if(f>0){p.position.x+=e.velocity.x;p.position.y+=e.velocity.y}if(0!==e.angularVelocity){i.rotate(p.vertices,e.angularVelocity,e.position);u.rotate(p.axes,e.angularVelocity);f>0&&a.rotateAbout(p.position,e.angularVelocity,e.position,p.position)}c.update(p.bounds,p.vertices,e.velocity)}};n.applyForce=function(e,t,r){e.force.x+=r.x;e.force.y+=r.y;var n={x:t.x-e.position.x,y:t.y-e.position.y};e.torque+=n.x*r.y-n.y*r.x};n._totalProperties=function(e){var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}};for(var r=1===e.parts.length?0:1;r<e.parts.length;r++){var n=e.parts[r],i=Infinity!==n.mass?n.mass:1;t.mass+=i;t.area+=n.area;t.inertia+=n.inertia;t.centre=a.add(t.centre,a.mult(n.position,i))}t.centre=a.div(t.centre,t.mass);return t}})()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(e,t,r){var n={};t.exports=n;var i=e("../core/Events");var a=e("../core/Common");var o=e("../geometry/Bounds");var s=e("./Body");(function(){n.create=function(e){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:false,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)};n.setModified=function(e,t,r,i){e.isModified=t;r&&e.parent&&n.setModified(e.parent,t,r,i);if(i)for(var a=0;a<e.composites.length;a++){var o=e.composites[a];n.setModified(o,t,r,i)}};n.add=function(e,t){var r=[].concat(t);i.trigger(e,"beforeAdd",{object:t});for(var o=0;o<r.length;o++){var s=r[o];switch(s.type){case"body":if(s.parent!==s){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(e,s);break;case"constraint":n.addConstraint(e,s);break;case"composite":n.addComposite(e,s);break;case"mouseConstraint":n.addConstraint(e,s.constraint);break}}i.trigger(e,"afterAdd",{object:t});return e};n.remove=function(e,t,r){var a=[].concat(t);i.trigger(e,"beforeRemove",{object:t});for(var o=0;o<a.length;o++){var s=a[o];switch(s.type){case"body":n.removeBody(e,s,r);break;case"constraint":n.removeConstraint(e,s,r);break;case"composite":n.removeComposite(e,s,r);break;case"mouseConstraint":n.removeConstraint(e,s.constraint);break}}i.trigger(e,"afterRemove",{object:t});return e};n.addComposite=function(e,t){e.composites.push(t);t.parent=e;n.setModified(e,true,true,false);return e};n.removeComposite=function(e,t,r){var i=a.indexOf(e.composites,t);if(-1!==i){n.removeCompositeAt(e,i);n.setModified(e,true,true,false)}if(r)for(var o=0;o<e.composites.length;o++)n.removeComposite(e.composites[o],t,true);return e};n.removeCompositeAt=function(e,t){e.composites.splice(t,1);n.setModified(e,true,true,false);return e};n.addBody=function(e,t){e.bodies.push(t);n.setModified(e,true,true,false);return e};n.removeBody=function(e,t,r){var i=a.indexOf(e.bodies,t);if(-1!==i){n.removeBodyAt(e,i);n.setModified(e,true,true,false)}if(r)for(var o=0;o<e.composites.length;o++)n.removeBody(e.composites[o],t,true);return e};n.removeBodyAt=function(e,t){e.bodies.splice(t,1);n.setModified(e,true,true,false);return e};n.addConstraint=function(e,t){e.constraints.push(t);n.setModified(e,true,true,false);return e};n.removeConstraint=function(e,t,r){var i=a.indexOf(e.constraints,t);-1!==i&&n.removeConstraintAt(e,i);if(r)for(var o=0;o<e.composites.length;o++)n.removeConstraint(e.composites[o],t,true);return e};n.removeConstraintAt=function(e,t){e.constraints.splice(t,1);n.setModified(e,true,true,false);return e};n.clear=function(e,t,r){if(r)for(var i=0;i<e.composites.length;i++)n.clear(e.composites[i],t,true);t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0;e.constraints.length=0;e.composites.length=0;n.setModified(e,true,true,false);return e};n.allBodies=function(e){var t=[].concat(e.bodies);for(var r=0;r<e.composites.length;r++)t=t.concat(n.allBodies(e.composites[r]));return t};n.allConstraints=function(e){var t=[].concat(e.constraints);for(var r=0;r<e.composites.length;r++)t=t.concat(n.allConstraints(e.composites[r]));return t};n.allComposites=function(e){var t=[].concat(e.composites);for(var r=0;r<e.composites.length;r++)t=t.concat(n.allComposites(e.composites[r]));return t};n.get=function(e,t,r){var i,a;switch(r){case"body":i=n.allBodies(e);break;case"constraint":i=n.allConstraints(e);break;case"composite":i=n.allComposites(e).concat(e);break}if(!i)return null;a=i.filter(function(e){return e.id.toString()===t.toString()});return 0===a.length?null:a[0]};n.move=function(e,t,r){n.remove(e,t);n.add(r,t);return e};n.rebase=function(e){var t=n.allBodies(e).concat(n.allConstraints(e)).concat(n.allComposites(e));for(var r=0;r<t.length;r++)t[r].id=a.nextId();n.setModified(e,true,true,false);return e};n.translate=function(e,t,r){var i=r?n.allBodies(e):e.bodies;for(var a=0;a<i.length;a++)s.translate(i[a],t);n.setModified(e,true,true,false);return e};n.rotate=function(e,t,r,i){var a=Math.cos(t),o=Math.sin(t),l=i?n.allBodies(e):e.bodies;for(var c=0;c<l.length;c++){var u=l[c],h=u.position.x-r.x,f=u.position.y-r.y;s.setPosition(u,{x:r.x+(h*a-f*o),y:r.y+(h*o+f*a)});s.rotate(u,t)}n.setModified(e,true,true,false);return e};n.scale=function(e,t,r,i,a){var o=a?n.allBodies(e):e.bodies;for(var l=0;l<o.length;l++){var c=o[l],u=c.position.x-i.x,h=c.position.y-i.y;s.setPosition(c,{x:i.x+u*t,y:i.y+h*r});s.scale(c,t,r)}n.setModified(e,true,true,false);return e};n.bounds=function(e){var t=n.allBodies(e),r=[];for(var i=0;i<t.length;i+=1){var a=t[i];r.push(a.bounds.min,a.bounds.max)}return o.create(r)}})()},{"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"./Body":1}],3:[function(e,t,r){var n={};t.exports=n;var i=e("./Composite");var a=e("../constraint/Constraint");var o=e("../core/Common");(function(){n.create=function(e){var t=i.create();var r={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-Infinity,y:-Infinity},max:{x:Infinity,y:Infinity}}};return o.extend(t,r,e)}})()},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(e,t,r){var n={};t.exports=n;(function(){n.create=function(e){return{id:n.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}};n.id=function(e){return e.body.id+"_"+e.index}})()},{}],5:[function(e,t,r){var n={};t.exports=n;var i=e("./SAT");var a=e("./Pair");var o=e("../geometry/Bounds");(function(){n.collisions=function(e,t){var r=[],s=t.pairs.table;for(var l=0;l<e.length;l++){var c=e[l][0],u=e[l][1];if((c.isStatic||c.isSleeping)&&(u.isStatic||u.isSleeping))continue;if(!n.canCollide(c.collisionFilter,u.collisionFilter))continue;if(o.overlaps(c.bounds,u.bounds))for(var h=c.parts.length>1?1:0;h<c.parts.length;h++){var f=c.parts[h];for(var p=u.parts.length>1?1:0;p<u.parts.length;p++){var d=u.parts[p];if(f===c&&d===u||o.overlaps(f.bounds,d.bounds)){var m=a.id(f,d),v=s[m],g;g=v&&v.isActive?v.collision:null;var y=i.collides(f,d,g);y.collided&&r.push(y)}}}}return r};n.canCollide=function(e,t){if(e.group===t.group&&0!==e.group)return e.group>0;return 0!==(e.mask&t.category)&&0!==(t.mask&e.category)}})()},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(e,t,r){var n={};t.exports=n;var i=e("./Pair");var a=e("./Detector");var o=e("../core/Common");(function(){n.create=function(e){var t={controller:n,detector:a.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(t,e)};n.update=function(e,t,r,i){var a,o,s,l=r.world,c=e.buckets,u,h,f=false;for(a=0;a<t.length;a++){var p=t[a];if(p.isSleeping&&!i)continue;if(p.bounds.max.x<l.bounds.min.x||p.bounds.min.x>l.bounds.max.x||p.bounds.max.y<l.bounds.min.y||p.bounds.min.y>l.bounds.max.y)continue;var d=n._getRegion(e,p);if(!p.region||d.id!==p.region.id||i){p.region&&!i||(p.region=d);var m=n._regionUnion(d,p.region);for(o=m.startCol;o<=m.endCol;o++)for(s=m.startRow;s<=m.endRow;s++){h=n._getBucketId(o,s);u=c[h];var v=o>=d.startCol&&o<=d.endCol&&s>=d.startRow&&s<=d.endRow;var g=o>=p.region.startCol&&o<=p.region.endCol&&s>=p.region.startRow&&s<=p.region.endRow;!v&&g&&g&&u&&n._bucketRemoveBody(e,u,p);if(p.region===d||v&&!g||i){u||(u=n._createBucket(c,h));n._bucketAddBody(e,u,p)}}p.region=d;f=true}}f&&(e.pairsList=n._createActivePairsList(e))};n.clear=function(e){e.buckets={};e.pairs={};e.pairsList=[]};n._regionUnion=function(e,t){var r=Math.min(e.startCol,t.startCol),i=Math.max(e.endCol,t.endCol),a=Math.min(e.startRow,t.startRow),o=Math.max(e.endRow,t.endRow);return n._createRegion(r,i,a,o)};n._getRegion=function(e,t){var r=t.bounds,i=Math.floor(r.min.x/e.bucketWidth),a=Math.floor(r.max.x/e.bucketWidth),o=Math.floor(r.min.y/e.bucketHeight),s=Math.floor(r.max.y/e.bucketHeight);return n._createRegion(i,a,o,s)};n._createRegion=function(e,t,r,n){return{id:e+","+t+","+r+","+n,startCol:e,endCol:t,startRow:r,endRow:n}};n._getBucketId=function(e,t){return"C"+e+"R"+t};n._createBucket=function(e,t){var r=e[t]=[];return r};n._bucketAddBody=function(e,t,r){for(var n=0;n<t.length;n++){var a=t[n];if(r.id===a.id||r.isStatic&&a.isStatic)continue;var o=i.id(r,a),s=e.pairs[o];s?s[2]+=1:e.pairs[o]=[r,a,1]}t.push(r)};n._bucketRemoveBody=function(e,t,r){t.splice(o.indexOf(t,r),1);for(var n=0;n<t.length;n++){var a=t[n],s=i.id(r,a),l=e.pairs[s];l&&(l[2]-=1)}};n._createActivePairsList=function(e){var t,r,n=[];t=o.keys(e.pairs);for(var i=0;i<t.length;i++){r=e.pairs[t[i]];r[2]>0?n.push(r):delete e.pairs[t[i]]}return n}})()},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(e,t,r){var n={};t.exports=n;var i=e("./Contact");(function(){n.create=function(e,t){var r=e.bodyA,i=e.bodyB,a=e.parentA,o=e.parentB;var s={id:n.id(r,i),bodyA:r,bodyB:i,contacts:{},activeContacts:[],separation:0,isActive:true,isSensor:r.isSensor||i.isSensor,timeCreated:t,timeUpdated:t,inverseMass:a.inverseMass+o.inverseMass,friction:Math.min(a.friction,o.friction),frictionStatic:Math.max(a.frictionStatic,o.frictionStatic),restitution:Math.max(a.restitution,o.restitution),slop:Math.max(a.slop,o.slop)};n.update(s,e,t);return s};n.update=function(e,t,r){var a=e.contacts,o=t.supports,s=e.activeContacts,l=t.parentA,c=t.parentB;e.collision=t;e.inverseMass=l.inverseMass+c.inverseMass;e.friction=Math.min(l.friction,c.friction);e.frictionStatic=Math.max(l.frictionStatic,c.frictionStatic);e.restitution=Math.max(l.restitution,c.restitution);e.slop=Math.max(l.slop,c.slop);s.length=0;if(t.collided){for(var u=0;u<o.length;u++){var h=o[u],f=i.id(h),p=a[f];p?s.push(p):s.push(a[f]=i.create(h))}e.separation=t.depth;n.setActive(e,true,r)}else true===e.isActive&&n.setActive(e,false,r)};n.setActive=function(e,t,r){if(t){e.isActive=true;e.timeUpdated=r}else{e.isActive=false;e.activeContacts.length=0}};n.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}})()},{"./Contact":4}],8:[function(e,t,r){var n={};t.exports=n;var i=e("./Pair");var a=e("../core/Common");(function(){n._pairMaxIdleLife=1e3;n.create=function(e){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)};n.update=function(e,t,r){var n=e.list,o=e.table,s=e.collisionStart,l=e.collisionEnd,c=e.collisionActive,u=[],h,f,p,d;s.length=0;l.length=0;c.length=0;for(d=0;d<t.length;d++){h=t[d];if(h.collided){f=i.id(h.bodyA,h.bodyB);u.push(f);p=o[f];if(p){p.isActive?c.push(p):s.push(p);i.update(p,h,r)}else{p=i.create(h,r);o[f]=p;s.push(p);n.push(p)}}}for(d=0;d<n.length;d++){p=n[d];if(p.isActive&&-1===a.indexOf(u,p.id)){i.setActive(p,false,r);l.push(p)}}};n.removeOld=function(e,t){var r=e.list,i=e.table,a=[],o,s,l,c;for(c=0;c<r.length;c++){o=r[c];s=o.collision;if(s.bodyA.isSleeping||s.bodyB.isSleeping){o.timeUpdated=t;continue}t-o.timeUpdated>n._pairMaxIdleLife&&a.push(c)}for(c=0;c<a.length;c++){l=a[c]-c;o=r[l];delete i[o.id];r.splice(l,1)}};n.clear=function(e){e.table={};e.list.length=0;e.collisionStart.length=0;e.collisionActive.length=0;e.collisionEnd.length=0;return e}})()},{"../core/Common":14,"./Pair":7}],9:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Vector");var a=e("./SAT");var o=e("../geometry/Bounds");var s=e("../factory/Bodies");var l=e("../geometry/Vertices");(function(){n.collides=function(e,t){var r=[];for(var n=0;n<t.length;n++){var i=t[n];if(o.overlaps(i.bounds,e.bounds))for(var s=1===i.parts.length?0:1;s<i.parts.length;s++){var l=i.parts[s];if(o.overlaps(l.bounds,e.bounds)){var c=a.collides(l,e);if(c.collided){r.push(c);break}}}}return r};n.ray=function(e,t,r,a){a=a||1e-100;var o=i.angle(t,r),l=i.magnitude(i.sub(t,r)),c=.5*(r.x+t.x),u=.5*(r.y+t.y),h=s.rectangle(c,u,l,a,{angle:o}),f=n.collides(h,e);for(var p=0;p<f.length;p+=1){var d=f[p];d.body=d.bodyB=d.bodyA}return f};n.region=function(e,t,r){var n=[];for(var i=0;i<e.length;i++){var a=e[i],s=o.overlaps(a.bounds,t);(s&&!r||!s&&r)&&n.push(a)}return n};n.point=function(e,t){var r=[];for(var n=0;n<e.length;n++){var i=e[n];if(o.contains(i.bounds,t))for(var a=1===i.parts.length?0:1;a<i.parts.length;a++){var s=i.parts[a];if(o.contains(s.bounds,t)&&l.contains(s.vertices,t)){r.push(i);break}}}return r}})()},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Vertices");var a=e("../geometry/Vector");var o=e("../core/Common");var s=e("../geometry/Bounds");(function(){n._restingThresh=4;n._restingThreshTangent=6;n._positionDampen=.9;n._positionWarming=.8;n._frictionNormalMultiplier=5;n.preSolvePosition=function(e){var t,r,n;for(t=0;t<e.length;t++){r=e[t];if(!r.isActive)continue;n=r.activeContacts.length;r.collision.parentA.totalContacts+=n;r.collision.parentB.totalContacts+=n}};n.solvePosition=function(e,t){var r,i,o,s,l,c,u,h,f,p={},d=a._temp[0],m=a._temp[1],v=a._temp[2],g=a._temp[3];for(r=0;r<e.length;r++){i=e[r];if(!i.isActive||i.isSensor)continue;o=i.collision;s=o.parentA;l=o.parentB;c=o.normal;u=a.sub(a.add(l.positionImpulse,l.position,d),a.add(s.positionImpulse,a.sub(l.position,o.penetration,m),v),g);i.separation=a.dot(c,u)}for(r=0;r<e.length;r++){i=e[r];if(!i.isActive||i.isSensor)continue;o=i.collision;s=o.parentA;l=o.parentB;c=o.normal;f=(i.separation-i.slop)*t;(s.isStatic||l.isStatic)&&(f*=2);if(!(s.isStatic||s.isSleeping)){h=n._positionDampen/s.totalContacts;s.positionImpulse.x+=c.x*f*h;s.positionImpulse.y+=c.y*f*h}if(!(l.isStatic||l.isSleeping)){h=n._positionDampen/l.totalContacts;l.positionImpulse.x-=c.x*f*h;l.positionImpulse.y-=c.y*f*h}}};n.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var r=e[t];r.totalContacts=0;if(0!==r.positionImpulse.x||0!==r.positionImpulse.y){for(var o=0;o<r.parts.length;o++){var l=r.parts[o];i.translate(l.vertices,r.positionImpulse);s.update(l.bounds,l.vertices,r.velocity);l.position.x+=r.positionImpulse.x;l.position.y+=r.positionImpulse.y}r.positionPrev.x+=r.positionImpulse.x;r.positionPrev.y+=r.positionImpulse.y;if(a.dot(r.positionImpulse,r.velocity)<0){r.positionImpulse.x=0;r.positionImpulse.y=0}else{r.positionImpulse.x*=n._positionWarming;r.positionImpulse.y*=n._positionWarming}}}};n.preSolveVelocity=function(e){var t,r,n,i,o,s,l,c,u,h,f,p,d,m,v=a._temp[0],g=a._temp[1];for(t=0;t<e.length;t++){n=e[t];if(!n.isActive||n.isSensor)continue;i=n.activeContacts;o=n.collision;s=o.parentA;l=o.parentB;c=o.normal;u=o.tangent;for(r=0;r<i.length;r++){h=i[r];f=h.vertex;p=h.normalImpulse;d=h.tangentImpulse;if(0!==p||0!==d){v.x=c.x*p+u.x*d;v.y=c.y*p+u.y*d;if(!(s.isStatic||s.isSleeping)){m=a.sub(f,s.position,g);s.positionPrev.x+=v.x*s.inverseMass;s.positionPrev.y+=v.y*s.inverseMass;s.anglePrev+=a.cross(m,v)*s.inverseInertia}if(!(l.isStatic||l.isSleeping)){m=a.sub(f,l.position,g);l.positionPrev.x-=v.x*l.inverseMass;l.positionPrev.y-=v.y*l.inverseMass;l.anglePrev-=a.cross(m,v)*l.inverseInertia}}}}};n.solveVelocity=function(e,t){var r=t*t,i=a._temp[0],s=a._temp[1],l=a._temp[2],c=a._temp[3],u=a._temp[4],h=a._temp[5];for(var f=0;f<e.length;f++){var p=e[f];if(!p.isActive||p.isSensor)continue;var d=p.collision,m=d.parentA,v=d.parentB,g=d.normal,y=d.tangent,x=p.activeContacts,b=1/x.length;m.velocity.x=m.position.x-m.positionPrev.x;m.velocity.y=m.position.y-m.positionPrev.y;v.velocity.x=v.position.x-v.positionPrev.x;v.velocity.y=v.position.y-v.positionPrev.y;m.angularVelocity=m.angle-m.anglePrev;v.angularVelocity=v.angle-v.anglePrev;for(var _=0;_<x.length;_++){var w=x[_],S=w.vertex,T=a.sub(S,m.position,s),M=a.sub(S,v.position,l),E=a.add(m.velocity,a.mult(a.perp(T),m.angularVelocity),c),A=a.add(v.velocity,a.mult(a.perp(M),v.angularVelocity),u),R=a.sub(E,A,h),P=a.dot(g,R);var C=a.dot(y,R),L=Math.abs(C),O=o.sign(C);var I=(1+p.restitution)*P,B=o.clamp(p.separation+P,0,1)*n._frictionNormalMultiplier;var U=C,D=Infinity;if(L>p.friction*p.frictionStatic*B*r){D=L;U=o.clamp(p.friction*O*r,-D,D)}var k=a.cross(T,g),N=a.cross(M,g),F=b/(m.inverseMass+v.inverseMass+m.inverseInertia*k*k+v.inverseInertia*N*N);I*=F;U*=F;if(P<0&&P*P>n._restingThresh*r)w.normalImpulse=0;else{var G=w.normalImpulse;w.normalImpulse=Math.min(w.normalImpulse+I,0);I=w.normalImpulse-G}if(C*C>n._restingThreshTangent*r)w.tangentImpulse=0;else{var z=w.tangentImpulse;w.tangentImpulse=o.clamp(w.tangentImpulse+U,-D,D);U=w.tangentImpulse-z}i.x=g.x*I+y.x*U;i.y=g.y*I+y.y*U;if(!(m.isStatic||m.isSleeping)){m.positionPrev.x+=i.x*m.inverseMass;m.positionPrev.y+=i.y*m.inverseMass;m.anglePrev+=a.cross(T,i)*m.inverseInertia}if(!(v.isStatic||v.isSleeping)){v.positionPrev.x-=i.x*v.inverseMass;v.positionPrev.y-=i.y*v.inverseMass;v.anglePrev-=a.cross(M,i)*v.inverseInertia}}}}})()},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Vertices");var a=e("../geometry/Vector");(function(){n.collides=function(e,t,r){var o,s,l,c,u=false;if(r){var h=e.parent,f=t.parent,p=h.speed*h.speed+h.angularSpeed*h.angularSpeed+f.speed*f.speed+f.angularSpeed*f.angularSpeed;u=r&&r.collided&&p<.2;c=r}else c={collided:false,bodyA:e,bodyB:t};if(r&&u){var d=c.axisBody,m=d===e?t:e,v=[d.axes[r.axisNumber]];l=n._overlapAxes(d.vertices,m.vertices,v);c.reused=true;if(l.overlap<=0){c.collided=false;return c}}else{o=n._overlapAxes(e.vertices,t.vertices,e.axes);if(o.overlap<=0){c.collided=false;return c}s=n._overlapAxes(t.vertices,e.vertices,t.axes);if(s.overlap<=0){c.collided=false;return c}if(o.overlap<s.overlap){l=o;c.axisBody=e}else{l=s;c.axisBody=t}c.axisNumber=l.axisNumber}c.bodyA=e.id<t.id?e:t;c.bodyB=e.id<t.id?t:e;c.collided=true;c.depth=l.overlap;c.parentA=c.bodyA.parent;c.parentB=c.bodyB.parent;e=c.bodyA;t=c.bodyB;a.dot(l.axis,a.sub(t.position,e.position))<0?c.normal={x:l.axis.x,y:l.axis.y}:c.normal={x:-l.axis.x,y:-l.axis.y};c.tangent=a.perp(c.normal);c.penetration=c.penetration||{};c.penetration.x=c.normal.x*c.depth;c.penetration.y=c.normal.y*c.depth;var g=n._findSupports(e,t,c.normal),y=[];i.contains(e.vertices,g[0])&&y.push(g[0]);i.contains(e.vertices,g[1])&&y.push(g[1]);if(y.length<2){var x=n._findSupports(t,e,a.neg(c.normal));i.contains(t.vertices,x[0])&&y.push(x[0]);y.length<2&&i.contains(t.vertices,x[1])&&y.push(x[1])}y.length<1&&(y=[g[0]]);c.supports=y;return c};n._overlapAxes=function(e,t,r){var i=a._temp[0],o=a._temp[1],s={overlap:Number.MAX_VALUE},l,c;for(var u=0;u<r.length;u++){c=r[u];n._projectToAxis(i,e,c);n._projectToAxis(o,t,c);l=Math.min(i.max-o.min,o.max-i.min);if(l<=0){s.overlap=l;return s}if(l<s.overlap){s.overlap=l;s.axis=c;s.axisNumber=u}}return s};n._projectToAxis=function(e,t,r){var n=a.dot(t[0],r),i=n;for(var o=1;o<t.length;o+=1){var s=a.dot(t[o],r);s>i?i=s:s<n&&(n=s)}e.min=n;e.max=i};n._findSupports=function(e,t,r){var n=Number.MAX_VALUE,i=a._temp[0],o=t.vertices,s=e.position,l,c,u,h;for(var f=0;f<o.length;f++){c=o[f];i.x=c.x-s.x;i.y=c.y-s.y;l=-a.dot(r,i);if(l<n){n=l;u=c}}var p=u.index-1>=0?u.index-1:o.length-1;c=o[p];i.x=c.x-s.x;i.y=c.y-s.y;n=-a.dot(r,i);h=c;var d=(u.index+1)%o.length;c=o[d];i.x=c.x-s.x;i.y=c.y-s.y;l=-a.dot(r,i);l<n&&(h=c);return[u,h]}})()},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Vertices");var a=e("../geometry/Vector");var o=e("../core/Sleeping");var s=e("../geometry/Bounds");var l=e("../geometry/Axes");var c=e("../core/Common");(function(){n._warming=.4;n._torqueDampen=1;n._minLength=1e-6;n.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0});t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var r=t.bodyA?a.add(t.bodyA.position,t.pointA):t.pointA,n=t.bodyB?a.add(t.bodyB.position,t.pointB):t.pointB,i=a.magnitude(a.sub(r,n));t.length="undefined"!==typeof t.length?t.length:i;t.id=t.id||c.nextId();t.label=t.label||"Constraint";t.type="constraint";t.stiffness=t.stiffness||(t.length>0?1:.7);t.damping=t.damping||0;t.angularStiffness=t.angularStiffness||0;t.angleA=t.bodyA?t.bodyA.angle:t.angleA;t.angleB=t.bodyB?t.bodyB.angle:t.angleB;t.plugin={};var o={visible:true,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:true};if(0===t.length&&t.stiffness>.1){o.type="pin";o.anchors=false}else t.stiffness<.9&&(o.type="spring");t.render=c.extend(o,t.render);return t};n.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var r=e[t],n=r.constraintImpulse;if(r.isStatic||0===n.x&&0===n.y&&0===n.angle)continue;r.position.x+=n.x;r.position.y+=n.y;r.angle+=n.angle}};n.solveAll=function(e,t){for(var r=0;r<e.length;r+=1){var i=e[r],a=!i.bodyA||i.bodyA&&i.bodyA.isStatic,o=!i.bodyB||i.bodyB&&i.bodyB.isStatic;(a||o)&&n.solve(e[r],t)}for(r=0;r<e.length;r+=1){i=e[r];a=!i.bodyA||i.bodyA&&i.bodyA.isStatic;o=!i.bodyB||i.bodyB&&i.bodyB.isStatic;a||o||n.solve(e[r],t)}};n.solve=function(e,t){var r=e.bodyA,i=e.bodyB,o=e.pointA,s=e.pointB;if(!r&&!i)return;if(r&&!r.isStatic){a.rotate(o,r.angle-e.angleA,o);e.angleA=r.angle}if(i&&!i.isStatic){a.rotate(s,i.angle-e.angleB,s);e.angleB=i.angle}var l=o,c=s;r&&(l=a.add(r.position,o));i&&(c=a.add(i.position,s));if(!l||!c)return;var u=a.sub(l,c),h=a.magnitude(u);h<n._minLength&&(h=n._minLength);var f=(h-e.length)/h,p=e.stiffness<1?e.stiffness*t:e.stiffness,d=a.mult(u,f*p),m=(r?r.inverseMass:0)+(i?i.inverseMass:0),v=(r?r.inverseInertia:0)+(i?i.inverseInertia:0),g=m+v,y,x,b,_,w;if(e.damping){var S=a.create();b=a.div(u,h);w=a.sub(i&&a.sub(i.position,i.positionPrev)||S,r&&a.sub(r.position,r.positionPrev)||S);_=a.dot(b,w)}if(r&&!r.isStatic){x=r.inverseMass/m;r.constraintImpulse.x-=d.x*x;r.constraintImpulse.y-=d.y*x;r.position.x-=d.x*x;r.position.y-=d.y*x;if(e.damping){r.positionPrev.x-=e.damping*b.x*_*x;r.positionPrev.y-=e.damping*b.y*_*x}y=a.cross(o,d)/g*n._torqueDampen*r.inverseInertia*(1-e.angularStiffness);r.constraintImpulse.angle-=y;r.angle-=y}if(i&&!i.isStatic){x=i.inverseMass/m;i.constraintImpulse.x+=d.x*x;i.constraintImpulse.y+=d.y*x;i.position.x+=d.x*x;i.position.y+=d.y*x;if(e.damping){i.positionPrev.x+=e.damping*b.x*_*x;i.positionPrev.y+=e.damping*b.y*_*x}y=a.cross(s,d)/g*n._torqueDampen*i.inverseInertia*(1-e.angularStiffness);i.constraintImpulse.angle+=y;i.angle+=y}};n.postSolveAll=function(e){for(var t=0;t<e.length;t++){var r=e[t],c=r.constraintImpulse;if(r.isStatic||0===c.x&&0===c.y&&0===c.angle)continue;o.set(r,false);for(var u=0;u<r.parts.length;u++){var h=r.parts[u];i.translate(h.vertices,c);if(u>0){h.position.x+=c.x;h.position.y+=c.y}if(0!==c.angle){i.rotate(h.vertices,c.angle,r.position);l.rotate(h.axes,c.angle);u>0&&a.rotateAbout(h.position,c.angle,r.position,h.position)}s.update(h.bounds,h.vertices,r.velocity)}c.angle*=n._warming;c.x*=n._warming;c.y*=n._warming}}})()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Vertices");var a=e("../core/Sleeping");var o=e("../core/Mouse");var s=e("../core/Events");var l=e("../collision/Detector");var c=e("./Constraint");var u=e("../body/Composite");var h=e("../core/Common");var f=e("../geometry/Bounds");(function(){n.create=function(e,t){var r=(e?e.mouse:null)||(t?t.mouse:null);if(!r)if(e&&e.render&&e.render.canvas)r=o.create(e.render.canvas);else if(t&&t.element)r=o.create(t.element);else{r=o.create();h.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")}var i=c.create({label:"Mouse Constraint",pointA:r.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}});var a={type:"mouseConstraint",mouse:r,element:null,body:null,constraint:i,collisionFilter:{category:1,mask:4294967295,group:0}};var l=h.extend(a,t);s.on(e,"beforeUpdate",function(){var t=u.allBodies(e.world);n.update(l,t);n._triggerEvents(l)});return l};n.update=function(e,t){var r=e.mouse,n=e.constraint,o=e.body;if(0===r.button)if(n.bodyB){a.set(n.bodyB,false);n.pointA=r.position}else for(var c=0;c<t.length;c++){o=t[c];if(f.contains(o.bounds,r.position)&&l.canCollide(o.collisionFilter,e.collisionFilter))for(var u=o.parts.length>1?1:0;u<o.parts.length;u++){var h=o.parts[u];if(i.contains(h.vertices,r.position)){n.pointA=r.position;n.bodyB=e.body=o;n.pointB={x:r.position.x-o.position.x,y:r.position.y-o.position.y};n.angleB=o.angle;a.set(o,false);s.trigger(e,"startdrag",{mouse:r,body:o});break}}}else{n.bodyB=e.body=null;n.pointB=null;o&&s.trigger(e,"enddrag",{mouse:r,body:o})}};n._triggerEvents=function(e){var t=e.mouse,r=t.sourceEvents;r.mousemove&&s.trigger(e,"mousemove",{mouse:t});r.mousedown&&s.trigger(e,"mousedown",{mouse:t});r.mouseup&&s.trigger(e,"mouseup",{mouse:t});o.clearSourceEvents(t)}})()},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(e,r,n){(function(t){var n={};r.exports=n;(function(){n._nextId=0;n._seed=0;n._nowStartTime=+new Date;n.extend=function(e,t){var r,i,a;if("boolean"===typeof t){r=2;a=t}else{r=1;a=true}for(var o=r;o<arguments.length;o++){var s=arguments[o];if(s)for(var l in s)if(a&&s[l]&&s[l].constructor===Object)if(e[l]&&e[l].constructor!==Object)e[l]=s[l];else{e[l]=e[l]||{};n.extend(e[l],a,s[l])}else e[l]=s[l]}return e};n.clone=function(e,t){return n.extend({},t,e)};n.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t};n.values=function(e){var t=[];if(Object.keys){var r=Object.keys(e);for(var n=0;n<r.length;n++)t.push(e[r[n]]);return t}for(var i in e)t.push(e[i]);return t};n.get=function(e,t,r,n){t=t.split(".").slice(r,n);for(var i=0;i<t.length;i+=1)e=e[t[i]];return e};n.set=function(e,t,r,i,a){var o=t.split(".").slice(i,a);n.get(e,t,0,-1)[o[o.length-1]]=r;return r};n.shuffle=function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(n.random()*(t+1));var i=e[t];e[t]=e[r];e[r]=i}return e};n.choose=function(e){return e[Math.floor(n.random()*e.length)]};n.isElement=function(e){if("undefined"!==typeof HTMLElement)return e instanceof HTMLElement;return!!(e&&e.nodeType&&e.nodeName)};n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)};n.isFunction=function(e){return"function"===typeof e};n.isPlainObject=function(e){return"object"===typeof e&&e.constructor===Object};n.isString=function(e){return"[object String]"===toString.call(e)};n.clamp=function(e,t,r){if(e<t)return t;if(e>r)return r;return e};n.sign=function(e){return e<0?-1:1};n.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-n._nowStartTime};n.random=function(e,t){e="undefined"!==typeof e?e:0;t="undefined"!==typeof t?t:1;return e+r()*(t-e)};var r=function(){n._seed=(9301*n._seed+49297)%233280;return n._seed/233280};n.colorToNumber=function(e){e=e.replace("#","");3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));return parseInt(e,16)};n.logLevel=1;n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};n.nextId=function(){return n._nextId++};n.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1};n.map=function(e,t){if(e.map)return e.map(t);var r=[];for(var n=0;n<e.length;n+=1)r.push(t(e[n]));return r};n.topologicalSort=function(e){var t=[],r=[],i=[];for(var a in e)r[a]||i[a]||n._topologicalSort(a,r,i,e,t);return t};n._topologicalSort=function(e,t,r,i,a){var o=i[e]||[];r[e]=true;for(var s=0;s<o.length;s+=1){var l=o[s];if(r[l])continue;t[l]||n._topologicalSort(l,t,r,i,a)}r[e]=false;t[e]=true;a.push(e)};n.chain=function(){var e=[];for(var t=0;t<arguments.length;t+=1){var r=arguments[t];r._chained?e.push.apply(e,r._chained):e.push(r)}var n=function(){var t,r=new Array(arguments.length);for(var n=0,i=arguments.length;n<i;n++)r[n]=arguments[n];for(n=0;n<e.length;n+=1){var a=e[n].apply(t,r);"undefined"!==typeof a&&(t=a)}return t};n._chained=e;return n};n.chainPathBefore=function(e,t,r){return n.set(e,t,n.chain(r,n.get(e,t)))};n.chainPathAfter=function(e,t,r){return n.set(e,t,n.chain(n.get(e,t),r))};n._requireGlobal=function(r,n){var i="undefined"!==typeof window?window[r]:"undefined"!==typeof t?t[r]:null;return i||e(n)}})()}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],15:[function(e,t,r){var n={};t.exports=n;var i=e("../body/World");var a=e("./Sleeping");var o=e("../collision/Resolver");var s=e("../render/Render");var l=e("../collision/Pairs");var c=e("./Metrics");var u=e("../collision/Grid");var h=e("./Events");var f=e("../body/Composite");var p=e("../constraint/Constraint");var d=e("./Common");var m=e("../body/Body");(function(){n.create=function(e,t){t=d.isElement(e)?t:e;e=d.isElement(e)?e:null;t=t||{};(e||t.render)&&d.warn("Engine.create: engine.render is deprecated (see docs)");var r={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:false,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:u}};var n=d.extend(r,t);if(e||n.render){var a={element:e,controller:s};n.render=d.extend(a,n.render)}n.render&&n.render.controller&&(n.render=n.render.controller.create(n.render));n.render&&(n.render.engine=n);n.world=t.world||i.create(n.world);n.pairs=l.create();n.broadphase=n.broadphase.controller.create(n.broadphase);n.metrics=n.metrics||{extended:false};return n};n.update=function(e,t,r){t=t||1e3/60;r=r||1;var i=e.world,s=e.timing,c=e.broadphase,u=[],d;s.timestamp+=t*s.timeScale;var m={timestamp:s.timestamp};h.trigger(e,"beforeUpdate",m);var v=f.allBodies(i),g=f.allConstraints(i);e.enableSleeping&&a.update(v,s.timeScale);n._bodiesApplyGravity(v,i.gravity);n._bodiesUpdate(v,t,s.timeScale,r,i.bounds);p.preSolveAll(v);for(d=0;d<e.constraintIterations;d++)p.solveAll(g,s.timeScale);p.postSolveAll(v);if(c.controller){i.isModified&&c.controller.clear(c);c.controller.update(c,v,e,i.isModified);u=c.pairsList}else u=v;i.isModified&&f.setModified(i,false,false,true);var y=c.detector(u,e);var x=e.pairs,b=s.timestamp;l.update(x,y,b);l.removeOld(x,b);e.enableSleeping&&a.afterCollisions(x.list,s.timeScale);x.collisionStart.length>0&&h.trigger(e,"collisionStart",{pairs:x.collisionStart});o.preSolvePosition(x.list);for(d=0;d<e.positionIterations;d++)o.solvePosition(x.list,s.timeScale);o.postSolvePosition(v);p.preSolveAll(v);for(d=0;d<e.constraintIterations;d++)p.solveAll(g,s.timeScale);p.postSolveAll(v);o.preSolveVelocity(x.list);for(d=0;d<e.velocityIterations;d++)o.solveVelocity(x.list,s.timeScale);x.collisionActive.length>0&&h.trigger(e,"collisionActive",{pairs:x.collisionActive});x.collisionEnd.length>0&&h.trigger(e,"collisionEnd",{pairs:x.collisionEnd});n._bodiesClearForces(v);h.trigger(e,"afterUpdate",m);return e};n.merge=function(e,t){d.extend(e,t);if(t.world){e.world=t.world;n.clear(e);var r=f.allBodies(e.world);for(var i=0;i<r.length;i++){var o=r[i];a.set(o,false);o.id=d.nextId()}}};n.clear=function(e){var t=e.world;l.clear(e.pairs);var r=e.broadphase;if(r.controller){var n=f.allBodies(t);r.controller.clear(r);r.controller.update(r,n,e,true)}};n._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var r=e[t];r.force.x=0;r.force.y=0;r.torque=0}};n._bodiesApplyGravity=function(e,t){var r="undefined"!==typeof t.scale?t.scale:.001;if(0===t.x&&0===t.y||0===r)return;for(var n=0;n<e.length;n++){var i=e[n];if(i.isStatic||i.isSleeping)continue;i.force.y+=i.mass*t.y*r;i.force.x+=i.mass*t.x*r}};n._bodiesUpdate=function(e,t,r,n,i){for(var a=0;a<e.length;a++){var o=e[a];if(o.isStatic||o.isSleeping)continue;m.update(o,t,r,n)}}})()},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(e,t,r){var n={};t.exports=n;var i=e("./Common");(function(){n.on=function(e,t,r){var n=t.split(" "),i;for(var a=0;a<n.length;a++){i=n[a];e.events=e.events||{};e.events[i]=e.events[i]||[];e.events[i].push(r)}return r};n.off=function(e,t,r){if(!t){e.events={};return}if("function"===typeof t){r=t;t=i.keys(e.events).join(" ")}var n=t.split(" ");for(var a=0;a<n.length;a++){var o=e.events[n[a]],s=[];if(r&&o)for(var l=0;l<o.length;l++)o[l]!==r&&s.push(o[l]);e.events[n[a]]=s}};n.trigger=function(e,t,r){var n,a,o,s;if(e.events){r||(r={});n=t.split(" ");for(var l=0;l<n.length;l++){a=n[l];o=e.events[a];if(o){s=i.clone(r,false);s.name=a;s.source=e;for(var c=0;c<o.length;c++)o[c].apply(e,[s])}}}}})()},{"./Common":14}],17:[function(e,t,r){var n={};t.exports=n;var i=e("./Plugin");var a=e("./Common");(function(){n.name="matter-js";n.version="0.14.2";n.uses=[];n.used=[];n.use=function(){i.use(n,Array.prototype.slice.call(arguments))};n.before=function(e,t){e=e.replace(/^Matter./,"");return a.chainPathBefore(n,e,t)};n.after=function(e,t){e=e.replace(/^Matter./,"");return a.chainPathAfter(n,e,t)}})()},{"./Common":14,"./Plugin":20}],18:[function(e,t,r){},{"../body/Composite":2,"./Common":14}],19:[function(e,t,r){var n={};t.exports=n;var i=e("../core/Common");(function(){n.create=function(e){var t={};e||i.log("Mouse.create: element was undefined, defaulting to document.body","warn");t.element=e||document.body;t.absolute={x:0,y:0};t.position={x:0,y:0};t.mousedownPosition={x:0,y:0};t.mouseupPosition={x:0,y:0};t.offset={x:0,y:0};t.scale={x:1,y:1};t.wheelDelta=0;t.button=-1;t.pixelRatio=t.element.getAttribute("data-pixel-ratio")||1;t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null};t.mousemove=function(e){var r=n._getRelativeMousePosition(e,t.element,t.pixelRatio),i=e.changedTouches;if(i){t.button=0;e.preventDefault()}t.absolute.x=r.x;t.absolute.y=r.y;t.position.x=t.absolute.x*t.scale.x+t.offset.x;t.position.y=t.absolute.y*t.scale.y+t.offset.y;t.sourceEvents.mousemove=e};t.mousedown=function(e){var r=n._getRelativeMousePosition(e,t.element,t.pixelRatio),i=e.changedTouches;if(i){t.button=0;e.preventDefault()}else t.button=e.button;t.absolute.x=r.x;t.absolute.y=r.y;t.position.x=t.absolute.x*t.scale.x+t.offset.x;t.position.y=t.absolute.y*t.scale.y+t.offset.y;t.mousedownPosition.x=t.position.x;t.mousedownPosition.y=t.position.y;t.sourceEvents.mousedown=e};t.mouseup=function(e){var r=n._getRelativeMousePosition(e,t.element,t.pixelRatio),i=e.changedTouches;i&&e.preventDefault();t.button=-1;t.absolute.x=r.x;t.absolute.y=r.y;t.position.x=t.absolute.x*t.scale.x+t.offset.x;t.position.y=t.absolute.y*t.scale.y+t.offset.y;t.mouseupPosition.x=t.position.x;t.mouseupPosition.y=t.position.y;t.sourceEvents.mouseup=e};t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));e.preventDefault()};n.setElement(t,t.element);return t};n.setElement=function(e,t){e.element=t;t.addEventListener("mousemove",e.mousemove);t.addEventListener("mousedown",e.mousedown);t.addEventListener("mouseup",e.mouseup);t.addEventListener("mousewheel",e.mousewheel);t.addEventListener("DOMMouseScroll",e.mousewheel);t.addEventListener("touchmove",e.mousemove);t.addEventListener("touchstart",e.mousedown);t.addEventListener("touchend",e.mouseup)};n.clearSourceEvents=function(e){e.sourceEvents.mousemove=null;e.sourceEvents.mousedown=null;e.sourceEvents.mouseup=null;e.sourceEvents.mousewheel=null;e.wheelDelta=0};n.setOffset=function(e,t){e.offset.x=t.x;e.offset.y=t.y;e.position.x=e.absolute.x*e.scale.x+e.offset.x;e.position.y=e.absolute.y*e.scale.y+e.offset.y};n.setScale=function(e,t){e.scale.x=t.x;e.scale.y=t.y;e.position.x=e.absolute.x*e.scale.x+e.offset.x;e.position.y=e.absolute.y*e.scale.y+e.offset.y};n._getRelativeMousePosition=function(e,t,r){var n=t.getBoundingClientRect(),i=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:i.scrollLeft,o=void 0!==window.pageYOffset?window.pageYOffset:i.scrollTop,s=e.changedTouches,l,c;if(s){l=s[0].pageX-n.left-a;c=s[0].pageY-n.top-o}else{l=e.pageX-n.left-a;c=e.pageY-n.top-o}return{x:l/(t.clientWidth/(t.width||t.clientWidth)*r),y:c/(t.clientHeight/(t.height||t.clientHeight)*r)}}})()},{"../core/Common":14}],20:[function(e,t,r){var n={};t.exports=n;var i=e("./Common");(function(){n._registry={};n.register=function(e){n.isPlugin(e)||i.warn("Plugin.register:",n.toString(e),"does not implement all required fields.");if(e.name in n._registry){var t=n._registry[e.name],r=n.versionParse(e.version).number,a=n.versionParse(t.version).number;if(r>a){i.warn("Plugin.register:",n.toString(t),"was upgraded to",n.toString(e));n._registry[e.name]=e}else r<a?i.warn("Plugin.register:",n.toString(t),"can not be downgraded to",n.toString(e)):e!==t&&i.warn("Plugin.register:",n.toString(e),"is already registered to different plugin object")}else n._registry[e.name]=e;return e};n.resolve=function(e){return n._registry[n.dependencyParse(e).name]};n.toString=function(e){return"string"===typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")};n.isPlugin=function(e){return e&&e.name&&e.version&&e.install};n.isUsed=function(e,t){return e.used.indexOf(t)>-1};n.isFor=function(e,t){var r=e.for&&n.dependencyParse(e.for);return!e.for||t.name===r.name&&n.versionSatisfies(t.version,r.range)};n.use=function(e,t){e.uses=(e.uses||[]).concat(t||[]);if(0===e.uses.length){i.warn("Plugin.use:",n.toString(e),"does not specify any dependencies to install.");return}var r=n.dependencies(e),a=i.topologicalSort(r),o=[];for(var s=0;s<a.length;s+=1){if(a[s]===e.name)continue;var l=n.resolve(a[s]);if(!l){o.push(" "+a[s]);continue}if(n.isUsed(e,l.name))continue;if(!n.isFor(l,e)){i.warn("Plugin.use:",n.toString(l),"is for",l.for,"but installed on",n.toString(e)+".");l._warned=true}if(l.install)l.install(e);else{i.warn("Plugin.use:",n.toString(l),"does not specify an install function.");l._warned=true}if(l._warned){o.push(" "+n.toString(l));delete l._warned}else o.push(" "+n.toString(l));e.used.push(l.name)}o.length>0&&i.info(o.join("  "))};n.dependencies=function(e,t){var r=n.dependencyParse(e),a=r.name;t=t||{};if(a in t)return;e=n.resolve(e)||e;t[a]=i.map(e.uses||[],function(t){n.isPlugin(t)&&n.register(t);var a=n.dependencyParse(t),o=n.resolve(t);if(o&&!n.versionSatisfies(o.version,a.range)){i.warn("Plugin.dependencies:",n.toString(o),"does not satisfy",n.toString(a),"used by",n.toString(r)+".");o._warned=true;e._warned=true}else if(!o){i.warn("Plugin.dependencies:",n.toString(t),"used by",n.toString(r),"could not be resolved.");e._warned=true}return a.name});for(var o=0;o<t[a].length;o+=1)n.dependencies(t[a][o],t);return t};n.dependencyParse=function(e){if(i.isString(e)){var t=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;t.test(e)||i.warn("Plugin.dependencyParse:",e,"is not a valid dependency string.");return{name:e.split("@")[0],range:e.split("@")[1]||"*"}}return{name:e.name,range:e.range||e.version}};n.versionParse=function(e){var t=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;t.test(e)||i.warn("Plugin.versionParse:",e,"is not a valid version or range.");var r=e.split("-");e=r[0];var n=isNaN(Number(e[0])),a=n?e.substr(1):e,o=i.map(a.split("."),function(e){return Number(e)});return{isRange:n,version:a,range:e,operator:n?e[0]:"",parts:o,prerelease:r[1],number:1e8*o[0]+1e4*o[1]+o[2]}};n.versionSatisfies=function(e,t){t=t||"*";var r=n.versionParse(t),i=r.parts,a=n.versionParse(e),o=a.parts;if(r.isRange){if("*"===r.operator||"*"===e)return true;if("~"===r.operator)return o[0]===i[0]&&o[1]===i[1]&&o[2]>=i[2];if("^"===r.operator){if(i[0]>0)return o[0]===i[0]&&a.number>=r.number;if(i[1]>0)return o[1]===i[1]&&o[2]>=i[2];return o[2]===i[2]}}return e===t||"*"===e}})()},{"./Common":14}],21:[function(e,t,r){var n={};t.exports=n;var i=e("./Events");var a=e("./Engine");var o=e("./Common");(function(){var e,t;if("undefined"!==typeof window){e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame}if(!e){var r;e=function(e){r=setTimeout(function(){e(o.now())},1e3/60)};t=function(){clearTimeout(r)}}n.create=function(e){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:false,enabled:true};var r=o.extend(t,e);r.delta=r.delta||1e3/r.fps;r.deltaMin=r.deltaMin||1e3/r.fps;r.deltaMax=r.deltaMax||1e3/(.5*r.fps);r.fps=1e3/r.delta;return r};n.run=function(t,r){if("undefined"!==typeof t.positionIterations){r=t;t=n.create()}(function i(a){t.frameRequestId=e(i);a&&t.enabled&&n.tick(t,r,a)})();return t};n.tick=function(e,t,r){var n=t.timing,o=1,s;var l={timestamp:n.timestamp};i.trigger(e,"beforeTick",l);i.trigger(t,"beforeTick",l);if(e.isFixed)s=e.delta;else{s=r-e.timePrev||e.delta;e.timePrev=r;e.deltaHistory.push(s);e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize);s=Math.min.apply(null,e.deltaHistory);s=s<e.deltaMin?e.deltaMin:s;s=s>e.deltaMax?e.deltaMax:s;o=s/e.delta;e.delta=s}0!==e.timeScalePrev&&(o*=n.timeScale/e.timeScalePrev);0===n.timeScale&&(o=0);e.timeScalePrev=n.timeScale;e.correction=o;e.frameCounter+=1;if(r-e.counterTimestamp>=1e3){e.fps=e.frameCounter*((r-e.counterTimestamp)/1e3);e.counterTimestamp=r;e.frameCounter=0}i.trigger(e,"tick",l);i.trigger(t,"tick",l);t.world.isModified&&t.render&&t.render.controller&&t.render.controller.clear&&t.render.controller.clear(t.render);i.trigger(e,"beforeUpdate",l);a.update(t,s,o);i.trigger(e,"afterUpdate",l);if(t.render&&t.render.controller){i.trigger(e,"beforeRender",l);i.trigger(t,"beforeRender",l);t.render.controller.world(t.render);i.trigger(e,"afterRender",l);i.trigger(t,"afterRender",l)}i.trigger(e,"afterTick",l);i.trigger(t,"afterTick",l)};n.stop=function(e){t(e.frameRequestId)};n.start=function(e,t){n.run(e,t)}})()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(e,t,r){var n={};t.exports=n;var i=e("./Events");(function(){n._motionWakeThreshold=.18;n._motionSleepThreshold=.08;n._minBias=.9;n.update=function(e,t){var r=t*t*t;for(var i=0;i<e.length;i++){var a=e[i],o=a.speed*a.speed+a.angularSpeed*a.angularSpeed;if(0!==a.force.x||0!==a.force.y){n.set(a,false);continue}var s=Math.min(a.motion,o),l=Math.max(a.motion,o);a.motion=n._minBias*s+(1-n._minBias)*l;if(a.sleepThreshold>0&&a.motion<n._motionSleepThreshold*r){a.sleepCounter+=1;a.sleepCounter>=a.sleepThreshold&&n.set(a,true)}else a.sleepCounter>0&&(a.sleepCounter-=1)}};n.afterCollisions=function(e,t){var r=t*t*t;for(var i=0;i<e.length;i++){var a=e[i];if(!a.isActive)continue;var o=a.collision,s=o.bodyA.parent,l=o.bodyB.parent;if(s.isSleeping&&l.isSleeping||s.isStatic||l.isStatic)continue;if(s.isSleeping||l.isSleeping){var c=s.isSleeping&&!s.isStatic?s:l,u=c===s?l:s;!c.isStatic&&u.motion>n._motionWakeThreshold*r&&n.set(c,false)}}};n.set=function(e,t){var r=e.isSleeping;if(t){e.isSleeping=true;e.sleepCounter=e.sleepThreshold;e.positionImpulse.x=0;e.positionImpulse.y=0;e.positionPrev.x=e.position.x;e.positionPrev.y=e.position.y;e.anglePrev=e.angle;e.speed=0;e.angularSpeed=0;e.motion=0;r||i.trigger(e,"sleepStart")}else{e.isSleeping=false;e.sleepCounter=0;r&&i.trigger(e,"sleepEnd")}}})()},{"./Events":16}],23:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Vertices");var a=e("../core/Common");var o=e("../body/Body");var s=e("../geometry/Bounds");var l=e("../geometry/Vector");var c;(function(){n.rectangle=function(e,t,r,n,s){s=s||{};var l={label:"Rectangle Body",position:{x:e,y:t},vertices:i.fromPath("L 0 0 L "+r+" 0 L "+r+" "+n+" L 0 "+n)};if(s.chamfer){var c=s.chamfer;l.vertices=i.chamfer(l.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax);delete s.chamfer}return o.create(a.extend({},l,s))};n.trapezoid=function(e,t,r,n,s,l){l=l||{};s*=.5;var c=(1-2*s)*r;var u=r*s,h=u+c,f=h+u,p;p=s<.5?"L 0 0 L "+u+" "+-n+" L "+h+" "+-n+" L "+f+" 0":"L 0 0 L "+h+" "+-n+" L "+f+" 0";var d={label:"Trapezoid Body",position:{x:e,y:t},vertices:i.fromPath(p)};if(l.chamfer){var m=l.chamfer;d.vertices=i.chamfer(d.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax);delete l.chamfer}return o.create(a.extend({},d,l))};n.circle=function(e,t,r,i,o){i=i||{};var s={label:"Circle Body",circleRadius:r};o=o||25;var l=Math.ceil(Math.max(10,Math.min(o,r)));l%2===1&&(l+=1);return n.polygon(e,t,l,r,a.extend({},s,i))};n.polygon=function(e,t,r,s,l){l=l||{};if(r<3)return n.circle(e,t,s,l);var c=2*Math.PI/r,u="",h=.5*c;for(var f=0;f<r;f+=1){var p=h+f*c,d=Math.cos(p)*s,m=Math.sin(p)*s;u+="L "+d.toFixed(3)+" "+m.toFixed(3)+" "}var v={label:"Polygon Body",position:{x:e,y:t},vertices:i.fromPath(u)};if(l.chamfer){var g=l.chamfer;v.vertices=i.chamfer(v.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax);delete l.chamfer}return o.create(a.extend({},v,l))};n.fromVertices=function(e,t,r,n,u,h,f){c||(c=a._requireGlobal("decomp","poly-decomp"));var p,d,m,v,g,y,x,b,_;n=n||{};d=[];u="undefined"!==typeof u&&u;h="undefined"!==typeof h?h:.01;f="undefined"!==typeof f?f:10;c||a.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull.");a.isArray(r[0])||(r=[r]);for(b=0;b<r.length;b+=1){v=r[b];m=i.isConvex(v);if(m||!c){v=m?i.clockwiseSort(v):i.hull(v);d.push({position:{x:e,y:t},vertices:v})}else{var w=v.map(function(e){return[e.x,e.y]});c.makeCCW(w);false!==h&&c.removeCollinearPoints(w,h);var S=c.quickDecomp(w);for(g=0;g<S.length;g++){var T=S[g];var M=T.map(function(e){return{x:e[0],y:e[1]}});if(f>0&&i.area(M)<f)continue;d.push({position:i.centre(M),vertices:M})}}}for(g=0;g<d.length;g++)d[g]=o.create(a.extend(d[g],n));if(u){var E=5;for(g=0;g<d.length;g++){var A=d[g];for(y=g+1;y<d.length;y++){var R=d[y];if(s.overlaps(A.bounds,R.bounds)){var P=A.vertices,C=R.vertices;for(x=0;x<A.vertices.length;x++)for(_=0;_<R.vertices.length;_++){var L=l.magnitudeSquared(l.sub(P[(x+1)%P.length],C[_])),O=l.magnitudeSquared(l.sub(P[x],C[(_+1)%C.length]));if(L<E&&O<E){P[x].isInternal=true;C[_].isInternal=true}}}}}}if(d.length>1){p=o.create(a.extend({parts:d.slice(0)},n));o.setPosition(p,{x:e,y:t});return p}return d[0]}})()},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(e,t,r){var n={};t.exports=n;var i=e("../body/Composite");var a=e("../constraint/Constraint");var o=e("../core/Common");var s=e("../body/Body");var l=e("./Bodies");(function(){n.stack=function(e,t,r,n,a,o,l){var c=i.create({label:"Stack"}),u=e,h=t,f,p=0;for(var d=0;d<n;d++){var m=0;for(var v=0;v<r;v++){var g=l(u,h,v,d,f,p);if(g){var y=g.bounds.max.y-g.bounds.min.y,x=g.bounds.max.x-g.bounds.min.x;y>m&&(m=y);s.translate(g,{x:.5*x,y:.5*y});u=g.bounds.max.x+a;i.addBody(c,g);f=g;p+=1}else u+=a}h+=m+o;u=e}return c};n.chain=function(e,t,r,n,s,l){var c=e.bodies;for(var u=1;u<c.length;u++){var h=c[u-1],f=c[u],p=h.bounds.max.y-h.bounds.min.y,d=h.bounds.max.x-h.bounds.min.x,m=f.bounds.max.y-f.bounds.min.y,v=f.bounds.max.x-f.bounds.min.x;var g={bodyA:h,pointA:{x:d*t,y:p*r},bodyB:f,pointB:{x:v*n,y:m*s}};var y=o.extend(g,l);i.addConstraint(e,a.create(y))}e.label+=" Chain";return e};n.mesh=function(e,t,r,n,s){var l=e.bodies,c,u,h,f,p;for(c=0;c<r;c++){for(u=1;u<t;u++){h=l[u-1+c*t];f=l[u+c*t];i.addConstraint(e,a.create(o.extend({bodyA:h,bodyB:f},s)))}if(c>0)for(u=0;u<t;u++){h=l[u+(c-1)*t];f=l[u+c*t];i.addConstraint(e,a.create(o.extend({bodyA:h,bodyB:f},s)));if(n&&u>0){p=l[u-1+(c-1)*t];i.addConstraint(e,a.create(o.extend({bodyA:p,bodyB:f},s)))}if(n&&u<t-1){p=l[u+1+(c-1)*t];i.addConstraint(e,a.create(o.extend({bodyA:p,bodyB:f},s)))}}}e.label+=" Mesh";return e};n.pyramid=function(e,t,r,i,a,o,l){return n.stack(e,t,r,i,a,o,function(t,n,o,c,u,h){var f=Math.min(i,Math.ceil(r/2)),p=u?u.bounds.max.x-u.bounds.min.x:0;if(c>f)return;c=f-c;var d=c,m=r-1-c;if(o<d||o>m)return;1===h&&s.translate(u,{x:(o+(r%2===1?1:-1))*p,y:0});var v=u?o*p:0;return l(e+v+o*a,n,o,c,u,h)})};n.newtonsCradle=function(e,t,r,n,o){var s=i.create({label:"Newtons Cradle"});for(var c=0;c<r;c++){var u=1.9,h=l.circle(e+c*(n*u),t+o,n,{inertia:Infinity,restitution:1,friction:0,frictionAir:1e-4,slop:1}),f=a.create({pointA:{x:e+c*(n*u),y:t},bodyB:h});i.addBody(s,h);i.addConstraint(s,f)}return s};n.car=function(e,t,r,n,o){var c=s.nextGroup(true),u=20,h=.5*-r+u,f=.5*r-u,p=0;var d=i.create({label:"Car"}),m=l.rectangle(e,t,r,n,{collisionFilter:{group:c},chamfer:{radius:.5*n},density:2e-4});var v=l.circle(e+h,t+p,o,{collisionFilter:{group:c},friction:.8});var g=l.circle(e+f,t+p,o,{collisionFilter:{group:c},friction:.8});var y=a.create({bodyB:m,pointB:{x:h,y:p},bodyA:v,stiffness:1,length:0});var x=a.create({bodyB:m,pointB:{x:f,y:p},bodyA:g,stiffness:1,length:0});i.addBody(d,m);i.addBody(d,v);i.addBody(d,g);i.addConstraint(d,y);i.addConstraint(d,x);return d};n.softBody=function(e,t,r,i,a,s,c,u,h,f){h=o.extend({inertia:Infinity},h);f=o.extend({stiffness:.2,render:{type:"line",anchors:false}},f);var p=n.stack(e,t,r,i,a,s,function(e,t){return l.circle(e,t,u,h)});n.mesh(p,r,i,c,f);p.label="Soft Body";return p}})()},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Vector");var a=e("../core/Common");(function(){n.fromVertices=function(e){var t={};for(var r=0;r<e.length;r++){var n=(r+1)%e.length,o=i.normalise({x:e[n].y-e[r].y,y:e[r].x-e[n].x}),s=0===o.y?Infinity:o.x/o.y;s=s.toFixed(3).toString();t[s]=o}return a.values(t)};n.rotate=function(e,t){if(0===t)return;var r=Math.cos(t),n=Math.sin(t);for(var i=0;i<e.length;i++){var a=e[i],o;o=a.x*r-a.y*n;a.y=a.x*n+a.y*r;a.x=o}}})()},{"../core/Common":14,"../geometry/Vector":28}],26:[function(e,t,r){var n={};t.exports=n;(function(){n.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};e&&n.update(t,e);return t};n.update=function(e,t,r){e.min.x=Infinity;e.max.x=-Infinity;e.min.y=Infinity;e.max.y=-Infinity;for(var n=0;n<t.length;n++){var i=t[n];i.x>e.max.x&&(e.max.x=i.x);i.x<e.min.x&&(e.min.x=i.x);i.y>e.max.y&&(e.max.y=i.y);i.y<e.min.y&&(e.min.y=i.y)}if(r){r.x>0?e.max.x+=r.x:e.min.x+=r.x;r.y>0?e.max.y+=r.y:e.min.y+=r.y}};n.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y};n.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y};n.translate=function(e,t){e.min.x+=t.x;e.max.x+=t.x;e.min.y+=t.y;e.max.y+=t.y};n.shift=function(e,t){var r=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=t.x;e.max.x=t.x+r;e.min.y=t.y;e.max.y=t.y+n}})()},{}],27:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Bounds");var a=e("../core/Common");(function(){n.pathToVertices=function(e,t){"undefined"===typeof window||"SVGPathSeg"in window||a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var r,i,o,s,l,c,u,h,f,p,d=[],m,v,g=0,y=0,x=0;t=t||15;var b=function(e,t,r){var n=r%2===1&&r>1;if(!f||e!=f.x||t!=f.y){if(f&&n){m=f.x;v=f.y}else{m=0;v=0}var i={x:m+e,y:v+t};!n&&f||(f=i);d.push(i);y=m+e;x=v+t}};var _=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"===t)return;switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":y=e.x;x=e.y;break;case"H":y=e.x;break;case"V":x=e.y;break}b(y,x,e.pathSegType)};n._svgPathToAbsolute(e);o=e.getTotalLength();c=[];for(r=0;r<e.pathSegList.numberOfItems;r+=1)c.push(e.pathSegList.getItem(r));u=c.concat();while(g<o){p=e.getPathSegAtLength(g);l=c[p];if(l!=h){while(u.length&&u[0]!=l)_(u.shift());h=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":s=e.getPointAtLength(g);b(s.x,s.y,0);break}g+=t}for(r=0,i=u.length;r<i;++r)_(u[r]);return d};n._svgPathToAbsolute=function(e){var t,r,n,i,a,o,s=e.pathSegList,l=0,c=0,u=s.numberOfItems;for(var h=0;h<u;++h){var f=s.getItem(h),p=f.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p)){"x"in f&&(l=f.x);"y"in f&&(c=f.y)}else{"x1"in f&&(n=l+f.x1);"x2"in f&&(a=l+f.x2);"y1"in f&&(i=c+f.y1);"y2"in f&&(o=c+f.y2);"x"in f&&(l+=f.x);"y"in f&&(c+=f.y);switch(p){case"m":s.replaceItem(e.createSVGPathSegMovetoAbs(l,c),h);break;case"l":s.replaceItem(e.createSVGPathSegLinetoAbs(l,c),h);break;case"h":s.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),h);break;case"v":s.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),h);break;case"c":s.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,c,n,i,a,o),h);break;case"s":s.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,c,a,o),h);break;case"q":s.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,c,n,i),h);break;case"t":s.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),h);break;case"a":s.replaceItem(e.createSVGPathSegArcAbs(l,c,f.r1,f.r2,f.angle,f.largeArcFlag,f.sweepFlag),h);break;case"z":case"Z":l=t;c=r;break}}if("M"==p||"m"==p){t=l;r=c}}}})()},{"../core/Common":14,"../geometry/Bounds":26}],28:[function(e,t,r){var n={};t.exports=n;(function(){n.create=function(e,t){return{x:e||0,y:t||0}};n.clone=function(e){return{x:e.x,y:e.y}};n.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};n.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y};n.rotate=function(e,t,r){var n=Math.cos(t),i=Math.sin(t);r||(r={});var a=e.x*n-e.y*i;r.y=e.x*i+e.y*n;r.x=a;return r};n.rotateAbout=function(e,t,r,n){var i=Math.cos(t),a=Math.sin(t);n||(n={});var o=r.x+((e.x-r.x)*i-(e.y-r.y)*a);n.y=r.y+((e.x-r.x)*a+(e.y-r.y)*i);n.x=o;return n};n.normalise=function(e){var t=n.magnitude(e);if(0===t)return{x:0,y:0};return{x:e.x/t,y:e.y/t}};n.dot=function(e,t){return e.x*t.x+e.y*t.y};n.cross=function(e,t){return e.x*t.y-e.y*t.x};n.cross3=function(e,t,r){return(t.x-e.x)*(r.y-e.y)-(t.y-e.y)*(r.x-e.x)};n.add=function(e,t,r){r||(r={});r.x=e.x+t.x;r.y=e.y+t.y;return r};n.sub=function(e,t,r){r||(r={});r.x=e.x-t.x;r.y=e.y-t.y;return r};n.mult=function(e,t){return{x:e.x*t,y:e.y*t}};n.div=function(e,t){return{x:e.x/t,y:e.y/t}};n.perp=function(e,t){t=true===t?-1:1;return{x:t*-e.y,y:t*e.x}};n.neg=function(e){return{x:-e.x,y:-e.y}};n.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]})()},{}],29:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Vector");var a=e("../core/Common");(function(){n.create=function(e,t){var r=[];for(var n=0;n<e.length;n++){var i=e[n],a={x:i.x,y:i.y,index:n,body:t,isInternal:false};r.push(a)}return r};n.fromPath=function(e,t){var r=/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,i=[];e.replace(r,function(e,t,r){i.push({x:parseFloat(t),y:parseFloat(r)})});return n.create(i,t)};n.centre=function(e){var t=n.area(e,true),r={x:0,y:0},a,o,s;for(var l=0;l<e.length;l++){s=(l+1)%e.length;a=i.cross(e[l],e[s]);o=i.mult(i.add(e[l],e[s]),a);r=i.add(r,o)}return i.div(r,6*t)};n.mean=function(e){var t={x:0,y:0};for(var r=0;r<e.length;r++){t.x+=e[r].x;t.y+=e[r].y}return i.div(t,e.length)};n.area=function(e,t){var r=0,n=e.length-1;for(var i=0;i<e.length;i++){r+=(e[n].x-e[i].x)*(e[n].y+e[i].y);n=i}if(t)return r/2;return Math.abs(r)/2};n.inertia=function(e,t){var r=0,n=0,a=e,o,s;for(var l=0;l<a.length;l++){s=(l+1)%a.length;o=Math.abs(i.cross(a[s],a[l]));r+=o*(i.dot(a[s],a[s])+i.dot(a[s],a[l])+i.dot(a[l],a[l]));n+=o}return t/6*(r/n)};n.translate=function(e,t,r){var n;if(r)for(n=0;n<e.length;n++){e[n].x+=t.x*r;e[n].y+=t.y*r}else for(n=0;n<e.length;n++){e[n].x+=t.x;e[n].y+=t.y}return e};n.rotate=function(e,t,r){if(0===t)return;var n=Math.cos(t),i=Math.sin(t);for(var a=0;a<e.length;a++){var o=e[a],s=o.x-r.x,l=o.y-r.y;o.x=r.x+(s*n-l*i);o.y=r.y+(s*i+l*n)}return e};n.contains=function(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=e[(r+1)%e.length];if((t.x-n.x)*(i.y-n.y)+(t.y-n.y)*(n.x-i.x)>0)return false}return true};n.scale=function(e,t,r,a){if(1===t&&1===r)return e;a=a||n.centre(e);var o,s;for(var l=0;l<e.length;l++){o=e[l];s=i.sub(o,a);e[l].x=a.x+s.x*t;e[l].y=a.y+s.y*r}return e};n.chamfer=function(e,t,r,n,o){t="number"===typeof t?[t]:t||[8];r="undefined"!==typeof r?r:-1;n=n||2;o=o||14;var s=[];for(var l=0;l<e.length;l++){var c=e[l-1>=0?l-1:e.length-1],u=e[l],h=e[(l+1)%e.length],f=t[l<t.length?l:t.length-1];if(0===f){s.push(u);continue}var p=i.normalise({x:u.y-c.y,y:c.x-u.x});var d=i.normalise({x:h.y-u.y,y:u.x-h.x});var m=Math.sqrt(2*Math.pow(f,2)),v=i.mult(a.clone(p),f),g=i.normalise(i.mult(i.add(p,d),.5)),y=i.sub(u,i.mult(g,m));var x=r;-1===r&&(x=1.75*Math.pow(f,.32));x=a.clamp(x,n,o);x%2===1&&(x+=1);var b=Math.acos(i.dot(p,d)),_=b/x;for(var w=0;w<x;w++)s.push(i.add(i.rotate(v,_*w),y))}return s};n.clockwiseSort=function(e){var t=n.mean(e);e.sort(function(e,r){return i.angle(t,e)-i.angle(t,r)});return e};n.isConvex=function(e){var t=0,r=e.length,n,i,a,o;if(r<3)return null;for(n=0;n<r;n++){i=(n+1)%r;a=(n+2)%r;o=(e[i].x-e[n].x)*(e[a].y-e[i].y);o-=(e[i].y-e[n].y)*(e[a].x-e[i].x);o<0?t|=1:o>0&&(t|=2);if(3===t)return false}return 0!==t||null};n.hull=function(e){var t=[],r=[],n,a;e=e.slice(0);e.sort(function(e,t){var r=e.x-t.x;return 0!==r?r:e.y-t.y});for(a=0;a<e.length;a+=1){n=e[a];while(r.length>=2&&i.cross3(r[r.length-2],r[r.length-1],n)<=0)r.pop();r.push(n)}for(a=e.length-1;a>=0;a-=1){n=e[a];while(t.length>=2&&i.cross3(t[t.length-2],t[t.length-1],n)<=0)t.pop();t.push(n)}t.pop();r.pop();return t.concat(r)}})()},{"../core/Common":14,"../geometry/Vector":28}],30:[function(e,t,r){var n=t.exports=e("../core/Matter");n.Body=e("../body/Body");n.Composite=e("../body/Composite");n.World=e("../body/World");n.Contact=e("../collision/Contact");n.Detector=e("../collision/Detector");n.Grid=e("../collision/Grid");n.Pairs=e("../collision/Pairs");n.Pair=e("../collision/Pair");n.Query=e("../collision/Query");n.Resolver=e("../collision/Resolver");n.SAT=e("../collision/SAT");n.Constraint=e("../constraint/Constraint");n.MouseConstraint=e("../constraint/MouseConstraint");n.Common=e("../core/Common");n.Engine=e("../core/Engine");n.Events=e("../core/Events");n.Mouse=e("../core/Mouse");n.Runner=e("../core/Runner");n.Sleeping=e("../core/Sleeping");n.Plugin=e("../core/Plugin");n.Bodies=e("../factory/Bodies");n.Composites=e("../factory/Composites");n.Axes=e("../geometry/Axes");n.Bounds=e("../geometry/Bounds");n.Svg=e("../geometry/Svg");n.Vector=e("../geometry/Vector");n.Vertices=e("../geometry/Vertices");n.Render=e("../render/Render");n.RenderPixi=e("../render/RenderPixi");n.World.add=n.Composite.add;n.World.remove=n.Composite.remove;n.World.addComposite=n.Composite.addComposite;n.World.addBody=n.Composite.addBody;n.World.addConstraint=n.Composite.addConstraint;n.World.clear=n.Composite.clear;n.Engine.run=n.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(e,t,r){var n={};t.exports=n;var i=e("../core/Common");var a=e("../body/Composite");var o=e("../geometry/Bounds");var s=e("../core/Events");var l=e("../collision/Grid");var c=e("../geometry/Vector");var u=e("../core/Mouse");(function(){var e,t;if("undefined"!==typeof window){e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(i.now())},1e3/60)};t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame}n.create=function(e){var t={controller:n,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!e.bounds,enabled:true,wireframes:true,showSleeping:true,showDebug:false,showBroadphase:false,showBounds:false,showVelocity:false,showCollisions:false,showSeparations:false,showAxes:false,showPositions:false,showAngleIndicator:false,showIds:false,showShadows:false,showVertexNumbers:false,showConvexHulls:false,showInternalEdges:false,showMousePosition:false}};var a=i.extend(t,e);if(a.canvas){a.canvas.width=a.options.width||a.canvas.width;a.canvas.height=a.options.height||a.canvas.height}a.mouse=e.mouse;a.engine=e.engine;a.canvas=a.canvas||r(a.options.width,a.options.height);a.context=a.canvas.getContext("2d");a.textures={};a.bounds=a.bounds||{min:{x:0,y:0},max:{x:a.canvas.width,y:a.canvas.height}};1!==a.options.pixelRatio&&n.setPixelRatio(a,a.options.pixelRatio);i.isElement(a.element)?a.element.appendChild(a.canvas):a.canvas.parentNode||i.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn");return a};n.run=function(t){(function r(i){t.frameRequestId=e(r);n.world(t)})()};n.stop=function(e){t(e.frameRequestId)};n.setPixelRatio=function(e,t){var r=e.options,n=e.canvas;"auto"===t&&(t=h(n));r.pixelRatio=t;n.setAttribute("data-pixel-ratio",t);n.width=r.width*t;n.height=r.height*t;n.style.width=r.width+"px";n.style.height=r.height+"px";e.context.scale(t,t)};n.lookAt=function(e,t,r,n){n="undefined"===typeof n||n;t=i.isArray(t)?t:[t];r=r||{x:0,y:0};var a={min:{x:Infinity,y:Infinity},max:{x:-Infinity,y:-Infinity}};for(var o=0;o<t.length;o+=1){var s=t[o],l=s.bounds?s.bounds.min:s.min||s.position||s,c=s.bounds?s.bounds.max:s.max||s.position||s;if(l&&c){l.x<a.min.x&&(a.min.x=l.x);c.x>a.max.x&&(a.max.x=c.x);l.y<a.min.y&&(a.min.y=l.y);c.y>a.max.y&&(a.max.y=c.y)}}var h=a.max.x-a.min.x+2*r.x,f=a.max.y-a.min.y+2*r.y,p=e.canvas.height,d=e.canvas.width,m=d/p,v=h/f,g=1,y=1;v>m?y=v/m:g=m/v;e.options.hasBounds=true;e.bounds.min.x=a.min.x;e.bounds.max.x=a.min.x+h*g;e.bounds.min.y=a.min.y;e.bounds.max.y=a.min.y+f*y;if(n){e.bounds.min.x+=.5*h-h*g*.5;e.bounds.max.x+=.5*h-h*g*.5;e.bounds.min.y+=.5*f-f*y*.5;e.bounds.max.y+=.5*f-f*y*.5}e.bounds.min.x-=r.x;e.bounds.max.x-=r.x;e.bounds.min.y-=r.y;e.bounds.max.y-=r.y;if(e.mouse){u.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height});u.setOffset(e.mouse,e.bounds.min)}};n.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,r=e.bounds.max.y-e.bounds.min.y,n=t/e.options.width,i=r/e.options.height;e.context.scale(1/n,1/i);e.context.translate(-e.bounds.min.x,-e.bounds.min.y)};n.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)};n.world=function(e){var t=e.engine,r=t.world,i=e.canvas,h=e.context,f=e.options,d=a.allBodies(r),m=a.allConstraints(r),v=f.wireframes?f.wireframeBackground:f.background,g=[],y=[],x;var b={timestamp:t.timing.timestamp};s.trigger(e,"beforeRender",b);e.currentBackground!==v&&p(e,v);h.globalCompositeOperation="source-in";h.fillStyle="transparent";h.fillRect(0,0,i.width,i.height);h.globalCompositeOperation="source-over";if(f.hasBounds){for(x=0;x<d.length;x++){var _=d[x];o.overlaps(_.bounds,e.bounds)&&g.push(_)}for(x=0;x<m.length;x++){var w=m[x],S=w.bodyA,T=w.bodyB,M=w.pointA,E=w.pointB;S&&(M=c.add(S.position,w.pointA));T&&(E=c.add(T.position,w.pointB));if(!M||!E)continue;(o.contains(e.bounds,M)||o.contains(e.bounds,E))&&y.push(w)}n.startViewTransform(e);if(e.mouse){u.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height});u.setOffset(e.mouse,e.bounds.min)}}else{y=m;g=d}if(!f.wireframes||t.enableSleeping&&f.showSleeping)n.bodies(e,g,h);else{f.showConvexHulls&&n.bodyConvexHulls(e,g,h);n.bodyWireframes(e,g,h)}f.showBounds&&n.bodyBounds(e,g,h);(f.showAxes||f.showAngleIndicator)&&n.bodyAxes(e,g,h);f.showPositions&&n.bodyPositions(e,g,h);f.showVelocity&&n.bodyVelocity(e,g,h);f.showIds&&n.bodyIds(e,g,h);f.showSeparations&&n.separations(e,t.pairs.list,h);f.showCollisions&&n.collisions(e,t.pairs.list,h);f.showVertexNumbers&&n.vertexNumbers(e,g,h);f.showMousePosition&&n.mousePosition(e,e.mouse,h);n.constraints(y,h);f.showBroadphase&&t.broadphase.controller===l&&n.grid(e,t.broadphase,h);f.showDebug&&n.debug(e,h);f.hasBounds&&n.endViewTransform(e);s.trigger(e,"afterRender",b)};n.debug=function(e,t){var r=t,n=e.engine,i=n.world,o=n.metrics,s=e.options,l=a.allBodies(i),c="    ";if(n.timing.timestamp-(e.debugTimestamp||0)>=500){var u="";o.timing&&(u+="fps: "+Math.round(o.timing.fps)+c);e.debugString=u;e.debugTimestamp=n.timing.timestamp}if(e.debugString){r.font="12px Arial";s.wireframes?r.fillStyle="rgba(255,255,255,0.5)":r.fillStyle="rgba(0,0,0,0.5)";var h=e.debugString.split("\n");for(var f=0;f<h.length;f++)r.fillText(h[f],50,50+18*f)}};n.constraints=function(e,t){var r=t;for(var n=0;n<e.length;n++){var a=e[n];if(!a.render.visible||!a.pointA||!a.pointB)continue;var o=a.bodyA,s=a.bodyB,l,u;l=o?c.add(o.position,a.pointA):a.pointA;if("pin"===a.render.type){r.beginPath();r.arc(l.x,l.y,3,0,2*Math.PI);r.closePath()}else{u=s?c.add(s.position,a.pointB):a.pointB;r.beginPath();r.moveTo(l.x,l.y);if("spring"===a.render.type){var h=c.sub(u,l),f=c.perp(c.normalise(h)),p=Math.ceil(i.clamp(a.length/5,12,20)),d;for(var m=1;m<p;m+=1){d=m%2===0?1:-1;r.lineTo(l.x+h.x*(m/p)+f.x*d*4,l.y+h.y*(m/p)+f.y*d*4)}}r.lineTo(u.x,u.y)}if(a.render.lineWidth){r.lineWidth=a.render.lineWidth;r.strokeStyle=a.render.strokeStyle;r.stroke()}if(a.render.anchors){r.fillStyle=a.render.strokeStyle;r.beginPath();r.arc(l.x,l.y,3,0,2*Math.PI);r.arc(u.x,u.y,3,0,2*Math.PI);r.closePath();r.fill()}}};n.bodyShadows=function(e,t,r){var n=r,i=e.engine;for(var a=0;a<t.length;a++){var o=t[a];if(!o.render.visible)continue;if(o.circleRadius){n.beginPath();n.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI);n.closePath()}else{n.beginPath();n.moveTo(o.vertices[0].x,o.vertices[0].y);for(var s=1;s<o.vertices.length;s++)n.lineTo(o.vertices[s].x,o.vertices[s].y);n.closePath()}var l=o.position.x-.5*e.options.width,c=o.position.y-.2*e.options.height,u=Math.abs(l)+Math.abs(c);n.shadowColor="rgba(0,0,0,0.15)";n.shadowOffsetX=.05*l;n.shadowOffsetY=.05*c;n.shadowBlur=1+12*Math.min(1,u/1e3);n.fill();n.shadowColor=null;n.shadowOffsetX=null;n.shadowOffsetY=null;n.shadowBlur=null}};n.bodies=function(e,t,r){var n=r,i=e.engine,a=e.options,o=a.showInternalEdges||!a.wireframes,s,l,c,u;for(c=0;c<t.length;c++){s=t[c];if(!s.render.visible)continue;for(u=s.parts.length>1?1:0;u<s.parts.length;u++){l=s.parts[u];if(!l.render.visible)continue;a.showSleeping&&s.isSleeping?n.globalAlpha=.5*l.render.opacity:1!==l.render.opacity&&(n.globalAlpha=l.render.opacity);if(l.render.sprite&&l.render.sprite.texture&&!a.wireframes){var h=l.render.sprite,p=f(e,h.texture);n.translate(l.position.x,l.position.y);n.rotate(l.angle);n.drawImage(p,p.width*-h.xOffset*h.xScale,p.height*-h.yOffset*h.yScale,p.width*h.xScale,p.height*h.yScale);n.rotate(-l.angle);n.translate(-l.position.x,-l.position.y)}else{if(l.circleRadius){n.beginPath();n.arc(l.position.x,l.position.y,l.circleRadius,0,2*Math.PI)}else{n.beginPath();n.moveTo(l.vertices[0].x,l.vertices[0].y);for(var d=1;d<l.vertices.length;d++){!l.vertices[d-1].isInternal||o?n.lineTo(l.vertices[d].x,l.vertices[d].y):n.moveTo(l.vertices[d].x,l.vertices[d].y);l.vertices[d].isInternal&&!o&&n.moveTo(l.vertices[(d+1)%l.vertices.length].x,l.vertices[(d+1)%l.vertices.length].y)}n.lineTo(l.vertices[0].x,l.vertices[0].y);n.closePath()}if(a.wireframes){n.lineWidth=1;n.strokeStyle="#bbb";n.stroke()}else{n.fillStyle=l.render.fillStyle;if(l.render.lineWidth){n.lineWidth=l.render.lineWidth;n.strokeStyle=l.render.strokeStyle;n.stroke()}n.fill()}}n.globalAlpha=1}}};n.bodyWireframes=function(e,t,r){var n=r,i=e.options.showInternalEdges,a,o,s,l,c;n.beginPath();for(s=0;s<t.length;s++){a=t[s];if(!a.render.visible)continue;for(c=a.parts.length>1?1:0;c<a.parts.length;c++){o=a.parts[c];n.moveTo(o.vertices[0].x,o.vertices[0].y);for(l=1;l<o.vertices.length;l++){!o.vertices[l-1].isInternal||i?n.lineTo(o.vertices[l].x,o.vertices[l].y):n.moveTo(o.vertices[l].x,o.vertices[l].y);o.vertices[l].isInternal&&!i&&n.moveTo(o.vertices[(l+1)%o.vertices.length].x,o.vertices[(l+1)%o.vertices.length].y)}n.lineTo(o.vertices[0].x,o.vertices[0].y)}}n.lineWidth=1;n.strokeStyle="#bbb";n.stroke()};n.bodyConvexHulls=function(e,t,r){var n=r,i,a,o,s,l;n.beginPath();for(o=0;o<t.length;o++){i=t[o];if(!i.render.visible||1===i.parts.length)continue;n.moveTo(i.vertices[0].x,i.vertices[0].y);for(s=1;s<i.vertices.length;s++)n.lineTo(i.vertices[s].x,i.vertices[s].y);n.lineTo(i.vertices[0].x,i.vertices[0].y)}n.lineWidth=1;n.strokeStyle="rgba(255,255,255,0.2)";n.stroke()};n.vertexNumbers=function(e,t,r){var n=r,i,a,o;for(i=0;i<t.length;i++){var s=t[i].parts;for(o=s.length>1?1:0;o<s.length;o++){var l=s[o];for(a=0;a<l.vertices.length;a++){n.fillStyle="rgba(255,255,255,0.2)";n.fillText(i+"_"+a,l.position.x+.8*(l.vertices[a].x-l.position.x),l.position.y+.8*(l.vertices[a].y-l.position.y))}}}};n.mousePosition=function(e,t,r){var n=r;n.fillStyle="rgba(255,255,255,0.8)";n.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)};n.bodyBounds=function(e,t,r){var n=r,i=e.engine,a=e.options;n.beginPath();for(var o=0;o<t.length;o++){var s=t[o];if(s.render.visible){var l=t[o].parts;for(var c=l.length>1?1:0;c<l.length;c++){var u=l[c];n.rect(u.bounds.min.x,u.bounds.min.y,u.bounds.max.x-u.bounds.min.x,u.bounds.max.y-u.bounds.min.y)}}}a.wireframes?n.strokeStyle="rgba(255,255,255,0.08)":n.strokeStyle="rgba(0,0,0,0.1)";n.lineWidth=1;n.stroke()};n.bodyAxes=function(e,t,r){var n=r,i=e.engine,a=e.options,o,s,l,c;n.beginPath();for(s=0;s<t.length;s++){var u=t[s],h=u.parts;if(!u.render.visible)continue;if(a.showAxes)for(l=h.length>1?1:0;l<h.length;l++){o=h[l];for(c=0;c<o.axes.length;c++){var f=o.axes[c];n.moveTo(o.position.x,o.position.y);n.lineTo(o.position.x+20*f.x,o.position.y+20*f.y)}}else for(l=h.length>1?1:0;l<h.length;l++){o=h[l];for(c=0;c<o.axes.length;c++){n.moveTo(o.position.x,o.position.y);n.lineTo((o.vertices[0].x+o.vertices[o.vertices.length-1].x)/2,(o.vertices[0].y+o.vertices[o.vertices.length-1].y)/2)}}}if(a.wireframes){n.strokeStyle="indianred";n.lineWidth=1}else{n.strokeStyle="rgba(255, 255, 255, 0.4)";n.globalCompositeOperation="overlay";n.lineWidth=2}n.stroke();n.globalCompositeOperation="source-over"};n.bodyPositions=function(e,t,r){var n=r,i=e.engine,a=e.options,o,s,l,c;n.beginPath();for(l=0;l<t.length;l++){o=t[l];if(!o.render.visible)continue;for(c=0;c<o.parts.length;c++){s=o.parts[c];n.arc(s.position.x,s.position.y,3,0,2*Math.PI,false);n.closePath()}}a.wireframes?n.fillStyle="indianred":n.fillStyle="rgba(0,0,0,0.5)";n.fill();n.beginPath();for(l=0;l<t.length;l++){o=t[l];if(o.render.visible){n.arc(o.positionPrev.x,o.positionPrev.y,2,0,2*Math.PI,false);n.closePath()}}n.fillStyle="rgba(255,165,0,0.8)";n.fill()};n.bodyVelocity=function(e,t,r){var n=r;n.beginPath();for(var i=0;i<t.length;i++){var a=t[i];if(!a.render.visible)continue;n.moveTo(a.position.x,a.position.y);n.lineTo(a.position.x+2*(a.position.x-a.positionPrev.x),a.position.y+2*(a.position.y-a.positionPrev.y))}n.lineWidth=3;n.strokeStyle="cornflowerblue";n.stroke()};n.bodyIds=function(e,t,r){var n=r,i,a;for(i=0;i<t.length;i++){if(!t[i].render.visible)continue;var o=t[i].parts;for(a=o.length>1?1:0;a<o.length;a++){var s=o[a];n.font="12px Arial";n.fillStyle="rgba(255,255,255,0.5)";n.fillText(s.id,s.position.x+10,s.position.y-10)}}};n.collisions=function(e,t,r){var n=r,i=e.options,a,o,s,l,c,u,h;n.beginPath();for(u=0;u<t.length;u++){a=t[u];if(!a.isActive)continue;o=a.collision;for(h=0;h<a.activeContacts.length;h++){var f=a.activeContacts[h],p=f.vertex;n.rect(p.x-1.5,p.y-1.5,3.5,3.5)}}i.wireframes?n.fillStyle="rgba(255,255,255,0.7)":n.fillStyle="orange";n.fill();n.beginPath();for(u=0;u<t.length;u++){a=t[u];if(!a.isActive)continue;o=a.collision;if(a.activeContacts.length>0){var d=a.activeContacts[0].vertex.x,m=a.activeContacts[0].vertex.y;if(2===a.activeContacts.length){d=(a.activeContacts[0].vertex.x+a.activeContacts[1].vertex.x)/2;m=(a.activeContacts[0].vertex.y+a.activeContacts[1].vertex.y)/2}o.bodyB===o.supports[0].body||true===o.bodyA.isStatic?n.moveTo(d-8*o.normal.x,m-8*o.normal.y):n.moveTo(d+8*o.normal.x,m+8*o.normal.y);n.lineTo(d,m)}}i.wireframes?n.strokeStyle="rgba(255,165,0,0.7)":n.strokeStyle="orange";n.lineWidth=1;n.stroke()};n.separations=function(e,t,r){var n=r,i=e.options,a,o,s,l,c,u,h;n.beginPath();for(u=0;u<t.length;u++){a=t[u];if(!a.isActive)continue;o=a.collision;l=o.bodyA;c=o.bodyB;var f=1;c.isStatic||l.isStatic||(f=.5);c.isStatic&&(f=0);n.moveTo(c.position.x,c.position.y);n.lineTo(c.position.x-o.penetration.x*f,c.position.y-o.penetration.y*f);f=1;c.isStatic||l.isStatic||(f=.5);l.isStatic&&(f=0);n.moveTo(l.position.x,l.position.y);n.lineTo(l.position.x+o.penetration.x*f,l.position.y+o.penetration.y*f)}i.wireframes?n.strokeStyle="rgba(255,165,0,0.5)":n.strokeStyle="orange";n.stroke()};n.grid=function(e,t,r){var n=r,a=e.options;a.wireframes?n.strokeStyle="rgba(255,180,0,0.1)":n.strokeStyle="rgba(255,180,0,0.5)";n.beginPath();var o=i.keys(t.buckets);for(var s=0;s<o.length;s++){var l=o[s];if(t.buckets[l].length<2)continue;var c=l.split(/C|R/);n.rect(.5+parseInt(c[1],10)*t.bucketWidth,.5+parseInt(c[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}n.lineWidth=1;n.stroke()};n.inspector=function(e,t){var r=e.engine,n=e.selected,i=e.render,a=i.options,o;if(a.hasBounds){var s=i.bounds.max.x-i.bounds.min.x,l=i.bounds.max.y-i.bounds.min.y,c=s/i.options.width,u=l/i.options.height;t.scale(1/c,1/u);t.translate(-i.bounds.min.x,-i.bounds.min.y)}for(var h=0;h<n.length;h++){var f=n[h].data;t.translate(.5,.5);t.lineWidth=1;t.strokeStyle="rgba(255,165,0,0.9)";t.setLineDash([1,2]);switch(f.type){case"body":o=f.bounds;t.beginPath();t.rect(Math.floor(o.min.x-3),Math.floor(o.min.y-3),Math.floor(o.max.x-o.min.x+6),Math.floor(o.max.y-o.min.y+6));t.closePath();t.stroke();break;case"constraint":var p=f.pointA;f.bodyA&&(p=f.pointB);t.beginPath();t.arc(p.x,p.y,10,0,2*Math.PI);t.closePath();t.stroke();break}t.setLineDash([]);t.translate(-.5,-.5)}if(null!==e.selectStart){t.translate(.5,.5);t.lineWidth=1;t.strokeStyle="rgba(255,165,0,0.6)";t.fillStyle="rgba(255,165,0,0.1)";o=e.selectBounds;t.beginPath();t.rect(Math.floor(o.min.x),Math.floor(o.min.y),Math.floor(o.max.x-o.min.x),Math.floor(o.max.y-o.min.y));t.closePath();t.stroke();t.fill();t.translate(-.5,-.5)}a.hasBounds&&t.setTransform(1,0,0,1,0,0)};var r=function(e,t){var r=document.createElement("canvas");r.width=e;r.height=t;r.oncontextmenu=function(){return false};r.onselectstart=function(){return false};return r};var h=function(e){var t=e.getContext("2d"),r=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return r/n};var f=function(e,t){var r=e.textures[t];if(r)return r;r=e.textures[t]=new Image;r.src=t;return r};var p=function(e,t){var r=t;/(jpg|gif|png)$/.test(t)&&(r="url("+t+")");e.canvas.style.background=r;e.canvas.style.backgroundSize="contain";e.currentBackground=t}})()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(e,t,r){var n={};t.exports=n;var i=e("../geometry/Bounds");var a=e("../body/Composite");var o=e("../core/Common");var s=e("../core/Events");var l=e("../geometry/Vector");(function(){var e,t;if("undefined"!==typeof window){e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(o.now())},1e3/60)};t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame}n.create=function(e){o.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var t={controller:n,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:false,enabled:true,wireframes:true,showSleeping:true,showDebug:false,showBroadphase:false,showBounds:false,showVelocity:false,showCollisions:false,showAxes:false,showPositions:false,showAngleIndicator:false,showIds:false,showShadows:false}};var r=o.extend(t,e),i=!r.options.wireframes&&"transparent"===r.options.background;r.pixiOptions=r.pixiOptions||{view:r.canvas,transparent:i,antialias:true,backgroundColor:e.background};r.mouse=e.mouse;r.engine=e.engine;r.renderer=r.renderer||new PIXI.WebGLRenderer(r.options.width,r.options.height,r.pixiOptions);r.container=r.container||new PIXI.Container;r.spriteContainer=r.spriteContainer||new PIXI.Container;r.canvas=r.canvas||r.renderer.view;r.bounds=r.bounds||{min:{x:0,y:0},max:{x:r.options.width,y:r.options.height}};s.on(r.engine,"beforeUpdate",function(){n.clear(r)});r.textures={};r.sprites={};r.primitives={};r.container.addChild(r.spriteContainer);o.isElement(r.element)?r.element.appendChild(r.canvas):o.warn('No "render.element" passed, "render.canvas" was not inserted into document.');r.canvas.oncontextmenu=function(){return false};r.canvas.onselectstart=function(){return false};return r};n.run=function(t){(function r(i){t.frameRequestId=e(r);n.world(t)})()};n.stop=function(e){t(e.frameRequestId)};n.clear=function(e){var t=e.container,r=e.spriteContainer;while(t.children[0])t.removeChild(t.children[0]);while(r.children[0])r.removeChild(r.children[0]);var n=e.sprites["bg-0"];e.textures={};e.sprites={};e.primitives={};e.sprites["bg-0"]=n;n&&t.addChildAt(n,0);e.container.addChild(e.spriteContainer);e.currentBackground=null;t.scale.set(1,1);t.position.set(0,0)};n.setBackground=function(e,t){if(e.currentBackground!==t){var r=t.indexOf&&-1!==t.indexOf("#"),n=e.sprites["bg-0"];if(r){var i=o.colorToNumber(t);e.renderer.backgroundColor=i;n&&e.container.removeChild(n)}else if(!n){var a=u(e,t);n=e.sprites["bg-0"]=new PIXI.Sprite(a);n.position.x=0;n.position.y=0;e.container.addChildAt(n,0)}e.currentBackground=t}};n.world=function(e){var t=e.engine,r=t.world,o=e.renderer,s=e.container,c=e.options,u=a.allBodies(r),h=a.allConstraints(r),f=[],p;c.wireframes?n.setBackground(e,c.wireframeBackground):n.setBackground(e,c.background);var d=e.bounds.max.x-e.bounds.min.x,m=e.bounds.max.y-e.bounds.min.y,v=d/e.options.width,g=m/e.options.height;if(c.hasBounds){for(p=0;p<u.length;p++){var y=u[p];y.render.sprite.visible=i.overlaps(y.bounds,e.bounds)}for(p=0;p<h.length;p++){var x=h[p],b=x.bodyA,_=x.bodyB,w=x.pointA,S=x.pointB;b&&(w=l.add(b.position,x.pointA));_&&(S=l.add(_.position,x.pointB));if(!w||!S)continue;(i.contains(e.bounds,w)||i.contains(e.bounds,S))&&f.push(x)}s.scale.set(1/v,1/g);s.position.set(-e.bounds.min.x*(1/v),-e.bounds.min.y*(1/g))}else f=h;for(p=0;p<u.length;p++)n.body(e,u[p]);for(p=0;p<f.length;p++)n.constraint(e,f[p]);o.render(s)};n.constraint=function(e,t){var r=e.engine,n=t.bodyA,i=t.bodyB,a=t.pointA,s=t.pointB,l=e.container,c=t.render,u="c-"+t.id,h=e.primitives[u];h||(h=e.primitives[u]=new PIXI.Graphics);if(!c.visible||!t.pointA||!t.pointB){h.clear();return}-1===o.indexOf(l.children,h)&&l.addChild(h);h.clear();h.beginFill(0,0);h.lineStyle(c.lineWidth,o.colorToNumber(c.strokeStyle),1);n?h.moveTo(n.position.x+a.x,n.position.y+a.y):h.moveTo(a.x,a.y);i?h.lineTo(i.position.x+s.x,i.position.y+s.y):h.lineTo(s.x,s.y);h.endFill()};n.body=function(e,t){var n=e.engine,i=t.render;if(!i.visible)return;if(i.sprite&&i.sprite.texture){var a="b-"+t.id,s=e.sprites[a],l=e.spriteContainer;s||(s=e.sprites[a]=r(e,t));-1===o.indexOf(l.children,s)&&l.addChild(s);s.position.x=t.position.x;s.position.y=t.position.y;s.rotation=t.angle;s.scale.x=i.sprite.xScale||1;s.scale.y=i.sprite.yScale||1}else{var u="b-"+t.id,h=e.primitives[u],f=e.container;if(!h){h=e.primitives[u]=c(e,t);h.initialAngle=t.angle}-1===o.indexOf(f.children,h)&&f.addChild(h);h.position.x=t.position.x;h.position.y=t.position.y;h.rotation=t.angle-h.initialAngle}};var r=function(e,t){var r=t.render,n=r.sprite.texture,i=u(e,n),a=new PIXI.Sprite(i);a.anchor.x=t.render.sprite.xOffset;a.anchor.y=t.render.sprite.yOffset;return a};var c=function(e,t){var r=t.render,n=e.options,i=new PIXI.Graphics,a=o.colorToNumber(r.fillStyle),s=o.colorToNumber(r.strokeStyle),l=o.colorToNumber(r.strokeStyle),c=o.colorToNumber("#bbb"),u=o.colorToNumber("#CD5C5C"),h;i.clear();for(var f=t.parts.length>1?1:0;f<t.parts.length;f++){h=t.parts[f];if(n.wireframes){i.beginFill(0,0);i.lineStyle(1,c,1)}else{i.beginFill(a,1);i.lineStyle(r.lineWidth,s,1)}i.moveTo(h.vertices[0].x-t.position.x,h.vertices[0].y-t.position.y);for(var p=1;p<h.vertices.length;p++)i.lineTo(h.vertices[p].x-t.position.x,h.vertices[p].y-t.position.y);i.lineTo(h.vertices[0].x-t.position.x,h.vertices[0].y-t.position.y);i.endFill();if(n.showAngleIndicator||n.showAxes){i.beginFill(0,0);n.wireframes?i.lineStyle(1,u,1):i.lineStyle(1,l);i.moveTo(h.position.x-t.position.x,h.position.y-t.position.y);i.lineTo((h.vertices[0].x+h.vertices[h.vertices.length-1].x)/2-t.position.x,(h.vertices[0].y+h.vertices[h.vertices.length-1].y)/2-t.position.y);i.endFill()}}return i};var u=function(e,t){var r=e.textures[t];r||(r=e.textures[t]=PIXI.Texture.fromImage(t));return r}})()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)})}).call(t,r(34))},110:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.PhysicsLayers={default:1,noCollision:2};var i=t.TextLayers=[64|n.default,128|n.default,256|n.default,512|n.default,1024|n.default,2048|n.default,4096|n.default,8192|n.default,16384|n.default,32768|n.default]},111:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.overrideWidth=-1;var i=t.overrideHeight=-1},112:function(e,t,r){"use strict";(function(e){r.d(t,"c",function(){return n});r.d(t,"d",function(){return a});r.d(t,"a",function(){return o});r.d(t,"b",function(){return s});function n(){return"undefined"!==typeof window}function i(){return"undefined"===typeof window}function a(e){const t=new ArrayBuffer(e.length);const r=new Uint8Array(t);for(let t=0;t<e.length;++t)r[t]=e[t];return t}function o(t){const r=new e(t.byteLength);const n=new Uint8Array(t);for(let e=0;e<r.length;++e)r[e]=n[e];return r}function s(e,t){if(!e)throw t}}).call(t,r(233).Buffer)},216:function(e,t,r){e.exports=r(217)},217:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(14);var a=T(i);var o=r(2);var s=T(o);var l=r(103);var c=T(l);var u=r(107);var h=T(u);var f=r(106);var p=r(218);var d=T(p);var m=r(229);var v=T(m);var g=r(239);var y=T(g);var x=r(240);var b=T(x);var _=r(241);var w=T(_);var S=r(108);function T(e){return e&&e.__esModule?e:{default:e}}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function A(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=1280;var P=720;var C=function(e){A(t,e);function t(){M(this,t);var e=E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.showNextup=true;e.openControllerWindow=function(){e.controllerWindow=window.open("./controller","controller","titlebar=0,close=0,menubar=0,location=0,status=0,width=300,height=825,left=0,top=0,dependent=1,resizable=1,scrollbars=1")};e.onSendMessage=function(t){e.controllerWindow.postMessage(t,"*")};e.onReceiveMessage=function(t){var r=t.data;r.type===f.MessageTypes.data&&console.log("data",r.data);switch(r.type){case f.MessageTypes.newLayout:e.circlesViewerRef.newRandomLayout(r.data.seed,r.data.growTime);break;case f.MessageTypes.removeCircles:e.circlesViewerRef.removeCircles(r.data);break;case f.MessageTypes.makeNonStatic:e.circlesViewerRef.makeCirclesNonStatic();break;case f.MessageTypes.changeGrainDensity:e.circlesViewerRef.changeGrainDesity(r.data);break;case f.MessageTypes.changeGrainScale:e.circlesViewerRef.changeGrainScale(r.data);break;case f.MessageTypes.changeGrainAngle:e.circlesViewerRef.changeGrainAngle(r.data);break;case f.MessageTypes.newText:e.textViewerRef.newText(r.data);break;case f.MessageTypes.newTextWithParams:e.startTextLoop(r.data.text);e.textViewerRef.updateTextSize(parseInt(r.data.size,10));break;case f.MessageTypes.startScreensaver:e.startScreensaverLoop();break;case f.MessageTypes.dropText:e.textViewerRef.dropText();break;case f.MessageTypes.makeFullscreen:e.fullscreenButtonRef.style.display="flex";break;case f.MessageTypes.changeBGColor:e.circlesViewerRef.changeBgColor(r.data);break;case f.MessageTypes.changeFGColor:e.circlesViewerRef.changeFrontColor(r.data);break;case f.MessageTypes.changeGravityCircles:e.circlesViewerRef.updateGravity(r.data);break;case f.MessageTypes.changeGravityText:e.textViewerRef.updateGravity(r.data);break;case f.MessageTypes.changeFrictionCircles:e.circlesViewerRef.updateFriction(r.data);break;case f.MessageTypes.changeFrictionText:e.textViewerRef.updateFriction(r.data);break;case f.MessageTypes.changeRestitutionCircles:e.circlesViewerRef.updateRestitution(r.data);break;case f.MessageTypes.changeRestitutionText:e.textViewerRef.updateRestitution(r.data);break;case f.MessageTypes.updateLayoutConfig:e.circlesViewerRef.updateLayoutConfig(r.data);break;case f.MessageTypes.setBottomCircles:true===r.data?e.circlesViewerRef.closeBottom():e.circlesViewerRef.openBottom();break;case f.MessageTypes.setBottomText:true===r.data?e.textViewerRef.closeBottom():e.textViewerRef.openBottom();break;case f.MessageTypes.updateTextSize:e.textViewerRef.updateTextSize(parseInt(r.data,10));break;case f.MessageTypes.updateTextStrokeColor:e.textViewerRef.updateStrokeColor(r.data);break;case f.MessageTypes.updateTextFillColor:e.textViewerRef.updateFillColor(r.data);break;case f.MessageTypes.updateTextShowFill:e.textViewerRef.updateTextShowFill(r.data);break;case f.MessageTypes.toggleLogoVisibility:true===r.data?e.logoRef.show():e.logoRef.hide();break;case f.MessageTypes.toggleLinesVisibility:true===r.data?e.linesRef.show():e.linesRef.hide();break;case f.MessageTypes.toggleNextUpVisibility:e.showNextup=true===r.data;console.log(e.t_textloop,e.t_ssloop);e.t_textloop&&e.t_textloop._active&&(e.showNextup?e.nextupRef.show():e.nextupRef.hide());break}};return e}n(t,[{key:"componentDidMount",value:function e(){var t=this;this.openControllerWindow();window.addEventListener("message",this.onReceiveMessage);window.addEventListener("keydown",function(e){"h"===e.key?t.openControllerWindow():"f"===e.key&&t.enterFullscreen()});document.addEventListener("dblclick",function(){t.enterFullscreen()});window.addEventListener("resize",function(){t.fitViewport()});this.fitViewport();this.startScreensaverLoop()}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("message",this.onReceiveMessage);this.controllerWindow.close()}},{key:"enterFullscreen",value:function e(){document.webkitFullscreenEnabled?document.webkitFullscreenElement||document.querySelector("body").webkitRequestFullscreen():document.mozFullScreenEnabled?document.mozFullScreenElement||document.querySelector("body").mozRequestFullScreen():document.fullscreenEnabled&&(document.fullscreenElement||document.querySelector("body").requestFullscreen())}},{key:"stopTextLoop",value:function e(){this.t_textloop&&this.t_textloop.kill()}},{key:"startTextLoop",value:function e(t){var r=this;console.log("text loop:",t);this.stopTextLoop();this.stopScreensaverLoop();this.showNextup&&this.nextupRef.show();this.circlesViewerRef.newRandomLayout("",1);this.t_textloop=new S.TimelineLite;var n=this.t_textloop;var i=0;n.add(function(){r.textViewerRef.closeBottom();r.textViewerRef.newText(t)});n.add(function(){r.textViewerRef.openBottom()},6);n.add(function(){},8);n.eventCallback("onComplete",function(){if(++i>=2){i=0;r.circlesViewerRef.newRandomLayout("",1)}n.restart()})}},{key:"stopScreensaverLoop",value:function e(){this.t_ssloop&&this.t_ssloop.kill()}},{key:"startScreensaverLoop",value:function e(){var t=this;console.log("starting screensaver");this.stopScreensaverLoop();this.stopTextLoop();this.textViewerRef.clearText();this.nextupRef.hide();this.t_ssloop=new S.TimelineLite;var r=this.t_ssloop;var n={x:0,y:1,scale:.001};var i=new S.TimelineLite;i.eventCallback("onUpdate",function(){t.circlesViewerRef.updateGravity(n)});function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;var r=3e-4;var a=6e-4;i.clear();i.set(n,{x:Math.random()-.5,y:Math.random()-.5,scale:r+Math.random()*(a-r)});for(var o=0;o<t;o++)i.to(n,e/t,{x:Math.random()-.5,y:Math.random()-.5,scale:r+Math.random()*(a-r)})}a();r.add(function(){t.circlesViewerRef.closeBottom();t.circlesViewerRef.newRandomLayout("",3)});r.add(function(){t.circlesViewerRef.makeCirclesNonStatic()},3);r.add(i);r.add(function(){t.circlesViewerRef.openBottom();t.circlesViewerRef.updateGravity({x:0,y:1,scale:.0015})},27);r.add(function(){},30);r.eventCallback("onComplete",function(){a();r.restart()})}},{key:"fitViewport",value:function e(){if(window.innerWidth/window.innerHeight<R/P){this.containerRef.style.width=window.innerWidth+"px";this.containerRef.style.height=window.innerWidth/(R/P)+"px"}else{this.containerRef.style.width=window.innerHeight*(R/P)+"px";this.containerRef.style.height=window.innerHeight+"px"}}},{key:"render",value:function e(){var t=this;return s.default.createElement(h.default,null,s.default.createElement(c.default,null,s.default.createElement("title",{className:"jsx-2709991536"},"Vienna Design Week 2018"),s.default.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1",className:"jsx-2709991536"})),s.default.createElement("div",{className:"jsx-2709991536 cover"},s.default.createElement("div",{ref:function e(r){t.containerRef=r},style:{width:R,height:P,position:"relative"},className:"jsx-2709991536 container"},s.default.createElement("div",{className:"jsx-2709991536 webGLContainer"},s.default.createElement(d.default,{ref:function e(r){t.circlesViewerRef=r}})),s.default.createElement(v.default,{ref:function e(r){t.textViewerRef=r}}),s.default.createElement(b.default,{dividerScale:3,ref:function e(r){t.linesRef=r}}),s.default.createElement(y.default,{ref:function e(r){t.logoRef=r}}),s.default.createElement(w.default,{ref:function e(r){t.nextupRef=r}}),s.default.createElement("div",{onClick:this.enterFullscreen,ref:function e(r){t.fullscreenButtonRef=r},className:"jsx-2709991536 fullscreenButton"},"click to fullscreen"))),s.default.createElement(a.default,{styleId:"2709991536",css:[".cover.jsx-2709991536{width:100vw;height:100vh;position:absolute;top:50%;left:50%;}",".container.jsx-2709991536{-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}",".webGLContainer.jsx-2709991536{width:100%;height:100%;}",".fullscreenButton.jsx-2709991536{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);color:white;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:10vmin;display:none;}"]}))}}]);return t}(o.Component);t.default=C},218:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(14);var a=y(i);var o=r(2);var s=y(o);var l=r(43);var c=r(108);var u=r(220);var h=y(u);var f=r(224);var p=y(f);var d=r(226);var m=r(228);var v=y(m);var g=r(111);function y(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=1/30;var S=2048;var T=function(e){_(t,e);function t(e){x(this,t);var r=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.deltaCounter=9999.9;r.changeBgColor=function(e){var t=new l.Color(e);r.renderer.setClearColor(t);r.uniforms.colorBg.value[0]=t.r;r.uniforms.colorBg.value[1]=t.g;r.uniforms.colorBg.value[2]=t.b};r.changeFrontColor=function(e){var t=new l.Color(e);r.uniforms.colorFront.value[0]=t.r;r.uniforms.colorFront.value[1]=t.g;r.uniforms.colorFront.value[2]=t.b};r.changeGrainDesity=function(e){r.uniforms.grainDesity.value=e};r.changeGrainScale=function(e){r.uniforms.grainScale.value=e};r.changeGrainAngle=function(e){r.uniforms.grainAngle.value=e};r.updateGravity=function(e){r.circlePhysics.updateGravity(e)};r.updateFriction=function(e){r.circlePhysics.updateFriction(e)};r.updateRestitution=function(e){r.circlePhysics.updateRestitution(e)};r.closeWorldBounds=function(){r.circlePhysics.closeTop();r.circlePhysics.closeBottom()};r.openBottom=function(){r.circlePhysics.openBottom()};r.closeBottom=function(){r.circlePhysics.closeBottom()};r.onResize=function(){r.rect=r.containerRef.getBoundingClientRect();r.windowWidth=r.rect.width;r.windowHeight=r.rect.height;g.overrideWidth>0&&(r.windowWidth=g.overrideWidth);g.overrideHeight>0&&(r.windowHeight=g.overrideHeight);r.renderer.setSize(r.windowWidth,r.windowHeight);var e=r.windowWidth/r.windowHeight;r.circlePhysics.onResize(r.windowWidth/r.windowHeight);var t=r.circlePhysics.getWorldBounds();var n=t.width/2;var i=t.height/2;r.camera.top=-i;r.camera.left=n;r.camera.right=-n;r.camera.bottom=i;r.camera.updateProjectionMatrix();r.uniforms.screenParams.value[0]=r.windowWidth;r.uniforms.screenParams.value[1]=r.windowHeight;r.uniforms.screenParams.value[2]=1/r.windowWidth;r.uniforms.screenParams.value[3]=1/r.windowHeight;var a=r.rect.width/r.rect.height;if(e<a){r.canvasRef.style.width="auto";r.canvasRef.style.height="100%"}else{r.canvasRef.style.width="100%";r.canvasRef.style.height="auto"}};r.updateLayoutConfig=function(e){(0,d.updateConfig)(e)};r.newRandomLayout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;r.circlePhysics.closeBottom();r.circlePhysics.setFromLayout((0,d.generateLayout)(r.circlePhysics.getWorldBounds(),void 0!==e&&e.length>0?parseInt(e,10):Date.now()),r.circlesSizesBuffer);c.TweenLite.fromTo(r.uniforms.fadeIn,t,{value:0},{value:1.2,ease:"Quad.easeOut"})};r.makeCirclesNonStatic=function(){r.circlePhysics.makeNonStatic()};r.animate=function(){var e=Math.min(.05,r.clock.getDelta());r.uniforms.time.value+=e;r.uniforms.time.value%=1e3;r.circlePhysics.update(r.circlesPositionsBuffer);r.draw();r.deltaCounter%=w;r.deltaCounter+=e;r.frameId=requestAnimationFrame(r.animate)};r.draw=function(){r.renderer.render(r.scene,r.camera)};r.windowWidth=2;r.windowHeight=2;return r}n(t,[{key:"shouldComponentUpdate",value:function e(t,r){return false}},{key:"componentDidMount",value:function e(){this.webGLSupport=(0,v.default)();this.clock=new l.Clock;this.clock.start();this.renderer=new l.WebGLRenderer({canvas:this.canvasRef});this.renderer.setPixelRatio(window.devicePixelRatio||1);this.renderer.setClearColor(15423535,1);this.uniforms={time:{type:"f",value:0},screenParams:{type:"4fv",value:[1,1,0,0]},colorBg:{type:"3fv",value:[.92156862745,.34509803921,.18431372549]},colorFront:{type:"3fv",value:[1,1,1]},grainDesity:{type:"f",value:-.9},grainScale:{type:"f",value:.8},grainAngle:{type:"f",value:0},fadeIn:{type:"f",value:1}};this.camera=new l.OrthographicCamera(-2,2,1,-1,1,100);this.camera.position.z=2.5;this.scene=new l.Scene;this.sceneHandler=new h.default;this.sceneHandler.setup(this.scene,this.uniforms,S);this.circlesPositionsBuffer=this.sceneHandler.getPositionBuffer();this.circlesSizesBuffer=this.sceneHandler.getSizesBuffer();this.circlePhysics=new p.default;var t=window.innerWidth/window.innerHeight;g.overrideWidth>0&&g.overrideHeight>0&&(t=t=g.overrideWidth/g.overrideHeight);this.circlePhysics.setup(10,t);this.onResize();this.circlePhysics.setFromLayout((0,d.generateLayout)(this.circlePhysics.getWorldBounds(),200),this.circlesSizesBuffer);this.animate()}},{key:"componentWillUnmount",value:function e(){cancelAnimationFrame(this.frameId)}},{key:"removeCircles",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;c.TweenLite.fromTo(this.uniforms.fadeIn,t,{value:1.2},{value:0,ease:"Quad.easeOut"})}},{key:"render",value:function e(){var t=this;return s.default.createElement("div",{ref:function e(r){t.containerRef=r},className:"jsx-1494666319"},s.default.createElement("canvas",{ref:function e(r){t.canvasRef=r},className:"jsx-1494666319"}),s.default.createElement(a.default,{styleId:"1494666319",css:["div.jsx-1494666319{width:100%;height:100%;}"]}))}}]);return t}(o.Component);t.default=T},219:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]);Object.defineProperty(t,"loaded",{enumerable:true,get:function(){return t.l}});Object.defineProperty(t,"id",{enumerable:true,get:function(){return t.i}});Object.defineProperty(t,"exports",{enumerable:true});t.webpackPolyfill=1}return t}},220:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(43);var a=r(221);var o=h(a);var s=r(222);var l=h(s);var c=r(223);var u=h(c);function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function(){function e(){var t=this;f(this,e);this.getPositionBuffer=function(){return t.mesh.geometry.attributes.circlePosition};this.getSizesBuffer=function(){return t.mesh.geometry.attributes.circleSize}}n(e,[{key:"setup",value:function e(t,r,n){this.material=new i.RawShaderMaterial({vertexShader:l.default,fragmentShader:u.default,uniforms:r,defines:{}});this.container=new i.Group;t.add(this.container);this.mesh=new i.Mesh((0,o.default)(60,1,n),this.material);this.mesh.frustumCulled=false;this.container.add(this.mesh);this.mesh.geometry.attributes.circlePosition.dynamic=true}}]);return e}();t.default=p},221:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;var n=r(43);function i(e,t,r){var i=[];var a=[];var o=[];var s=[];var l=[];i.push(0,0);var c=0;var u=2*Math.PI/e;for(var h=0;h<e;h++){i.push(Math.sin(c)*t,Math.cos(c)*t);h>0&&l.push(h,0,h+1);c+=u}l.push(0,1,e);for(var f=0;f<r;f++){a.push(f/(r-1)*2-1,0);o.push(.3);s.push(2*(Math.random()-.5)*1e3)}var p=new n.InstancedBufferGeometry;p.addAttribute("extrude",new n.BufferAttribute(new Float32Array(i),2));p.addAttribute("circlePosition",new n.InstancedBufferAttribute(new Float32Array(a),2));p.addAttribute("circleSize",new n.InstancedBufferAttribute(new Float32Array(o),1));p.addAttribute("circleRandom",new n.InstancedBufferAttribute(new Float32Array(s),1));p.setIndex(new n.BufferAttribute(new Uint16Array(l),1));return p}},222:function(e,t,r){"use strict";e.exports="precision highp float;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nuniform float fadeIn;\n\nuniform float grainAngle;\n\nattribute vec2 extrude;\nattribute vec2 circlePosition;\nattribute float circleSize;\nattribute float circleRandom;\n\nvarying vec2 vUV;\nvarying float vGrainValue;\n\nfloat random(float position) {\n  return fract(sin(position) * 100000.0);\n}\n\nfloat random(vec2 position) {\n  return fract(sin(dot(position, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nvoid main() {\n  vec2 noisePos = vec2(\n    circleRandom + circleSize * 0.2,\n    circleSize\n  );\n  float fadeValue = random(noisePos) * 0.6;\n\n  noisePos = vec2(\n    circleSize,\n    circleRandom - circleSize * 0.5\n  );\n  float fadeDuration = 0.2 + random(noisePos) * 0.4;\n\n  float scaleValue = smoothstep(\n    fadeValue,\n    fadeValue + fadeDuration,\n    fadeIn\n  );\n\n  vUV = 0.5 + extrude * 0.5;\n\n  vGrainValue = 0.5 + rotate(extrude, grainAngle + PI).y * 0.5 * scaleValue;\n\n  vec3 transformed = vec3(extrude, 0.0);\n  transformed.xy *= circleSize * scaleValue;\n  transformed.xy += circlePosition;\n\n  vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n  mvPosition = projectionMatrix * mvPosition;\n\n  gl_Position = mvPosition;\n}"},223:function(e,t,r){"use strict";e.exports="#extension GL_OES_standard_derivatives : enable\nprecision highp float;\n\nuniform vec3 colorBg;\nuniform vec3 colorFront;\n\nuniform float time;\nuniform vec4 screenParams;\n\nuniform float grainDesity;\nuniform float grainScale;\n\nvarying vec2 vUV;\nvarying float vGrainValue;\n\n//\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n\nfloat random(float position) {\n  return fract(sin(position) * 100000.0);\n}\n\nfloat random(vec2 position) {\n  return fract(sin(dot(position, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\nvoid main() {\n  float value = vGrainValue;\n\n  #ifdef GL_OES_standard_derivatives\n    float aawidth = (1.0 / length(vec2(dFdx(value), dFdy(value)))) * 0.3;\n  #else\n    float aawidth = 90.0;\n  #endif\n\n  aawidth *= grainScale;\n\n  value = smoothstep(\n    value,\n    value + grainDesity,\n    snoise(vUV * aawidth)\n  );\n\n  gl_FragColor.rgb = mix(\n    colorBg,\n    colorFront,\n    value\n  );\n}"},224:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(109);var a=r(110);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=r(225);var l=100;var c=1e3+.5*l;var u={width:100,height:2*c-l};var h=function(){function e(){var t=this;o(this,e);this.updateGravity=function(e){t.world.gravity.x=e.x;t.world.gravity.y=e.y;t.world.gravity.scale=e.scale};this.resetGravity=function(){t.world.gravity.x=0;t.world.gravity.y=1;t.world.gravity.scale=.001};this.updateFriction=function(e){t.bodies.forEach(function(t){t.friction=e})};this.updateRestitution=function(e){t.bodies.forEach(function(t){t.restitution=e})};this.getWorldBounds=function(){return u};this.chunkArray=function(e,t){var r=[];while(e.length>0)r.push(e.splice(0,Math.min(t,e.length)));return r};this.setChunkNonStatic=function(e,r){window.setTimeout(function(){for(var r=0,n=e.length;r<n;r++)i.Body.setStatic(t.bodies[e[r]],false)},r)};this.openTop=function(){t.topBorder.collisionFilter.mask=a.PhysicsLayers.noCollision};this.closeTop=function(){t.topBorder.collisionFilter.mask=a.PhysicsLayers.default};this.openBottom=function(){t.bottomBorder.collisionFilter.mask=a.PhysicsLayers.noCollision};this.closeBottom=function(){t.bottomBorder.collisionFilter.mask=a.PhysicsLayers.default}}n(e,[{key:"setup",value:function e(t,r){this.engine=i.Engine.create();this.world=this.engine.world;this.topBorder=i.Bodies.rectangle(0,-c,1e4,l,{isStatic:true});this.leftBorder=i.Bodies.rectangle(-c,0,l,1e4,{isStatic:true});this.rightBorder=i.Bodies.rectangle(c,0,l,1e4,{isStatic:true});this.bottomBorder=i.Bodies.rectangle(0,c,1e4,l,{isStatic:true});this.onResize(r);i.World.add(this.world,[this.topBorder,this.leftBorder,this.rightBorder,this.bottomBorder]);this.bodies=[];this.bodies.push(i.Bodies.circle(0,0,500,{restitution:.6,friction:.1}));i.World.add(this.world,this.bodies);false}},{key:"onResize",value:function e(t){u.width=Math.round(c*t*2-l);i.Body.setPosition(this.leftBorder,{x:c*-t,y:0});i.Body.setPosition(this.rightBorder,{x:c*t,y:0})}},{key:"setFromLayout",value:function e(t,r){t=t.slice(0,r.count);for(var n=0,a=this.bodies.length;n<a;n++)i.World.remove(this.world,this.bodies[n]);this.bodies.length=0;var o=window.innerWidth/window.innerHeight;for(var s=0,l=t.length;s<l;s++){this.bodies.push(i.Bodies.circle(t[s].x,t[s].y,t[s].radius,{restitution:.6,friction:.1,isStatic:true}));r.array[s]=t[s].radius}for(var c=t.length,u=r.count;c<u;c++)r.array[c]=0;r.needsUpdate=true;i.World.add(this.world,this.bodies)}},{key:"makeNonStatic",value:function e(){var t=[];for(var r=0,n=this.bodies.length;r<n;r++)t.push(r);s(t);var i=3;var a=this.chunkArray(t,i);var o=[];var l=0;for(var c=0,u=a.length;c<u;c++){o.push(l);l+=Math.ceil(20+100*Math.random())}for(var h=0,f=a.length;h<f;h++)this.setChunkNonStatic(a[h],o[h])}},{key:"update",value:function e(t){i.Engine.update(this.engine);var r=0;for(var n=0,a=this.bodies.length;n<a;n++){r=2*n;t.array[r]=this.bodies[n].position.x;t.array[r+1]=this.bodies[n].position.y}t.needsUpdate=true}}]);return e}();t.default=h},225:function(e,t,r){"use strict";e.exports=function(e){if(!Array.isArray(e))throw new TypeError("Expected Array, got "+typeof e);var t;var r;var n=e.length;var i=e.slice();while(n){t=Math.floor(Math.random()*n--);r=i[n];i[n]=i[t];i[t]=r}return i}},226:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.generateLayout=b;t.updateConfig=_;t.runOnCell=w;t.decide=S;var n=r(227);var i=[2,3,4,6,8,9,12,16,18,24,27,36,48,54,64,72,81,96,108,128,144,162,192,216,243,256];var a=1;var o=6;var s=.4;var l=.7;var c=.5;var u=i[o];function h(e){e<0?e=0:e>i.length-1&&(e=i.length-1);o=e;u=i[e]}var f=true;var p=0;var d=0;var m=0;var v=100;var g=100;var y=.5*v;var x=.5*g;function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=[];n(t,{global:true});v=Math.floor(e.width);g=Math.floor(e.height);y=.5*v;x=.5*g;m=0;while(m<a){r=[];p=0;d=0;m=0;w(r,0,0,v-1,g-1)}console.log("LAYOUT "+t+" fillCount="+m);n.resetGlobal();return r}function _(e){h(e.divisionStep);s=e.cellDivide;l=e.cellFill;c=e.cellTwoDivisions;f=!e.showPartial}function w(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;p++;var o=S(c)?2:3;var h=Math.ceil(n/o)>=Math.floor(v/u);var b=S(s);1===p&&(b=true);if(h&&b){var _=n/o;for(var T=0;T<Math.ceil(i/_);T++)for(var M=0;M<o;M++)w(e,t+M*_,r+T*_,_,_,a+1)}else{var E=S(l);if(f&&(t+n>v||r+i>g))return;d++;if(E){m++;var A=.5*n;e.push({x:t+A-y,y:r+A-x,radius:A})}}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()<e}},227:function(e,t,r){"use strict";(function(t){var r=256;var n=6;var i=52;var a=[];var o="undefined"===typeof t?window:t;var s=Math.pow(r,n),l=Math.pow(2,i),c=2*l,u=r-1;var h=Math.random;e.exports=function(t,i){if(i&&true===i.global){i.global=false;Math.random=e.exports(t,i);i.global=true;return Math.random}var o=i&&i.entropy||false;var u=[];var h=d(p(o?[t,v(a)]:0 in arguments?t:m(),3),u);var g=new f(u);d(v(g.S),a);return function(){var e=g.g(n),t=s,i=0;while(e<l){e=(e+i)*r;t*=r;i=g.g(1)}while(e>=c){e/=2;t/=2;i>>>=1}return(e+i)/t}};e.exports.resetGlobal=function(){Math.random=h};function f(e){var t,n=e.length,i=this,a=0,o=i.i=i.j=0,s=i.S=[];n||(e=[n++]);while(a<r)s[a]=a++;for(a=0;a<r;a++){s[a]=s[o=u&o+e[a%n]+(t=s[a])];s[o]=t}(i.g=function(e){var t,n=0,a=i.i,o=i.j,s=i.S;while(e--){t=s[a=u&a+1];n=n*r+s[u&(s[a]=s[o=u&o+t])+(s[o]=t)]}i.i=a;i.j=o;return n})(r)}function p(e,t){var r=[],n=(typeof e)[0],i;if(t&&"o"==n)for(i in e)try{r.push(p(e[i],t-1))}catch(e){}return r.length?r:"s"==n?e:e+"\0"}function d(e,t){var r=e+"",n,i=0;while(i<r.length)t[u&i]=u&(n^=19*t[u&i])+r.charCodeAt(i++);return v(t)}function m(e){try{o.crypto.getRandomValues(e=new Uint8Array(r));return v(e)}catch(e){return[+new Date,o,o.navigator&&o.navigator.plugins,o.screen,v(a)]}}function v(e){return String.fromCharCode.apply(0,e)}d(Math.random(),a)}).call(t,r(34))},228:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=n;function n(){var e={supportsWebGL:false,maxTextureSize:4096,supports4kTextures:false,supports8kTextures:false,supports16kTextures:false,supportsInstancing:false,supportsFloatTextures:false,isSoftwareRenderer:false,lowPerformance:false};var t=document.createElement("canvas");var r=t.getContext("webgl")||t.getContext("experimental-webgl");r&&r instanceof WebGLRenderingContext&&(e.supportsWebGL=true);if(e.supportsWebGL){e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE);e.supports4kTextures=e.maxTextureSize>=4096;e.supports8kTextures=e.maxTextureSize>=8192;e.supports16kTextures=e.maxTextureSize>=16384;e.supportsInstancing=null!==r.getExtension("ANGLE_instanced_arrays");e.supportsFloatTextures=null!==r.getExtension("OES_texture_float");var n=r.getExtension("WEBGL_debug_renderer_info");var i=r.getParameter(n.UNMASKED_VENDOR_WEBGL);var a=r.getParameter(n.UNMASKED_RENDERER_WEBGL);"Google Inc."===i&&"Google SwiftShader"===a&&(e.isSoftwareRenderer=true);a.includes("Software")&&(e.isSoftwareRenderer=true);e.lowPerformance=e.isSoftwareRenderer||!e.supports4kTextures||!e.supportsInstancing||!e.supportsFloatTextures}return e}},229:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(14);var a=m(i);var o=r(2);var s=m(o);var l=r(43);var c=r(230);var u=d(c);var h=r(237);var f=m(h);var p=r(111);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=false;var b="A City\nFull of\nDesign";var _=200;var w="#000000";var S="#000000";var T=false;var M=function(e){y(t,e);function t(e){v(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.bottom=true;r.updateTextSize=function(e){r.textPhysics.updateTextSize(e);var t=r.textPhysics.getWorldBounds();var n=r.containerRef.querySelectorAll("svg");n.forEach(function(e){e.setAttribute("viewBox",-.5*t.width+" "+-.5*t.height+" "+t.width+" "+t.height)})};r.newText=function(e){for(var t=0,n=r.svgs.length;t<n;t++)r.containerRef.removeChild(r.svgs[t]);r.svgs=[];r.generateSVGs(e,r.font,r.containerRef,r.svgs);r.onResize();r.textPhysics.openTop();r.textPhysics.closeBottom();r.textPhysics.clearBodies();r.bottom?r.textPhysics.closeBottomBorder():r.textPhysics.openBottomBorder();for(var i=0,a=r.svgs.length;i<a;i++)r.textPhysics.setFromSVG(r.svgs[i],i,.6,.5-.1*i);r.textPhysics.openBottomBodies();r.textPhysics.update(r.svgs)};r.updateGravity=function(e){r.textPhysics.updateGravity(e)};r.updateFriction=function(e){r.textPhysics.updateFriction(e)};r.updateRestitution=function(e){r.textPhysics.updateRestitution(e)};r.closeWorldBounds=function(){r.textPhysics.closeTop();r.textPhysics.closeBottom()};r.updateStrokeColor=function(e){w=e;r.updateExistingTextStyles()};r.updateFillColor=function(e){S=e;r.updateExistingTextStyles()};r.updateTextShowFill=function(e){T=e;r.updateExistingTextStyles()};r.updateExistingTextStyles=function(){var e=r.containerRef.querySelectorAll("svg");e.forEach(function(e){var t=e.querySelectorAll("path");t.forEach(function(e){e.setAttribute("stroke",w);e.setAttribute("fill",T?S:"none")})})};r.openBottom=function(){r.bottom=false;r.textPhysics.openBottomBorder()};r.closeBottom=function(){r.bottom=true;r.textPhysics.closeBottomBorder()};r.dropText=function(){r.textPhysics.openBottom();r.textPhysics.closeTop()};r.onResize=function(){var e=r.containerRef.getBoundingClientRect();if(p.overrideWidth>0&&p.overrideHeight>0){r.textPhysics.onResize(p.overrideWidth/p.overrideHeight);var t=r.containerRef.querySelectorAll("svg");var n=e.width/e.height;var i=p.overrideWidth/p.overrideHeight;t.forEach(function(e){if(i<n){e.style.width="auto";e.style.height="100%"}else{e.style.width="100%";e.style.height="auto"}})}else{r.textPhysics.onResize(e.width/e.height);var a=r.textPhysics.getWorldBounds();var o=r.containerRef.querySelectorAll("svg");o.forEach(function(e){e.setAttribute("viewBox",-.5*a.width+" "+-.5*a.height+" "+a.width+" "+a.height)})}};r.animate=function(){r.textPhysics.update(r.svgs);r.draw();r.frameId=requestAnimationFrame(r.animate)};r.draw=function(){};return r}n(t,[{key:"shouldComponentUpdate",value:function e(t,r){return false}},{key:"componentDidMount",value:function e(){var t=this;this.clock=new l.Clock;this.clock.start();this.svgs=[];u.load("./static/fonts/Linotype - NHaasGroteskTXPro-55Rg.otf",function(e,r){if(e)console.error("could not load font",e);else{t.font=r;t.svgs=[];if(x){t.updateTextSize(_);t.newText(b)}}});this.textPhysics=new f.default;var r=this.containerRef.getBoundingClientRect();this.textPhysics.setup(r.width/r.height);this.textPhysics.clearBodies();this.onResize();this.animate()}},{key:"componentWillUnmount",value:function e(){cancelAnimationFrame(this.frameId)}},{key:"clearText",value:function e(){for(var t=0,r=this.svgs.length;t<r;t++)this.containerRef.removeChild(this.svgs[t]);this.svgs=[];this.textPhysics.clearBodies()}},{key:"generateSVGs",value:function e(t,r,n,i){var a=this.textPhysics.getWorldBounds();var o=t.split("\n");for(var s=0,l=o.length;s<l;s++){var c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.style.position="absolute";c.style.top="0";c.style.left="0";c.style.width="100%";c.style.height="100%";c.style.transform="";if(p.overrideWidth>0){c.style.width=p.overrideWidth+"px";c.style.left="50vw";c.style.transform+="translateX(-50%)"}if(p.overrideHeight>0){c.style.width=p.overrideHeight+"px";c.style.top="50vh";c.style.transform+="translateY(-50%)"}var u=r.getPath(o[s],0,60);var h=u.getBoundingBox();c.setAttribute("boxsize","0 0 "+(h.x2-h.x1)+" 60");c.setAttribute("viewBox",-.5*a.width+" "+-.5*a.height+" "+a.width+" "+a.height);c.innerHTML='<g><path\n          fill="'+(T?S:"none")+'"\n          stroke-width="1.5"\n          stroke="'+w+'"\n          d="'+u.toPathData(3)+'"\n          transform="translate('+-h.x1+" "+h.y1+')"\n        /></g>';i.push(c);n.appendChild(c)}}},{key:"render",value:function e(){var t=this;return s.default.createElement("div",{ref:function e(r){t.containerRef=r},className:"jsx-189101455 container"},s.default.createElement(a.default,{styleId:"189101455",css:[".container.jsx-189101455{width:100%;height:100%;position:absolute;top:0;left:0;}","svg.jsx-189101455 path.jsx-189101455{stroke:red;fill:black;}"]}))}}]);return t}(o.Component);t.default=M},230:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(231);var i=r.n(n);var a=r(232);var o=r.n(a);function s(e,t,r,n,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*r+Math.pow(i,3)*n}function l(){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN}l.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};l.prototype.addPoint=function(e,t){if("number"===typeof e){if(isNaN(this.x1)||isNaN(this.x2)){this.x1=e;this.x2=e}e<this.x1&&(this.x1=e);e>this.x2&&(this.x2=e)}if("number"===typeof t){if(isNaN(this.y1)||isNaN(this.y2)){this.y1=t;this.y2=t}t<this.y1&&(this.y1=t);t>this.y2&&(this.y2=t)}};l.prototype.addX=function(e){this.addPoint(e,null)};l.prototype.addY=function(e){this.addPoint(null,e)};l.prototype.addBezier=function(e,t,r,n,i,a,o,l){const c=[e,t];const u=[r,n];const h=[i,a];const f=[o,l];this.addPoint(e,t);this.addPoint(o,l);for(let e=0;e<=1;e++){const t=6*c[e]-12*u[e]+6*h[e];const r=-3*c[e]+9*u[e]-9*h[e]+3*f[e];const n=3*u[e]-3*c[e];if(0===r){if(0===t)continue;const r=-n/t;if(0<r&&r<1){0===e&&this.addX(s(c[e],u[e],h[e],f[e],r));1===e&&this.addY(s(c[e],u[e],h[e],f[e],r))}continue}const i=Math.pow(t,2)-4*n*r;if(i<0)continue;const a=(-t+Math.sqrt(i))/(2*r);if(0<a&&a<1){0===e&&this.addX(s(c[e],u[e],h[e],f[e],a));1===e&&this.addY(s(c[e],u[e],h[e],f[e],a))}const o=(-t-Math.sqrt(i))/(2*r);if(0<o&&o<1){0===e&&this.addX(s(c[e],u[e],h[e],f[e],o));1===e&&this.addY(s(c[e],u[e],h[e],f[e],o))}}};l.prototype.addQuad=function(e,t,r,n,i,a){const o=e+2/3*(r-e);const s=t+2/3*(n-t);const l=o+1/3*(i-e);const c=s+1/3*(a-t);this.addBezier(e,t,o,s,l,c,i,a)};var c=l;function u(){this.commands=[];this.fill="black";this.stroke=null;this.strokeWidth=1}u.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})};u.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})};u.prototype.curveTo=u.prototype.bezierCurveTo=function(e,t,r,n,i,a){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:n,x:i,y:a})};u.prototype.quadTo=u.prototype.quadraticCurveTo=function(e,t,r,n){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:n})};u.prototype.close=u.prototype.closePath=function(){this.commands.push({type:"Z"})};u.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof c){const t=e;this.moveTo(t.x1,t.y1);this.lineTo(t.x2,t.y1);this.lineTo(t.x2,t.y2);this.lineTo(t.x1,t.y2);this.close();return}Array.prototype.push.apply(this.commands,e)};u.prototype.getBoundingBox=function(){const e=new c;let t=0;let r=0;let n=0;let i=0;for(let a=0;a<this.commands.length;a++){const o=this.commands[a];switch(o.type){case"M":e.addPoint(o.x,o.y);t=n=o.x;r=i=o.y;break;case"L":e.addPoint(o.x,o.y);n=o.x;i=o.y;break;case"Q":e.addQuad(n,i,o.x1,o.y1,o.x,o.y);n=o.x;i=o.y;break;case"C":e.addBezier(n,i,o.x1,o.y1,o.x2,o.y2,o.x,o.y);n=o.x;i=o.y;break;case"Z":n=t;i=r;break;default:throw new Error("Unexpected path command "+o.type)}}e.isEmpty()&&e.addPoint(0,0);return e};u.prototype.draw=function(e){e.beginPath();for(let t=0;t<this.commands.length;t+=1){const r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}if(this.fill){e.fillStyle=this.fill;e.fill()}if(this.stroke){e.strokeStyle=this.stroke;e.lineWidth=this.strokeWidth;e.stroke()}};u.prototype.toPathData=function(e){e=void 0!==e?e:2;function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){let e="";for(let r=0;r<arguments.length;r+=1){const n=arguments[r];n>=0&&r>0&&(e+=" ");e+=t(n)}return e}let n="";for(let e=0;e<this.commands.length;e+=1){const t=this.commands[e];"M"===t.type?n+="M"+r(t.x,t.y):"L"===t.type?n+="L"+r(t.x,t.y):"C"===t.type?n+="C"+r(t.x1,t.y1,t.x2,t.y2,t.x,t.y):"Q"===t.type?n+="Q"+r(t.x1,t.y1,t.x,t.y):"Z"===t.type&&(n+="Z")}return n};u.prototype.toSVG=function(e){let t='<path d="';t+=this.toPathData(e);t+='"';this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"');this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"');t+="/>";return t};u.prototype.toDOMElement=function(e){const t=this.toPathData(e);const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",t);return r};var h=u;function f(e){throw new Error(e)}function p(e,t){e||f(t)}var d={fail:f,argument:p,assert:p};const m=32768;const v=2147483648;const g={};const y={};const x={};function b(e){return function(){return e}}y.BYTE=function(e){d.argument(e>=0&&e<=255,"Byte value should be between 0 and 255.");return[e]};x.BYTE=b(1);y.CHAR=function(e){return[e.charCodeAt(0)]};x.CHAR=b(1);y.CHARARRAY=function(e){const t=[];for(let r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t};x.CHARARRAY=function(e){return e.length};y.USHORT=function(e){return[e>>8&255,255&e]};x.USHORT=b(2);y.SHORT=function(e){e>=m&&(e=-(2*m-e));return[e>>8&255,255&e]};x.SHORT=b(2);y.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]};x.UINT24=b(3);y.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]};x.ULONG=b(4);y.LONG=function(e){e>=v&&(e=-(2*v-e));return[e>>24&255,e>>16&255,e>>8&255,255&e]};x.LONG=b(4);y.FIXED=y.ULONG;x.FIXED=x.ULONG;y.FWORD=y.SHORT;x.FWORD=x.SHORT;y.UFWORD=y.USHORT;x.UFWORD=x.USHORT;y.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]};x.LONGDATETIME=b(8);y.TAG=function(e){d.argument(4===e.length,"Tag should be exactly 4 ASCII characters.");return[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]};x.TAG=b(4);y.Card8=y.BYTE;x.Card8=x.BYTE;y.Card16=y.USHORT;x.Card16=x.USHORT;y.OffSize=y.BYTE;x.OffSize=x.BYTE;y.SID=y.USHORT;x.SID=x.USHORT;y.NUMBER=function(e){if(e>=-107&&e<=107)return[e+139];if(e>=108&&e<=1131){e-=108;return[247+(e>>8),255&e]}if(e>=-1131&&e<=-108){e=-e-108;return[251+(e>>8),255&e]}return e>=-32768&&e<=32767?y.NUMBER16(e):y.NUMBER32(e)};x.NUMBER=function(e){return y.NUMBER(e).length};y.NUMBER16=function(e){return[28,e>>8&255,255&e]};x.NUMBER16=b(3);y.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]};x.NUMBER32=b(5);y.REAL=function(e){let t=e.toString();const r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){const n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*n)/n).toString()}let n="";for(let e=0,r=t.length;e<r;e+=1){const r=t[e];n+="e"===r?"-"===t[++e]?"c":"b":"."===r?"a":"-"===r?"e":r}n+=1&n.length?"f":"ff";const i=[30];for(let e=0,t=n.length;e<t;e+=2)i.push(parseInt(n.substr(e,2),16));return i};x.REAL=function(e){return y.REAL(e).length};y.NAME=y.CHARARRAY;x.NAME=x.CHARARRAY;y.STRING=y.CHARARRAY;x.STRING=x.CHARARRAY;g.UTF8=function(e,t,r){const n=[];const i=r;for(let r=0;r<i;r++,t+=1)n[r]=e.getUint8(t);return String.fromCharCode.apply(null,n)};g.UTF16=function(e,t,r){const n=[];const i=r/2;for(let r=0;r<i;r++,t+=2)n[r]=e.getUint16(t);return String.fromCharCode.apply(null,n)};y.UTF16=function(e){const t=[];for(let r=0;r<e.length;r+=1){const n=e.charCodeAt(r);t[t.length]=n>>8&255;t[t.length]=255&n}return t};x.UTF16=function(e){return 2*e.length};const _={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};g.MACSTRING=function(e,t,r,n){const i=_[n];if(void 0===i)return;let a="";for(let n=0;n<r;n++){const r=e.getUint8(t+n);a+=r<=127?String.fromCharCode(r):i[127&r]}return a};const w="function"===typeof WeakMap&&new WeakMap;let S;const T=function(e){if(!S){S={};for(let e in _)S[e]=new String(e)}const t=S[e];if(void 0===t)return;if(w){const e=w.get(t);if(void 0!==e)return e}const r=_[e];if(void 0===r)return;const n={};for(let e=0;e<r.length;e++)n[r.charCodeAt(e)]=e+128;w&&w.set(t,n);return n};y.MACSTRING=function(e,t){const r=T(t);if(void 0===r)return;const n=[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);if(i>=128){i=r[i];if(void 0===i)return}n[t]=i}return n};x.MACSTRING=function(e,t){const r=y.MACSTRING(e,t);return void 0!==r?r.length:0};function M(e){return e>=-128&&e<=127}function E(e,t,r){let n=0;const i=e.length;while(t<i&&n<64&&0===e[t]){++t;++n}r.push(128|n-1);return t}function A(e,t,r){let n=0;const i=e.length;let a=t;while(a<i&&n<64){const t=e[a];if(!M(t))break;if(0===t&&a+1<i&&0===e[a+1])break;++a;++n}r.push(n-1);for(let n=t;n<a;++n)r.push(e[n]+256&255);return a}function R(e,t,r){let n=0;const i=e.length;let a=t;while(a<i&&n<64){const t=e[a];if(0===t)break;if(M(t)&&a+1<i&&M(e[a+1]))break;++a;++n}r.push(64|n-1);for(let n=t;n<a;++n){const t=e[n];r.push(t+65536>>8&255,t+256&255)}return a}y.VARDELTAS=function(e){let t=0;const r=[];while(t<e.length){const n=e[t];t=0===n?E(e,t,r):n>=-128&&n<=127?A(e,t,r):R(e,t,r)}return r};y.INDEX=function(e){let t=1;const r=[t];const n=[];for(let i=0;i<e.length;i+=1){const a=y.OBJECT(e[i]);Array.prototype.push.apply(n,a);t+=a.length;r.push(t)}if(0===n.length)return[0,0];const i=[];const a=1+Math.floor(Math.log(t)/Math.log(2))/8|0;const o=[void 0,y.BYTE,y.USHORT,y.UINT24,y.ULONG][a];for(let e=0;e<r.length;e+=1){const t=o(r[e]);Array.prototype.push.apply(i,t)}return Array.prototype.concat(y.Card16(e.length),y.OffSize(a),i,n)};x.INDEX=function(e){return y.INDEX(e).length};y.DICT=function(e){let t=[];const r=Object.keys(e);const n=r.length;for(let i=0;i<n;i+=1){const n=parseInt(r[i],0);const a=e[n];t=t.concat(y.OPERAND(a.value,a.type));t=t.concat(y.OPERATOR(n))}return t};x.DICT=function(e){return y.DICT(e).length};y.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]};y.OPERAND=function(e,t){let r=[];if(Array.isArray(t))for(let n=0;n<t.length;n+=1){d.argument(e.length===t.length,"Not enough arguments given for type"+t);r=r.concat(y.OPERAND(e[n],t[n]))}else if("SID"===t)r=r.concat(y.NUMBER(e));else if("offset"===t)r=r.concat(y.NUMBER32(e));else if("number"===t)r=r.concat(y.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(y.REAL(e))}return r};y.OP=y.BYTE;x.OP=x.BYTE;const P="function"===typeof WeakMap&&new WeakMap;y.CHARSTRING=function(e){if(P){const t=P.get(e);if(void 0!==t)return t}let t=[];const r=e.length;for(let n=0;n<r;n+=1){const r=e[n];t=t.concat(y[r.type](r.value))}P&&P.set(e,t);return t};x.CHARSTRING=function(e){return y.CHARSTRING(e).length};y.OBJECT=function(e){const t=y[e.type];d.argument(void 0!==t,"No encoding function for type "+e.type);return t(e.value)};x.OBJECT=function(e){const t=x[e.type];d.argument(void 0!==t,"No sizeOf function for type "+e.type);return t(e.value)};y.TABLE=function(e){let t=[];const r=e.fields.length;const n=[];const i=[];for(let a=0;a<r;a+=1){const r=e.fields[a];const o=y[r.type];d.argument(void 0!==o,"No encoding function for field type "+r.type+" ("+r.name+")");let s=e[r.name];void 0===s&&(s=r.value);const l=o(s);if("TABLE"===r.type){i.push(t.length);t=t.concat([0,0]);n.push(l)}else t=t.concat(l)}for(let r=0;r<n.length;r+=1){const a=i[r];const o=t.length;d.argument(o<65536,"Table "+e.tableName+" too big.");t[a]=o>>8;t[a+1]=255&o;t=t.concat(n[r])}return t};x.TABLE=function(e){let t=0;const r=e.fields.length;for(let n=0;n<r;n+=1){const r=e.fields[n];const i=x[r.type];d.argument(void 0!==i,"No sizeOf function for field type "+r.type+" ("+r.name+")");let a=e[r.name];void 0===a&&(a=r.value);t+=i(a);"TABLE"===r.type&&(t+=2)}return t};y.RECORD=y.TABLE;x.RECORD=x.TABLE;y.LITERAL=function(e){return e};x.LITERAL=function(e){return e.length};function C(e,t,r){for(let e=0;e<t.length;e+=1){const r=t[e];this[r.name]=r.value}this.tableName=e;this.fields=t;if(r){const e=Object.keys(r);for(let t=0;t<e.length;t+=1){const n=e[t];const i=r[n];void 0!==this[n]&&(this[n]=i)}}}C.prototype.encode=function(){return y.TABLE(this)};C.prototype.sizeOf=function(){return x.TABLE(this)};function L(e,t,r){void 0===r&&(r=t.length);const n=new Array(t.length+1);n[0]={name:e+"Count",type:"USHORT",value:r};for(let r=0;r<t.length;r++)n[r+1]={name:e+r,type:"USHORT",value:t[r]};return n}function O(e,t,r){const n=t.length;const i=new Array(n+1);i[0]={name:e+"Count",type:"USHORT",value:n};for(let a=0;a<n;a++)i[a+1]={name:e+a,type:"TABLE",value:r(t[a],a)};return i}function I(e,t,r){const n=t.length;let i=[];i[0]={name:e+"Count",type:"USHORT",value:n};for(let e=0;e<n;e++)i=i.concat(r(t[e],e));return i}function B(e){1===e.format?C.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(L("glyph",e.glyphs))):d.assert(false,"Can't create coverage table format 2 yet.")}B.prototype=Object.create(C.prototype);B.prototype.constructor=B;function U(e){C.call(this,"scriptListTable",I("scriptRecord",e,function(e,t){const r=e.script;let n=r.defaultLangSys;d.assert(!!n,"Unable to write GSUB: script "+e.tag+" has no default language system.");return[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new C("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new C("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(L("featureIndex",n.featureIndexes)))}].concat(I("langSys",r.langSysRecords,function(e,t){const r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new C("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(L("featureIndex",r.featureIndexes)))}]})))}]}))}U.prototype=Object.create(C.prototype);U.prototype.constructor=U;function D(e){C.call(this,"featureListTable",I("featureRecord",e,function(e,t){const r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new C("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(L("lookupListIndex",r.lookupListIndexes)))}]}))}D.prototype=Object.create(C.prototype);D.prototype.constructor=D;function k(e,t){C.call(this,"lookupListTable",O("lookup",e,function(e){let r=t[e.lookupType];d.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables.");return new C("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(O("subtable",e.subtables,r)))}))}k.prototype=Object.create(C.prototype);k.prototype.constructor=k;var N={Table:C,Record:C,Coverage:B,ScriptList:U,FeatureList:D,LookupList:k,ushortList:L,tableList:O,recordList:I};function F(e,t){return e.getUint8(t)}function G(e,t){return e.getUint16(t,false)}function z(e,t){return e.getInt16(t,false)}function H(e,t){return e.getUint32(t,false)}function V(e,t){const r=e.getInt16(t,false);const n=e.getUint16(t+2,false);return r+n/65535}function j(e,t){let r="";for(let n=t;n<t+4;n+=1)r+=String.fromCharCode(e.getInt8(n));return r}function W(e,t,r){let n=0;for(let i=0;i<r;i+=1){n<<=8;n+=e.getUint8(t+i)}return n}function X(e,t,r){const n=[];for(let i=t;i<r;i+=1)n.push(e.getUint8(i));return n}function q(e){let t="";for(let r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t}const Y={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Z(e,t){this.data=e;this.offset=t;this.relativeOffset=0}Z.prototype.parseByte=function(){const e=this.data.getUint8(this.offset+this.relativeOffset);this.relativeOffset+=1;return e};Z.prototype.parseChar=function(){const e=this.data.getInt8(this.offset+this.relativeOffset);this.relativeOffset+=1;return e};Z.prototype.parseCard8=Z.prototype.parseByte;Z.prototype.parseUShort=function(){const e=this.data.getUint16(this.offset+this.relativeOffset);this.relativeOffset+=2;return e};Z.prototype.parseCard16=Z.prototype.parseUShort;Z.prototype.parseSID=Z.prototype.parseUShort;Z.prototype.parseOffset16=Z.prototype.parseUShort;Z.prototype.parseShort=function(){const e=this.data.getInt16(this.offset+this.relativeOffset);this.relativeOffset+=2;return e};Z.prototype.parseF2Dot14=function(){const e=this.data.getInt16(this.offset+this.relativeOffset)/16384;this.relativeOffset+=2;return e};Z.prototype.parseULong=function(){const e=H(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return e};Z.prototype.parseOffset32=Z.prototype.parseULong;Z.prototype.parseFixed=function(){const e=V(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return e};Z.prototype.parseString=function(e){const t=this.data;const r=this.offset+this.relativeOffset;let n="";this.relativeOffset+=e;for(let i=0;i<e;i++)n+=String.fromCharCode(t.getUint8(r+i));return n};Z.prototype.parseTag=function(){return this.parseString(4)};Z.prototype.parseLongDateTime=function(){let e=H(this.data,this.offset+this.relativeOffset+4);e-=2082844800;this.relativeOffset+=8;return e};Z.prototype.parseVersion=function(e){const t=G(this.data,this.offset+this.relativeOffset);const r=G(this.data,this.offset+this.relativeOffset+2);this.relativeOffset+=4;void 0===e&&(e=4096);return t+r/e/10};Z.prototype.skip=function(e,t){void 0===t&&(t=1);this.relativeOffset+=Y[e]*t};Z.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());const t=new Array(e);const r=this.data;let n=this.offset+this.relativeOffset;for(let i=0;i<e;i++){t[i]=r.getUint32(n);n+=4}this.relativeOffset+=4*e;return t};Z.prototype.parseOffset16List=Z.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());const t=new Array(e);const r=this.data;let n=this.offset+this.relativeOffset;for(let i=0;i<e;i++){t[i]=r.getUint16(n);n+=2}this.relativeOffset+=2*e;return t};Z.prototype.parseShortList=function(e){const t=new Array(e);const r=this.data;let n=this.offset+this.relativeOffset;for(let i=0;i<e;i++){t[i]=r.getInt16(n);n+=2}this.relativeOffset+=2*e;return t};Z.prototype.parseByteList=function(e){const t=new Array(e);const r=this.data;let n=this.offset+this.relativeOffset;for(let i=0;i<e;i++)t[i]=r.getUint8(n++);this.relativeOffset+=e;return t};Z.prototype.parseList=function(e,t){if(!t){t=e;e=this.parseUShort()}const r=new Array(e);for(let n=0;n<e;n++)r[n]=t.call(this);return r};Z.prototype.parseList32=function(e,t){if(!t){t=e;e=this.parseULong()}const r=new Array(e);for(let n=0;n<e;n++)r[n]=t.call(this);return r};Z.prototype.parseRecordList=function(e,t){if(!t){t=e;e=this.parseUShort()}const r=new Array(e);const n=Object.keys(t);for(let i=0;i<e;i++){const e={};for(let r=0;r<n.length;r++){const i=n[r];const a=t[i];e[i]=a.call(this)}r[i]=e}return r};Z.prototype.parseRecordList32=function(e,t){if(!t){t=e;e=this.parseULong()}const r=new Array(e);const n=Object.keys(t);for(let i=0;i<e;i++){const e={};for(let r=0;r<n.length;r++){const i=n[r];const a=t[i];e[i]=a.call(this)}r[i]=e}return r};Z.prototype.parseStruct=function(e){if("function"===typeof e)return e.call(this);{const t=Object.keys(e);const r={};for(let n=0;n<t.length;n++){const i=t[n];const a=e[i];r[i]=a.call(this)}return r}};Z.prototype.parseValueRecord=function(e){void 0===e&&(e=this.parseUShort());if(0===e)return;const t={};1&e&&(t.xPlacement=this.parseShort());2&e&&(t.yPlacement=this.parseShort());4&e&&(t.xAdvance=this.parseShort());8&e&&(t.yAdvance=this.parseShort());if(16&e){t.xPlaDevice=void 0;this.parseShort()}if(32&e){t.yPlaDevice=void 0;this.parseShort()}if(64&e){t.xAdvDevice=void 0;this.parseShort()}if(128&e){t.yAdvDevice=void 0;this.parseShort()}return t};Z.prototype.parseValueRecordList=function(){const e=this.parseUShort();const t=this.parseUShort();const r=new Array(t);for(let n=0;n<t;n++)r[n]=this.parseValueRecord(e);return r};Z.prototype.parsePointer=function(e){const t=this.parseOffset16();if(t>0)return new Z(this.data,this.offset+t).parseStruct(e);return};Z.prototype.parsePointer32=function(e){const t=this.parseOffset32();if(t>0)return new Z(this.data,this.offset+t).parseStruct(e);return};Z.prototype.parseListOfLists=function(e){const t=this.parseOffset16List();const r=t.length;const n=this.relativeOffset;const i=new Array(r);for(let n=0;n<r;n++){const r=t[n];if(0===r){i[n]=void 0;continue}this.relativeOffset=r;if(e){const t=this.parseOffset16List();const a=new Array(t.length);for(let n=0;n<t.length;n++){this.relativeOffset=r+t[n];a[n]=e.call(this)}i[n]=a}else i[n]=this.parseUShortList()}this.relativeOffset=n;return i};Z.prototype.parseCoverage=function(){const e=this.offset+this.relativeOffset;const t=this.parseUShort();const r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2===t){const e=new Array(r);for(let t=0;t<r;t++)e[t]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:e}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")};Z.prototype.parseClassDef=function(){const e=this.offset+this.relativeOffset;const t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:Z.uShort,end:Z.uShort,classId:Z.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")};Z.list=function(e,t){return function(){return this.parseList(e,t)}};Z.list32=function(e,t){return function(){return this.parseList32(e,t)}};Z.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}};Z.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}};Z.pointer=function(e){return function(){return this.parsePointer(e)}};Z.pointer32=function(e){return function(){return this.parsePointer32(e)}};Z.tag=Z.prototype.parseTag;Z.byte=Z.prototype.parseByte;Z.uShort=Z.offset16=Z.prototype.parseUShort;Z.uShortList=Z.prototype.parseUShortList;Z.uLong=Z.offset32=Z.prototype.parseULong;Z.uLongList=Z.prototype.parseULongList;Z.struct=Z.prototype.parseStruct;Z.coverage=Z.prototype.parseCoverage;Z.classDef=Z.prototype.parseClassDef;const J={reserved:Z.uShort,reqFeatureIndex:Z.uShort,featureIndexes:Z.uShortList};Z.prototype.parseScriptList=function(){return this.parsePointer(Z.recordList({tag:Z.tag,script:Z.pointer({defaultLangSys:Z.pointer(J),langSysRecords:Z.recordList({tag:Z.tag,langSys:Z.pointer(J)})})}))||[]};Z.prototype.parseFeatureList=function(){return this.parsePointer(Z.recordList({tag:Z.tag,feature:Z.pointer({featureParams:Z.offset16,lookupListIndexes:Z.uShortList})}))||[]};Z.prototype.parseLookupList=function(e){return this.parsePointer(Z.list(Z.pointer(function(){const t=this.parseUShort();d.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");const r=this.parseUShort();const n=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(Z.pointer(e[t])),markFilteringSet:n?this.parseUShort():void 0}})))||[]};Z.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){const e=this.parseUShort();const t=this.parseUShort();d.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown.");const r=this.parseRecordList32({conditionSetOffset:Z.offset32,featureTableSubstitutionOffset:Z.offset32});return r})||[]};var Q={getByte:F,getCard8:F,getUShort:G,getCard16:G,getShort:z,getULong:H,getFixed:V,getTag:j,getOffset:W,getBytes:X,bytesToString:q,Parser:Z};function K(e,t){t.parseUShort();e.length=t.parseULong();e.language=t.parseULong();let r;e.groupCount=r=t.parseULong();e.glyphIndexMap={};for(let n=0;n<r;n+=1){const r=t.parseULong();const n=t.parseULong();let i=t.parseULong();for(let t=r;t<=n;t+=1){e.glyphIndexMap[t]=i;i++}}}function $(e,t,r,n,i){e.length=t.parseUShort();e.language=t.parseUShort();let a;e.segCount=a=t.parseUShort()>>1;t.skip("uShort",3);e.glyphIndexMap={};const o=new Q.Parser(r,n+i+14);const s=new Q.Parser(r,n+i+16+2*a);const l=new Q.Parser(r,n+i+16+4*a);const c=new Q.Parser(r,n+i+16+6*a);let u=n+i+16+8*a;for(let t=0;t<a-1;t+=1){let t;const n=o.parseUShort();const i=s.parseUShort();const a=l.parseShort();const h=c.parseUShort();for(let o=i;o<=n;o+=1){if(0!==h){u=c.offset+c.relativeOffset-2;u+=h;u+=2*(o-i);t=Q.getUShort(r,u);0!==t&&(t=t+a&65535)}else t=o+a&65535;e.glyphIndexMap[o]=t}}}function ee(e,t){const r={};r.version=Q.getUShort(e,t);d.argument(0===r.version,"cmap table version should be 0.");r.numTables=Q.getUShort(e,t+2);let n=-1;for(let i=r.numTables-1;i>=0;i-=1){const r=Q.getUShort(e,t+4+8*i);const a=Q.getUShort(e,t+4+8*i+2);if(3===r&&(0===a||1===a||10===a)||0===r&&(0===a||1===a||2===a||3===a||4===a)){n=Q.getULong(e,t+4+8*i+4);break}}if(-1===n)throw new Error("No valid cmap sub-tables found.");const i=new Q.Parser(e,t+n);r.format=i.parseUShort();if(12===r.format)K(r,i);else{if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");$(r,i,e,t,n)}return r}function te(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}function re(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function ne(e){let t=true;let r;for(r=e.length-1;r>0;r-=1){const n=e.get(r);if(n.unicode>65535){console.log("Adding CMAP format 12 (needed!)");t=false;break}}let n=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:t?12:20}];t||(n=n.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}]));n=n.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);const i=new N.Table("cmap",n);i.segments=[];for(r=0;r<e.length;r+=1){const t=e.get(r);for(let e=0;e<t.unicodes.length;e+=1)te(i,t.unicodes[e],r);i.segments=i.segments.sort(function(e,t){return e.start-t.start})}re(i);const a=i.segments.length;let o=0;let s=[];let l=[];let c=[];let u=[];let h=[];let f=[];for(r=0;r<a;r+=1){const e=i.segments[r];if(e.end<=65535&&e.start<=65535){s=s.concat({name:"end_"+r,type:"USHORT",value:e.end});l=l.concat({name:"start_"+r,type:"USHORT",value:e.start});c=c.concat({name:"idDelta_"+r,type:"SHORT",value:e.delta});u=u.concat({name:"idRangeOffset_"+r,type:"USHORT",value:e.offset});void 0!==e.glyphId&&(h=h.concat({name:"glyph_"+r,type:"USHORT",value:e.glyphId}))}else o+=1;if(!t&&void 0!==e.glyphIndex){f=f.concat({name:"cmap12Start_"+r,type:"ULONG",value:e.start});f=f.concat({name:"cmap12End_"+r,type:"ULONG",value:e.end});f=f.concat({name:"cmap12Glyph_"+r,type:"ULONG",value:e.glyphIndex})}}i.segCountX2=2*(a-o);i.searchRange=2*Math.pow(2,Math.floor(Math.log(a-o)/Math.log(2)));i.entrySelector=Math.log(i.searchRange/2)/Math.log(2);i.rangeShift=i.segCountX2-i.searchRange;i.fields=i.fields.concat(s);i.fields.push({name:"reservedPad",type:"USHORT",value:0});i.fields=i.fields.concat(l);i.fields=i.fields.concat(c);i.fields=i.fields.concat(u);i.fields=i.fields.concat(h);i.cmap4Length=14+2*s.length+2+2*l.length+2*c.length+2*u.length+2*h.length;if(!t){const e=16+4*f.length;i.cmap12Offset=20+i.cmap4Length;i.fields=i.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:e},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:f.length/3}]);i.fields=i.fields.concat(f)}return i}var ie={parse:ee,make:ne};const ae=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];const oe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"];const se=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];const le=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ce(e){this.font=e}ce.prototype.charToGlyphIndex=function(e){const t=e.codePointAt(0);const r=this.font.glyphs;if(r)for(let e=0;e<r.length;e+=1){const n=r.get(e);for(let r=0;r<n.unicodes.length;r+=1)if(n.unicodes[r]===t)return e}return null};function ue(e){this.cmap=e}ue.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0};function he(e,t){this.encoding=e;this.charset=t}he.prototype.charToGlyphIndex=function(e){const t=e.codePointAt(0);const r=this.encoding[t];return this.charset.indexOf(r)};function fe(e){switch(e.version){case 1:this.names=le.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(let t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<le.length?this.names[t]=le[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-le.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(let t=0;t<e.numberOfGlyphs;t++)this.names[t]=le[t+e.glyphNameIndex[t]];break;case 3:this.names=[];break;default:this.names=[];break}}fe.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)};fe.prototype.glyphIndexToName=function(e){return this.names[e]};function pe(e){let t;const r=e.tables.cmap.glyphIndexMap;const n=Object.keys(r);for(let i=0;i<n.length;i+=1){const a=n[i];const o=r[a];t=e.glyphs.get(o);t.addUnicode(parseInt(a))}for(let r=0;r<e.glyphs.length;r+=1){t=e.glyphs.get(r);e.cffEncoding?e.isCIDFont?t.name="gid"+r:t.name=e.cffEncoding.charset[r]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(r))}}function de(e,t,r,n,i){e.beginPath();e.moveTo(t,r);e.lineTo(n,i);e.stroke()}var me={line:de};function ve(e,t){let r=t||new h;return{configurable:true,get:function(){"function"===typeof r&&(r=r());return r},set:function(e){r=e}}}function ge(e){this.bindConstructorValues(e)}ge.prototype.bindConstructorValues=function(e){this.index=e.index||0;this.name=e.name||null;this.unicode=e.unicode||void 0;this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[];e.xMin&&(this.xMin=e.xMin);e.yMin&&(this.yMin=e.yMin);e.xMax&&(this.xMax=e.xMax);e.yMax&&(this.yMax=e.yMax);e.advanceWidth&&(this.advanceWidth=e.advanceWidth);Object.defineProperty(this,"path",ve(this,e.path))};ge.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e);this.unicodes.push(e)};ge.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};ge.prototype.getPath=function(e,t,r,n,i){e=void 0!==e?e:0;t=void 0!==t?t:0;r=void 0!==r?r:72;let a;let o;n||(n={});let s=n.xScale;let l=n.yScale;n.hinting&&i&&i.hinting&&(o=this.path&&i.hinting.exec(this,r));if(o){a=i.hinting.getCommands(o);e=Math.round(e);t=Math.round(t);s=l=1}else{a=this.path.commands;const e=1/this.path.unitsPerEm*r;void 0===s&&(s=e);void 0===l&&(l=e)}const c=new h;for(let r=0;r<a.length;r+=1){const n=a[r];"M"===n.type?c.moveTo(e+n.x*s,t+-n.y*l):"L"===n.type?c.lineTo(e+n.x*s,t+-n.y*l):"Q"===n.type?c.quadraticCurveTo(e+n.x1*s,t+-n.y1*l,e+n.x*s,t+-n.y*l):"C"===n.type?c.curveTo(e+n.x1*s,t+-n.y1*l,e+n.x2*s,t+-n.y2*l,e+n.x*s,t+-n.y*l):"Z"===n.type&&c.closePath()}return c};ge.prototype.getContours=function(){if(void 0===this.points)return[];const e=[];let t=[];for(let r=0;r<this.points.length;r+=1){const n=this.points[r];t.push(n);if(n.lastPointOfContour){e.push(t);t=[]}}d.argument(0===t.length,"There are still points left in the current contour.");return e};ge.prototype.getMetrics=function(){const e=this.path.commands;const t=[];const r=[];for(let n=0;n<e.length;n+=1){const i=e[n];if("Z"!==i.type){t.push(i.x);r.push(i.y)}if("Q"===i.type||"C"===i.type){t.push(i.x1);r.push(i.y1)}if("C"===i.type){t.push(i.x2);r.push(i.y2)}}const n={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};isFinite(n.xMin)||(n.xMin=0);isFinite(n.xMax)||(n.xMax=this.advanceWidth);isFinite(n.yMin)||(n.yMin=0);isFinite(n.yMax)||(n.yMax=0);n.rightSideBearing=this.advanceWidth-n.leftSideBearing-(n.xMax-n.xMin);return n};ge.prototype.draw=function(e,t,r,n,i){this.getPath(t,r,n,i).draw(e)};ge.prototype.drawPoints=function(e,t,r,n){function i(t,r,n,i){const a=2*Math.PI;e.beginPath();for(let o=0;o<t.length;o+=1){e.moveTo(r+t[o].x*i,n+t[o].y*i);e.arc(r+t[o].x*i,n+t[o].y*i,2,0,a,false)}e.closePath();e.fill()}t=void 0!==t?t:0;r=void 0!==r?r:0;n=void 0!==n?n:24;const a=1/this.path.unitsPerEm*n;const o=[];const s=[];const l=this.path;for(let e=0;e<l.commands.length;e+=1){const t=l.commands[e];void 0!==t.x&&o.push({x:t.x,y:-t.y});void 0!==t.x1&&s.push({x:t.x1,y:-t.y1});void 0!==t.x2&&s.push({x:t.x2,y:-t.y2})}e.fillStyle="blue";i(o,t,r,a);e.fillStyle="red";i(s,t,r,a)};ge.prototype.drawMetrics=function(e,t,r,n){let i;t=void 0!==t?t:0;r=void 0!==r?r:0;n=void 0!==n?n:24;i=1/this.path.unitsPerEm*n;e.lineWidth=1;e.strokeStyle="black";me.line(e,t,-1e4,t,1e4);me.line(e,-1e4,r,1e4,r);const a=this.xMin||0;let o=this.yMin||0;const s=this.xMax||0;let l=this.yMax||0;const c=this.advanceWidth||0;e.strokeStyle="blue";me.line(e,t+a*i,-1e4,t+a*i,1e4);me.line(e,t+s*i,-1e4,t+s*i,1e4);me.line(e,-1e4,r+-o*i,1e4,r+-o*i);me.line(e,-1e4,r+-l*i,1e4,r+-l*i);e.strokeStyle="green";me.line(e,t+c*i,-1e4,t+c*i,1e4)};var ye=ge;function xe(e,t,r){Object.defineProperty(e,t,{get:function(){e.path;return e[r]},set:function(t){e[r]=t},enumerable:true,configurable:true})}function be(e,t){this.font=e;this.glyphs={};if(Array.isArray(t))for(let e=0;e<t.length;e++)this.glyphs[e]=t[e];this.length=t&&t.length||0}be.prototype.get=function(e){"function"===typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]};be.prototype.push=function(e,t){this.glyphs[e]=t;this.length++};function _e(e,t){return new ye({index:t,font:e})}function we(e,t,r,n,i,a){return function(){const o=new ye({index:t,font:e});o.path=function(){r(o,n,i);const t=a(e.glyphs,o);t.unitsPerEm=e.unitsPerEm;return t};xe(o,"xMin","_xMin");xe(o,"xMax","_xMax");xe(o,"yMin","_yMin");xe(o,"yMax","_yMax");return o}}function Se(e,t,r,n){return function(){const i=new ye({index:t,font:e});i.path=function(){const t=r(e,i,n);t.unitsPerEm=e.unitsPerEm;return t};return i}}var Te={GlyphSet:be,glyphLoader:_e,ttfGlyphLoader:we,cffGlyphLoader:Se};function Me(e,t){if(e===t)return true;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return false;for(let r=0;r<e.length;r+=1)if(!Me(e[r],t[r]))return false;return true}return false}function Ee(e){let t;t=e.length<1240?107:e.length<33900?1131:32768;return t}function Ae(e,t,r){const n=[];const i=[];const a=Q.getCard16(e,t);let o;let s;if(0!==a){const r=Q.getByte(e,t+2);o=t+(a+1)*r+2;let i=t+3;for(let t=0;t<a+1;t+=1){n.push(Q.getOffset(e,i,r));i+=r}s=o+n[a]}else s=t+2;for(let t=0;t<n.length-1;t+=1){let a=Q.getBytes(e,o+n[t],o+n[t+1]);r&&(a=r(a));i.push(a)}return{objects:i,startOffset:t,endOffset:s}}function Re(e){let t="";const r=15;const n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];while(true){const i=e.parseByte();const a=i>>4;const o=15&i;if(a===r)break;t+=n[a];if(o===r)break;t+=n[o]}return parseFloat(t)}function Pe(e,t){let r;let n;let i;let a;if(28===t){r=e.parseByte();n=e.parseByte();return r<<8|n}if(29===t){r=e.parseByte();n=e.parseByte();i=e.parseByte();a=e.parseByte();return r<<24|n<<16|i<<8|a}if(30===t)return Re(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250){r=e.parseByte();return 256*(t-247)+r+108}if(t>=251&&t<=254){r=e.parseByte();return 256*-(t-251)-r-108}throw new Error("Invalid b0 "+t)}function Ce(e){const t={};for(let r=0;r<e.length;r+=1){const n=e[r][0];const i=e[r][1];let a;a=1===i.length?i[0]:i;if(t.hasOwnProperty(n)&&!isNaN(t[n]))throw new Error("Object "+t+" already has key "+n);t[n]=a}return t}function Le(e,t,r){t=void 0!==t?t:0;const n=new Q.Parser(e,t);const i=[];let a=[];r=void 0!==r?r:e.length;while(n.relativeOffset<r){let e=n.parseByte();if(e<=21){12===e&&(e=1200+n.parseByte());i.push([e,a]);a=[]}else a.push(Pe(n,e))}return Ce(i)}function Oe(e,t){t=t<=390?ae[t]:e[t-391];return t}function Ie(e,t,r){const n={};let i;for(let a=0;a<t.length;a+=1){const o=t[a];if(Array.isArray(o.type)){const t=[];t.length=o.type.length;for(let n=0;n<o.type.length;n++){i=void 0!==e[o.op]?e[o.op][n]:void 0;void 0===i&&(i=void 0!==o.value&&void 0!==o.value[n]?o.value[n]:null);"SID"===o.type[n]&&(i=Oe(r,i));t[n]=i}n[o.name]=t}else{i=e[o.op];void 0===i&&(i=void 0!==o.value?o.value:null);"SID"===o.type&&(i=Oe(r,i));n[o.name]=i}}return n}function Be(e,t){const r={};r.formatMajor=Q.getCard8(e,t);r.formatMinor=Q.getCard8(e,t+1);r.size=Q.getCard8(e,t+2);r.offsetSize=Q.getCard8(e,t+3);r.startOffset=t;r.endOffset=t+4;return r}const Ue=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}];const De=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function ke(e,t){const r=Le(e,0,e.byteLength);return Ie(r,Ue,t)}function Ne(e,t,r,n){const i=Le(e,t,r);return Ie(i,De,n)}function Fe(e,t,r,n){const i=[];for(let a=0;a<r.length;a+=1){const o=new DataView(new Uint8Array(r[a]).buffer);const s=ke(o,n);s._subrs=[];s._subrsBias=0;const l=s.private[0];const c=s.private[1];if(0!==l&&0!==c){const r=Ne(e,c+t,l,n);s._defaultWidthX=r.defaultWidthX;s._nominalWidthX=r.nominalWidthX;if(0!==r.subrs){const n=c+r.subrs;const i=Ae(e,n+t);s._subrs=i.objects;s._subrsBias=Ee(s._subrs)}s._privateDict=r}i.push(s)}return i}function Ge(e,t,r,n){let i;let a;const o=new Q.Parser(e,t);r-=1;const s=[".notdef"];const l=o.parseCard8();if(0===l)for(let e=0;e<r;e+=1){i=o.parseSID();s.push(Oe(n,i))}else if(1===l)while(s.length<=r){i=o.parseSID();a=o.parseCard8();for(let e=0;e<=a;e+=1){s.push(Oe(n,i));i+=1}}else{if(2!==l)throw new Error("Unknown charset format "+l);while(s.length<=r){i=o.parseSID();a=o.parseCard16();for(let e=0;e<=a;e+=1){s.push(Oe(n,i));i+=1}}}return s}function ze(e,t,r){let n;const i={};const a=new Q.Parser(e,t);const o=a.parseCard8();if(0===o){const e=a.parseCard8();for(let t=0;t<e;t+=1){n=a.parseCard8();i[n]=t}}else{if(1!==o)throw new Error("Unknown encoding format "+o);{const e=a.parseCard8();n=1;for(let t=0;t<e;t+=1){const e=a.parseCard8();const t=a.parseCard8();for(let r=e;r<=e+t;r+=1){i[r]=n;n+=1}}}}return new he(i,r)}function He(e,t,r){let n;let i;let a;let o;const s=new h;const l=[];let c=0;let u=false;let f=false;let p=0;let d=0;let m;let v;let g;let y;if(e.isCIDFont){const r=e.tables.cff.topDict._fdSelect[t.index];const n=e.tables.cff.topDict._fdArray[r];m=n._subrs;v=n._subrsBias;g=n._defaultWidthX;y=n._nominalWidthX}else{m=e.tables.cff.topDict._subrs;v=e.tables.cff.topDict._subrsBias;g=e.tables.cff.topDict._defaultWidthX;y=e.tables.cff.topDict._nominalWidthX}let x=g;function b(e,t){f&&s.closePath();s.moveTo(e,t);f=true}function _(){let e;e=l.length%2!==0;e&&!u&&(x=l.shift()+y);c+=l.length>>1;l.length=0;u=true}function w(r){let h;let g;let S;let T;let M;let E;let A;let R;let P;let C;let L;let O;let I=0;while(I<r.length){let B=r[I];I+=1;switch(B){case 1:_();break;case 3:_();break;case 4:if(l.length>1&&!u){x=l.shift()+y;u=true}d+=l.pop();b(p,d);break;case 5:while(l.length>0){p+=l.shift();d+=l.shift();s.lineTo(p,d)}break;case 6:while(l.length>0){p+=l.shift();s.lineTo(p,d);if(0===l.length)break;d+=l.shift();s.lineTo(p,d)}break;case 7:while(l.length>0){d+=l.shift();s.lineTo(p,d);if(0===l.length)break;p+=l.shift();s.lineTo(p,d)}break;case 8:while(l.length>0){n=p+l.shift();i=d+l.shift();a=n+l.shift();o=i+l.shift();p=a+l.shift();d=o+l.shift();s.curveTo(n,i,a,o,p,d)}break;case 10:M=l.pop()+v;E=m[M];E&&w(E);break;case 11:return;case 12:B=r[I];I+=1;switch(B){case 35:n=p+l.shift();i=d+l.shift();a=n+l.shift();o=i+l.shift();A=a+l.shift();R=o+l.shift();P=A+l.shift();C=R+l.shift();L=P+l.shift();O=C+l.shift();p=L+l.shift();d=O+l.shift();l.shift();s.curveTo(n,i,a,o,A,R);s.curveTo(P,C,L,O,p,d);break;case 34:n=p+l.shift();i=d;a=n+l.shift();o=i+l.shift();A=a+l.shift();R=o;P=A+l.shift();C=o;L=P+l.shift();O=d;p=L+l.shift();s.curveTo(n,i,a,o,A,R);s.curveTo(P,C,L,O,p,d);break;case 36:n=p+l.shift();i=d+l.shift();a=n+l.shift();o=i+l.shift();A=a+l.shift();R=o;P=A+l.shift();C=o;L=P+l.shift();O=C+l.shift();p=L+l.shift();s.curveTo(n,i,a,o,A,R);s.curveTo(P,C,L,O,p,d);break;case 37:n=p+l.shift();i=d+l.shift();a=n+l.shift();o=i+l.shift();A=a+l.shift();R=o+l.shift();P=A+l.shift();C=R+l.shift();L=P+l.shift();O=C+l.shift();Math.abs(L-p)>Math.abs(O-d)?p=L+l.shift():d=O+l.shift();s.curveTo(n,i,a,o,A,R);s.curveTo(P,C,L,O,p,d);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+B);l.length=0}break;case 14:if(l.length>0&&!u){x=l.shift()+y;u=true}if(f){s.closePath();f=false}break;case 18:_();break;case 19:case 20:_();I+=c+7>>3;break;case 21:if(l.length>2&&!u){x=l.shift()+y;u=true}d+=l.pop();p+=l.pop();b(p,d);break;case 22:if(l.length>1&&!u){x=l.shift()+y;u=true}p+=l.pop();b(p,d);break;case 23:_();break;case 24:while(l.length>2){n=p+l.shift();i=d+l.shift();a=n+l.shift();o=i+l.shift();p=a+l.shift();d=o+l.shift();s.curveTo(n,i,a,o,p,d)}p+=l.shift();d+=l.shift();s.lineTo(p,d);break;case 25:while(l.length>6){p+=l.shift();d+=l.shift();s.lineTo(p,d)}n=p+l.shift();i=d+l.shift();a=n+l.shift();o=i+l.shift();p=a+l.shift();d=o+l.shift();s.curveTo(n,i,a,o,p,d);break;case 26:l.length%2&&(p+=l.shift());while(l.length>0){n=p;i=d+l.shift();a=n+l.shift();o=i+l.shift();p=a;d=o+l.shift();s.curveTo(n,i,a,o,p,d)}break;case 27:l.length%2&&(d+=l.shift());while(l.length>0){n=p+l.shift();i=d;a=n+l.shift();o=i+l.shift();p=a+l.shift();d=o;s.curveTo(n,i,a,o,p,d)}break;case 28:h=r[I];g=r[I+1];l.push((h<<24|g<<16)>>16);I+=2;break;case 29:M=l.pop()+e.gsubrsBias;E=e.gsubrs[M];E&&w(E);break;case 30:while(l.length>0){n=p;i=d+l.shift();a=n+l.shift();o=i+l.shift();p=a+l.shift();d=o+(1===l.length?l.shift():0);s.curveTo(n,i,a,o,p,d);if(0===l.length)break;n=p+l.shift();i=d;a=n+l.shift();o=i+l.shift();d=o+l.shift();p=a+(1===l.length?l.shift():0);s.curveTo(n,i,a,o,p,d)}break;case 31:while(l.length>0){n=p+l.shift();i=d;a=n+l.shift();o=i+l.shift();d=o+l.shift();p=a+(1===l.length?l.shift():0);s.curveTo(n,i,a,o,p,d);if(0===l.length)break;n=p;i=d+l.shift();a=n+l.shift();o=i+l.shift();p=a+l.shift();d=o+(1===l.length?l.shift():0);s.curveTo(n,i,a,o,p,d)}break;default:if(B<32)console.log("Glyph "+t.index+": unknown operator "+B);else if(B<247)l.push(B-139);else if(B<251){h=r[I];I+=1;l.push(256*(B-247)+h+108)}else if(B<255){h=r[I];I+=1;l.push(256*-(B-251)-h-108)}else{h=r[I];g=r[I+1];S=r[I+2];T=r[I+3];I+=4;l.push((h<<24|g<<16|S<<8|T)/65536)}}}}w(r);t.advanceWidth=x;return s}function Ve(e,t,r,n){const i=[];let a;const o=new Q.Parser(e,t);const s=o.parseCard8();if(0===s)for(let e=0;e<r;e++){a=o.parseCard8();if(a>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+n+")");i.push(a)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);{const e=o.parseCard16();let t=o.parseCard16();if(0!==t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+t);let s;for(let l=0;l<e;l++){a=o.parseCard8();s=o.parseCard16();if(a>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+n+")");if(s>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+s);for(;t<s;t++)i.push(a);t=s}if(s!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+s)}}return i}function je(e,t,r){r.tables.cff={};const n=Be(e,t);const i=Ae(e,n.endOffset,Q.bytesToString);const a=Ae(e,i.endOffset);const o=Ae(e,a.endOffset,Q.bytesToString);const s=Ae(e,o.endOffset);r.gsubrs=s.objects;r.gsubrsBias=Ee(r.gsubrs);const l=Fe(e,t,a.objects,o.objects);if(1!==l.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+l.length);const c=l[0];r.tables.cff.topDict=c;if(c._privateDict){r.defaultWidthX=c._privateDict.defaultWidthX;r.nominalWidthX=c._privateDict.nominalWidthX}void 0!==c.ros[0]&&void 0!==c.ros[1]&&(r.isCIDFont=true);if(r.isCIDFont){let n=c.fdArray;let i=c.fdSelect;if(0===n||0===i)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");n+=t;const a=Ae(e,n);const s=Fe(e,t,a.objects,o.objects);c._fdArray=s;i+=t;c._fdSelect=Ve(e,i,r.numGlyphs,s.length)}const u=t+c.private[1];const h=Ne(e,u,c.private[0],o.objects);r.defaultWidthX=h.defaultWidthX;r.nominalWidthX=h.nominalWidthX;if(0!==h.subrs){const t=u+h.subrs;const n=Ae(e,t);r.subrs=n.objects;r.subrsBias=Ee(r.subrs)}else{r.subrs=[];r.subrsBias=0}const f=Ae(e,t+c.charStrings);r.nGlyphs=f.objects.length;const p=Ge(e,t+c.charset,r.nGlyphs,o.objects);0===c.encoding?r.cffEncoding=new he(oe,p):1===c.encoding?r.cffEncoding=new he(se,p):r.cffEncoding=ze(e,t+c.encoding,p);r.encoding=r.encoding||r.cffEncoding;r.glyphs=new Te.GlyphSet(r);for(let e=0;e<r.nGlyphs;e+=1){const t=f.objects[e];r.glyphs.push(e,Te.cffGlyphLoader(r,e,He,t))}}function We(e,t){let r;let n=ae.indexOf(e);n>=0&&(r=n);n=t.indexOf(e);if(n>=0)r=n+ae.length;else{r=ae.length+t.length;t.push(e)}return r}function Xe(){return new N.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function qe(e){const t=new N.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(let r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}function Ye(e,t,r){const n={};for(let i=0;i<e.length;i+=1){const a=e[i];let o=t[a.name];if(void 0!==o&&!Me(o,a.value)){"SID"===a.type&&(o=We(o,r));n[a.op]={name:a.name,type:a.type,value:o}}}return n}function Ze(e,t){const r=new N.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);r.dict=Ye(Ue,e,t);return r}function Je(e){const t=new N.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}];return t}function Qe(e){const t=new N.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(let r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}function Ke(){return new N.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function $e(e,t){const r=new N.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let n=0;n<e.length;n+=1){const i=e[n];const a=We(i,t);r.fields.push({name:"glyph_"+n,type:"SID",value:a})}return r}function et(e){const t=[];const r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});let n=0;let i=0;for(let e=0;e<r.commands.length;e+=1){let a;let o;let s=r.commands[e];if("Q"===s.type){const e=1/3;const t=2/3;s={type:"C",x:s.x,y:s.y,x1:e*n+t*s.x1,y1:e*i+t*s.y1,x2:e*s.x+t*s.x1,y2:e*s.y+t*s.y1}}if("M"===s.type){a=Math.round(s.x-n);o=Math.round(s.y-i);t.push({name:"dx",type:"NUMBER",value:a});t.push({name:"dy",type:"NUMBER",value:o});t.push({name:"rmoveto",type:"OP",value:21});n=Math.round(s.x);i=Math.round(s.y)}else if("L"===s.type){a=Math.round(s.x-n);o=Math.round(s.y-i);t.push({name:"dx",type:"NUMBER",value:a});t.push({name:"dy",type:"NUMBER",value:o});t.push({name:"rlineto",type:"OP",value:5});n=Math.round(s.x);i=Math.round(s.y)}else if("C"===s.type){const e=Math.round(s.x1-n);const r=Math.round(s.y1-i);const l=Math.round(s.x2-s.x1);const c=Math.round(s.y2-s.y1);a=Math.round(s.x-s.x2);o=Math.round(s.y-s.y2);t.push({name:"dx1",type:"NUMBER",value:e});t.push({name:"dy1",type:"NUMBER",value:r});t.push({name:"dx2",type:"NUMBER",value:l});t.push({name:"dy2",type:"NUMBER",value:c});t.push({name:"dx",type:"NUMBER",value:a});t.push({name:"dy",type:"NUMBER",value:o});t.push({name:"rrcurveto",type:"OP",value:8});n=Math.round(s.x);i=Math.round(s.y)}}t.push({name:"endchar",type:"OP",value:14});return t}function tt(e){const t=new N.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let r=0;r<e.length;r+=1){const n=e.get(r);const i=et(n);t.charStrings.push({name:n.name,type:"CHARSTRING",value:i})}return t}function rt(e,t){const r=new N.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);r.dict=Ye(De,e,t);return r}function nt(e,t){const r=new N.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]);const n=1/t.unitsPerEm;const i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]};const a={};const o=[];let s;for(let t=1;t<e.length;t+=1){s=e.get(t);o.push(s.name)}const l=[];r.header=Xe();r.nameIndex=qe([t.postScriptName]);let c=Ze(i,l);r.topDictIndex=Je(c);r.globalSubrIndex=Ke();r.charsets=$e(o,l);r.charStringsIndex=tt(e);r.privateDict=rt(a,l);r.stringIndex=Qe(l);const u=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();i.charset=u;i.encoding=0;i.charStrings=i.charset+r.charsets.sizeOf();i.private[1]=i.charStrings+r.charStringsIndex.sizeOf();c=Ze(i,l);r.topDictIndex=Je(c);return r}var it={parse:je,make:nt};function at(e,t){const r={};const n=new Q.Parser(e,t);r.version=n.parseVersion();r.fontRevision=Math.round(1e3*n.parseFixed())/1e3;r.checkSumAdjustment=n.parseULong();r.magicNumber=n.parseULong();d.argument(1594834165===r.magicNumber,"Font header has wrong magic number.");r.flags=n.parseUShort();r.unitsPerEm=n.parseUShort();r.created=n.parseLongDateTime();r.modified=n.parseLongDateTime();r.xMin=n.parseShort();r.yMin=n.parseShort();r.xMax=n.parseShort();r.yMax=n.parseShort();r.macStyle=n.parseUShort();r.lowestRecPPEM=n.parseUShort();r.fontDirectionHint=n.parseShort();r.indexToLocFormat=n.parseShort();r.glyphDataFormat=n.parseShort();return r}function ot(e){const t=Math.round((new Date).getTime()/1e3)+2082844800;let r=t;e.createdTimestamp&&(r=e.createdTimestamp+2082844800);return new N.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}var st={parse:at,make:ot};function lt(e,t){const r={};const n=new Q.Parser(e,t);r.version=n.parseVersion();r.ascender=n.parseShort();r.descender=n.parseShort();r.lineGap=n.parseShort();r.advanceWidthMax=n.parseUShort();r.minLeftSideBearing=n.parseShort();r.minRightSideBearing=n.parseShort();r.xMaxExtent=n.parseShort();r.caretSlopeRise=n.parseShort();r.caretSlopeRun=n.parseShort();r.caretOffset=n.parseShort();n.relativeOffset+=8;r.metricDataFormat=n.parseShort();r.numberOfHMetrics=n.parseUShort();return r}function ct(e){return new N.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}var ut={parse:lt,make:ct};function ht(e,t,r,n,i){let a;let o;const s=new Q.Parser(e,t);for(let e=0;e<n;e+=1){if(e<r){a=s.parseUShort();o=s.parseShort()}const t=i.get(e);t.advanceWidth=a;t.leftSideBearing=o}}function ft(e){const t=new N.Table("hmtx",[]);for(let r=0;r<e.length;r+=1){const n=e.get(r);const i=n.advanceWidth||0;const a=n.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:i});t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:a})}return t}var pt={parse:ht,make:ft};function dt(e){const t=new N.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]);let r="";const n=12+4*e.length;for(let i=0;i<e.length;++i){let a=r.indexOf(e[i]);if(a<0){a=r.length;r+=e[i]}t.fields.push({name:"offset "+i,type:"USHORT",value:n+a});t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}t.fields.push({name:"stringPool",type:"CHARARRAY",value:r});return t}function mt(e,t){const r=new Q.Parser(e,t);const n=r.parseULong();d.argument(1===n,"Unsupported ltag table version.");r.skip("uLong",1);const i=r.parseULong();const a=[];for(let n=0;n<i;n++){let n="";const i=t+r.parseUShort();const o=r.parseUShort();for(let t=i;t<i+o;++t)n+=String.fromCharCode(e.getInt8(t));a.push(n)}return a}var vt={make:dt,parse:mt};function gt(e,t){const r={};const n=new Q.Parser(e,t);r.version=n.parseVersion();r.numGlyphs=n.parseUShort();if(1===r.version){r.maxPoints=n.parseUShort();r.maxContours=n.parseUShort();r.maxCompositePoints=n.parseUShort();r.maxCompositeContours=n.parseUShort();r.maxZones=n.parseUShort();r.maxTwilightPoints=n.parseUShort();r.maxStorage=n.parseUShort();r.maxFunctionDefs=n.parseUShort();r.maxInstructionDefs=n.parseUShort();r.maxStackElements=n.parseUShort();r.maxSizeOfInstructions=n.parseUShort();r.maxComponentElements=n.parseUShort();r.maxComponentDepth=n.parseUShort()}return r}function yt(e){return new N.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}var xt={parse:gt,make:yt};const bt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];const _t={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"};const wt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0};const St={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Tt(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return _t[t];case 3:return St[t]}return}const Mt="utf-16";const Et={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"};const At={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Rt(e,t,r){switch(e){case 0:return Mt;case 1:return At[r]||Et[t];case 3:if(1===t||10===t)return Mt;break}return}function Pt(e,t,r){const n={};const i=new Q.Parser(e,t);const a=i.parseUShort();const o=i.parseUShort();const s=i.offset+i.parseUShort();for(let t=0;t<o;t++){const t=i.parseUShort();const a=i.parseUShort();const o=i.parseUShort();const l=i.parseUShort();const c=bt[l]||l;const u=i.parseUShort();const h=i.parseUShort();const f=Tt(t,o,r);const p=Rt(t,a,o);if(void 0!==p&&void 0!==f){let t;t=p===Mt?g.UTF16(e,s+h,u):g.MACSTRING(e,s+h,u,p);if(t){let e=n[c];void 0===e&&(e=n[c]={});e[f]=t}}}let l=0;1===a&&(l=i.parseUShort());return n}function Ct(e){const t={};for(let r in e)t[e[r]]=parseInt(r);return t}function Lt(e,t,r,n,i,a){return new N.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:a}])}function Ot(e,t){const r=e.length;const n=t.length-r+1;e:for(let i=0;i<n;i++)for(;i<n;i++){for(let n=0;n<r;n++)if(t[i+n]!==e[n])continue e;return i}return-1}function It(e,t){let r=Ot(e,t);if(r<0){r=t.length;let n=0;const i=e.length;for(;n<i;++n)t.push(e[n])}return r}function Bt(e,t){let r;const n=[];const i={};const a=Ct(bt);for(let t in e){let o=a[t];void 0===o&&(o=t);r=parseInt(o);if(isNaN(r))throw new Error('Name table entry "'+t+'" does not exist, see nameTableNames for complete list.');i[r]=e[t];n.push(r)}const o=Ct(_t);const s=Ct(St);const l=[];const c=[];for(let e=0;e<n.length;e++){r=n[e];const a=i[r];for(let e in a){const n=a[e];let i=1;let u=o[e];let h=wt[u];const f=Rt(i,h,u);let p=y.MACSTRING(n,f);if(void 0===p){i=0;u=t.indexOf(e);if(u<0){u=t.length;t.push(e)}h=4;p=y.UTF16(n)}const d=It(p,c);l.push(Lt(i,h,u,r,p.length,d));const m=s[e];if(void 0!==m){const e=y.UTF16(n);const t=It(e,c);l.push(Lt(3,1,m,r,e.length,t))}}}l.sort(function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID});const u=new N.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:l.length},{name:"stringOffset",type:"USHORT",value:6+12*l.length}]);for(let e=0;e<l.length;e++)u.fields.push({name:"record_"+e,type:"RECORD",value:l[e]});u.fields.push({name:"strings",type:"LITERAL",value:c});return u}var Ut={parse:Pt,make:Bt};const Dt=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function kt(e){for(let t=0;t<Dt.length;t+=1){const r=Dt[t];if(e>=r.begin&&e<r.end)return t}return-1}function Nt(e,t){const r={};const n=new Q.Parser(e,t);r.version=n.parseUShort();r.xAvgCharWidth=n.parseShort();r.usWeightClass=n.parseUShort();r.usWidthClass=n.parseUShort();r.fsType=n.parseUShort();r.ySubscriptXSize=n.parseShort();r.ySubscriptYSize=n.parseShort();r.ySubscriptXOffset=n.parseShort();r.ySubscriptYOffset=n.parseShort();r.ySuperscriptXSize=n.parseShort();r.ySuperscriptYSize=n.parseShort();r.ySuperscriptXOffset=n.parseShort();r.ySuperscriptYOffset=n.parseShort();r.yStrikeoutSize=n.parseShort();r.yStrikeoutPosition=n.parseShort();r.sFamilyClass=n.parseShort();r.panose=[];for(let e=0;e<10;e++)r.panose[e]=n.parseByte();r.ulUnicodeRange1=n.parseULong();r.ulUnicodeRange2=n.parseULong();r.ulUnicodeRange3=n.parseULong();r.ulUnicodeRange4=n.parseULong();r.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte());r.fsSelection=n.parseUShort();r.usFirstCharIndex=n.parseUShort();r.usLastCharIndex=n.parseUShort();r.sTypoAscender=n.parseShort();r.sTypoDescender=n.parseShort();r.sTypoLineGap=n.parseShort();r.usWinAscent=n.parseUShort();r.usWinDescent=n.parseUShort();if(r.version>=1){r.ulCodePageRange1=n.parseULong();r.ulCodePageRange2=n.parseULong()}if(r.version>=2){r.sxHeight=n.parseShort();r.sCapHeight=n.parseShort();r.usDefaultChar=n.parseUShort();r.usBreakChar=n.parseUShort();r.usMaxContent=n.parseUShort()}return r}function Ft(e){return new N.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}var Gt={parse:Nt,make:Ft,unicodeRanges:Dt,getUnicodeRange:kt};function zt(e,t){const r={};const n=new Q.Parser(e,t);r.version=n.parseVersion();r.italicAngle=n.parseFixed();r.underlinePosition=n.parseShort();r.underlineThickness=n.parseShort();r.isFixedPitch=n.parseULong();r.minMemType42=n.parseULong();r.maxMemType42=n.parseULong();r.minMemType1=n.parseULong();r.maxMemType1=n.parseULong();switch(r.version){case 1:r.names=le.slice();break;case 2:r.numberOfGlyphs=n.parseUShort();r.glyphNameIndex=new Array(r.numberOfGlyphs);for(let e=0;e<r.numberOfGlyphs;e++)r.glyphNameIndex[e]=n.parseUShort();r.names=[];for(let e=0;e<r.numberOfGlyphs;e++)if(r.glyphNameIndex[e]>=le.length){const e=n.parseChar();r.names.push(n.parseString(e))}break;case 2.5:r.numberOfGlyphs=n.parseUShort();r.offset=new Array(r.numberOfGlyphs);for(let e=0;e<r.numberOfGlyphs;e++)r.offset[e]=n.parseChar();break}return r}function Ht(){return new N.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var Vt={parse:zt,make:Ht};const jt=new Array(9);jt[1]=function e(){const t=this.offset+this.relativeOffset;const r=this.parseUShort();if(1===r)return{substFormat:1,coverage:this.parsePointer(Z.coverage),deltaGlyphId:this.parseUShort()};if(2===r)return{substFormat:2,coverage:this.parsePointer(Z.coverage),substitute:this.parseOffset16List()};d.assert(false,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")};jt[2]=function e(){const t=this.parseUShort();d.argument(1===t,"GSUB Multiple Substitution Subtable identifier-format must be 1");return{substFormat:t,coverage:this.parsePointer(Z.coverage),sequences:this.parseListOfLists()}};jt[3]=function e(){const t=this.parseUShort();d.argument(1===t,"GSUB Alternate Substitution Subtable identifier-format must be 1");return{substFormat:t,coverage:this.parsePointer(Z.coverage),alternateSets:this.parseListOfLists()}};jt[4]=function e(){const t=this.parseUShort();d.argument(1===t,"GSUB ligature table identifier-format must be 1");return{substFormat:t,coverage:this.parsePointer(Z.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};const Wt={sequenceIndex:Z.uShort,lookupListIndex:Z.uShort};jt[5]=function e(){const t=this.offset+this.relativeOffset;const r=this.parseUShort();if(1===r)return{substFormat:r,coverage:this.parsePointer(Z.coverage),ruleSets:this.parseListOfLists(function(){const e=this.parseUShort();const t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,Wt)}})};if(2===r)return{substFormat:r,coverage:this.parsePointer(Z.coverage),classDef:this.parsePointer(Z.classDef),classSets:this.parseListOfLists(function(){const e=this.parseUShort();const t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,Wt)}})};if(3===r){const e=this.parseUShort();const t=this.parseUShort();return{substFormat:r,coverages:this.parseList(e,Z.pointer(Z.coverage)),lookupRecords:this.parseRecordList(t,Wt)}}d.assert(false,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};jt[6]=function e(){const t=this.offset+this.relativeOffset;const r=this.parseUShort();if(1===r)return{substFormat:1,coverage:this.parsePointer(Z.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Wt)}})};if(2===r)return{substFormat:2,coverage:this.parsePointer(Z.coverage),backtrackClassDef:this.parsePointer(Z.classDef),inputClassDef:this.parsePointer(Z.classDef),lookaheadClassDef:this.parsePointer(Z.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Wt)}})};if(3===r)return{substFormat:3,backtrackCoverage:this.parseList(Z.pointer(Z.coverage)),inputCoverage:this.parseList(Z.pointer(Z.coverage)),lookaheadCoverage:this.parseList(Z.pointer(Z.coverage)),lookupRecords:this.parseRecordList(Wt)};d.assert(false,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};jt[7]=function e(){const t=this.parseUShort();d.argument(1===t,"GSUB Extension Substitution subtable identifier-format must be 1");const r=this.parseUShort();const n=new Z(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:r,extension:jt[r].call(n)}};jt[8]=function e(){const t=this.parseUShort();d.argument(1===t,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1");return{substFormat:t,coverage:this.parsePointer(Z.coverage),backtrackCoverage:this.parseList(Z.pointer(Z.coverage)),lookaheadCoverage:this.parseList(Z.pointer(Z.coverage)),substitutes:this.parseUShortList()}};function Xt(e,t){t=t||0;const r=new Z(e,t);const n=r.parseVersion(1);d.argument(1===n||1.1===n,"Unsupported GSUB table version.");return 1===n?{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(jt)}:{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(jt),variations:r.parseFeatureVariationsList()}}const qt=new Array(9);qt[1]=function e(t){return 1===t.substFormat?new N.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new N.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new N.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new N.Coverage(t.coverage)}].concat(N.ushortList("substitute",t.substitute)))};qt[3]=function e(t){d.assert(1===t.substFormat,"Lookup type 3 substFormat must be 1.");return new N.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new N.Coverage(t.coverage)}].concat(N.tableList("altSet",t.alternateSets,function(e){return new N.Table("alternateSetTable",N.ushortList("alternate",e))})))};qt[4]=function e(t){d.assert(1===t.substFormat,"Lookup type 4 substFormat must be 1.");return new N.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new N.Coverage(t.coverage)}].concat(N.tableList("ligSet",t.ligatureSets,function(e){return new N.Table("ligatureSetTable",N.tableList("ligature",e,function(e){return new N.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(N.ushortList("component",e.components,e.components.length+1)))}))})))};function Yt(e){return new N.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new N.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new N.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new N.LookupList(e.lookups,qt)}])}var Zt={parse:Xt,make:Yt};function Jt(e,t){const r=new Q.Parser(e,t);const n=r.parseULong();d.argument(1===n,"Unsupported META table version.");r.parseULong();r.parseULong();const i=r.parseULong();const a={};for(let n=0;n<i;n++){const n=r.parseTag();const i=r.parseULong();const o=r.parseULong();const s=g.UTF8(e,t+i,o);a[n]=s}return a}function Qt(e){const t=Object.keys(e).length;let r="";const n=16+12*t;const i=new N.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:t}]);for(let t in e){const a=r.length;r+=e[t];i.fields.push({name:"tag "+t,type:"TAG",value:t});i.fields.push({name:"offset "+t,type:"ULONG",value:n+a});i.fields.push({name:"length "+t,type:"ULONG",value:e[t].length})}i.fields.push({name:"stringPool",type:"CHARARRAY",value:r});return i}var Kt={parse:Jt,make:Qt};function $t(e){return Math.log(e)/Math.log(2)|0}function er(e){while(e.length%4!==0)e.push(0);let t=0;for(let r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];t%=Math.pow(2,32);return t}function tr(e,t,r,n){return new N.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function rr(e){const t=new N.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e;t.numTables=e.length;const r=Math.pow(2,$t(t.numTables));t.searchRange=16*r;t.entrySelector=$t(r);t.rangeShift=16*t.numTables-t.searchRange;const n=[];const i=[];let a=t.sizeOf()+tr().sizeOf()*t.numTables;while(a%4!==0){a+=1;i.push({name:"padding",type:"BYTE",value:0})}for(let t=0;t<e.length;t+=1){const r=e[t];d.argument(4===r.tableName.length,"Table name"+r.tableName+" is invalid.");const o=r.sizeOf();const s=tr(r.tableName,er(r.encode()),a,o);n.push({name:s.tag+" Table Record",type:"RECORD",value:s});i.push({name:r.tableName+" table",type:"RECORD",value:r});a+=o;d.argument(!isNaN(a),"Something went wrong calculating the offset.");while(a%4!==0){a+=1;i.push({name:"padding",type:"BYTE",value:0})}}n.sort(function(e,t){return e.value.tag>t.value.tag?1:-1});t.fields=t.fields.concat(n);t.fields=t.fields.concat(i);return t}function nr(e,t,r){for(let r=0;r<t.length;r+=1){const n=e.charToGlyphIndex(t[r]);if(n>0){const t=e.glyphs.get(n);return t.getMetrics()}}return r}function ir(e){let t=0;for(let r=0;r<e.length;r+=1)t+=e[r];return t/e.length}function ar(e){const t=[];const r=[];const n=[];const i=[];const a=[];const o=[];const s=[];let l;let c=0;let u=0;let h=0;let f=0;let p=0;for(let d=0;d<e.glyphs.length;d+=1){const m=e.glyphs.get(d);const v=0|m.unicode;if(isNaN(m.advanceWidth))throw new Error("Glyph "+m.name+" ("+d+"): advanceWidth is not a number.");(l>v||void 0===l)&&v>0&&(l=v);c<v&&(c=v);const g=Gt.getUnicodeRange(v);if(g<32)u|=1<<g;else if(g<64)h|=1<<g-32;else if(g<96)f|=1<<g-64;else{if(!(g<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<g-96}if(".notdef"===m.name)continue;const y=m.getMetrics();t.push(y.xMin);r.push(y.yMin);n.push(y.xMax);i.push(y.yMax);o.push(y.leftSideBearing);s.push(y.rightSideBearing);a.push(m.advanceWidth)}const d={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,a),advanceWidthAvg:ir(a),minLeftSideBearing:Math.min.apply(null,o),maxLeftSideBearing:Math.max.apply(null,o),minRightSideBearing:Math.min.apply(null,s)};d.ascender=e.ascender;d.descender=e.descender;const m=st.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:d.xMin,yMin:d.yMin,xMax:d.xMax,yMax:d.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp});const v=ut.make({ascender:d.ascender,descender:d.descender,advanceWidthMax:d.advanceWidthMax,minLeftSideBearing:d.minLeftSideBearing,minRightSideBearing:d.minRightSideBearing,xMaxExtent:d.maxLeftSideBearing+(d.xMax-d.xMin),numberOfHMetrics:e.glyphs.length});const g=xt.make(e.glyphs.length);const y=Gt.make({xAvgCharWidth:Math.round(d.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:l,usLastCharIndex:c,ulUnicodeRange1:u,ulUnicodeRange2:h,ulUnicodeRange3:f,ulUnicodeRange4:p,fsSelection:e.tables.os2.fsSelection,sTypoAscender:d.ascender,sTypoDescender:d.descender,sTypoLineGap:0,usWinAscent:d.yMax,usWinDescent:Math.abs(d.yMin),ulCodePageRange1:1,sxHeight:nr(e,"xyvw",{yMax:Math.round(d.ascender/2)}).yMax,sCapHeight:nr(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",d).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0});const x=pt.make(e.glyphs);const b=ie.make(e.glyphs);const _=e.getEnglishName("fontFamily");const w=e.getEnglishName("fontSubfamily");const S=_+" "+w;let T=e.getEnglishName("postScriptName");T||(T=_.replace(/\s/g,"")+"-"+w);const M={};for(let t in e.names)M[t]=e.names[t];M.uniqueID||(M.uniqueID={en:e.getEnglishName("manufacturer")+":"+S});M.postScriptName||(M.postScriptName={en:T});M.preferredFamily||(M.preferredFamily=e.names.fontFamily);M.preferredSubfamily||(M.preferredSubfamily=e.names.fontSubfamily);const E=[];const A=Ut.make(M,E);const R=E.length>0?vt.make(E):void 0;const P=Vt.make();const C=it.make(e.glyphs,{version:e.getEnglishName("version"),fullName:S,familyName:_,weightName:w,postScriptName:T,unitsPerEm:e.unitsPerEm,fontBBox:[0,d.yMin,d.ascender,d.advanceWidthMax]});const L=e.metas&&Object.keys(e.metas).length>0?Kt.make(e.metas):void 0;const O=[m,v,g,y,A,b,P,C,x];R&&O.push(R);e.tables.gsub&&O.push(Zt.make(e.tables.gsub));L&&O.push(L);const I=rr(O);const B=I.encode();const U=er(B);const D=I.fields;let k=false;for(let e=0;e<D.length;e+=1)if("head table"===D[e].name){D[e].value.checkSumAdjustment=2981146554-U;k=true;break}if(!k)throw new Error("Could not find head table with checkSum to adjust.");return I}var or={make:rr,fontToTable:ar,computeCheckSum:er};function sr(e,t){let r=0;let n=e.length-1;while(r<=n){const i=r+n>>>1;const a=e[i].tag;if(a===t)return i;a<t?r=i+1:n=i-1}return-r-1}function lr(e,t){let r=0;let n=e.length-1;while(r<=n){const i=r+n>>>1;const a=e[i];if(a===t)return i;a<t?r=i+1:n=i-1}return-r-1}function cr(e,t){let r;let n=0;let i=e.length-1;while(n<=i){const a=n+i>>>1;r=e[a];const o=r.start;if(o===t)return r;o<t?n=a+1:i=a-1}if(n>0){r=e[n-1];if(t>r.end)return 0;return r}}function ur(e,t){this.font=e;this.tableName=t}ur.prototype={searchTag:sr,binSearch:lr,getTable:function(e){let t=this.font.tables[this.tableName];!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable());return t},getScriptNames:function(){let e=this.getTable();if(!e)return[];return e.scripts.map(function(e){return e.tag})},getDefaultScriptName:function(){let e=this.getTable();if(!e)return;let t=false;for(let r=0;r<e.scripts.length;r++){const n=e.scripts[r].tag;if("DFLT"===n)return n;"latn"===n&&(t=true)}if(t)return"latn"},getScriptTable:function(e,t){const r=this.getTable(t);if(r){e=e||"DFLT";const n=r.scripts;const i=sr(r.scripts,e);if(i>=0)return n[i].script;if(t){const t={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};n.splice(-1-i,0,t);return t.script}}},getLangSysTable:function(e,t,r){const n=this.getScriptTable(e,r);if(n){if(!t||"dflt"===t||"DFLT"===t)return n.defaultLangSys;const e=sr(n.langSysRecords,t);if(e>=0)return n.langSysRecords[e].langSys;if(r){const r={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};n.langSysRecords.splice(-1-e,0,r);return r.langSys}}},getFeatureTable:function(e,t,r,n){const i=this.getLangSysTable(e,t,n);if(i){let e;const t=i.featureIndexes;const a=this.font.tables[this.tableName].features;for(let n=0;n<t.length;n++){e=a[t[n]];if(e.tag===r)return e.feature}if(n){const n=a.length;d.assert(0===n||r>=a[n-1].tag,"Features must be added in alphabetical order.");e={tag:r,feature:{params:0,lookupListIndexes:[]}};a.push(e);t.push(n);return e.feature}}},getLookupTables:function(e,t,r,n,i){const a=this.getFeatureTable(e,t,r,i);const o=[];if(a){let e;const t=a.lookupListIndexes;const r=this.font.tables[this.tableName].lookups;for(let i=0;i<t.length;i++){e=r[t[i]];e.lookupType===n&&o.push(e)}if(0===o.length&&i){e={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};const i=r.length;r.push(e);t.push(i);return[e]}}return o},getGlyphClass:function(e,t){switch(e.format){case 1:if(e.startGlyph<=t&&t<e.startGlyph+e.classes.length)return e.classes[t-e.startGlyph];return 0;case 2:const r=cr(e.ranges,t);return r?r.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:const r=lr(e.glyphs,t);return r>=0?r:-1;case 2:const n=cr(e.ranges,t);return n?n.index+t-n.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;{const t=[];const r=e.ranges;for(let e=0;e<r.length;e++){const n=r[e];const i=n.start;const a=n.end;for(let e=i;e<=a;e++)t.push(e)}return t}}};var hr=ur;function fr(e){hr.call(this,e,"gpos")}fr.prototype=hr.prototype;fr.prototype.init=function(){const e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)};fr.prototype.getKerningValue=function(e,t,r){for(let n=0;n<e.length;n++){const i=e[n].subtables;for(let e=0;e<i.length;e++){const n=i[e];const a=this.getCoverageIndex(n.coverage,t);if(a<0)continue;switch(n.posFormat){case 1:let e=n.pairSets[a];for(let t=0;t<e.length;t++){let n=e[t];if(n.secondGlyph===r)return n.value1&&n.value1.xAdvance||0}break;case 2:const i=this.getGlyphClass(n.classDef1,t);const o=this.getGlyphClass(n.classDef2,r);const s=n.classRecords[i][o];return s.value1&&s.value1.xAdvance||0}}}return 0};fr.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)};var pr=fr;function dr(e){hr.call(this,e,"gsub")}function mr(e,t){const r=e.length;if(r!==t.length)return false;for(let n=0;n<r;n++)if(e[n]!==t[n])return false;return true}function vr(e,t,r){const n=e.subtables;for(let e=0;e<n.length;e++){const r=n[e];if(r.substFormat===t)return r}if(r){n.push(r);return r}return}dr.prototype=hr.prototype;dr.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};dr.prototype.getSingle=function(e,t,r){const n=[];const i=this.getLookupTables(t,r,e,1);for(let e=0;e<i.length;e++){const t=i[e].subtables;for(let e=0;e<t.length;e++){const r=t[e];const i=this.expandCoverage(r.coverage);let a;if(1===r.substFormat){const e=r.deltaGlyphId;for(a=0;a<i.length;a++){const t=i[a];n.push({sub:t,by:t+e})}}else{const e=r.substitute;for(a=0;a<i.length;a++)n.push({sub:i[a],by:e[a]})}}}return n};dr.prototype.getAlternates=function(e,t,r){const n=[];const i=this.getLookupTables(t,r,e,3);for(let e=0;e<i.length;e++){const t=i[e].subtables;for(let e=0;e<t.length;e++){const r=t[e];const i=this.expandCoverage(r.coverage);const a=r.alternateSets;for(let e=0;e<i.length;e++)n.push({sub:i[e],by:a[e]})}}return n};dr.prototype.getLigatures=function(e,t,r){const n=[];const i=this.getLookupTables(t,r,e,4);for(let e=0;e<i.length;e++){const t=i[e].subtables;for(let e=0;e<t.length;e++){const r=t[e];const i=this.expandCoverage(r.coverage);const a=r.ligatureSets;for(let e=0;e<i.length;e++){const t=i[e];const r=a[e];for(let e=0;e<r.length;e++){const i=r[e];n.push({sub:[t].concat(i.components),by:i.ligGlyph})}}}}return n};dr.prototype.addSingle=function(e,t,r,n){const i=this.getLookupTables(r,n,e,1,true)[0];const a=vr(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});d.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);const o=t.sub;let s=this.binSearch(a.coverage.glyphs,o);if(s<0){s=-1-s;a.coverage.glyphs.splice(s,0,o);a.substitute.splice(s,0,0)}a.substitute[s]=t.by};dr.prototype.addAlternate=function(e,t,r,n){const i=this.getLookupTables(r,n,e,3,true)[0];const a=vr(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});d.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);const o=t.sub;let s=this.binSearch(a.coverage.glyphs,o);if(s<0){s=-1-s;a.coverage.glyphs.splice(s,0,o);a.alternateSets.splice(s,0,0)}a.alternateSets[s]=t.by};dr.prototype.addLigature=function(e,t,r,n){const i=this.getLookupTables(r,n,e,4,true)[0];let a=i.subtables[0];if(!a){a={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]};i.subtables[0]=a}d.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);const o=t.sub[0];const s=t.sub.slice(1);const l={ligGlyph:t.by,components:s};let c=this.binSearch(a.coverage.glyphs,o);if(c>=0){const e=a.ligatureSets[c];for(let t=0;t<e.length;t++)if(mr(e[t].components,s))return;e.push(l)}else{c=-1-c;a.coverage.glyphs.splice(c,0,o);a.ligatureSets.splice(c,0,[l])}};dr.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r)}return};dr.prototype.add=function(e,t,r,n){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,n);switch(e){case"aalt":case"salt":if("number"===typeof t.by)return this.addSingle(e,t,r,n);return this.addAlternate(e,t,r,n);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,n)}return};var gr=dr;var yr=r(112);function xr(e,t,r,n,i){let a;if((t&n)>0){a=e.parseByte();0===(t&i)&&(a=-a);a=r+a}else a=(t&i)>0?r:r+e.parseShort();return a}function br(e,t,r){const n=new Q.Parser(t,r);e.numberOfContours=n.parseShort();e._xMin=n.parseShort();e._yMin=n.parseShort();e._xMax=n.parseShort();e._yMax=n.parseShort();let i;let a;if(e.numberOfContours>0){const t=e.endPointIndices=[];for(let r=0;r<e.numberOfContours;r+=1)t.push(n.parseUShort());e.instructionLength=n.parseUShort();e.instructions=[];for(let t=0;t<e.instructionLength;t+=1)e.instructions.push(n.parseByte());const r=t[t.length-1]+1;i=[];for(let e=0;e<r;e+=1){a=n.parseByte();i.push(a);if((8&a)>0){const t=n.parseByte();for(let r=0;r<t;r+=1){i.push(a);e+=1}}}d.argument(i.length===r,"Bad flags.");if(t.length>0){const o=[];let s;if(r>0){for(let e=0;e<r;e+=1){a=i[e];s={};s.onCurve=!!(1&a);s.lastPointOfContour=t.indexOf(e)>=0;o.push(s)}let e=0;for(let t=0;t<r;t+=1){a=i[t];s=o[t];s.x=xr(n,a,e,2,16);e=s.x}let l=0;for(let e=0;e<r;e+=1){a=i[e];s=o[e];s.y=xr(n,a,l,4,32);l=s.y}}e.points=o}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=true;e.points=[];e.components=[];let t=true;while(t){i=n.parseUShort();const r={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};if((1&i)>0)if((2&i)>0){r.dx=n.parseShort();r.dy=n.parseShort()}else r.matchedPoints=[n.parseUShort(),n.parseUShort()];else if((2&i)>0){r.dx=n.parseChar();r.dy=n.parseChar()}else r.matchedPoints=[n.parseByte(),n.parseByte()];if((8&i)>0)r.xScale=r.yScale=n.parseF2Dot14();else if((64&i)>0){r.xScale=n.parseF2Dot14();r.yScale=n.parseF2Dot14()}else if((128&i)>0){r.xScale=n.parseF2Dot14();r.scale01=n.parseF2Dot14();r.scale10=n.parseF2Dot14();r.yScale=n.parseF2Dot14()}e.components.push(r);t=!!(32&i)}if(256&i){e.instructionLength=n.parseUShort();e.instructions=[];for(let t=0;t<e.instructionLength;t+=1)e.instructions.push(n.parseByte())}}}function _r(e,t){const r=[];for(let n=0;n<e.length;n+=1){const i=e[n];const a={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};r.push(a)}return r}function wr(e){const t=[];let r=[];for(let n=0;n<e.length;n+=1){const i=e[n];r.push(i);if(i.lastPointOfContour){t.push(r);r=[]}}d.argument(0===r.length,"There are still points left in the current contour.");return t}function Sr(e){const t=new h;if(!e)return t;const r=wr(e);for(let e=0;e<r.length;++e){const n=r[e];let i=null;let a=n[n.length-1];let o=n[0];if(a.onCurve)t.moveTo(a.x,a.y);else if(o.onCurve)t.moveTo(o.x,o.y);else{const e={x:.5*(a.x+o.x),y:.5*(a.y+o.y)};t.moveTo(e.x,e.y)}for(let e=0;e<n.length;++e){i=a;a=o;o=n[(e+1)%n.length];if(a.onCurve)t.lineTo(a.x,a.y);else{let e=i;let r=o;i.onCurve||(e={x:.5*(a.x+i.x),y:.5*(a.y+i.y)});o.onCurve||(r={x:.5*(a.x+o.x),y:.5*(a.y+o.y)});t.quadraticCurveTo(a.x,a.y,r.x,r.y)}}t.closePath()}return t}function Tr(e,t){if(t.isComposite)for(let r=0;r<t.components.length;r+=1){const n=t.components[r];const i=e.get(n.glyphIndex);i.getPath();if(i.points){let e;if(void 0===n.matchedPoints)e=_r(i.points,n);else{if(n.matchedPoints[0]>t.points.length-1||n.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);const r=t.points[n.matchedPoints[0]];let a=i.points[n.matchedPoints[1]];const o={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};a=_r([a],o)[0];o.dx=r.x-a.x;o.dy=r.y-a.y;e=_r(i.points,o)}t.points=t.points.concat(e)}}return Sr(t.points)}function Mr(e,t,r,n){const i=new Te.GlyphSet(n);for(let a=0;a<r.length-1;a+=1){const o=r[a];const s=r[a+1];o!==s?i.push(a,Te.ttfGlyphLoader(n,a,br,e,t+o,Tr)):i.push(a,Te.glyphLoader(n,a))}return i}var Er={getPath:Sr,parse:Mr};let Ar;let Rr;let Pr;let Cr;function Lr(e){this.font=e;this.getCommands=function(e){return Er.getPath(e).commands};this._fpgmState=this._prepState=void 0;this._errorState=0}function Or(e){return e}function Ir(e){return Math.sign(e)*Math.round(Math.abs(e))}function Br(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Ur(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Dr(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function kr(e){return Math.sign(e)*Math.floor(Math.abs(e))}const Nr=function(e){const t=this.srPeriod;let r=this.srPhase;const n=this.srThreshold;let i=1;if(e<0){e=-e;i=-1}e+=n-r;e=Math.trunc(e/t)*t;e+=r;if(e<0)return r*i;return e*i};const Fr={x:1,y:0,axis:"x",distance:function(e,t,r,n){return(r?e.xo:e.x)-(n?t.xo:t.x)},interpolate:function(e,t,r,n){let i;let a;let o;let s;let l;let c;let u;if(!n||n===this){i=e.xo-t.xo;a=e.xo-r.xo;l=t.x-t.xo;c=r.x-r.xo;o=Math.abs(i);s=Math.abs(a);u=o+s;if(0===u){e.x=e.xo+(l+c)/2;return}e.x=e.xo+(l*s+c*o)/u;return}i=n.distance(e,t,true,true);a=n.distance(e,r,true,true);l=n.distance(t,t,false,true);c=n.distance(r,r,false,true);o=Math.abs(i);s=Math.abs(a);u=o+s;if(0===u){Fr.setRelative(e,e,(l+c)/2,n,true);return}Fr.setRelative(e,e,(l*s+c*o)/u,n,true)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,n,i){if(!n||n===this){e.x=(i?t.xo:t.x)+r;return}const a=i?t.xo:t.x;const o=i?t.yo:t.y;const s=a+r*n.x;const l=o+r*n.y;e.x=s+(e.y-l)/n.normalSlope},slope:0,touch:function(e){e.xTouched=true},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=false}};const Gr={x:0,y:1,axis:"y",distance:function(e,t,r,n){return(r?e.yo:e.y)-(n?t.yo:t.y)},interpolate:function(e,t,r,n){let i;let a;let o;let s;let l;let c;let u;if(!n||n===this){i=e.yo-t.yo;a=e.yo-r.yo;l=t.y-t.yo;c=r.y-r.yo;o=Math.abs(i);s=Math.abs(a);u=o+s;if(0===u){e.y=e.yo+(l+c)/2;return}e.y=e.yo+(l*s+c*o)/u;return}i=n.distance(e,t,true,true);a=n.distance(e,r,true,true);l=n.distance(t,t,false,true);c=n.distance(r,r,false,true);o=Math.abs(i);s=Math.abs(a);u=o+s;if(0===u){Gr.setRelative(e,e,(l+c)/2,n,true);return}Gr.setRelative(e,e,(l*s+c*o)/u,n,true)},normalSlope:0,setRelative:function(e,t,r,n,i){if(!n||n===this){e.y=(i?t.yo:t.y)+r;return}const a=i?t.xo:t.x;const o=i?t.yo:t.y;const s=a+r*n.x;const l=o+r*n.y;e.y=l+n.normalSlope*(e.x-s)},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=true},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=false}};Object.freeze(Fr);Object.freeze(Gr);function zr(e,t){this.x=e;this.y=t;this.axis=void 0;this.slope=t/e;this.normalSlope=-e/t;Object.freeze(this)}zr.prototype.distance=function(e,t,r,n){return this.x*Fr.distance(e,t,r,n)+this.y*Gr.distance(e,t,r,n)};zr.prototype.interpolate=function(e,t,r,n){let i;let a;let o;let s;let l;let c;let u;o=n.distance(e,t,true,true);s=n.distance(e,r,true,true);i=n.distance(t,t,false,true);a=n.distance(r,r,false,true);l=Math.abs(o);c=Math.abs(s);u=l+c;if(0===u){this.setRelative(e,e,(i+a)/2,n,true);return}this.setRelative(e,e,(i*c+a*l)/u,n,true)};zr.prototype.setRelative=function(e,t,r,n,i){n=n||this;const a=i?t.xo:t.x;const o=i?t.yo:t.y;const s=a+r*n.x;const l=o+r*n.y;const c=n.normalSlope;const u=this.slope;const h=e.x;const f=e.y;e.x=(u*h-c*s+l-f)/(u-c);e.y=u*(e.x-h)+f};zr.prototype.touch=function(e){e.xTouched=true;e.yTouched=true};function Hr(e,t){const r=Math.sqrt(e*e+t*t);e/=r;t/=r;return 1===e&&0===t?Fr:0===e&&1===t?Gr:new zr(e,t)}function Vr(e,t,r,n){this.x=this.xo=Math.round(64*e)/64;this.y=this.yo=Math.round(64*t)/64;this.lastPointOfContour=r;this.onCurve=n;this.prevPointOnContour=void 0;this.nextPointOnContour=void 0;this.xTouched=false;this.yTouched=false;Object.preventExtensions(this)}Vr.prototype.nextTouched=function(e){let t=this.nextPointOnContour;while(!e.touched(t)&&t!==this)t=t.nextPointOnContour;return t};Vr.prototype.prevTouched=function(e){let t=this.prevPointOnContour;while(!e.touched(t)&&t!==this)t=t.prevPointOnContour;return t};const jr=Object.freeze(new Vr(0,0));const Wr={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:true};function Xr(e,t){this.env=e;this.stack=[];this.prog=t;switch(e){case"glyf":this.zp0=this.zp1=this.zp2=1;this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Fr;this.round=Ir}}Lr.prototype.exec=function(e,t){if("number"!==typeof t)throw new Error("Point size is not a number!");if(this._errorState>2)return;const r=this.font;let n=this._prepState;if(!n||n.ppem!==t){let e=this._fpgmState;if(!e){Xr.prototype=Wr;e=this._fpgmState=new Xr("fpgm",r.tables.fpgm);e.funcs=[];e.font=r;if(exports.DEBUG){console.log("---EXEC FPGM---");e.step=-1}try{Rr(e)}catch(e){console.log("Hinting error in FPGM:"+e);this._errorState=3;return}}Xr.prototype=e;n=this._prepState=new Xr("prep",r.tables.prep);n.ppem=t;const i=r.tables.cvt;if(i){const e=n.cvt=new Array(i.length);const a=t/r.unitsPerEm;for(let t=0;t<i.length;t++)e[t]=i[t]*a}else n.cvt=[];if(exports.DEBUG){console.log("---EXEC PREP---");n.step=-1}try{Rr(n)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e);this._errorState=2}}if(this._errorState>1)return;try{return Pr(e,n)}catch(e){if(this._errorState<1){console.log("Hinting error:"+e);console.log("Note: further hinting errors are silenced")}this._errorState=1;return}};Pr=function(e,t){const r=t.ppem/t.font.unitsPerEm;const n=r;let i=e.components;let a;let o;let s;Xr.prototype=t;if(i){const l=t.font;o=[];a=[];for(let e=0;e<i.length;e++){const t=i[e];const c=l.glyphs.get(t.glyphIndex);s=new Xr("glyf",c.instructions);if(exports.DEBUG){console.log("---EXEC COMP "+e+"---");s.step=-1}Cr(c,s,r,n);const u=Math.round(t.dx*r);const h=Math.round(t.dy*n);const f=s.gZone;const p=s.contours;for(let e=0;e<f.length;e++){const t=f[e];t.xTouched=t.yTouched=false;t.xo=t.x=t.x+u;t.yo=t.y=t.y+h}const d=o.length;o.push.apply(o,f);for(let e=0;e<p.length;e++)a.push(p[e]+d)}if(e.instructions&&!s.inhibitGridFit){s=new Xr("glyf",e.instructions);s.gZone=s.z0=s.z1=s.z2=o;s.contours=a;o.push(new Vr(0,0),new Vr(Math.round(e.advanceWidth*r),0));if(exports.DEBUG){console.log("---EXEC COMPOSITE---");s.step=-1}Rr(s);o.length-=2}}else{s=new Xr("glyf",e.instructions);if(exports.DEBUG){console.log("---EXEC GLYPH---");s.step=-1}Cr(e,s,r,n);o=s.gZone}return o};Cr=function(e,t,r,n){const i=e.points||[];const a=i.length;const o=t.gZone=t.z0=t.z1=t.z2=[];const s=t.contours=[];let l;for(let e=0;e<a;e++){l=i[e];o[e]=new Vr(l.x*r,l.y*n,l.lastPointOfContour,l.onCurve)}let c;let u;for(let e=0;e<a;e++){l=o[e];if(!c){c=l;s.push(e)}if(l.lastPointOfContour){l.nextPointOnContour=c;c.prevPointOnContour=l;c=void 0}else{u=o[e+1];l.nextPointOnContour=u;u.prevPointOnContour=l}}if(t.inhibitGridFit)return;if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(let e=0;e<a;e++)console.log(e,o[e].x,o[e].y)}o.push(new Vr(0,0),new Vr(Math.round(e.advanceWidth*r),0));Rr(t);o.length-=2;if(exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(let e=0;e<a;e++)console.log(e,o[e].x,o[e].y)}};Rr=function(e){let t=e.prog;if(!t)return;const r=t.length;let n;for(e.ip=0;e.ip<r;e.ip++){exports.DEBUG&&e.step++;n=Ar[t[e.ip]];if(!n)throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));n(e)}};function qr(e){const t=e.tZone=new Array(e.gZone.length);for(let e=0;e<t.length;e++)t[e]=new Vr(0,0)}function Yr(e,t){const r=e.prog;let n=e.ip;let i=1;let a;do{a=r[++n];if(88===a)i++;else if(89===a)i--;else if(64===a)n+=r[n+1]+1;else if(65===a)n+=2*r[n+1]+1;else if(a>=176&&a<=183)n+=a-176+1;else if(a>=184&&a<=191)n+=2*(a-184+1);else if(t&&1===i&&27===a)break}while(i>0);e.ip=n}function Zr(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]");t.fv=t.pv=t.dpv=e}function Jr(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]");t.pv=t.dpv=e}function Qr(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]");t.fv=e}function Kr(e,t){const r=t.stack;const n=r.pop();const i=r.pop();const a=t.z2[n];const o=t.z1[i];exports.DEBUG&&console.log("SPVTL["+e+"]",n,i);let s;let l;if(e){s=a.y-o.y;l=o.x-a.x}else{s=o.x-a.x;l=o.y-a.y}t.pv=t.dpv=Hr(s,l)}function $r(e,t){const r=t.stack;const n=r.pop();const i=r.pop();const a=t.z2[n];const o=t.z1[i];exports.DEBUG&&console.log("SFVTL["+e+"]",n,i);let s;let l;if(e){s=a.y-o.y;l=o.x-a.x}else{s=o.x-a.x;l=o.y-a.y}t.fv=Hr(s,l)}function en(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,n);e.pv=e.dpv=Hr(n,r)}function tn(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,n);e.fv=Hr(n,r)}function rn(e){const t=e.stack;const r=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]");t.push(16384*r.x);t.push(16384*r.y)}function nn(e){const t=e.stack;const r=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]");t.push(16384*r.x);t.push(16384*r.y)}function an(e){e.fv=e.pv;exports.DEBUG&&console.log(e.step,"SFVTPV[]")}function on(e){const t=e.stack;const r=t.pop();const n=t.pop();const i=t.pop();const a=t.pop();const o=t.pop();const s=e.z0;const l=e.z1;const c=s[r];const u=s[n];const h=l[i];const f=l[a];const p=e.z2[o];exports.DEBUG&&console.log("ISECT[], ",r,n,i,a,o);const d=c.x;const m=c.y;const v=u.x;const g=u.y;const y=h.x;const x=h.y;const b=f.x;const _=f.y;const w=(d-v)*(x-_)-(m-g)*(y-b);const S=d*g-m*v;const T=y*_-x*b;p.x=(S*(y-b)-T*(d-v))/w;p.y=(S*(x-_)-T*(m-g))/w}function sn(e){e.rp0=e.stack.pop();exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)}function ln(e){e.rp1=e.stack.pop();exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)}function cn(e){e.rp2=e.stack.pop();exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)}function un(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SZP0[]",t);e.zp0=t;switch(t){case 0:e.tZone||qr(e);e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function hn(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SZP1[]",t);e.zp1=t;switch(t){case 0:e.tZone||qr(e);e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function fn(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SZP2[]",t);e.zp2=t;switch(t){case 0:e.tZone||qr(e);e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function pn(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SZPS[]",t);e.zp0=e.zp1=e.zp2=t;switch(t){case 0:e.tZone||qr(e);e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function dn(e){e.loop=e.stack.pop();exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)}function mn(e){exports.DEBUG&&console.log(e.step,"RTG[]");e.round=Ir}function vn(e){exports.DEBUG&&console.log(e.step,"RTHG[]");e.round=Ur}function gn(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t);e.minDis=t/64}function yn(e){exports.DEBUG&&console.log(e.step,"ELSE[]");Yr(e,false)}function xn(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t);e.ip+=t-1}function bn(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t);e.cvCutIn=t/64}function _n(e){const t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]");t.push(t[t.length-1])}function wn(e){exports.DEBUG&&console.log(e.step,"POP[]");e.stack.pop()}function Sn(e){exports.DEBUG&&console.log(e.step,"CLEAR[]");e.stack.length=0}function Tn(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]");t.push(r);t.push(n)}function Mn(e){const t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]");t.push(t.length)}function En(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",r,n);const i=e.ip;const a=e.prog;e.prog=e.funcs[r];for(let t=0;t<n;t++){Rr(e);exports.DEBUG&&console.log(++e.step,t+1<n?"next loopcall":"done loopcall",t)}e.ip=i;e.prog=a}function An(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);const r=e.ip;const n=e.prog;e.prog=e.funcs[t];Rr(e);e.ip=r;e.prog=n;exports.DEBUG&&console.log(++e.step,"returning from",t)}function Rn(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",r);t.push(t[t.length-r])}function Pn(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",r);t.push(t.splice(t.length-r,1)[0])}function Cn(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");const t=e.stack;const r=e.prog;let n=e.ip;const i=t.pop();const a=n;exports.DEBUG&&console.log(e.step,"FDEF[]",i);while(45!==r[++n]);e.ip=n;e.funcs[i]=r.slice(a+1,n)}function Ln(e,t){const r=t.stack.pop();const n=t.z0[r];const i=t.fv;const a=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",r);let o=a.distance(n,jr);e&&(o=t.round(o));i.setRelative(n,jr,o,a);i.touch(n);t.rp0=t.rp1=r}function On(e,t){const r=t.z2;const n=r.length-2;let i;let a;let o;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(let t=0;t<n;t++){i=r[t];if(e.touched(i))continue;a=i.prevTouched(e);if(a===i)continue;o=i.nextTouched(e);a===o&&e.setRelative(i,i,e.distance(a,a,false,true),e,true);e.interpolate(i,a,o,e)}}function In(e,t){const r=t.stack;const n=e?t.rp1:t.rp2;const i=(e?t.z0:t.z1)[n];const a=t.fv;const o=t.pv;let s=t.loop;const l=t.z2;while(s--){const n=r.pop();const c=l[n];const u=o.distance(i,i,false,true);a.setRelative(c,c,u,o);a.touch(c);exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-s)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",n)}t.loop=1}function Bn(e,t){const r=t.stack;const n=e?t.rp1:t.rp2;const i=(e?t.z0:t.z1)[n];const a=t.fv;const o=t.pv;const s=r.pop();const l=t.z2[t.contours[s]];let c=l;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",s);const u=o.distance(i,i,false,true);do{c!==i&&a.setRelative(c,c,u,o);c=c.nextPointOnContour}while(c!==l)}function Un(e,t){const r=t.stack;const n=e?t.rp1:t.rp2;const i=(e?t.z0:t.z1)[n];const a=t.fv;const o=t.pv;const s=r.pop();exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",s);let l;switch(s){case 0:l=t.tZone;break;case 1:l=t.gZone;break;default:throw new Error("Invalid zone")}let c;const u=o.distance(i,i,false,true);const h=l.length-2;for(let e=0;e<h;e++){c=l[e];a.setRelative(c,c,u,o)}}function Dn(e){const t=e.stack;let r=e.loop;const n=e.fv;const i=t.pop()/64;const a=e.z2;while(r--){const o=t.pop();const s=a[o];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",o,i);n.setRelative(s,s,i);n.touch(s)}e.loop=1}function kn(e){const t=e.stack;const r=e.rp1;const n=e.rp2;let i=e.loop;const a=e.z0[r];const o=e.z1[n];const s=e.fv;const l=e.dpv;const c=e.z2;while(i--){const u=t.pop();const h=c[u];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"IP[]",u,r,"<->",n);s.interpolate(h,a,o,l);s.touch(h)}e.loop=1}function Nn(e,t){const r=t.stack;const n=r.pop()/64;const i=r.pop();const a=t.z1[i];const o=t.z0[t.rp0];const s=t.fv;const l=t.pv;s.setRelative(a,o,n,l);s.touch(a);exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",n,i);t.rp1=t.rp0;t.rp2=i;e&&(t.rp0=i)}function Fn(e){const t=e.stack;const r=e.rp0;const n=e.z0[r];let i=e.loop;const a=e.fv;const o=e.pv;const s=e.z1;while(i--){const r=t.pop();const l=s[r];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",r);a.setRelative(l,n,0,o);a.touch(l)}e.loop=1}function Gn(e){exports.DEBUG&&console.log(e.step,"RTDG[]");e.round=Br}function zn(e,t){const r=t.stack;const n=r.pop();const i=r.pop();const a=t.z0[i];const o=t.fv;const s=t.pv;let l=t.cvt[n];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",n,"(",l,")",i);let c=s.distance(a,jr);if(e){Math.abs(c-l)<t.cvCutIn&&(c=l);c=t.round(c)}o.setRelative(a,jr,c,s);if(0===t.zp0){a.xo=a.x;a.yo=a.y}o.touch(a);t.rp0=t.rp1=i}function Hn(e){const t=e.prog;let r=e.ip;const n=e.stack;const i=t[++r];exports.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(let e=0;e<i;e++)n.push(t[++r]);e.ip=r}function Vn(e){let t=e.ip;const r=e.prog;const n=e.stack;const i=r[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(let e=0;e<i;e++){let e=r[++t]<<8|r[++t];32768&e&&(e=-(1+(65535^e)));n.push(e)}e.ip=t}function jn(e){const t=e.stack;let r=e.store;r||(r=e.store=[]);const n=t.pop();const i=t.pop();exports.DEBUG&&console.log(e.step,"WS",n,i);r[i]=n}function Wn(e){const t=e.stack;const r=e.store;const n=t.pop();exports.DEBUG&&console.log(e.step,"RS",n);const i=r&&r[n]||0;t.push(i)}function Xn(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",r,n);e.cvt[n]=r/64}function qn(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",r);t.push(64*e.cvt[r])}function Yn(e,t){const r=t.stack;const n=r.pop();const i=t.z2[n];exports.DEBUG&&console.log(t.step,"GC["+e+"]",n);r.push(64*t.dpv.distance(i,jr,e,false))}function Zn(e,t){const r=t.stack;const n=r.pop();const i=r.pop();const a=t.z1[n];const o=t.z0[i];const s=t.dpv.distance(o,a,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",n,i,"->",s);t.stack.push(Math.round(64*s))}function Jn(e){exports.DEBUG&&console.log(e.step,"MPPEM[]");e.stack.push(e.ppem)}function Qn(e){exports.DEBUG&&console.log(e.step,"FLIPON[]");e.autoFlip=true}function Kn(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",r,n);t.push(n<r?1:0)}function $n(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",r,n);t.push(n<=r?1:0)}function ei(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",r,n);t.push(n>r?1:0)}function ti(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",r,n);t.push(n>=r?1:0)}function ri(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",r,n);t.push(r===n?1:0)}function ni(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",r,n);t.push(r!==n?1:0)}function ii(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",r);t.push(Math.trunc(r)%2?1:0)}function ai(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",r);t.push(Math.trunc(r)%2?0:1)}function oi(e){let t=e.stack.pop();let r;exports.DEBUG&&console.log(e.step,"IF[]",t);if(!t){Yr(e,true);exports.DEBUG&&console.log(e.step,27===r?"ELSE[]":"EIF[]")}}function si(e){exports.DEBUG&&console.log(e.step,"EIF[]")}function li(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",r,n);t.push(r&&n?1:0)}function ci(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",r,n);t.push(r||n?1:0)}function ui(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",r);t.push(r?0:1)}function hi(e,t){const r=t.stack;const n=r.pop();const i=t.fv;const a=t.pv;const o=t.ppem;const s=t.deltaBase+16*(e-1);const l=t.deltaShift;const c=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",n,r);for(let e=0;e<n;e++){const e=r.pop();const n=r.pop();const u=s+((240&n)>>4);if(u!==o)continue;let h=(15&n)-8;h>=0&&h++;exports.DEBUG&&console.log(t.step,"DELTAPFIX",e,"by",h*l);const f=c[e];i.setRelative(f,f,h*l,a)}}function fi(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"SDB[]",r);e.deltaBase=r}function pi(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"SDS[]",r);e.deltaShift=Math.pow(.5,r)}function di(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",r,n);t.push(n+r)}function mi(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",r,n);t.push(n-r)}function vi(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",r,n);t.push(64*n/r)}function gi(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",r,n);t.push(n*r/64)}function yi(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",r);t.push(Math.abs(r))}function xi(e){const t=e.stack;let r=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",r);t.push(-r)}function bi(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",r);t.push(64*Math.floor(r/64))}function _i(e){const t=e.stack;const r=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",r);t.push(64*Math.ceil(r/64))}function wi(e,t){const r=t.stack;const n=r.pop();exports.DEBUG&&console.log(t.step,"ROUND[]");r.push(64*t.round(n/64))}function Si(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",r,n);e.cvt[n]=r*e.ppem/e.font.unitsPerEm}function Ti(e,t){const r=t.stack;const n=r.pop();const i=t.ppem;const a=t.deltaBase+16*(e-1);const o=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",n,r);for(let e=0;e<n;e++){const e=r.pop();const n=r.pop();const s=a+((240&n)>>4);if(s!==i)continue;let l=(15&n)-8;l>=0&&l++;const c=l*o;exports.DEBUG&&console.log(t.step,"DELTACFIX",e,"by",c);t.cvt[e]+=c}}function Mi(e){let t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SROUND[]",t);e.round=Nr;let r;switch(192&t){case 0:r=.5;break;case 64:r=1;break;case 128:r=2;break;default:throw new Error("invalid SROUND value")}e.srPeriod=r;switch(48&t){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*r;break;case 32:e.srPhase=.5*r;break;case 48:e.srPhase=.75*r;break;default:throw new Error("invalid SROUND value")}t&=15;e.srThreshold=0===t?0:(t/8-.5)*r}function Ei(e){let t=e.stack.pop();exports.DEBUG&&console.log(e.step,"S45ROUND[]",t);e.round=Nr;let r;switch(192&t){case 0:r=Math.sqrt(2)/2;break;case 64:r=Math.sqrt(2);break;case 128:r=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}e.srPeriod=r;switch(48&t){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*r;break;case 32:e.srPhase=.5*r;break;case 48:e.srPhase=.75*r;break;default:throw new Error("invalid S45ROUND value")}t&=15;e.srThreshold=0===t?0:(t/8-.5)*r}function Ai(e){exports.DEBUG&&console.log(e.step,"ROFF[]");e.round=Or}function Ri(e){exports.DEBUG&&console.log(e.step,"RUTG[]");e.round=Dr}function Pi(e){exports.DEBUG&&console.log(e.step,"RDTG[]");e.round=kr}function Ci(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)}function Li(e,t){const r=t.stack;const n=r.pop();const i=r.pop();const a=t.z2[n];const o=t.z1[i];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",n,i);let s;let l;if(e){s=a.y-o.y;l=o.x-a.x}else{s=o.x-a.x;l=o.y-a.y}t.dpv=Hr(s,l)}function Oi(e){const t=e.stack;const r=t.pop();let n=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",r);1&r&&(n=35);32&r&&(n|=4096);t.push(n)}function Ii(e){const t=e.stack;const r=t.pop();const n=t.pop();const i=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]");t.push(n);t.push(r);t.push(i)}function Bi(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",r,n);t.push(Math.max(n,r))}function Ui(e){const t=e.stack;const r=t.pop();const n=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",r,n);t.push(Math.min(n,r))}function Di(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)}function ki(e){const t=e.stack.pop();let r=e.stack.pop();exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,r);switch(t){case 1:e.inhibitGridFit=!!r;return;case 2:e.ignoreCvt=!!r;return;default:throw new Error("invalid INSTCTRL[] selector")}}function Ni(e,t){const r=t.stack;const n=t.prog;let i=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(let t=0;t<e;t++)r.push(n[++i]);t.ip=i}function Fi(e,t){let r=t.ip;const n=t.prog;const i=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(let t=0;t<e;t++){let e=n[++r]<<8|n[++r];32768&e&&(e=-(1+(65535^e)));i.push(e)}t.ip=r}function Gi(e,t,r,n,i,a){const o=a.stack;const s=e&&o.pop();const l=o.pop();const c=a.rp0;const u=a.z0[c];const h=a.z1[l];const f=a.minDis;const p=a.fv;const d=a.dpv;let m;let v;let g;let y;v=m=d.distance(h,u,true,true);g=v>=0?1:-1;v=Math.abs(v);if(e){y=a.cvt[s];n&&Math.abs(v-y)<a.cvCutIn&&(v=y)}r&&v<f&&(v=f);n&&(v=a.round(v));p.setRelative(h,u,g*v,d);p.touch(h);exports.DEBUG&&console.log(a.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(n?"R":"_")+(0===i?"Gr":1===i?"Bl":2===i?"Wh":"")+"]",e?s+"("+a.cvt[s]+","+y+")":"",l,"(d =",m,"->",g*v,")");a.rp1=a.rp0;a.rp2=l;t&&(a.rp0=l)}Ar=[Zr.bind(void 0,Gr),Zr.bind(void 0,Fr),Jr.bind(void 0,Gr),Jr.bind(void 0,Fr),Qr.bind(void 0,Gr),Qr.bind(void 0,Fr),Kr.bind(void 0,0),Kr.bind(void 0,1),$r.bind(void 0,0),$r.bind(void 0,1),en,tn,rn,nn,an,on,sn,ln,cn,un,hn,fn,pn,dn,mn,vn,gn,yn,xn,bn,void 0,void 0,_n,wn,Sn,Tn,Mn,Rn,Pn,void 0,void 0,void 0,En,An,Cn,void 0,Ln.bind(void 0,0),Ln.bind(void 0,1),On.bind(void 0,Gr),On.bind(void 0,Fr),In.bind(void 0,0),In.bind(void 0,1),Bn.bind(void 0,0),Bn.bind(void 0,1),Un.bind(void 0,0),Un.bind(void 0,1),Dn,kn,Nn.bind(void 0,0),Nn.bind(void 0,1),Fn,Gn,zn.bind(void 0,0),zn.bind(void 0,1),Hn,Vn,jn,Wn,Xn,qn,Yn.bind(void 0,0),Yn.bind(void 0,1),void 0,Zn.bind(void 0,0),Zn.bind(void 0,1),Jn,void 0,Qn,void 0,void 0,Kn,$n,ei,ti,ri,ni,ii,ai,oi,si,li,ci,ui,hi.bind(void 0,1),fi,pi,di,mi,vi,gi,yi,xi,bi,_i,wi.bind(void 0,0),wi.bind(void 0,1),wi.bind(void 0,2),wi.bind(void 0,3),void 0,void 0,void 0,void 0,Si,hi.bind(void 0,2),hi.bind(void 0,3),Ti.bind(void 0,1),Ti.bind(void 0,2),Ti.bind(void 0,3),Mi,Ei,void 0,void 0,Ai,void 0,Ri,Pi,wn,wn,void 0,void 0,void 0,void 0,void 0,Ci,Li.bind(void 0,0),Li.bind(void 0,1),Oi,void 0,Ii,Bi,Ui,Di,ki,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Ni.bind(void 0,1),Ni.bind(void 0,2),Ni.bind(void 0,3),Ni.bind(void 0,4),Ni.bind(void 0,5),Ni.bind(void 0,6),Ni.bind(void 0,7),Ni.bind(void 0,8),Fi.bind(void 0,1),Fi.bind(void 0,2),Fi.bind(void 0,3),Fi.bind(void 0,4),Fi.bind(void 0,5),Fi.bind(void 0,6),Fi.bind(void 0,7),Fi.bind(void 0,8),Gi.bind(void 0,0,0,0,0,0),Gi.bind(void 0,0,0,0,0,1),Gi.bind(void 0,0,0,0,0,2),Gi.bind(void 0,0,0,0,0,3),Gi.bind(void 0,0,0,0,1,0),Gi.bind(void 0,0,0,0,1,1),Gi.bind(void 0,0,0,0,1,2),Gi.bind(void 0,0,0,0,1,3),Gi.bind(void 0,0,0,1,0,0),Gi.bind(void 0,0,0,1,0,1),Gi.bind(void 0,0,0,1,0,2),Gi.bind(void 0,0,0,1,0,3),Gi.bind(void 0,0,0,1,1,0),Gi.bind(void 0,0,0,1,1,1),Gi.bind(void 0,0,0,1,1,2),Gi.bind(void 0,0,0,1,1,3),Gi.bind(void 0,0,1,0,0,0),Gi.bind(void 0,0,1,0,0,1),Gi.bind(void 0,0,1,0,0,2),Gi.bind(void 0,0,1,0,0,3),Gi.bind(void 0,0,1,0,1,0),Gi.bind(void 0,0,1,0,1,1),Gi.bind(void 0,0,1,0,1,2),Gi.bind(void 0,0,1,0,1,3),Gi.bind(void 0,0,1,1,0,0),Gi.bind(void 0,0,1,1,0,1),Gi.bind(void 0,0,1,1,0,2),Gi.bind(void 0,0,1,1,0,3),Gi.bind(void 0,0,1,1,1,0),Gi.bind(void 0,0,1,1,1,1),Gi.bind(void 0,0,1,1,1,2),Gi.bind(void 0,0,1,1,1,3),Gi.bind(void 0,1,0,0,0,0),Gi.bind(void 0,1,0,0,0,1),Gi.bind(void 0,1,0,0,0,2),Gi.bind(void 0,1,0,0,0,3),Gi.bind(void 0,1,0,0,1,0),Gi.bind(void 0,1,0,0,1,1),Gi.bind(void 0,1,0,0,1,2),Gi.bind(void 0,1,0,0,1,3),Gi.bind(void 0,1,0,1,0,0),Gi.bind(void 0,1,0,1,0,1),Gi.bind(void 0,1,0,1,0,2),Gi.bind(void 0,1,0,1,0,3),Gi.bind(void 0,1,0,1,1,0),Gi.bind(void 0,1,0,1,1,1),Gi.bind(void 0,1,0,1,1,2),Gi.bind(void 0,1,0,1,1,3),Gi.bind(void 0,1,1,0,0,0),Gi.bind(void 0,1,1,0,0,1),Gi.bind(void 0,1,1,0,0,2),Gi.bind(void 0,1,1,0,0,3),Gi.bind(void 0,1,1,0,1,0),Gi.bind(void 0,1,1,0,1,1),Gi.bind(void 0,1,1,0,1,2),Gi.bind(void 0,1,1,0,1,3),Gi.bind(void 0,1,1,1,0,0),Gi.bind(void 0,1,1,1,0,1),Gi.bind(void 0,1,1,1,0,2),Gi.bind(void 0,1,1,1,0,3),Gi.bind(void 0,1,1,1,1,0),Gi.bind(void 0,1,1,1,1,1),Gi.bind(void 0,1,1,1,1,2),Gi.bind(void 0,1,1,1,1,3)];var zi=Lr;const Hi=Array.from||(e=>e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]);function Vi(e){e=e||{};if(!e.empty){Object(yr["b"])(e.familyName,"When creating a new Font object, familyName is required.");Object(yr["b"])(e.styleName,"When creating a new Font object, styleName is required.");Object(yr["b"])(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required.");Object(yr["b"])(e.ascender,"When creating a new Font object, ascender is required.");Object(yr["b"])(e.descender,"When creating a new Font object, descender is required.");Object(yr["b"])(e.descender<0,"Descender should be negative (e.g. -512).");this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}};this.unitsPerEm=e.unitsPerEm||1e3;this.ascender=e.ascender;this.descender=e.descender;this.createdTimestamp=e.createdTimestamp;this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}}this.supported=true;this.glyphs=new Te.GlyphSet(this,e.glyphs||[]);this.encoding=new ce(this);this.position=new pr(this);this.substitution=new gr(this);this.tables=this.tables||{};Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if("truetype"===this.outlinesFormat)return this._hinting=new zi(this)}})}Vi.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)};Vi.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)};Vi.prototype.charToGlyph=function(e){const t=this.charToGlyphIndex(e);let r=this.glyphs.get(t);r||(r=this.glyphs.get(0));return r};Vi.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;const r=Hi(e);const n=[];for(let e=0;e<r.length;e+=1){const t=r[e];n.push(this.charToGlyphIndex(t))}let i=n.length;if(t.features){const e=t.script||this.substitution.getDefaultScriptName();let r=[];t.features.liga&&(r=r.concat(this.substitution.getFeature("liga",e,t.language)));t.features.rlig&&(r=r.concat(this.substitution.getFeature("rlig",e,t.language)));for(let e=0;e<i;e+=1)for(let t=0;t<r.length;t++){const a=r[t];const o=a.sub;const s=o.length;let l=0;while(l<s&&o[l]===n[e+l])l++;if(l===s){n.splice(e,s,a.by);i=i-s+1}}}const a=new Array(i);const o=this.glyphs.get(0);for(let e=0;e<i;e+=1)a[e]=this.glyphs.get(n[e])||o;return a};Vi.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)};Vi.prototype.nameToGlyph=function(e){const t=this.nameToGlyphIndex(e);let r=this.glyphs.get(t);r||(r=this.glyphs.get(0));return r};Vi.prototype.glyphIndexToName=function(e){if(!this.glyphNames.glyphIndexToName)return"";return this.glyphNames.glyphIndexToName(e)};Vi.prototype.getKerningValue=function(e,t){e=e.index||e;t=t.index||t;const r=this.position.defaultKerningTables;if(r)return this.position.getKerningValue(r,e,t);return this.kerningPairs[e+","+t]||0};Vi.prototype.defaultRenderOptions={kerning:true,features:{liga:true,rlig:true}};Vi.prototype.forEachGlyph=function(e,t,r,n,i,a){t=void 0!==t?t:0;r=void 0!==r?r:0;n=void 0!==n?n:72;i=i||this.defaultRenderOptions;const o=1/this.unitsPerEm*n;const s=this.stringToGlyphs(e,i);let l;if(i.kerning){const e=i.script||this.position.getDefaultScriptName();l=this.position.getKerningTables(e,i.language)}for(let e=0;e<s.length;e+=1){const c=s[e];a.call(this,c,t,r,n,i);c.advanceWidth&&(t+=c.advanceWidth*o);if(i.kerning&&e<s.length-1){const r=l?this.position.getKerningValue(l,c.index,s[e+1].index):this.getKerningValue(c,s[e+1]);t+=r*o}i.letterSpacing?t+=i.letterSpacing*n:i.tracking&&(t+=i.tracking/1e3*n)}return t};Vi.prototype.getPath=function(e,t,r,n,i){const a=new h;this.forEachGlyph(e,t,r,n,i,function(e,t,r,n){const o=e.getPath(t,r,n,i,this);a.extend(o)});return a};Vi.prototype.getPaths=function(e,t,r,n,i){const a=[];this.forEachGlyph(e,t,r,n,i,function(e,t,r,n){const o=e.getPath(t,r,n,i,this);a.push(o)});return a};Vi.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,function(){})};Vi.prototype.draw=function(e,t,r,n,i,a){this.getPath(t,r,n,i,a).draw(e)};Vi.prototype.drawPoints=function(e,t,r,n,i,a){this.forEachGlyph(t,r,n,i,a,function(t,r,n,i){t.drawPoints(e,r,n,i)})};Vi.prototype.drawMetrics=function(e,t,r,n,i,a){this.forEachGlyph(t,r,n,i,a,function(t,r,n,i){t.drawMetrics(e,r,n,i)})};Vi.prototype.getEnglishName=function(e){const t=this.names[e];if(t)return t.en};Vi.prototype.validate=function(){const e=[];const t=this;function r(t,r){t||e.push(r)}function n(e){const n=t.getEnglishName(e);r(n&&n.trim().length>0,"No English "+e+" specified.")}n("fontFamily");n("weightName");n("manufacturer");n("copyright");n("version");r(this.unitsPerEm>0,"No unitsPerEm specified.")};Vi.prototype.toTables=function(){return or.fontToTable(this)};Vi.prototype.toBuffer=function(){console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead.");return this.toArrayBuffer()};Vi.prototype.toArrayBuffer=function(){const e=this.toTables();const t=e.encode();const r=new ArrayBuffer(t.length);const n=new Uint8Array(r);for(let e=0;e<t.length;e++)n[e]=t[e];return r};Vi.prototype.download=function(e){const t=this.getEnglishName("fontFamily");const n=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+n+".otf";const i=this.toArrayBuffer();if(Object(yr["c"])()){window.URL=window.URL||window.webkitURL;if(window.URL){const t=new DataView(i);const r=new Blob([t],{type:"font/opentype"});let n=document.createElement("a");n.href=window.URL.createObjectURL(r);n.download=e;let a=document.createEvent("MouseEvents");a.initEvent("click",true,false);n.dispatchEvent(a)}else console.warn("Font file could not be downloaded. Try using a different browser.")}else{const t=r(72);const n=Object(yr["a"])(i);t.writeFileSync(e,n)}};Vi.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Vi.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Vi.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var ji=Vi;function Wi(e,t){const r=JSON.stringify(e);let n=256;for(let e in t){let i=parseInt(e);if(!i||i<256)continue;if(JSON.stringify(t[e])===r)return i;n<=i&&(n=i+1)}t[n]=e;return n}function Xi(e,t,r){const n=Wi(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:n}]}function qi(e,t,r){const n={};const i=new Q.Parser(e,t);n.tag=i.parseTag();n.minValue=i.parseFixed();n.defaultValue=i.parseFixed();n.maxValue=i.parseFixed();i.skip("uShort",1);n.name=r[i.parseUShort()]||{};return n}function Yi(e,t,r,n){const i=Wi(t.name,n);const a=[{name:"nameID_"+e,type:"USHORT",value:i},{name:"flags_"+e,type:"USHORT",value:0}];for(let n=0;n<r.length;++n){const i=r[n].tag;a.push({name:"axis_"+e+" "+i,type:"FIXED",value:t.coordinates[i]<<16})}return a}function Zi(e,t,r,n){const i={};const a=new Q.Parser(e,t);i.name=n[a.parseUShort()]||{};a.skip("uShort",1);i.coordinates={};for(let e=0;e<r.length;++e)i.coordinates[r[e].tag]=a.parseFixed();return i}function Ji(e,t){const r=new N.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(let n=0;n<e.axes.length;n++)r.fields=r.fields.concat(Xi(n,e.axes[n],t));for(let n=0;n<e.instances.length;n++)r.fields=r.fields.concat(Yi(n,e.instances[n],e.axes,t));return r}function Qi(e,t,r){const n=new Q.Parser(e,t);const i=n.parseULong();d.argument(65536===i,"Unsupported fvar table version.");const a=n.parseOffset16();n.skip("uShort",1);const o=n.parseUShort();const s=n.parseUShort();const l=n.parseUShort();const c=n.parseUShort();const u=[];for(let n=0;n<o;n++)u.push(qi(e,t+a+n*s,r));const h=[];const f=t+a+o*s;for(let t=0;t<l;t++)h.push(Zi(e,f+t*c,u,r));return{axes:u,instances:h}}var Ki={make:Ji,parse:Qi};const $i=new Array(10);$i[1]=function e(){const t=this.offset+this.relativeOffset;const r=this.parseUShort();if(1===r)return{posFormat:1,coverage:this.parsePointer(Z.coverage),value:this.parseValueRecord()};if(2===r)return{posFormat:2,coverage:this.parsePointer(Z.coverage),values:this.parseValueRecordList()};d.assert(false,"0x"+t.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};$i[2]=function e(){const t=this.offset+this.relativeOffset;const r=this.parseUShort();d.assert(1===r||2===r,"0x"+t.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");const n=this.parsePointer(Z.coverage);const i=this.parseUShort();const a=this.parseUShort();if(1===r)return{posFormat:r,coverage:n,valueFormat1:i,valueFormat2:a,pairSets:this.parseList(Z.pointer(Z.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(a)}})))};if(2===r){const e=this.parsePointer(Z.classDef);const t=this.parsePointer(Z.classDef);const o=this.parseUShort();const s=this.parseUShort();return{posFormat:r,coverage:n,valueFormat1:i,valueFormat2:a,classDef1:e,classDef2:t,class1Count:o,class2Count:s,classRecords:this.parseList(o,Z.list(s,function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(a)}}))}}};$i[3]=function e(){return{error:"GPOS Lookup 3 not supported"}};$i[4]=function e(){return{error:"GPOS Lookup 4 not supported"}};$i[5]=function e(){return{error:"GPOS Lookup 5 not supported"}};$i[6]=function e(){return{error:"GPOS Lookup 6 not supported"}};$i[7]=function e(){return{error:"GPOS Lookup 7 not supported"}};$i[8]=function e(){return{error:"GPOS Lookup 8 not supported"}};$i[9]=function e(){return{error:"GPOS Lookup 9 not supported"}};function ea(e,t){t=t||0;const r=new Z(e,t);const n=r.parseVersion(1);d.argument(1===n||1.1===n,"Unsupported GPOS table version "+n);return 1===n?{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList($i)}:{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList($i),variations:r.parseFeatureVariationsList()}}const ta=new Array(10);function ra(e){return new N.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new N.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new N.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new N.LookupList(e.lookups,ta)}])}var na={parse:ea,make:ra};function ia(e){const t={};e.skip("uShort");const r=e.parseUShort();d.argument(0===r,"Unsupported kern sub-table version.");e.skip("uShort",2);const n=e.parseUShort();e.skip("uShort",3);for(let r=0;r<n;r+=1){const r=e.parseUShort();const n=e.parseUShort();const i=e.parseShort();t[r+","+n]=i}return t}function aa(e){const t={};e.skip("uShort");const r=e.parseULong();r>1&&console.warn("Only the first kern subtable is supported.");e.skip("uLong");const n=e.parseUShort();const i=255&n;e.skip("uShort");if(0===i){const r=e.parseUShort();e.skip("uShort",3);for(let n=0;n<r;n+=1){const r=e.parseUShort();const n=e.parseUShort();const i=e.parseShort();t[r+","+n]=i}}return t}function oa(e,t){const r=new Q.Parser(e,t);const n=r.parseUShort();if(0===n)return ia(r);if(1===n)return aa(r);throw new Error("Unsupported kern table version ("+n+").")}var sa={parse:oa};function la(e,t,r,n){const i=new Q.Parser(e,t);const a=n?i.parseUShort:i.parseULong;const o=[];for(let e=0;e<r+1;e+=1){let e=a.call(i);n&&(e*=2);o.push(e)}return o}var ca={parse:la};r.d(t,"parse",function(){return ma});r.d(t,"load",function(){return va});r.d(t,"loadSync",function(){return ga});r.d(t,"Font",function(){return ji});r.d(t,"Glyph",function(){return ye});r.d(t,"Path",function(){return h});r.d(t,"BoundingBox",function(){return c});r.d(t,"_parse",function(){return Q});function ua(e,t){const n=r(72);n.readFile(e,function(e,r){if(e)return t(e.message);t(null,Object(yr["d"])(r))})}function ha(e,t){const r=new XMLHttpRequest;r.open("get",e,true);r.responseType="arraybuffer";r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)};r.onerror=function(){t("Font could not be loaded")};r.send()}function fa(e,t){const r=[];let n=12;for(let i=0;i<t;i+=1){const t=Q.getTag(e,n);const i=Q.getULong(e,n+4);const a=Q.getULong(e,n+8);const o=Q.getULong(e,n+12);r.push({tag:t,checksum:i,offset:a,length:o,compression:false});n+=16}return r}function pa(e,t){const r=[];let n=44;for(let i=0;i<t;i+=1){const t=Q.getTag(e,n);const i=Q.getULong(e,n+4);const a=Q.getULong(e,n+8);const o=Q.getULong(e,n+12);let s;s=a<o&&"WOFF";r.push({tag:t,offset:i,compression:s,compressedLength:a,length:o});n+=20}return r}function da(e,t){if("WOFF"===t.compression){const r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2);const n=new Uint8Array(t.length);o()(r,n);if(n.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");const i=new DataView(n.buffer,0);return{data:i,offset:0}}return{data:e,offset:t.offset}}function ma(e){let t;let r;const n=new ji({empty:true});const i=new DataView(e,0);let a;let o=[];const s=Q.getTag(i,0);if(s===String.fromCharCode(0,1,0,0)||"true"===s||"typ1"===s){n.outlinesFormat="truetype";a=Q.getUShort(i,4);o=fa(i,a)}else if("OTTO"===s){n.outlinesFormat="cff";a=Q.getUShort(i,4);o=fa(i,a)}else{if("wOFF"!==s)throw new Error("Unsupported OpenType signature "+s);{const e=Q.getTag(i,4);if(e===String.fromCharCode(0,1,0,0))n.outlinesFormat="truetype";else{if("OTTO"!==e)throw new Error("Unsupported OpenType flavor "+s);n.outlinesFormat="cff"}a=Q.getUShort(i,12);o=pa(i,a)}}let l;let c;let u;let h;let f;let p;let d;let m;let v;let g;let y;for(let e=0;e<a;e+=1){const a=o[e];let s;switch(a.tag){case"cmap":s=da(i,a);n.tables.cmap=ie.parse(s.data,s.offset);n.encoding=new ue(n.tables.cmap);break;case"cvt ":s=da(i,a);y=new Q.Parser(s.data,s.offset);n.tables.cvt=y.parseShortList(a.length/2);break;case"fvar":c=a;break;case"fpgm":s=da(i,a);y=new Q.Parser(s.data,s.offset);n.tables.fpgm=y.parseByteList(a.length);break;case"head":s=da(i,a);n.tables.head=st.parse(s.data,s.offset);n.unitsPerEm=n.tables.head.unitsPerEm;t=n.tables.head.indexToLocFormat;break;case"hhea":s=da(i,a);n.tables.hhea=ut.parse(s.data,s.offset);n.ascender=n.tables.hhea.ascender;n.descender=n.tables.hhea.descender;n.numberOfHMetrics=n.tables.hhea.numberOfHMetrics;break;case"hmtx":p=a;break;case"ltag":s=da(i,a);r=vt.parse(s.data,s.offset);break;case"maxp":s=da(i,a);n.tables.maxp=xt.parse(s.data,s.offset);n.numGlyphs=n.tables.maxp.numGlyphs;break;case"name":v=a;break;case"OS/2":s=da(i,a);n.tables.os2=Gt.parse(s.data,s.offset);break;case"post":s=da(i,a);n.tables.post=Vt.parse(s.data,s.offset);n.glyphNames=new fe(n.tables.post);break;case"prep":s=da(i,a);y=new Q.Parser(s.data,s.offset);n.tables.prep=y.parseByteList(a.length);break;case"glyf":u=a;break;case"loca":m=a;break;case"CFF ":l=a;break;case"kern":d=a;break;case"GPOS":h=a;break;case"GSUB":f=a;break;case"meta":g=a;break}}const x=da(i,v);n.tables.name=Ut.parse(x.data,x.offset,r);n.names=n.tables.name;if(u&&m){const e=0===t;const r=da(i,m);const a=ca.parse(r.data,r.offset,n.numGlyphs,e);const o=da(i,u);n.glyphs=Er.parse(o.data,o.offset,a,n)}else{if(!l)throw new Error("Font doesn't contain TrueType or CFF outlines.");{const e=da(i,l);it.parse(e.data,e.offset,n)}}const b=da(i,p);pt.parse(b.data,b.offset,n.numberOfHMetrics,n.numGlyphs,n.glyphs);pe(n);if(d){const e=da(i,d);n.kerningPairs=sa.parse(e.data,e.offset)}else n.kerningPairs={};if(h){const e=da(i,h);n.tables.gpos=na.parse(e.data,e.offset);n.position.init()}if(f){const e=da(i,f);n.tables.gsub=Zt.parse(e.data,e.offset)}if(c){const e=da(i,c);n.tables.fvar=Ki.parse(e.data,e.offset,n.names)}if(g){const e=da(i,g);n.tables.meta=Kt.parse(e.data,e.offset);n.metas=n.tables.meta}return n}function va(e,t){const r="undefined"===typeof window;const n=r?ua:ha;n(e,function(e,r){if(e)return t(e);let n;try{n=ma(r)}catch(e){return t(e,null)}return t(null,n)})}function ga(e){const t=r(72);const n=t.readFileSync(e);return ma(Object(yr["d"])(n))}},231:function(e,t){String.prototype.codePointAt||function(){"use strict";var e=function(){try{var e={};var t=Object.defineProperty;var r=t(e,e,e)&&t}catch(e){}return r}();var t=function(e){if(null==this)throw TypeError();var t=String(this);var r=t.length;var n=e?Number(e):0;n!=n&&(n=0);if(n<0||n>=r)return;var i=t.charCodeAt(n);var a;if(i>=55296&&i<=56319&&r>n+1){a=t.charCodeAt(n+1);if(a>=56320&&a<=57343)return 1024*(i-55296)+a-56320+65536}return i};e?e(String.prototype,"codePointAt",{value:t,configurable:true,writable:true}):String.prototype.codePointAt=t}()},232:function(e,t){var r=0;var n=-3;function i(){this.table=new Uint16Array(16);this.trans=new Uint16Array(288)}function a(e,t){this.source=e;this.sourceIndex=0;this.tag=0;this.bitcount=0;this.dest=t;this.destLen=0;this.ltree=new i;this.dtree=new i}var o=new i;var s=new i;var l=new Uint8Array(30);var c=new Uint16Array(30);var u=new Uint8Array(30);var h=new Uint16Array(30);var f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);var p=new i;var d=new Uint8Array(320);function m(e,t,r,n){var i,a;for(i=0;i<r;++i)e[i]=0;for(i=0;i<30-r;++i)e[i+r]=i/r|0;for(a=n,i=0;i<30;++i){t[i]=a;a+=1<<e[i]}}function v(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;e.table[7]=24;e.table[8]=152;e.table[9]=112;for(r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;t.table[5]=32;for(r=0;r<32;++r)t.trans[r]=r}var g=new Uint16Array(16);function y(e,t,r,n){var i,a;for(i=0;i<16;++i)e.table[i]=0;for(i=0;i<n;++i)e.table[t[r+i]]++;e.table[0]=0;for(a=0,i=0;i<16;++i){g[i]=a;a+=e.table[i]}for(i=0;i<n;++i)t[r+i]&&(e.trans[g[t[r+i]]++]=i)}function x(e){if(!e.bitcount--){e.tag=e.source[e.sourceIndex++];e.bitcount=7}var t=1&e.tag;e.tag>>>=1;return t}function b(e,t,r){if(!t)return r;while(e.bitcount<24){e.tag|=e.source[e.sourceIndex++]<<e.bitcount;e.bitcount+=8}var n=e.tag&65535>>>16-t;e.tag>>>=t;e.bitcount-=t;return n+r}function _(e,t){while(e.bitcount<24){e.tag|=e.source[e.sourceIndex++]<<e.bitcount;e.bitcount+=8}var r=0,n=0,i=0;var a=e.tag;do{n=2*n+(1&a);a>>>=1;++i;r+=t.table[i];n-=t.table[i]}while(n>=0);e.tag=a;e.bitcount-=i;return t.trans[r+n]}function w(e,t,r){var n,i,a;var o,s,l;n=b(e,5,257);i=b(e,5,1);a=b(e,4,4);for(o=0;o<19;++o)d[o]=0;for(o=0;o<a;++o){var c=b(e,3,0);d[f[o]]=c}y(p,d,0,19);for(s=0;s<n+i;){var u=_(e,p);switch(u){case 16:var h=d[s-1];for(l=b(e,2,3);l;--l)d[s++]=h;break;case 17:for(l=b(e,3,3);l;--l)d[s++]=0;break;case 18:for(l=b(e,7,11);l;--l)d[s++]=0;break;default:d[s++]=u;break}}y(t,d,0,n);y(r,d,n,i)}function S(e,t,n){while(1){var i=_(e,t);if(256===i)return r;if(i<256)e.dest[e.destLen++]=i;else{var a,o,s;var f;i-=257;a=b(e,l[i],c[i]);o=_(e,n);s=e.destLen-b(e,u[o],h[o]);for(f=s;f<s+a;++f)e.dest[e.destLen++]=e.dest[f]}}}function T(e){var t,i;var a;while(e.bitcount>8){e.sourceIndex--;e.bitcount-=8}t=e.source[e.sourceIndex+1];t=256*t+e.source[e.sourceIndex];i=e.source[e.sourceIndex+3];i=256*i+e.source[e.sourceIndex+2];if(t!==(65535&~i))return n;e.sourceIndex+=4;for(a=t;a;--a)e.dest[e.destLen++]=e.source[e.sourceIndex++];e.bitcount=0;return r}function M(e,t){var i=new a(e,t);var l,c,u;do{l=x(i);c=b(i,2,0);switch(c){case 0:u=T(i);break;case 1:u=S(i,o,s);break;case 2:w(i,i.ltree,i.dtree);u=S(i,i.ltree,i.dtree);break;default:u=n}if(u!==r)throw new Error("Data error")}while(!l);if(i.destLen<i.dest.length)return"function"===typeof i.dest.slice?i.dest.slice(0,i.destLen):i.dest.subarray(0,i.destLen);return i.dest}v(o,s);m(l,c,4,3);m(u,h,2,1);l[28]=0;c[28]=258;e.exports=M},233:function(e,t,r){"use strict";(function(e){var n=r(234);var i=r(235);var a=r(236);t.Buffer=c;t.SlowBuffer=x;t.INSPECT_MAX_BYTES=50;c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:o();t.kMaxLength=s();function o(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return false}}function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(s()<t)throw new RangeError("Invalid typed array length");if(c.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=c.prototype}else{null===e&&(e=new c(t));e.length=t}return e}function c(e,t,r){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,r)}c.poolSize=8192;c._augment=function(e){e.__proto__=c.prototype;return e};function u(e,t,r,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer)return v(e,t,r,n);if("string"===typeof t)return d(e,t,r);return g(e,t)}c.from=function(e,t,r){return u(null,e,t,r)};if(c.TYPED_ARRAY_SUPPORT){c.prototype.__proto__=Uint8Array.prototype;c.__proto__=Uint8Array;"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:true})}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t,r,n){h(t);if(t<=0)return l(e,t);if(void 0!==r)return"string"===typeof n?l(e,t).fill(r,n):l(e,t).fill(r);return l(e,t)}c.alloc=function(e,t,r){return f(null,e,t,r)};function p(e,t){h(t);e=l(e,t<0?0:0|y(t));if(!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}c.allocUnsafe=function(e){return p(null,e)};c.allocUnsafeSlow=function(e){return p(null,e)};function d(e,t,r){"string"===typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|b(t,r);e=l(e,n);var i=e.write(t,r);i!==n&&(e=e.slice(0,i));return e}function m(e,t){var r=t.length<0?0:0|y(t.length);e=l(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function v(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);if(c.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=c.prototype}else e=m(e,t);return e}function g(e,t){if(c.isBuffer(t)){var r=0|y(t.length);e=l(e,r);if(0===e.length)return e;t.copy(e,0,0,r);return e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t){if("number"!==typeof t.length||te(t.length))return l(e,0);return m(e,t)}if("Buffer"===t.type&&a(t.data))return m(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function x(e){+e!=e&&(e=0);return c.alloc(+e)}c.isBuffer=function e(t){return!!(null!=t&&t._isBuffer)};c.compare=function e(t,r){if(!c.isBuffer(t)||!c.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;var n=t.length;var i=r.length;for(var a=0,o=Math.min(n,i);a<o;++a)if(t[a]!==r[a]){n=t[a];i=r[a];break}if(n<i)return-1;if(i<n)return 1;return 0};c.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};c.concat=function e(t,r){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===r){r=0;for(n=0;n<t.length;++n)r+=t[n].length}var i=c.allocUnsafe(r);var o=0;for(n=0;n<t.length;++n){var s=t[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o);o+=s.length}return i};function b(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;var n=false;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return J(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(n)return J(e).length;t=(""+t).toLowerCase();n=true}}c.byteLength=b;function _(e,t,r){var n=false;(void 0===t||t<0)&&(t=0);if(t>this.length)return"";(void 0===r||r>this.length)&&(r=this.length);if(r<=0)return"";r>>>=0;t>>>=0;if(r<=t)return"";e||(e="utf8");while(true)switch(e){case"hex":return k(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return U(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return L(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}c.prototype._isBuffer=true;function w(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}c.prototype.swap16=function e(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)w(this,r,r+1);return this};c.prototype.swap32=function e(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4){w(this,r,r+3);w(this,r+1,r+2)}return this};c.prototype.swap64=function e(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8){w(this,r,r+7);w(this,r+1,r+6);w(this,r+2,r+5);w(this,r+3,r+4)}return this};c.prototype.toString=function e(){var t=0|this.length;if(0===t)return"";if(0===arguments.length)return O(this,0,t);return _.apply(this,arguments)};c.prototype.equals=function e(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return 0===c.compare(this,t)};c.prototype.inspect=function e(){var r="";var n=t.INSPECT_MAX_BYTES;if(this.length>0){r=this.toString("hex",0,n).match(/.{2}/g).join(" ");this.length>n&&(r+=" ... ")}return"<Buffer "+r+">"};c.prototype.compare=function e(t,r,n,i,a){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");void 0===r&&(r=0);void 0===n&&(n=t?t.length:0);void 0===i&&(i=0);void 0===a&&(a=this.length);if(r<0||n>t.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&r>=n)return 0;if(i>=a)return-1;if(r>=n)return 1;r>>>=0;n>>>=0;i>>>=0;a>>>=0;if(this===t)return 0;var o=a-i;var s=n-r;var l=Math.min(o,s);var u=this.slice(i,a);var h=t.slice(r,n);for(var f=0;f<l;++f)if(u[f]!==h[f]){o=u[f];s=h[f];break}if(o<s)return-1;if(s<o)return 1;return 0};function S(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r){n=r;r=0}else r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648);r=+r;isNaN(r)&&(r=i?0:e.length-1);r<0&&(r=e.length+r);if(r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}"string"===typeof t&&(t=c.from(t,n));if(c.isBuffer(t)){if(0===t.length)return-1;return T(e,t,r,n,i)}if("number"===typeof t){t&=255;if(c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf)return i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r);return T(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function T(e,t,r,n,i){var a=1;var o=e.length;var s=t.length;if(void 0!==n){n=String(n).toLowerCase();if("ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n){if(e.length<2||t.length<2)return-1;a=2;o/=2;s/=2;r/=2}}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var c;if(i){var u=-1;for(c=r;c<o;c++)if(l(e,c)===l(t,-1===u?0:c-u)){-1===u&&(u=c);if(c-u+1===s)return u*a}else{-1!==u&&(c-=c-u);u=-1}}else{r+s>o&&(r=o-s);for(c=r;c>=0;c--){var h=true;for(var f=0;f<s;f++)if(l(e,c+f)!==l(t,f)){h=false;break}if(h)return c}}return-1}c.prototype.includes=function e(t,r,n){return-1!==this.indexOf(t,r,n)};c.prototype.indexOf=function e(t,r,n){return S(this,t,r,n,true)};c.prototype.lastIndexOf=function e(t,r,n){return S(this,t,r,n,false)};function M(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(n){n=Number(n);n>i&&(n=i)}else n=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function E(e,t,r,n){return ee(J(t,e.length-r),e,r,n)}function A(e,t,r,n){return ee(Q(t),e,r,n)}function R(e,t,r,n){return A(e,t,r,n)}function P(e,t,r,n){return ee($(t),e,r,n)}function C(e,t,r,n){return ee(K(t,e.length-r),e,r,n)}c.prototype.write=function e(t,r,n,i){if(void 0===r){i="utf8";n=this.length;r=0}else if(void 0===n&&"string"===typeof r){i=r;n=this.length;r=0}else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0;if(isFinite(n)){n|=0;void 0===i&&(i="utf8")}else{i=n;n=void 0}}var a=this.length-r;(void 0===n||n>a)&&(n=a);if(t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");var o=false;for(;;)switch(i){case"hex":return M(this,t,r,n);case"utf8":case"utf-8":return E(this,t,r,n);case"ascii":return A(this,t,r,n);case"latin1":case"binary":return R(this,t,r,n);case"base64":return P(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();o=true}};c.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var a=e[i];var o=null;var s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var l,c,u,h;switch(s){case 1:a<128&&(o=a);break;case 2:l=e[i+1];if(128===(192&l)){h=(31&a)<<6|63&l;h>127&&(o=h)}break;case 3:l=e[i+1];c=e[i+2];if(128===(192&l)&&128===(192&c)){h=(15&a)<<12|(63&l)<<6|63&c;h>2047&&(h<55296||h>57343)&&(o=h)}break;case 4:l=e[i+1];c=e[i+2];u=e[i+3];if(128===(192&l)&&128===(192&c)&&128===(192&u)){h=(15&a)<<18|(63&l)<<12|(63&c)<<6|63&u;h>65535&&h<1114112&&(o=h)}}}if(null===o){o=65533;s=1}else if(o>65535){o-=65536;n.push(o>>>10&1023|55296);o=56320|1023&o}n.push(o);i+=s}return B(n)}var I=4096;function B(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var r="";var n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}function U(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function D(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function k(e,t,r){var n=e.length;(!t||t<0)&&(t=0);(!r||r<0||r>n)&&(r=n);var i="";for(var a=t;a<r;++a)i+=Z(e[a]);return i}function N(e,t,r){var n=e.slice(t,r);var i="";for(var a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}c.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=void 0===r?n:~~r;if(t<0){t+=n;t<0&&(t=0)}else t>n&&(t=n);if(r<0){r+=n;r<0&&(r=0)}else r>n&&(r=n);r<t&&(r=t);var i;if(c.TYPED_ARRAY_SUPPORT){i=this.subarray(t,r);i.__proto__=c.prototype}else{var a=r-t;i=new c(a,void 0);for(var o=0;o<a;++o)i[o]=this[o+t]}return i};function F(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function e(t,r,n){t|=0;r|=0;n||F(t,r,this.length);var i=this[t];var a=1;var o=0;while(++o<r&&(a*=256))i+=this[t+o]*a;return i};c.prototype.readUIntBE=function e(t,r,n){t|=0;r|=0;n||F(t,r,this.length);var i=this[t+--r];var a=1;while(r>0&&(a*=256))i+=this[t+--r]*a;return i};c.prototype.readUInt8=function e(t,r){r||F(t,1,this.length);return this[t]};c.prototype.readUInt16LE=function e(t,r){r||F(t,2,this.length);return this[t]|this[t+1]<<8};c.prototype.readUInt16BE=function e(t,r){r||F(t,2,this.length);return this[t]<<8|this[t+1]};c.prototype.readUInt32LE=function e(t,r){r||F(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]};c.prototype.readUInt32BE=function e(t,r){r||F(t,4,this.length);return 16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])};c.prototype.readIntLE=function e(t,r,n){t|=0;r|=0;n||F(t,r,this.length);var i=this[t];var a=1;var o=0;while(++o<r&&(a*=256))i+=this[t+o]*a;a*=128;i>=a&&(i-=Math.pow(2,8*r));return i};c.prototype.readIntBE=function e(t,r,n){t|=0;r|=0;n||F(t,r,this.length);var i=r;var a=1;var o=this[t+--i];while(i>0&&(a*=256))o+=this[t+--i]*a;a*=128;o>=a&&(o-=Math.pow(2,8*r));return o};c.prototype.readInt8=function e(t,r){r||F(t,1,this.length);if(!(128&this[t]))return this[t];return-1*(255-this[t]+1)};c.prototype.readInt16LE=function e(t,r){r||F(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n};c.prototype.readInt16BE=function e(t,r){r||F(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n};c.prototype.readInt32LE=function e(t,r){r||F(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};c.prototype.readInt32BE=function e(t,r){r||F(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};c.prototype.readFloatLE=function e(t,r){r||F(t,4,this.length);return i.read(this,t,true,23,4)};c.prototype.readFloatBE=function e(t,r){r||F(t,4,this.length);return i.read(this,t,false,23,4)};c.prototype.readDoubleLE=function e(t,r){r||F(t,8,this.length);return i.read(this,t,true,52,8)};c.prototype.readDoubleBE=function e(t,r){r||F(t,8,this.length);return i.read(this,t,false,52,8)};function G(e,t,r,n,i,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r|=0;n|=0;if(!i){var a=Math.pow(2,8*n)-1;G(this,t,r,n,a,0)}var o=1;var s=0;this[r]=255&t;while(++s<n&&(o*=256))this[r+s]=t/o&255;return r+n};c.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r|=0;n|=0;if(!i){var a=Math.pow(2,8*n)-1;G(this,t,r,n,a,0)}var o=n-1;var s=1;this[r+o]=255&t;while(--o>=0&&(s*=256))this[r+o]=t/s&255;return r+n};c.prototype.writeUInt8=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,1,255,0);c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t));this[r]=255&t;return r+1};function z(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}c.prototype.writeUInt16LE=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,2,65535,0);if(c.TYPED_ARRAY_SUPPORT){this[r]=255&t;this[r+1]=t>>>8}else z(this,t,r,true);return r+2};c.prototype.writeUInt16BE=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,2,65535,0);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=255&t}else z(this,t,r,false);return r+2};function H(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}c.prototype.writeUInt32LE=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,4,4294967295,0);if(c.TYPED_ARRAY_SUPPORT){this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=255&t}else H(this,t,r,true);return r+4};c.prototype.writeUInt32BE=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,4,4294967295,0);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=255&t}else H(this,t,r,false);return r+4};c.prototype.writeIntLE=function e(t,r,n,i){t=+t;r|=0;if(!i){var a=Math.pow(2,8*n-1);G(this,t,r,n,a-1,-a)}var o=0;var s=1;var l=0;this[r]=255&t;while(++o<n&&(s*=256)){t<0&&0===l&&0!==this[r+o-1]&&(l=1);this[r+o]=(t/s>>0)-l&255}return r+n};c.prototype.writeIntBE=function e(t,r,n,i){t=+t;r|=0;if(!i){var a=Math.pow(2,8*n-1);G(this,t,r,n,a-1,-a)}var o=n-1;var s=1;var l=0;this[r+o]=255&t;while(--o>=0&&(s*=256)){t<0&&0===l&&0!==this[r+o+1]&&(l=1);this[r+o]=(t/s>>0)-l&255}return r+n};c.prototype.writeInt8=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,1,127,-128);c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t));t<0&&(t=255+t+1);this[r]=255&t;return r+1};c.prototype.writeInt16LE=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,2,32767,-32768);if(c.TYPED_ARRAY_SUPPORT){this[r]=255&t;this[r+1]=t>>>8}else z(this,t,r,true);return r+2};c.prototype.writeInt16BE=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,2,32767,-32768);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=255&t}else z(this,t,r,false);return r+2};c.prototype.writeInt32LE=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,4,2147483647,-2147483648);if(c.TYPED_ARRAY_SUPPORT){this[r]=255&t;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24}else H(this,t,r,true);return r+4};c.prototype.writeInt32BE=function e(t,r,n){t=+t;r|=0;n||G(this,t,r,4,2147483647,-2147483648);t<0&&(t=4294967295+t+1);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=255&t}else H(this,t,r,false);return r+4};function V(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,n,a){a||V(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38);i.write(e,t,r,n,23,4);return r+4}c.prototype.writeFloatLE=function e(t,r,n){return j(this,t,r,true,n)};c.prototype.writeFloatBE=function e(t,r,n){return j(this,t,r,false,n)};function W(e,t,r,n,a){a||V(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308);i.write(e,t,r,n,52,8);return r+8}c.prototype.writeDoubleLE=function e(t,r,n){return W(this,t,r,true,n)};c.prototype.writeDoubleBE=function e(t,r,n){return W(this,t,r,false,n)};c.prototype.copy=function e(t,r,n,i){n||(n=0);i||0===i||(i=this.length);r>=t.length&&(r=t.length);r||(r=0);i>0&&i<n&&(i=n);if(i===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);t.length-r<i-n&&(i=t.length-r+n);var a=i-n;var o;if(this===t&&n<r&&r<i)for(o=a-1;o>=0;--o)t[o+r]=this[o+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)t[o+r]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),r);return a};c.prototype.fill=function e(t,r,n,i){if("string"===typeof t){if("string"===typeof r){i=r;r=0;n=this.length}else if("string"===typeof n){i=n;n=this.length}if(1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof t&&(t&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0;n=void 0===n?this.length:n>>>0;t||(t=0);var o;if("number"===typeof t)for(o=r;o<n;++o)this[o]=t;else{var s=c.isBuffer(t)?t:J(new c(t,i).toString());var l=s.length;for(o=0;o<n-r;++o)this[o+r]=s[o%l]}return this};var X=/[^+\/0-9A-Za-z-_]/g;function q(e){e=Y(e).replace(X,"");if(e.length<2)return"";while(e.length%4!==0)e+="=";return e}function Y(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function Z(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function J(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var a=[];for(var o=0;o<n;++o){r=e.charCodeAt(o);if(r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189);i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);i=null;if(r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Q(e){var t=[];for(var r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function K(e,t){var r,n,i;var a=[];for(var o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o);n=r>>8;i=r%256;a.push(i);a.push(n)}return a}function $(e){return n.toByteArray(q(e))}function ee(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function te(e){return e!==e}}).call(t,r(34))},234:function(e,t,r){"use strict";t.byteLength=u;t.toByteArray=f;t.fromByteArray=m;var n=[];var i=[];var a="undefined"!==typeof Uint8Array?Uint8Array:Array;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var s=0,l=o.length;s<l;++s){n[s]=o[s];i[o.charCodeAt(s)]=s}i["-".charCodeAt(0)]=62;i["_".charCodeAt(0)]=63;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function u(e){var t=c(e);var r=t[0];var n=t[1];return 3*(r+n)/4-n}function h(e,t,r){return 3*(t+r)/4-r}function f(e){var t;var r=c(e);var n=r[0];var o=r[1];var s=new a(h(e,n,o));var l=0;var u=o>0?n-4:n;for(var f=0;f<u;f+=4){t=i[e.charCodeAt(f)]<<18|i[e.charCodeAt(f+1)]<<12|i[e.charCodeAt(f+2)]<<6|i[e.charCodeAt(f+3)];s[l++]=t>>16&255;s[l++]=t>>8&255;s[l++]=255&t}if(2===o){t=i[e.charCodeAt(f)]<<2|i[e.charCodeAt(f+1)]>>4;s[l++]=255&t}if(1===o){t=i[e.charCodeAt(f)]<<10|i[e.charCodeAt(f+1)]<<4|i[e.charCodeAt(f+2)]>>2;s[l++]=t>>8&255;s[l++]=255&t}return s}function p(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function d(e,t,r){var n;var i=[];for(var a=t;a<r;a+=3){n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]);i.push(p(n))}return i.join("")}function m(e){var t;var r=e.length;var i=r%3;var a=[];var o=16383;for(var s=0,l=r-i;s<l;s+=o)a.push(d(e,s,s+o>l?l:s+o));if(1===i){t=e[r-1];a.push(n[t>>2]+n[t<<4&63]+"==")}else if(2===i){t=(e[r-2]<<8)+e[r-1];a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")}return a.join("")}},235:function(e,t){t.read=function(e,t,r,n,i){var a,o;var s=8*i-n-1;var l=(1<<s)-1;var c=l>>1;var u=-7;var h=r?i-1:0;var f=r?-1:1;var p=e[t+h];h+=f;a=p&(1<<-u)-1;p>>=-u;u+=s;for(;u>0;a=256*a+e[t+h],h+=f,u-=8);o=a&(1<<-u)-1;a>>=-u;u+=n;for(;u>0;o=256*o+e[t+h],h+=f,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:Infinity*(p?-1:1);o+=Math.pow(2,n);a-=c}return(p?-1:1)*o*Math.pow(2,a-n)};t.write=function(e,t,r,n,i,a){var o,s,l;var c=8*a-i-1;var u=(1<<c)-1;var h=u>>1;var f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0;var p=n?0:a-1;var d=n?1:-1;var m=t<0||0===t&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||Infinity===t){s=isNaN(t)?1:0;o=u}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-o))<1){o--;l*=2}t+=o+h>=1?f/l:f*Math.pow(2,1-h);if(t*l>=2){o++;l/=2}if(o+h>=u){s=0;o=u}else if(o+h>=1){s=(t*l-1)*Math.pow(2,i);o+=h}else{s=t*Math.pow(2,h-1)*Math.pow(2,i);o=0}}for(;i>=8;e[r+p]=255&s,p+=d,s/=256,i-=8);o=o<<i|s;c+=i;for(;c>0;e[r+p]=255&o,p+=d,o/=256,c-=8);e[r+p-d]|=128*m}},236:function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},237:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(109);var a=r(110);var o=r(238);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=200;var c=l/2-15;var u=l/2-5;var h=350;var f=.35*Math.PI;var p=.3;var d=1.5;var m={width:100,height:h};var v={width:.5*m.width,height:.5*m.height};var g=function(){function e(){var t=this;s(this,e);this.textColliders=[];this.composites=[];this.friction=.1;this.restitution=0;this.updateGravity=function(e){t.world.gravity.x=e.x;t.world.gravity.y=e.y;t.world.gravity.scale=e.scale};this.resetGravity=function(){t.world.gravity.x=0;t.world.gravity.y=1;t.world.gravity.scale=.001};this.updateFriction=function(e){t.friction=e;t.textBodies.forEach(function(t){t.friction=e})};this.updateRestitution=function(e){t.restitution=e;t.textBodies.forEach(function(t){t.restitution=e})};this.getWorldBounds=function(){return m};this.updateTextSize=function(e){h=e/window.innerHeight/72;h=1/h;h/=2;h=h};this.clearBodies=function(){for(var e=0,r=t.composites.length;e<r;e++)i.World.remove(t.world,t.composites[e]);t.textColliders.forEach(function(e){i.World.remove(t.world,e)});t.composites.length=0;t.textBodies.length=0;t.textColliders.length=0};this.openTop=function(){t.topBorder.collisionFilter.mask=a.PhysicsLayers.noCollision};this.closeTop=function(){t.topBorder.collisionFilter.mask=a.PhysicsLayers.default};this.openBottomBorder=function(){t.bottomBorder.collisionFilter.mask=a.PhysicsLayers.noCollision};this.closeBottomBorder=function(){t.bottomBorder.collisionFilter.mask=a.PhysicsLayers.default};this.openBottom=function(){t.addBottomColliders();t.bottomBodies.forEach(function(e){e.collisionFilter.mask=a.PhysicsLayers.noCollision})};this.closeBottom=function(){t.bottomBodies.forEach(function(e){e.collisionFilter.mask=a.PhysicsLayers.default})};this.addBottomColliders=function(){var e=m.width*v.height;var r=Math.ceil(e/12e4);t.textBodies.forEach(function(e,n){var s=function e(r,s){var l=i.Bodies.circle((0,o.randomRange)(-.8*v.width,.8*v.width),(0,o.randomRange)(h*p,.8*v.height),10,{isStatic:true});l.collisionFilter.mask=a.TextLayers[n];t.textColliders.push(l);i.World.add(t.world,l);window.setTimeout(function(){t.textColliders.splice(t.textColliders.findIndex(function(e){return e.label===l.label}),1);i.World.remove(t.world,l)},1e3+3e3*Math.random())};for(var l=0,c=r;l<c;l++)s(l,c)})}}n(e,[{key:"setup",value:function e(t){this.engine=i.Engine.create();this.world=this.engine.world;this.topBorder=i.Bodies.rectangle(0,-h-c,1e4,l,{isStatic:true});this.leftBorder=i.Bodies.rectangle(-h-u,0,l,1e4,{isStatic:true});this.rightBorder=i.Bodies.rectangle(h+u,0,l,1e4,{isStatic:true});this.bottomBorder=i.Bodies.rectangle(0,h+c,1e4,l,{isStatic:true});this.funnelLeft=i.Bodies.rectangle(-h,-h,1e4,l,{isStatic:true});i.Body.setAngle(this.funnelLeft,f);this.funnelBottom=i.Bodies.rectangle(0,h*p,1e4,l,{isStatic:true});this.funnelRight=i.Bodies.rectangle(h,-h,1e4,l,{isStatic:true});i.Body.setAngle(this.funnelRight,-f);this.onResize(t);i.World.add(this.world,[this.topBorder,this.leftBorder,this.rightBorder,this.bottomBorder,this.funnelLeft,this.funnelBottom,this.funnelRight]);this.bottomBodies=[this.funnelLeft,this.funnelBottom,this.funnelRight];this.textBodies=[];false}},{key:"onResize",value:function e(t){m.height=2*h;m.width=Math.round(h*t*2);v.width=.5*m.width;i.Body.setPosition(this.topBorder,{x:0,y:-h-c});i.Body.setPosition(this.leftBorder,{x:h*-t-u,y:0});i.Body.setPosition(this.rightBorder,{x:h*t+u,y:0});i.Body.setPosition(this.bottomBorder,{x:0,y:h+c});i.Body.setPosition(this.funnelLeft,{x:h*-t,y:-h});i.Body.setPosition(this.funnelRight,{x:h*t,y:-h})}},{key:"setFromSVG",value:function e(t,r,n,s){var l=this;var c=i.Composite.create();var u=t.getAttribute("boxsize").split(" ").map(function(e){return parseInt(e,10)});var h=i.Bodies.rectangle(m.width*(n-.5),m.height*(s-.5),u[2],u[3],{});h.collisionFilter.mask=a.TextLayers[r];var f=0;var p=function e(t,n){var s=i.Bodies.circle((0,o.randomRange)(-.8*v.width,.8*v.width),(0,o.randomRange)(-.2*v.height,-.9*v.height),10,{isStatic:true});s.collisionFilter.mask=a.TextLayers[r];l.textColliders.push(s);i.World.add(l.world,s);window.setTimeout(function(){l.textColliders.splice(l.textColliders.findIndex(function(e){return e.label===s.label}),1);i.World.remove(l.world,s)},1e3+2e3*Math.random())};for(var d=0,g=f;d<g;d++)p(d,g);t.childNodes[0].childNodes[0].setAttribute("transform","translate("+-.5*u[2]+" "+-.5*u[3]+")");i.Body.setAngle(h,Math.random()-.5);h.friction=this.friction;h.restitution=this.restitution;this.textBodies.push(h);i.Composite.add(c,h);i.Body.setPosition(h,{x:.4*(Math.random()-.5),y:-600-.4*(Math.random()-.5)});i.World.add(this.world,c);this.composites.push(c);this.enableColliders(false)}},{key:"openBottomBodies",value:function e(){this.bottomBodies.forEach(function(e){e.collisionFilter.mask=a.PhysicsLayers.noCollision})}},{key:"enableFunnel",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t){this.funnelLeft.collisionFilter.mask=a.PhysicsLayers.default;this.funnelRight.collisionFilter.mask=a.PhysicsLayers.default;this.funnelBottom.collisionFilter.mask=a.PhysicsLayers.default}else{this.funnelLeft.collisionFilter.mask=a.PhysicsLayers.noCollision;this.funnelRight.collisionFilter.mask=a.PhysicsLayers.noCollision;this.funnelBottom.collisionFilter.mask=a.PhysicsLayers.noCollision}}},{key:"enableColliders",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.textColliders.forEach(function(e){e.collisionFilter.mask=t?a.PhysicsLayers.default:a.PhysicsLayers.noCollision})}},{key:"update",value:function e(t){i.Engine.update(this.engine);for(var r=0,n=this.textBodies.length;r<n;r++)t[r].childNodes[0].setAttribute("transform","translate("+this.textBodies[r].position.x+" "+this.textBodies[r].position.y+") rotate("+57.2958*this.textBodies[r].angle+")")}}]);return e}();t.default=g},238:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.lerp=n;t.inverseLerpUnclamped=i;t.inverseLerpClamped=a;t.clamp=o;t.randomRange=s;function n(e,t,r){return e+(t-e)*r}function i(e,t,r){return(r-e)/(t-e)}function a(e,t,r){return o(0,1,(r-e)/(t-e))}function o(e,t,r){if(r<e)return e;if(r>t)return t;return r}function s(e,t){return e+(t-e)*Math.random()}},239:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(14);var a=l(i);var o=r(2);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){h(t,e);function t(){c(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.show=function(){e.containerRef.style.display="inline"};e.hide=function(){e.containerRef.style.display="none"};return e}n(t,[{key:"render",value:function e(){var t=this;return s.default.createElement("div",{ref:function e(r){t.containerRef=r},className:"jsx-177109661"},s.default.createElement("img",{src:"./static/vdw_logo.svg",className:"jsx-177109661"}),s.default.createElement(a.default,{styleId:"177109661",css:["div.jsx-177109661{position:absolute;left:3%;top:3%;width:10%;}","img.jsx-177109661{width:100%;height:auto;}"]}))}}]);return t}(o.Component);t.default=f},240:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(14);var a=l(i);var o=r(2);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){h(t,e);function t(){c(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.show=function(){e.containerRef.style.display="flex"};e.hide=function(){e.containerRef.style.display="none"};return e}n(t,[{key:"render",value:function e(){var t=this;return s.default.createElement("div",{ref:function e(r){t.containerRef=r},className:"jsx-2192428709 container"},s.default.createElement("div",{style:{flexGrow:this.props.dividerScale},className:"jsx-2192428709"}),s.default.createElement("div",{className:"jsx-2192428709"},s.default.createElement("div",{className:"jsx-2192428709"}),s.default.createElement("div",{style:{flexGrow:this.props.dividerScale},className:"jsx-2192428709"})),s.default.createElement(a.default,{styleId:"2192428709",css:[".container.jsx-2192428709{position:absolute;top:0;left:0;right:0;bottom:0;display:none;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;pointer-events:none;}",".container.jsx-2192428709 div.jsx-2192428709{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border-color:black;border-style:solid;border-width:0;-webkit-transition:flex-grow 0.8s ease;transition:flex-grow 0.8s ease;}",".container.jsx-2192428709>div.jsx-2192428709{border-right-width:2px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}",".container.jsx-2192428709>div.jsx-2192428709:last-child{border:0;}",".container.jsx-2192428709>div.jsx-2192428709:last-child>div.jsx-2192428709:first-child{border:0;}",".container.jsx-2192428709>div.jsx-2192428709:last-child>div.jsx-2192428709:last-child{border-top-width:2px;}"]}))}}]);return t}(o.Component);t.default=f},241:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(14);var a=l(i);var o=r(2);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){h(t,e);function t(){c(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.show=function(){e.containerRef.style.display="inline"};e.hide=function(){e.containerRef.style.display="none"};return e}n(t,[{key:"render",value:function e(){var t=this;return s.default.createElement("div",{ref:function e(r){t.containerRef=r},className:"jsx-3919649413"},s.default.createElement("img",{src:"./static/coming-up.svg",className:"jsx-3919649413"}),s.default.createElement(a.default,{styleId:"3919649413",css:["div.jsx-3919649413{position:absolute;right:3%;top:3%;width:4.3%;}","img.jsx-3919649413{width:100%;height:auto;}"]}))}}]);return t}(o.Component);t.default=f},43:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"WebGLRenderTargetCube",function(){return Wt});r.d(t,"WebGLRenderTarget",function(){return jt});r.d(t,"WebGLRenderer",function(){return Po});r.d(t,"ShaderLib",function(){return li});r.d(t,"UniformsLib",function(){return si});r.d(t,"UniformsUtils",function(){return ii});r.d(t,"ShaderChunk",function(){return ni});r.d(t,"FogExp2",function(){return Co});r.d(t,"Fog",function(){return Lo});r.d(t,"Scene",function(){return Oo});r.d(t,"Sprite",function(){return Bo});r.d(t,"LOD",function(){return Uo});r.d(t,"SkinnedMesh",function(){return No});r.d(t,"Skeleton",function(){return Do});r.d(t,"Bone",function(){return ko});r.d(t,"Mesh",function(){return ji});r.d(t,"LineSegments",function(){return zo});r.d(t,"LineLoop",function(){return Ho});r.d(t,"Line",function(){return Go});r.d(t,"Points",function(){return jo});r.d(t,"Group",function(){return Wo});r.d(t,"VideoTexture",function(){return Xo});r.d(t,"DataTexture",function(){return Xt});r.d(t,"CompressedTexture",function(){return qo});r.d(t,"CubeTexture",function(){return ra});r.d(t,"CanvasTexture",function(){return _o});r.d(t,"DepthTexture",function(){return Yo});r.d(t,"Texture",function(){return Ht});r.d(t,"CompressedTextureLoader",function(){return Pl});r.d(t,"DataTextureLoader",function(){return Cl});r.d(t,"CubeTextureLoader",function(){return Ol});r.d(t,"TextureLoader",function(){return Il});r.d(t,"ObjectLoader",function(){return Gc});r.d(t,"MaterialLoader",function(){return Bc});r.d(t,"BufferGeometryLoader",function(){return Uc});r.d(t,"DefaultLoadingManager",function(){return El});r.d(t,"LoadingManager",function(){return Ml});r.d(t,"JSONLoader",function(){return Fc});r.d(t,"ImageLoader",function(){return Ll});r.d(t,"ImageBitmapLoader",function(){return jc});r.d(t,"FontLoader",function(){return Zc});r.d(t,"FileLoader",function(){return Rl});r.d(t,"Loader",function(){return kc});r.d(t,"LoaderUtils",function(){return Nc});r.d(t,"Cache",function(){return Tl});r.d(t,"AudioLoader",function(){return Kc});r.d(t,"SpotLightShadow",function(){return pc});r.d(t,"SpotLight",function(){return dc});r.d(t,"PointLight",function(){return mc});r.d(t,"RectAreaLight",function(){return xc});r.d(t,"HemisphereLight",function(){return hc});r.d(t,"DirectionalLightShadow",function(){return vc});r.d(t,"DirectionalLight",function(){return gc});r.d(t,"AmbientLight",function(){return yc});r.d(t,"LightShadow",function(){return fc});r.d(t,"Light",function(){return uc});r.d(t,"StereoCamera",function(){return $c});r.d(t,"PerspectiveCamera",function(){return Eo});r.d(t,"OrthographicCamera",function(){return mi});r.d(t,"CubeCamera",function(){return eu});r.d(t,"ArrayCamera",function(){return Ao});r.d(t,"Camera",function(){return di});r.d(t,"AudioListener",function(){return tu});r.d(t,"PositionalAudio",function(){return nu});r.d(t,"AudioContext",function(){return Qc});r.d(t,"AudioAnalyser",function(){return iu});r.d(t,"Audio",function(){return ru});r.d(t,"VectorKeyframeTrack",function(){return Oc});r.d(t,"StringKeyframeTrack",function(){return bc});r.d(t,"QuaternionKeyframeTrack",function(){return Tc});r.d(t,"NumberKeyframeTrack",function(){return Ec});r.d(t,"ColorKeyframeTrack",function(){return Mc});r.d(t,"BooleanKeyframeTrack",function(){return _c});r.d(t,"PropertyMixer",function(){return au});r.d(t,"PropertyBinding",function(){return lu});r.d(t,"KeyframeTrack",function(){return Lc});r.d(t,"AnimationUtils",function(){return Cc});r.d(t,"AnimationObjectGroup",function(){return cu});r.d(t,"AnimationMixer",function(){return hu});r.d(t,"AnimationClip",function(){return Ic});r.d(t,"Uniform",function(){return fu});r.d(t,"InstancedBufferGeometry",function(){return pu});r.d(t,"BufferGeometry",function(){return Oi});r.d(t,"Geometry",function(){return yi});r.d(t,"InterleavedBufferAttribute",function(){return du});r.d(t,"InstancedInterleavedBuffer",function(){return vu});r.d(t,"InterleavedBuffer",function(){return mu});r.d(t,"InstancedBufferAttribute",function(){return gu});r.d(t,"Face3",function(){return vi});r.d(t,"Object3D",function(){return pi});r.d(t,"Raycaster",function(){return yu});r.d(t,"Layers",function(){return hi});r.d(t,"EventDispatcher",function(){return n});r.d(t,"Clock",function(){return _u});r.d(t,"QuaternionLinearInterpolant",function(){return Sc});r.d(t,"LinearInterpolant",function(){return Rc});r.d(t,"DiscreteInterpolant",function(){return Pc});r.d(t,"CubicInterpolant",function(){return Ac});r.d(t,"Interpolant",function(){return wc});r.d(t,"Triangle",function(){return Vi});r.d(t,"Math",function(){return Ut});r.d(t,"Spherical",function(){return wu});r.d(t,"Cylindrical",function(){return Su});r.d(t,"Plane",function(){return Zt});r.d(t,"Frustum",function(){return Jt});r.d(t,"Sphere",function(){return Yt});r.d(t,"Ray",function(){return zi});r.d(t,"Matrix4",function(){return kt});r.d(t,"Matrix3",function(){return Gt});r.d(t,"Box3",function(){return qt});r.d(t,"Box2",function(){return Tu});r.d(t,"Line3",function(){return Hi});r.d(t,"Euler",function(){return ui});r.d(t,"Vector4",function(){return Vt});r.d(t,"Vector3",function(){return Ft});r.d(t,"Vector2",function(){return Dt});r.d(t,"Quaternion",function(){return Nt});r.d(t,"Color",function(){return oi});r.d(t,"ImmediateRenderObject",function(){return Mu});r.d(t,"VertexNormalsHelper",function(){return Eu});r.d(t,"SpotLightHelper",function(){return Au});r.d(t,"SkeletonHelper",function(){return Pu});r.d(t,"PointLightHelper",function(){return Cu});r.d(t,"RectAreaLightHelper",function(){return Lu});r.d(t,"HemisphereLightHelper",function(){return Ou});r.d(t,"GridHelper",function(){return Iu});r.d(t,"PolarGridHelper",function(){return Bu});r.d(t,"FaceNormalsHelper",function(){return Uu});r.d(t,"DirectionalLightHelper",function(){return Du});r.d(t,"CameraHelper",function(){return ku});r.d(t,"BoxHelper",function(){return Nu});r.d(t,"Box3Helper",function(){return Fu});r.d(t,"PlaneHelper",function(){return Gu});r.d(t,"ArrowHelper",function(){return Vu});r.d(t,"AxesHelper",function(){return ju});r.d(t,"Shape",function(){return cc});r.d(t,"Path",function(){return lc});r.d(t,"ShapePath",function(){return Wc});r.d(t,"Font",function(){return Xc});r.d(t,"CurvePath",function(){return sc});r.d(t,"Curve",function(){return Bl});r.d(t,"ShapeUtils",function(){return Vs});r.d(t,"WebGLUtils",function(){return Mo});r.d(t,"WireframeGeometry",function(){return Zo});r.d(t,"ParametricGeometry",function(){return Jo});r.d(t,"ParametricBufferGeometry",function(){return Qo});r.d(t,"TetrahedronGeometry",function(){return es});r.d(t,"TetrahedronBufferGeometry",function(){return ts});r.d(t,"OctahedronGeometry",function(){return rs});r.d(t,"OctahedronBufferGeometry",function(){return ns});r.d(t,"IcosahedronGeometry",function(){return is});r.d(t,"IcosahedronBufferGeometry",function(){return as});r.d(t,"DodecahedronGeometry",function(){return os});r.d(t,"DodecahedronBufferGeometry",function(){return ss});r.d(t,"PolyhedronGeometry",function(){return Ko});r.d(t,"PolyhedronBufferGeometry",function(){return $o});r.d(t,"TubeGeometry",function(){return ls});r.d(t,"TubeBufferGeometry",function(){return cs});r.d(t,"TorusKnotGeometry",function(){return us});r.d(t,"TorusKnotBufferGeometry",function(){return hs});r.d(t,"TorusGeometry",function(){return fs});r.d(t,"TorusBufferGeometry",function(){return ps});r.d(t,"TextGeometry",function(){return Zs});r.d(t,"TextBufferGeometry",function(){return Js});r.d(t,"SphereGeometry",function(){return Qs});r.d(t,"SphereBufferGeometry",function(){return Ks});r.d(t,"RingGeometry",function(){return $s});r.d(t,"RingBufferGeometry",function(){return el});r.d(t,"PlaneGeometry",function(){return Ui});r.d(t,"PlaneBufferGeometry",function(){return Di});r.d(t,"LatheGeometry",function(){return tl});r.d(t,"LatheBufferGeometry",function(){return rl});r.d(t,"ShapeGeometry",function(){return nl});r.d(t,"ShapeBufferGeometry",function(){return il});r.d(t,"ExtrudeGeometry",function(){return Xs});r.d(t,"ExtrudeBufferGeometry",function(){return qs});r.d(t,"EdgesGeometry",function(){return ol});r.d(t,"ConeGeometry",function(){return cl});r.d(t,"ConeBufferGeometry",function(){return ul});r.d(t,"CylinderGeometry",function(){return sl});r.d(t,"CylinderBufferGeometry",function(){return ll});r.d(t,"CircleGeometry",function(){return hl});r.d(t,"CircleBufferGeometry",function(){return fl});r.d(t,"BoxGeometry",function(){return Ii});r.d(t,"BoxBufferGeometry",function(){return Bi});r.d(t,"ShadowMaterial",function(){return dl});r.d(t,"SpriteMaterial",function(){return Io});r.d(t,"RawShaderMaterial",function(){return ml});r.d(t,"ShaderMaterial",function(){return Gi});r.d(t,"PointsMaterial",function(){return Vo});r.d(t,"MeshPhysicalMaterial",function(){return gl});r.d(t,"MeshStandardMaterial",function(){return vl});r.d(t,"MeshPhongMaterial",function(){return yl});r.d(t,"MeshToonMaterial",function(){return xl});r.d(t,"MeshNormalMaterial",function(){return bl});r.d(t,"MeshLambertMaterial",function(){return _l});r.d(t,"MeshDepthMaterial",function(){return yo});r.d(t,"MeshDistanceMaterial",function(){return xo});r.d(t,"MeshBasicMaterial",function(){return Fi});r.d(t,"LineDashedMaterial",function(){return wl});r.d(t,"LineBasicMaterial",function(){return Fo});r.d(t,"Material",function(){return Ni});r.d(t,"Float64BufferAttribute",function(){return Ri});r.d(t,"Float32BufferAttribute",function(){return Ai});r.d(t,"Uint32BufferAttribute",function(){return Ei});r.d(t,"Int32BufferAttribute",function(){return Mi});r.d(t,"Uint16BufferAttribute",function(){return Ti});r.d(t,"Int16BufferAttribute",function(){return Si});r.d(t,"Uint8ClampedBufferAttribute",function(){return wi});r.d(t,"Uint8BufferAttribute",function(){return _i});r.d(t,"Int8BufferAttribute",function(){return bi});r.d(t,"BufferAttribute",function(){return xi});r.d(t,"ArcCurve",function(){return Dl});r.d(t,"CatmullRomCurve3",function(){return Hl});r.d(t,"CubicBezierCurve",function(){return $l});r.d(t,"CubicBezierCurve3",function(){return ec});r.d(t,"EllipseCurve",function(){return Ul});r.d(t,"LineCurve",function(){return tc});r.d(t,"LineCurve3",function(){return rc});r.d(t,"QuadraticBezierCurve",function(){return nc});r.d(t,"QuadraticBezierCurve3",function(){return ic});r.d(t,"SplineCurve",function(){return ac});r.d(t,"REVISION",function(){return i});r.d(t,"MOUSE",function(){return a});r.d(t,"CullFaceNone",function(){return o});r.d(t,"CullFaceBack",function(){return s});r.d(t,"CullFaceFront",function(){return l});r.d(t,"CullFaceFrontBack",function(){return c});r.d(t,"FrontFaceDirectionCW",function(){return u});r.d(t,"FrontFaceDirectionCCW",function(){return h});r.d(t,"BasicShadowMap",function(){return f});r.d(t,"PCFShadowMap",function(){return p});r.d(t,"PCFSoftShadowMap",function(){return d});r.d(t,"FrontSide",function(){return m});r.d(t,"BackSide",function(){return v});r.d(t,"DoubleSide",function(){return g});r.d(t,"FlatShading",function(){return y});r.d(t,"SmoothShading",function(){return x});r.d(t,"NoColors",function(){return b});r.d(t,"FaceColors",function(){return _});r.d(t,"VertexColors",function(){return w});r.d(t,"NoBlending",function(){return S});r.d(t,"NormalBlending",function(){return T});r.d(t,"AdditiveBlending",function(){return M});r.d(t,"SubtractiveBlending",function(){return E});r.d(t,"MultiplyBlending",function(){return A});r.d(t,"CustomBlending",function(){return R});r.d(t,"AddEquation",function(){return P});r.d(t,"SubtractEquation",function(){return C});r.d(t,"ReverseSubtractEquation",function(){return L});r.d(t,"MinEquation",function(){return O});r.d(t,"MaxEquation",function(){return I});r.d(t,"ZeroFactor",function(){return B});r.d(t,"OneFactor",function(){return U});r.d(t,"SrcColorFactor",function(){return D});r.d(t,"OneMinusSrcColorFactor",function(){return k});r.d(t,"SrcAlphaFactor",function(){return N});r.d(t,"OneMinusSrcAlphaFactor",function(){return F});r.d(t,"DstAlphaFactor",function(){return G});r.d(t,"OneMinusDstAlphaFactor",function(){return z});r.d(t,"DstColorFactor",function(){return H});r.d(t,"OneMinusDstColorFactor",function(){return V});r.d(t,"SrcAlphaSaturateFactor",function(){return j});r.d(t,"NeverDepth",function(){return W});r.d(t,"AlwaysDepth",function(){return X});r.d(t,"LessDepth",function(){return q});r.d(t,"LessEqualDepth",function(){return Y});r.d(t,"EqualDepth",function(){return Z});r.d(t,"GreaterEqualDepth",function(){return J});r.d(t,"GreaterDepth",function(){return Q});r.d(t,"NotEqualDepth",function(){return K});r.d(t,"MultiplyOperation",function(){return $});r.d(t,"MixOperation",function(){return ee});r.d(t,"AddOperation",function(){return te});r.d(t,"NoToneMapping",function(){return re});r.d(t,"LinearToneMapping",function(){return ne});r.d(t,"ReinhardToneMapping",function(){return ie});r.d(t,"Uncharted2ToneMapping",function(){return ae});r.d(t,"CineonToneMapping",function(){return oe});r.d(t,"UVMapping",function(){return se});r.d(t,"CubeReflectionMapping",function(){return le});r.d(t,"CubeRefractionMapping",function(){return ce});r.d(t,"EquirectangularReflectionMapping",function(){return ue});r.d(t,"EquirectangularRefractionMapping",function(){return he});r.d(t,"SphericalReflectionMapping",function(){return fe});r.d(t,"CubeUVReflectionMapping",function(){return pe});r.d(t,"CubeUVRefractionMapping",function(){return de});r.d(t,"RepeatWrapping",function(){return me});r.d(t,"ClampToEdgeWrapping",function(){return ve});r.d(t,"MirroredRepeatWrapping",function(){return ge});r.d(t,"NearestFilter",function(){return ye});r.d(t,"NearestMipMapNearestFilter",function(){return xe});r.d(t,"NearestMipMapLinearFilter",function(){return be});r.d(t,"LinearFilter",function(){return _e});r.d(t,"LinearMipMapNearestFilter",function(){return we});r.d(t,"LinearMipMapLinearFilter",function(){return Se});r.d(t,"UnsignedByteType",function(){return Te});r.d(t,"ByteType",function(){return Me});r.d(t,"ShortType",function(){return Ee});r.d(t,"UnsignedShortType",function(){return Ae});r.d(t,"IntType",function(){return Re});r.d(t,"UnsignedIntType",function(){return Pe});r.d(t,"FloatType",function(){return Ce});r.d(t,"HalfFloatType",function(){return Le});r.d(t,"UnsignedShort4444Type",function(){return Oe});r.d(t,"UnsignedShort5551Type",function(){return Ie});r.d(t,"UnsignedShort565Type",function(){return Be});r.d(t,"UnsignedInt248Type",function(){return Ue});r.d(t,"AlphaFormat",function(){return De});r.d(t,"RGBFormat",function(){return ke});r.d(t,"RGBAFormat",function(){return Ne});r.d(t,"LuminanceFormat",function(){return Fe});r.d(t,"LuminanceAlphaFormat",function(){return Ge});r.d(t,"RGBEFormat",function(){return ze});r.d(t,"DepthFormat",function(){return He});r.d(t,"DepthStencilFormat",function(){return Ve});r.d(t,"RGB_S3TC_DXT1_Format",function(){return je});r.d(t,"RGBA_S3TC_DXT1_Format",function(){return We});r.d(t,"RGBA_S3TC_DXT3_Format",function(){return Xe});r.d(t,"RGBA_S3TC_DXT5_Format",function(){return qe});r.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return Ye});r.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return Ze});r.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return Je});r.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return Qe});r.d(t,"RGB_ETC1_Format",function(){return Ke});r.d(t,"RGBA_ASTC_4x4_Format",function(){return $e});r.d(t,"RGBA_ASTC_5x4_Format",function(){return et});r.d(t,"RGBA_ASTC_5x5_Format",function(){return tt});r.d(t,"RGBA_ASTC_6x5_Format",function(){return rt});r.d(t,"RGBA_ASTC_6x6_Format",function(){return nt});r.d(t,"RGBA_ASTC_8x5_Format",function(){return it});r.d(t,"RGBA_ASTC_8x6_Format",function(){return at});r.d(t,"RGBA_ASTC_8x8_Format",function(){return ot});r.d(t,"RGBA_ASTC_10x5_Format",function(){return st});r.d(t,"RGBA_ASTC_10x6_Format",function(){return lt});r.d(t,"RGBA_ASTC_10x8_Format",function(){return ct});r.d(t,"RGBA_ASTC_10x10_Format",function(){return ut});r.d(t,"RGBA_ASTC_12x10_Format",function(){return ht});r.d(t,"RGBA_ASTC_12x12_Format",function(){return ft});r.d(t,"LoopOnce",function(){return pt});r.d(t,"LoopRepeat",function(){return dt});r.d(t,"LoopPingPong",function(){return mt});r.d(t,"InterpolateDiscrete",function(){return vt});r.d(t,"InterpolateLinear",function(){return gt});r.d(t,"InterpolateSmooth",function(){return yt});r.d(t,"ZeroCurvatureEnding",function(){return xt});r.d(t,"ZeroSlopeEnding",function(){return bt});r.d(t,"WrapAroundEnding",function(){return _t});r.d(t,"TrianglesDrawMode",function(){return wt});r.d(t,"TriangleStripDrawMode",function(){return St});r.d(t,"TriangleFanDrawMode",function(){return Tt});r.d(t,"LinearEncoding",function(){return Mt});r.d(t,"sRGBEncoding",function(){return Et});r.d(t,"GammaEncoding",function(){return At});r.d(t,"RGBEEncoding",function(){return Rt});r.d(t,"LogLuvEncoding",function(){return Pt});r.d(t,"RGBM7Encoding",function(){return Ct});r.d(t,"RGBM16Encoding",function(){return Lt});r.d(t,"RGBDEncoding",function(){return Ot});r.d(t,"BasicDepthPacking",function(){return It});r.d(t,"RGBADepthPacking",function(){return Bt});r.d(t,"CubeGeometry",function(){return Ii});r.d(t,"Face4",function(){return Wu});r.d(t,"LineStrip",function(){return Xu});r.d(t,"LinePieces",function(){return qu});r.d(t,"MeshFaceMaterial",function(){return Yu});r.d(t,"MultiMaterial",function(){return Zu});r.d(t,"PointCloud",function(){return Ju});r.d(t,"Particle",function(){return Qu});r.d(t,"ParticleSystem",function(){return Ku});r.d(t,"PointCloudMaterial",function(){return $u});r.d(t,"ParticleBasicMaterial",function(){return eh});r.d(t,"ParticleSystemMaterial",function(){return th});r.d(t,"Vertex",function(){return rh});r.d(t,"DynamicBufferAttribute",function(){return nh});r.d(t,"Int8Attribute",function(){return ih});r.d(t,"Uint8Attribute",function(){return ah});r.d(t,"Uint8ClampedAttribute",function(){return oh});r.d(t,"Int16Attribute",function(){return sh});r.d(t,"Uint16Attribute",function(){return lh});r.d(t,"Int32Attribute",function(){return ch});r.d(t,"Uint32Attribute",function(){return uh});r.d(t,"Float32Attribute",function(){return hh});r.d(t,"Float64Attribute",function(){return fh});r.d(t,"ClosedSplineCurve3",function(){return ph});r.d(t,"SplineCurve3",function(){return dh});r.d(t,"Spline",function(){return mh});r.d(t,"AxisHelper",function(){return vh});r.d(t,"BoundingBoxHelper",function(){return gh});r.d(t,"EdgesHelper",function(){return yh});r.d(t,"WireframeHelper",function(){return xh});r.d(t,"XHRLoader",function(){return bh});r.d(t,"BinaryTextureLoader",function(){return _h});r.d(t,"GeometryUtils",function(){return wh});r.d(t,"ImageUtils",function(){return Sh});r.d(t,"Projector",function(){return Th});r.d(t,"CanvasRenderer",function(){return Mh});r.d(t,"SceneUtils",function(){return Eh});r.d(t,"LensFlare",function(){return Ah});void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e});void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e});"name"in Function.prototype===false&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var t=Object(e);for(var r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}}();function n(){}Object.assign(n.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]);-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return false;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;var r=this._listeners;var n=r[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;var t=this._listeners;var r=t[e.type];if(void 0!==r){e.target=this;var n=r.slice(0);for(var i=0,a=n.length;i<a;i++)n[i].call(this,e)}}});var i="92";var a={LEFT:0,MIDDLE:1,RIGHT:2};var o=0;var s=1;var l=2;var c=3;var u=0;var h=1;var f=0;var p=1;var d=2;var m=0;var v=1;var g=2;var y=1;var x=2;var b=0;var _=1;var w=2;var S=0;var T=1;var M=2;var E=3;var A=4;var R=5;var P=100;var C=101;var L=102;var O=103;var I=104;var B=200;var U=201;var D=202;var k=203;var N=204;var F=205;var G=206;var z=207;var H=208;var V=209;var j=210;var W=0;var X=1;var q=2;var Y=3;var Z=4;var J=5;var Q=6;var K=7;var $=0;var ee=1;var te=2;var re=0;var ne=1;var ie=2;var ae=3;var oe=4;var se=300;var le=301;var ce=302;var ue=303;var he=304;var fe=305;var pe=306;var de=307;var me=1e3;var ve=1001;var ge=1002;var ye=1003;var xe=1004;var be=1005;var _e=1006;var we=1007;var Se=1008;var Te=1009;var Me=1010;var Ee=1011;var Ae=1012;var Re=1013;var Pe=1014;var Ce=1015;var Le=1016;var Oe=1017;var Ie=1018;var Be=1019;var Ue=1020;var De=1021;var ke=1022;var Ne=1023;var Fe=1024;var Ge=1025;var ze=Ne;var He=1026;var Ve=1027;var je=33776;var We=33777;var Xe=33778;var qe=33779;var Ye=35840;var Ze=35841;var Je=35842;var Qe=35843;var Ke=36196;var $e=37808;var et=37809;var tt=37810;var rt=37811;var nt=37812;var it=37813;var at=37814;var ot=37815;var st=37816;var lt=37817;var ct=37818;var ut=37819;var ht=37820;var ft=37821;var pt=2200;var dt=2201;var mt=2202;var vt=2300;var gt=2301;var yt=2302;var xt=2400;var bt=2401;var _t=2402;var wt=0;var St=1;var Tt=2;var Mt=3e3;var Et=3001;var At=3007;var Rt=3002;var Pt=3003;var Ct=3004;var Lt=3005;var Ot=3006;var It=3200;var Bt=3201;var Ut={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=[];for(var t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function t(){var r=4294967295*Math.random()|0;var n=4294967295*Math.random()|0;var i=4294967295*Math.random()|0;var a=4294967295*Math.random()|0;var o=e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&a]+e[a>>8&255]+e[a>>16&255]+e[a>>24&255];return o.toUpperCase()}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){if(e<=t)return 0;if(e>=r)return 1;e=(e-t)/(r-t);return e*e*(3-2*e)},smootherstep:function(e,t,r){if(e<=t)return 0;if(e>=r)return 1;e=(e-t)/(r-t);return e*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ut.DEG2RAD},radToDeg:function(e){return e*Ut.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Dt(e,t){this.x=e||0;this.y=t||0}Object.defineProperties(Dt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(Dt.prototype,{isVector2:true,set:function(e,t){this.x=e;this.y=t;return this},setScalar:function(e){this.x=e;this.y=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){this.x=e.x;this.y=e.y;return this},add:function(e,t){if(void 0!==t){console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;return this},addScalar:function(e){this.x+=e;this.y+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;return this},sub:function(e,t){if(void 0!==t){console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;return this},subScalar:function(e){this.x-=e;this.y-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divide:function(e){this.x/=e.x;this.y/=e.y;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y;var n=e.elements;this.x=n[0]*t+n[3]*r+n[6];this.y=n[1]*t+n[4]*r+n[7];return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));return this},clampScalar:function(){var e=new Dt;var t=new Dt;return function r(n,i){e.set(n,n);t.set(i,i);return this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);e<0&&(e+=2*Math.PI);return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;return this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){void 0===t&&(t=0);this.x=e[t];this.y=e[t+1];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.x;e[t+1]=this.y;return e},fromBufferAttribute:function(e,t,r){void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=e.getX(t);this.y=e.getY(t);return this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t);var i=this.x-e.x;var a=this.y-e.y;this.x=i*r-a*n+e.x;this.y=i*n+a*r+e.y;return this}});function kt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(kt.prototype,{isMatrix4:true,set:function(e,t,r,n,i,a,o,s,l,c,u,h,f,p,d,m){var v=this.elements;v[0]=e;v[4]=t;v[8]=r;v[12]=n;v[1]=i;v[5]=a;v[9]=o;v[13]=s;v[2]=l;v[6]=c;v[10]=u;v[14]=h;v[3]=f;v[7]=p;v[11]=d;v[15]=m;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new kt).fromArray(this.elements)},copy:function(e){var t=this.elements;var r=e.elements;t[0]=r[0];t[1]=r[1];t[2]=r[2];t[3]=r[3];t[4]=r[4];t[5]=r[5];t[6]=r[6];t[7]=r[7];t[8]=r[8];t[9]=r[9];t[10]=r[10];t[11]=r[11];t[12]=r[12];t[13]=r[13];t[14]=r[14];t[15]=r[15];return this},copyPosition:function(e){var t=this.elements,r=e.elements;t[12]=r[12];t[13]=r[13];t[14]=r[14];return this},extractBasis:function(e,t,r){e.setFromMatrixColumn(this,0);t.setFromMatrixColumn(this,1);r.setFromMatrixColumn(this,2);return this},makeBasis:function(e,t,r){this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1);return this},extractRotation:function(){var e=new Ft;return function t(r){var n=this.elements;var i=r.elements;var a=1/e.setFromMatrixColumn(r,0).length();var o=1/e.setFromMatrixColumn(r,1).length();var s=1/e.setFromMatrixColumn(r,2).length();n[0]=i[0]*a;n[1]=i[1]*a;n[2]=i[2]*a;n[4]=i[4]*o;n[5]=i[5]*o;n[6]=i[6]*o;n[8]=i[8]*s;n[9]=i[9]*s;n[10]=i[10]*s;return this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements;var r=e.x,n=e.y,i=e.z;var a=Math.cos(r),o=Math.sin(r);var s=Math.cos(n),l=Math.sin(n);var c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){var h=a*c,f=a*u,p=o*c,d=o*u;t[0]=s*c;t[4]=-s*u;t[8]=l;t[1]=f+p*l;t[5]=h-d*l;t[9]=-o*s;t[2]=d-h*l;t[6]=p+f*l;t[10]=a*s}else if("YXZ"===e.order){var m=s*c,v=s*u,g=l*c,y=l*u;t[0]=m+y*o;t[4]=g*o-v;t[8]=a*l;t[1]=a*u;t[5]=a*c;t[9]=-o;t[2]=v*o-g;t[6]=y+m*o;t[10]=a*s}else if("ZXY"===e.order){var m=s*c,v=s*u,g=l*c,y=l*u;t[0]=m-y*o;t[4]=-a*u;t[8]=g+v*o;t[1]=v+g*o;t[5]=a*c;t[9]=y-m*o;t[2]=-a*l;t[6]=o;t[10]=a*s}else if("ZYX"===e.order){var h=a*c,f=a*u,p=o*c,d=o*u;t[0]=s*c;t[4]=p*l-f;t[8]=h*l+d;t[1]=s*u;t[5]=d*l+h;t[9]=f*l-p;t[2]=-l;t[6]=o*s;t[10]=a*s}else if("YZX"===e.order){var x=a*s,b=a*l,_=o*s,w=o*l;t[0]=s*c;t[4]=w-x*u;t[8]=_*u+b;t[1]=u;t[5]=a*c;t[9]=-o*c;t[2]=-l*c;t[6]=b*u+_;t[10]=x-w*u}else if("XZY"===e.order){var x=a*s,b=a*l,_=o*s,w=o*l;t[0]=s*c;t[4]=-u;t[8]=l*c;t[1]=x*u+w;t[5]=a*c;t[9]=b*u-_;t[2]=_*u-b;t[6]=o*c;t[10]=w*u+x}t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},makeRotationFromQuaternion:function(e){var t=this.elements;var r=e._x,n=e._y,i=e._z,a=e._w;var o=r+r,s=n+n,l=i+i;var c=r*o,u=r*s,h=r*l;var f=n*s,p=n*l,d=i*l;var m=a*o,v=a*s,g=a*l;t[0]=1-(f+d);t[4]=u-g;t[8]=h+v;t[1]=u+g;t[5]=1-(c+d);t[9]=p-m;t[2]=h-v;t[6]=p+m;t[10]=1-(c+f);t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},lookAt:function(){var e=new Ft;var t=new Ft;var r=new Ft;return function n(i,a,o){var s=this.elements;r.subVectors(i,a);0===r.lengthSq()&&(r.z=1);r.normalize();e.crossVectors(o,r);if(0===e.lengthSq()){1===Math.abs(o.z)?r.x+=1e-4:r.z+=1e-4;r.normalize();e.crossVectors(o,r)}e.normalize();t.crossVectors(r,e);s[0]=e.x;s[4]=t.x;s[8]=r.x;s[1]=e.y;s[5]=t.y;s[9]=r.y;s[2]=e.z;s[6]=t.z;s[10]=r.z;return this}}(),multiply:function(e,t){if(void 0!==t){console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(e,t)}return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements;var n=t.elements;var i=this.elements;var a=r[0],o=r[4],s=r[8],l=r[12];var c=r[1],u=r[5],h=r[9],f=r[13];var p=r[2],d=r[6],m=r[10],v=r[14];var g=r[3],y=r[7],x=r[11],b=r[15];var _=n[0],w=n[4],S=n[8],T=n[12];var M=n[1],E=n[5],A=n[9],R=n[13];var P=n[2],C=n[6],L=n[10],O=n[14];var I=n[3],B=n[7],U=n[11],D=n[15];i[0]=a*_+o*M+s*P+l*I;i[4]=a*w+o*E+s*C+l*B;i[8]=a*S+o*A+s*L+l*U;i[12]=a*T+o*R+s*O+l*D;i[1]=c*_+u*M+h*P+f*I;i[5]=c*w+u*E+h*C+f*B;i[9]=c*S+u*A+h*L+f*U;i[13]=c*T+u*R+h*O+f*D;i[2]=p*_+d*M+m*P+v*I;i[6]=p*w+d*E+m*C+v*B;i[10]=p*S+d*A+m*L+v*U;i[14]=p*T+d*R+m*O+v*D;i[3]=g*_+y*M+x*P+b*I;i[7]=g*w+y*E+x*C+b*B;i[11]=g*S+y*A+x*L+b*U;i[15]=g*T+y*R+x*O+b*D;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[4]*=e;t[8]*=e;t[12]*=e;t[1]*=e;t[5]*=e;t[9]*=e;t[13]*=e;t[2]*=e;t[6]*=e;t[10]*=e;t[14]*=e;t[3]*=e;t[7]*=e;t[11]*=e;t[15]*=e;return this},applyToBufferAttribute:function(){var e=new Ft;return function t(r){for(var n=0,i=r.count;n<i;n++){e.x=r.getX(n);e.y=r.getY(n);e.z=r.getZ(n);e.applyMatrix4(this);r.setXYZ(n,e.x,e.y,e.z)}return r}}(),determinant:function(){var e=this.elements;var t=e[0],r=e[4],n=e[8],i=e[12];var a=e[1],o=e[5],s=e[9],l=e[13];var c=e[2],u=e[6],h=e[10],f=e[14];var p=e[3],d=e[7],m=e[11],v=e[15];return p*(+i*s*u-n*l*u-i*o*h+r*l*h+n*o*f-r*s*f)+d*(+t*s*f-t*l*h+i*a*h-n*a*f+n*l*c-i*s*c)+m*(+t*l*u-t*o*f-i*a*u+r*a*f+i*o*c-r*l*c)+v*(-n*o*c-t*s*u+t*o*h+n*a*u-r*a*h+r*s*c)},transpose:function(){var e=this.elements;var t;t=e[1];e[1]=e[4];e[4]=t;t=e[2];e[2]=e[8];e[8]=t;t=e[6];e[6]=e[9];e[9]=t;t=e[3];e[3]=e[12];e[12]=t;t=e[7];e[7]=e[13];e[13]=t;t=e[11];e[11]=e[14];e[14]=t;return this},setPosition:function(e){var t=this.elements;t[12]=e.x;t[13]=e.y;t[14]=e.z;return this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],f=n[8],p=n[9],d=n[10],m=n[11],v=n[12],g=n[13],y=n[14],x=n[15],b=p*y*h-g*d*h+g*u*m-c*y*m-p*u*x+c*d*x,_=v*d*h-f*y*h-v*u*m+l*y*m+f*u*x-l*d*x,w=f*g*h-v*p*h+v*c*m-l*g*m-f*c*x+l*p*x,S=v*p*u-f*g*u-v*c*d+l*g*d+f*c*y-l*p*y;var T=i*b+a*_+o*w+s*S;if(0===T){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(true===t)throw new Error(M);console.warn(M);return this.identity()}var E=1/T;r[0]=b*E;r[1]=(g*d*s-p*y*s-g*o*m+a*y*m+p*o*x-a*d*x)*E;r[2]=(c*y*s-g*u*s+g*o*h-a*y*h-c*o*x+a*u*x)*E;r[3]=(p*u*s-c*d*s-p*o*h+a*d*h+c*o*m-a*u*m)*E;r[4]=_*E;r[5]=(f*y*s-v*d*s+v*o*m-i*y*m-f*o*x+i*d*x)*E;r[6]=(v*u*s-l*y*s-v*o*h+i*y*h+l*o*x-i*u*x)*E;r[7]=(l*d*s-f*u*s+f*o*h-i*d*h-l*o*m+i*u*m)*E;r[8]=w*E;r[9]=(v*p*s-f*g*s-v*a*m+i*g*m+f*a*x-i*p*x)*E;r[10]=(l*g*s-v*c*s+v*a*h-i*g*h-l*a*x+i*c*x)*E;r[11]=(f*c*s-l*p*s-f*a*h+i*p*h+l*a*m-i*c*m)*E;r[12]=S*E;r[13]=(f*g*o-v*p*o+v*a*d-i*g*d-f*a*y+i*p*y)*E;r[14]=(v*c*o-l*g*o-v*a*u+i*g*u+l*a*y-i*c*y)*E;r[15]=(l*p*o-f*c*o+f*a*u-i*p*u-l*a*d+i*c*d)*E;return this},scale:function(e){var t=this.elements;var r=e.x,n=e.y,i=e.z;t[0]*=r;t[4]*=n;t[8]*=i;t[1]*=r;t[5]*=n;t[9]*=i;t[2]*=r;t[6]*=n;t[10]*=i;t[3]*=r;t[7]*=n;t[11]*=i;return this},getMaxScaleOnAxis:function(){var e=this.elements;var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];var r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6];var n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1);return this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1);return this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1);return this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(e,t){var r=Math.cos(t);var n=Math.sin(t);var i=1-r;var a=e.x,o=e.y,s=e.z;var l=i*a,c=i*o;this.set(l*a+r,l*o-n*s,l*s+n*o,0,l*o+n*s,c*o+r,c*s-n*a,0,l*s-n*o,c*s+n*a,i*s*s+r,0,0,0,0,1);return this},makeScale:function(e,t,r){this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1);return this},makeShear:function(e,t,r){this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1);return this},compose:function(e,t,r){this.makeRotationFromQuaternion(t);this.scale(r);this.setPosition(e);return this},decompose:function(){var e=new Ft;var t=new kt;return function r(n,i,a){var o=this.elements;var s=e.set(o[0],o[1],o[2]).length();var l=e.set(o[4],o[5],o[6]).length();var c=e.set(o[8],o[9],o[10]).length();var u=this.determinant();u<0&&(s=-s);n.x=o[12];n.y=o[13];n.z=o[14];t.copy(this);var h=1/s;var f=1/l;var p=1/c;t.elements[0]*=h;t.elements[1]*=h;t.elements[2]*=h;t.elements[4]*=f;t.elements[5]*=f;t.elements[6]*=f;t.elements[8]*=p;t.elements[9]*=p;t.elements[10]*=p;i.setFromRotationMatrix(t);a.x=s;a.y=l;a.z=c;return this}}(),makePerspective:function(e,t,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements;var s=2*i/(t-e);var l=2*i/(r-n);var c=(t+e)/(t-e);var u=(r+n)/(r-n);var h=-(a+i)/(a-i);var f=-2*a*i/(a-i);o[0]=s;o[4]=0;o[8]=c;o[12]=0;o[1]=0;o[5]=l;o[9]=u;o[13]=0;o[2]=0;o[6]=0;o[10]=h;o[14]=f;o[3]=0;o[7]=0;o[11]=-1;o[15]=0;return this},makeOrthographic:function(e,t,r,n,i,a){var o=this.elements;var s=1/(t-e);var l=1/(r-n);var c=1/(a-i);var u=(t+e)*s;var h=(r+n)*l;var f=(a+i)*c;o[0]=2*s;o[4]=0;o[8]=0;o[12]=-u;o[1]=0;o[5]=2*l;o[9]=0;o[13]=-h;o[2]=0;o[6]=0;o[10]=-2*c;o[14]=-f;o[3]=0;o[7]=0;o[11]=0;o[15]=1;return this},equals:function(e){var t=this.elements;var r=e.elements;for(var n=0;n<16;n++)if(t[n]!==r[n])return false;return true},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);var r=this.elements;e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=r[3];e[t+4]=r[4];e[t+5]=r[5];e[t+6]=r[6];e[t+7]=r[7];e[t+8]=r[8];e[t+9]=r[9];e[t+10]=r[10];e[t+11]=r[11];e[t+12]=r[12];e[t+13]=r[13];e[t+14]=r[14];e[t+15]=r[15];return e}});function Nt(e,t,r,n){this._x=e||0;this._y=t||0;this._z=r||0;this._w=void 0!==n?n:1}Object.assign(Nt,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,a,o){var s=r[n+0],l=r[n+1],c=r[n+2],u=r[n+3],h=i[a+0],f=i[a+1],p=i[a+2],d=i[a+3];if(u!==d||s!==h||l!==f||c!==p){var m=1-o,v=s*h+l*f+c*p+u*d,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var x=Math.sqrt(y),b=Math.atan2(x,v*g);m=Math.sin(m*b)/x;o=Math.sin(o*b)/x}var _=o*g;s=s*m+h*_;l=l*m+f*_;c=c*m+p*_;u=u*m+d*_;if(m===1-o){var w=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=w;l*=w;c*=w;u*=w}}e[t]=s;e[t+1]=l;e[t+2]=c;e[t+3]=u}});Object.defineProperties(Nt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e;this.onChangeCallback()}}});Object.assign(Nt.prototype,{set:function(e,t,r,n){this._x=e;this._y=t;this._z=r;this._w=n;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){this._x=e.x;this._y=e.y;this._z=e.z;this._w=e.w;this.onChangeCallback();return this},setFromEuler:function(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,i=e._z,a=e.order;var o=Math.cos;var s=Math.sin;var l=o(r/2);var c=o(n/2);var u=o(i/2);var h=s(r/2);var f=s(n/2);var p=s(i/2);if("XYZ"===a){this._x=h*c*u+l*f*p;this._y=l*f*u-h*c*p;this._z=l*c*p+h*f*u;this._w=l*c*u-h*f*p}else if("YXZ"===a){this._x=h*c*u+l*f*p;this._y=l*f*u-h*c*p;this._z=l*c*p-h*f*u;this._w=l*c*u+h*f*p}else if("ZXY"===a){this._x=h*c*u-l*f*p;this._y=l*f*u+h*c*p;this._z=l*c*p+h*f*u;this._w=l*c*u-h*f*p}else if("ZYX"===a){this._x=h*c*u-l*f*p;this._y=l*f*u+h*c*p;this._z=l*c*p-h*f*u;this._w=l*c*u+h*f*p}else if("YZX"===a){this._x=h*c*u+l*f*p;this._y=l*f*u+h*c*p;this._z=l*c*p-h*f*u;this._w=l*c*u-h*f*p}else if("XZY"===a){this._x=h*c*u-l*f*p;this._y=l*f*u-h*c*p;this._z=l*c*p+h*f*u;this._w=l*c*u+h*f*p}false!==t&&this.onChangeCallback();return this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);this._x=e.x*n;this._y=e.y*n;this._z=e.z*n;this._w=Math.cos(r);this.onChangeCallback();return this},setFromRotationMatrix:function(e){var t=e.elements,r=t[0],n=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=r+o+u,f;if(h>0){f=.5/Math.sqrt(h+1);this._w=.25/f;this._x=(c-s)*f;this._y=(i-l)*f;this._z=(a-n)*f}else if(r>o&&r>u){f=2*Math.sqrt(1+r-o-u);this._w=(c-s)/f;this._x=.25*f;this._y=(n+a)/f;this._z=(i+l)/f}else if(o>u){f=2*Math.sqrt(1+o-r-u);this._w=(i-l)/f;this._x=(n+a)/f;this._y=.25*f;this._z=(s+c)/f}else{f=2*Math.sqrt(1+u-r-o);this._w=(a-n)/f;this._x=(i+l)/f;this._y=(s+c)/f;this._z=.25*f}this.onChangeCallback();return this},setFromUnitVectors:function(){var e=new Ft;var t;var r=1e-6;return function n(i,a){void 0===e&&(e=new Ft);t=i.dot(a)+1;if(t<r){t=0;Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)}else e.crossVectors(i,a);this._x=e.x;this._y=e.y;this._z=e.z;this._w=t;return this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();if(0===e){this._x=0;this._y=0;this._z=0;this._w=1}else{e=1/e;this._x=this._x*e;this._y=this._y*e;this._z=this._z*e;this._w=this._w*e}this.onChangeCallback();return this},multiply:function(e,t){if(void 0!==t){console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(e,t)}return this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,a=e._w;var o=t._x,s=t._y,l=t._z,c=t._w;this._x=r*c+a*o+n*l-i*s;this._y=n*c+a*s+i*o-r*l;this._z=i*c+a*l+r*s-n*o;this._w=a*c-r*o-n*s-i*l;this.onChangeCallback();return this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,a=this._w;var o=a*e._w+r*e._x+n*e._y+i*e._z;if(o<0){this._w=-e._w;this._x=-e._x;this._y=-e._y;this._z=-e._z;o=-o}else this.copy(e);if(o>=1){this._w=a;this._x=r;this._y=n;this._z=i;return this}var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001){this._w=.5*(a+this._w);this._x=.5*(r+this._x);this._y=.5*(n+this._y);this._z=.5*(i+this._z);return this}var l=Math.atan2(s,o);var c=Math.sin((1-t)*l)/s,u=Math.sin(t*l)/s;this._w=a*c+this._w*u;this._x=r*c+this._x*u;this._y=n*c+this._y*u;this._z=i*c+this._z*u;this.onChangeCallback();return this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){void 0===t&&(t=0);this._x=e[t];this._y=e[t+1];this._z=e[t+2];this._w=e[t+3];this.onChangeCallback();return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._w;return e},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function Ft(e,t,r){this.x=e||0;this.y=t||0;this.z=r||0}Object.assign(Ft.prototype,{isVector3:true,set:function(e,t,r){this.x=e;this.y=t;this.z=r;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},add:function(e,t){if(void 0!==t){console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;return this},sub:function(e,t){if(void 0!==t){console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;return this},multiply:function(e,t){if(void 0!==t){console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(e,t)}this.x*=e.x;this.y*=e.y;this.z*=e.z;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;return this},multiplyVectors:function(e,t){this.x=e.x*t.x;this.y=e.y*t.y;this.z=e.z*t.z;return this},applyEuler:function(){var e=new Nt;return function t(r){r&&r.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(e.setFromEuler(r))}}(),applyAxisAngle:function(){var e=new Nt;return function t(r,n){return this.applyQuaternion(e.setFromAxisAngle(r,n))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z;var i=e.elements;this.x=i[0]*t+i[3]*r+i[6]*n;this.y=i[1]*t+i[4]*r+i[7]*n;this.z=i[2]*t+i[5]*r+i[8]*n;return this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z;var i=e.elements;var a=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*a;this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*a;this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*a;return this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z;var i=e.x,a=e.y,o=e.z,s=e.w;var l=s*t+a*n-o*r;var c=s*r+o*t-i*n;var u=s*n+i*r-a*t;var h=-i*t-a*r-o*n;this.x=l*s+h*-i+c*-o-u*-a;this.y=c*s+h*-a+u*-i-l*-o;this.z=u*s+h*-o+l*-a-c*-i;return this},project:function(){var e=new kt;return function t(r){e.multiplyMatrices(r.projectionMatrix,e.getInverse(r.matrixWorld));return this.applyMatrix4(e)}}(),unproject:function(){var e=new kt;return function t(r){e.multiplyMatrices(r.matrixWorld,e.getInverse(r.projectionMatrix));return this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z;var i=e.elements;this.x=i[0]*t+i[4]*r+i[8]*n;this.y=i[1]*t+i[5]*r+i[9]*n;this.z=i[2]*t+i[6]*r+i[10]*n;return this.normalize()},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));return this},clampScalar:function(){var e=new Ft;var t=new Ft;return function r(n,i){e.set(n,n,n);t.set(i,i,i);return this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;return this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(void 0!==t){console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(e,t)}return this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z;var a=t.x,o=t.y,s=t.z;this.x=n*s-i*o;this.y=i*a-r*s;this.z=r*o-n*a;return this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Ft;return function t(r){e.copy(this).projectOnVector(r);return this.sub(e)}}(),reflect:function(){var e=new Ft;return function t(r){return this.sub(e.copy(r).multiplyScalar(2*this.dot(r)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ut.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;this.x=t*Math.sin(e.theta);this.y=Math.cos(e.phi)*e.radius;this.z=t*Math.cos(e.theta);return this},setFromCylindrical:function(e){this.x=e.radius*Math.sin(e.theta);this.y=e.y;this.z=e.radius*Math.cos(e.theta);return this},setFromMatrixPosition:function(e){var t=e.elements;this.x=t[12];this.y=t[13];this.z=t[14];return this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length();var r=this.setFromMatrixColumn(e,1).length();var n=this.setFromMatrixColumn(e,2).length();this.x=t;this.y=r;this.z=n;return this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){void 0===t&&(t=0);this.x=e[t];this.y=e[t+1];this.z=e[t+2];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;return e},fromBufferAttribute:function(e,t,r){void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);return this}});function Gt(){this.elements=[1,0,0,0,1,0,0,0,1];arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Gt.prototype,{isMatrix3:true,set:function(e,t,r,n,i,a,o,s,l){var c=this.elements;c[0]=e;c[1]=n;c[2]=o;c[3]=t;c[4]=i;c[5]=s;c[6]=r;c[7]=a;c[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;var r=e.elements;t[0]=r[0];t[1]=r[1];t[2]=r[2];t[3]=r[3];t[4]=r[4];t[5]=r[5];t[6]=r[6];t[7]=r[7];t[8]=r[8];return this},setFromMatrix4:function(e){var t=e.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this},applyToBufferAttribute:function(){var e=new Ft;return function t(r){for(var n=0,i=r.count;n<i;n++){e.x=r.getX(n);e.y=r.getY(n);e.z=r.getZ(n);e.applyMatrix3(this);r.setXYZ(n,e.x,e.y,e.z)}return r}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements;var n=t.elements;var i=this.elements;var a=r[0],o=r[3],s=r[6];var l=r[1],c=r[4],u=r[7];var h=r[2],f=r[5],p=r[8];var d=n[0],m=n[3],v=n[6];var g=n[1],y=n[4],x=n[7];var b=n[2],_=n[5],w=n[8];i[0]=a*d+o*g+s*b;i[3]=a*m+o*y+s*_;i[6]=a*v+o*x+s*w;i[1]=l*d+c*g+u*b;i[4]=l*m+c*y+u*_;i[7]=l*v+c*x+u*w;i[2]=h*d+f*g+p*b;i[5]=h*m+f*y+p*_;i[8]=h*v+f*x+p*w;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[3]*=e;t[6]*=e;t[1]*=e;t[4]*=e;t[7]*=e;t[2]*=e;t[5]*=e;t[8]*=e;return this},determinant:function(){var e=this.elements;var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-r*i*c+r*o*s+n*i*l-n*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],c=r[5],u=r[6],h=r[7],f=r[8],p=f*l-c*h,d=c*u-f*s,m=h*s-l*u,v=i*p+a*d+o*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(true===t)throw new Error(g);console.warn(g);return this.identity()}var y=1/v;n[0]=p*y;n[1]=(o*h-f*a)*y;n[2]=(c*a-o*l)*y;n[3]=d*y;n[4]=(f*i-o*u)*y;n[5]=(o*s-c*i)*y;n[6]=m*y;n[7]=(a*u-h*i)*y;n[8]=(l*i-a*s)*y;return this},transpose:function(){var e,t=this.elements;e=t[1];t[1]=t[3];t[3]=e;e=t[2];t[2]=t[6];t[6]=e;e=t[5];t[5]=t[7];t[7]=e;return this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;e[0]=t[0];e[1]=t[3];e[2]=t[6];e[3]=t[1];e[4]=t[4];e[5]=t[7];e[6]=t[2];e[7]=t[5];e[8]=t[8];return this},setUvTransform:function(e,t,r,n,i,a,o){var s=Math.cos(i);var l=Math.sin(i);this.set(r*s,r*l,-r*(s*a+l*o)+a+e,-n*l,n*s,-n*(-l*a+s*o)+o+t,0,0,1)},scale:function(e,t){var r=this.elements;r[0]*=e;r[3]*=e;r[6]*=e;r[1]*=t;r[4]*=t;r[7]*=t;return this},rotate:function(e){var t=Math.cos(e);var r=Math.sin(e);var n=this.elements;var i=n[0],a=n[3],o=n[6];var s=n[1],l=n[4],c=n[7];n[0]=t*i+r*s;n[3]=t*a+r*l;n[6]=t*o+r*c;n[1]=-r*i+t*s;n[4]=-r*a+t*l;n[7]=-r*o+t*c;return this},translate:function(e,t){var r=this.elements;r[0]+=e*r[2];r[3]+=e*r[5];r[6]+=e*r[8];r[1]+=t*r[2];r[4]+=t*r[5];r[7]+=t*r[8];return this},equals:function(e){var t=this.elements;var r=e.elements;for(var n=0;n<9;n++)if(t[n]!==r[n])return false;return true},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);var r=this.elements;e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=r[3];e[t+4]=r[4];e[t+5]=r[5];e[t+6]=r[6];e[t+7]=r[7];e[t+8]=r[8];return e}});var zt=0;function Ht(e,t,r,n,i,a,o,s,l,c){Object.defineProperty(this,"id",{value:zt++});this.uuid=Ut.generateUUID();this.name="";this.image=void 0!==e?e:Ht.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==t?t:Ht.DEFAULT_MAPPING;this.wrapS=void 0!==r?r:ve;this.wrapT=void 0!==n?n:ve;this.magFilter=void 0!==i?i:_e;this.minFilter=void 0!==a?a:Se;this.anisotropy=void 0!==l?l:1;this.format=void 0!==o?o:Ne;this.type=void 0!==s?s:Te;this.offset=new Dt(0,0);this.repeat=new Dt(1,1);this.center=new Dt(0,0);this.rotation=0;this.matrixAutoUpdate=true;this.matrix=new Gt;this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this.encoding=void 0!==c?c:Mt;this.version=0;this.onUpdate=null}Ht.DEFAULT_IMAGE=void 0;Ht.DEFAULT_MAPPING=se;Ht.prototype=Object.assign(Object.create(n.prototype),{constructor:Ht,isTexture:true,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.image=e.image;this.mipmaps=e.mipmaps.slice(0);this.mapping=e.mapping;this.wrapS=e.wrapS;this.wrapT=e.wrapT;this.magFilter=e.magFilter;this.minFilter=e.minFilter;this.anisotropy=e.anisotropy;this.format=e.format;this.type=e.type;this.offset.copy(e.offset);this.repeat.copy(e.repeat);this.center.copy(e.center);this.rotation=e.rotation;this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrix.copy(e.matrix);this.generateMipmaps=e.generateMipmaps;this.premultiplyAlpha=e.premultiplyAlpha;this.flipY=e.flipY;this.unpackAlignment=e.unpackAlignment;this.encoding=e.encoding;return this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];function r(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=e.width;t.height=e.height;var r=t.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Ut.generateUUID());t||void 0!==e.images[i.uuid]||(e.images[i.uuid]={uuid:i.uuid,url:r(i)});n.image=i.uuid}t||(e.textures[this.uuid]=n);return n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==se)return;e.applyMatrix3(this.matrix);if(e.x<0||e.x>1)switch(this.wrapS){case me:e.x=e.x-Math.floor(e.x);break;case ve:e.x=e.x<0?0:1;break;case ge:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case me:e.y=e.y-Math.floor(e.y);break;case ve:e.y=e.y<0?0:1;break;case ge:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}this.flipY&&(e.y=1-e.y)}});Object.defineProperty(Ht.prototype,"needsUpdate",{set:function(e){true===e&&this.version++}});function Vt(e,t,r,n){this.x=e||0;this.y=t||0;this.z=r||0;this.w=void 0!==n?n:1}Object.assign(Vt.prototype,{isVector4:true,set:function(e,t,r,n){this.x=e;this.y=t;this.z=r;this.w=n;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;this.w=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setW:function(e){this.w=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=void 0!==e.w?e.w:1;return this},add:function(e,t){if(void 0!==t){console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;this.w+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;this.w=e.w+t.w;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;this.w+=e.w*t;return this},sub:function(e,t){if(void 0!==t){console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;this.w-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;this.w=e.w-t.w;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w;var a=e.elements;this.x=a[0]*t+a[4]*r+a[8]*n+a[12]*i;this.y=a[1]*t+a[5]*r+a[9]*n+a[13]*i;this.z=a[2]*t+a[6]*r+a[10]*n+a[14]*i;this.w=a[3]*t+a[7]*r+a[11]*n+a[15]*i;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);if(t<1e-4){this.x=1;this.y=0;this.z=0}else{this.x=e.x/t;this.y=e.y/t;this.z=e.z/t}return this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,a=.01,o=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],f=s[5],p=s[9],d=s[2],m=s[6],v=s[10];if(Math.abs(c-h)<a&&Math.abs(u-d)<a&&Math.abs(p-m)<a){if(Math.abs(c+h)<o&&Math.abs(u+d)<o&&Math.abs(p+m)<o&&Math.abs(l+f+v-3)<o){this.set(1,0,0,0);return this}t=Math.PI;var g=(l+1)/2;var y=(f+1)/2;var x=(v+1)/2;var b=(c+h)/4;var _=(u+d)/4;var w=(p+m)/4;if(g>y&&g>x)if(g<a){r=0;n=.707106781;i=.707106781}else{r=Math.sqrt(g);n=b/r;i=_/r}else if(y>x)if(y<a){r=.707106781;n=0;i=.707106781}else{n=Math.sqrt(y);r=b/n;i=w/n}else if(x<a){r=.707106781;n=.707106781;i=0}else{i=Math.sqrt(x);r=_/i;n=w/i}this.set(r,n,i,t);return this}var S=Math.sqrt((m-p)*(m-p)+(u-d)*(u-d)+(h-c)*(h-c));Math.abs(S)<.001&&(S=1);this.x=(m-p)/S;this.y=(u-d)/S;this.z=(h-c)/S;this.w=Math.acos((l+f+v-1)/2);return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);this.w=Math.min(this.w,e.w);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);this.w=Math.max(this.w,e.w);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));this.w=Math.max(e.w,Math.min(t.w,this.w));return this},clampScalar:function(){var e,t;return function r(n,i){if(void 0===e){e=new Vt;t=new Vt}e.set(n,n,n,n);t.set(i,i,i,i);return this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;this.w+=(e.w-this.w)*t;return this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){void 0===t&&(t=0);this.x=e[t];this.y=e[t+1];this.z=e[t+2];this.w=e[t+3];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;e[t+3]=this.w;return e},fromBufferAttribute:function(e,t,r){void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);this.w=e.getW(t);return this}});function jt(e,t,r){this.width=e;this.height=t;this.scissor=new Vt(0,0,e,t);this.scissorTest=false;this.viewport=new Vt(0,0,e,t);r=r||{};void 0===r.minFilter&&(r.minFilter=_e);this.texture=new Ht(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding);this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer;this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer;this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}jt.prototype=Object.assign(Object.create(n.prototype),{constructor:jt,isWebGLRenderTarget:true,setSize:function(e,t){if(this.width!==e||this.height!==t){this.width=e;this.height=t;this.dispose()}this.viewport.set(0,0,e,t);this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.width=e.width;this.height=e.height;this.viewport.copy(e.viewport);this.texture=e.texture.clone();this.depthBuffer=e.depthBuffer;this.stencilBuffer=e.stencilBuffer;this.depthTexture=e.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Wt(e,t,r){jt.call(this,e,t,r);this.activeCubeFace=0;this.activeMipMapLevel=0}Wt.prototype=Object.create(jt.prototype);Wt.prototype.constructor=Wt;Wt.prototype.isWebGLRenderTargetCube=true;function Xt(e,t,r,n,i,a,o,s,l,c,u,h){Ht.call(this,null,a,o,s,l,c,n,i,u,h);this.image={data:e,width:t,height:r};this.magFilter=void 0!==l?l:ye;this.minFilter=void 0!==c?c:ye;this.generateMipmaps=false;this.flipY=false;this.unpackAlignment=1}Xt.prototype=Object.create(Ht.prototype);Xt.prototype.constructor=Xt;Xt.prototype.isDataTexture=true;function qt(e,t){this.min=void 0!==e?e:new Ft(Infinity,Infinity,Infinity);this.max=void 0!==t?t:new Ft(-Infinity,-Infinity,-Infinity)}Object.assign(qt.prototype,{isBox3:true,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromArray:function(e){var t=Infinity;var r=Infinity;var n=Infinity;var i=-Infinity;var a=-Infinity;var o=-Infinity;for(var s=0,l=e.length;s<l;s+=3){var c=e[s];var u=e[s+1];var h=e[s+2];c<t&&(t=c);u<r&&(r=u);h<n&&(n=h);c>i&&(i=c);u>a&&(a=u);h>o&&(o=h)}this.min.set(t,r,n);this.max.set(i,a,o);return this},setFromBufferAttribute:function(e){var t=Infinity;var r=Infinity;var n=Infinity;var i=-Infinity;var a=-Infinity;var o=-Infinity;for(var s=0,l=e.count;s<l;s++){var c=e.getX(s);var u=e.getY(s);var h=e.getZ(s);c<t&&(t=c);u<r&&(r=u);h<n&&(n=h);c>i&&(i=c);u>a&&(a=u);h>o&&(o=h)}this.min.set(t,r,n);this.max.set(i,a,o);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ft;return function t(r,n){var i=e.copy(n).multiplyScalar(.5);this.min.copy(r).sub(i);this.max.copy(r).add(i);return this}}(),setFromObject:function(e){this.makeEmpty();return this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){if(void 0===e){console.warn("THREE.Box3: .getCenter() target is now required");e=new Ft}return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){if(void 0===e){console.warn("THREE.Box3: .getSize() target is now required");e=new Ft}return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},expandByObject:function(){var e,t,r;var n=new Ft;function i(i){var a=i.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(t=0,r=o.length;t<r;t++){n.copy(o[t]);n.applyMatrix4(i.matrixWorld);e.expandByPoint(n)}}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(t=0,r=s.count;t<r;t++){n.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld);e.expandByPoint(n)}}}return function t(r){e=this;r.updateMatrixWorld(true);r.traverse(i);return this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){if(void 0===t){console.warn("THREE.Box3: .getParameter() target is now required");t=new Ft}return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new Ft;return function t(r){this.clampPoint(r.center,e);return e.distanceToSquared(r.center)<=r.radius*r.radius}}(),intersectsPlane:function(e){var t,r;if(e.normal.x>0){t=e.normal.x*this.min.x;r=e.normal.x*this.max.x}else{t=e.normal.x*this.max.x;r=e.normal.x*this.min.x}if(e.normal.y>0){t+=e.normal.y*this.min.y;r+=e.normal.y*this.max.y}else{t+=e.normal.y*this.max.y;r+=e.normal.y*this.min.y}if(e.normal.z>0){t+=e.normal.z*this.min.z;r+=e.normal.z*this.max.z}else{t+=e.normal.z*this.max.z;r+=e.normal.z*this.min.z}return t<=e.constant&&r>=e.constant},intersectsTriangle:function(){var e=new Ft;var t=new Ft;var r=new Ft;var n=new Ft;var i=new Ft;var a=new Ft;var o=new Ft;var s=new Ft;var l=new Ft;var c=new Ft;function u(n){var i,a;for(i=0,a=n.length-3;i<=a;i+=3){o.fromArray(n,i);var s=l.x*Math.abs(o.x)+l.y*Math.abs(o.y)+l.z*Math.abs(o.z);var c=e.dot(o);var u=t.dot(o);var h=r.dot(o);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>s)return false}return true}return function o(h){if(this.isEmpty())return false;this.getCenter(s);l.subVectors(this.max,s);e.subVectors(h.a,s);t.subVectors(h.b,s);r.subVectors(h.c,s);n.subVectors(t,e);i.subVectors(r,t);a.subVectors(e,r);var f=[0,-n.z,n.y,0,-i.z,i.y,0,-a.z,a.y,n.z,0,-n.x,i.z,0,-i.x,a.z,0,-a.x,-n.y,n.x,0,-i.y,i.x,0,-a.y,a.x,0];if(!u(f))return false;f=[1,0,0,0,1,0,0,0,1];if(!u(f))return false;c.crossVectors(n,i);f=[c.x,c.y,c.z];return u(f)}}(),clampPoint:function(e,t){if(void 0===t){console.warn("THREE.Box3: .clampPoint() target is now required");t=new Ft}return t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ft;return function t(r){var n=e.copy(r).clamp(this.min,this.max);return n.sub(r).length()}}(),getBoundingSphere:function(){var e=new Ft;return function t(r){if(void 0===r){console.warn("THREE.Box3: .getBoundingSphere() target is now required");r=new Yt}this.getCenter(r.center);r.radius=.5*this.getSize(e).length();return r}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);this.isEmpty()&&this.makeEmpty();return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},applyMatrix4:function(){var e=[new Ft,new Ft,new Ft,new Ft,new Ft,new Ft,new Ft,new Ft];return function t(r){if(this.isEmpty())return this;e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r);e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r);e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r);e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r);e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r);e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r);e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r);e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r);this.setFromPoints(e);return this}}(),translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Yt(e,t){this.center=void 0!==e?e:new Ft;this.radius=void 0!==t?t:0}Object.assign(Yt.prototype,{set:function(e,t){this.center.copy(e);this.radius=t;return this},setFromPoints:function(){var e=new qt;return function t(r,n){var i=this.center;void 0!==n?i.copy(n):e.setFromPoints(r).getCenter(i);var a=0;for(var o=0,s=r.length;o<s;o++)a=Math.max(a,i.distanceToSquared(r[o]));this.radius=Math.sqrt(a);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.center.copy(e.center);this.radius=e.radius;return this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);if(void 0===t){console.warn("THREE.Sphere: .clampPoint() target is now required");t=new Ft}t.copy(e);if(r>this.radius*this.radius){t.sub(this.center).normalize();t.multiplyScalar(this.radius).add(this.center)}return t},getBoundingBox:function(e){if(void 0===e){console.warn("THREE.Sphere: .getBoundingBox() target is now required");e=new qt}e.set(this.center,this.center);e.expandByScalar(this.radius);return e},applyMatrix4:function(e){this.center.applyMatrix4(e);this.radius=this.radius*e.getMaxScaleOnAxis();return this},translate:function(e){this.center.add(e);return this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});function Zt(e,t){this.normal=void 0!==e?e:new Ft(1,0,0);this.constant=void 0!==t?t:0}Object.assign(Zt.prototype,{set:function(e,t){this.normal.copy(e);this.constant=t;return this},setComponents:function(e,t,r,n){this.normal.set(e,t,r);this.constant=n;return this},setFromNormalAndCoplanarPoint:function(e,t){this.normal.copy(e);this.constant=-t.dot(this.normal);return this},setFromCoplanarPoints:function(){var e=new Ft;var t=new Ft;return function r(n,i,a){var o=e.subVectors(a,i).cross(t.subVectors(n,i)).normalize();this.setFromNormalAndCoplanarPoint(o,n);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.normal.copy(e.normal);this.constant=e.constant;return this},normalize:function(){var e=1/this.normal.length();this.normal.multiplyScalar(e);this.constant*=e;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){if(void 0===t){console.warn("THREE.Plane: .projectPoint() target is now required");t=new Ft}return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Ft;return function t(r,n){if(void 0===n){console.warn("THREE.Plane: .intersectLine() target is now required");n=new Ft}var i=r.delta(e);var a=this.normal.dot(i);if(0===a){if(0===this.distanceToPoint(r.start))return n.copy(r.start);return}var o=-(r.start.dot(this.normal)+this.constant)/a;if(o<0||o>1)return;return n.copy(i).multiplyScalar(o).add(r.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);var r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){if(void 0===e){console.warn("THREE.Plane: .coplanarPoint() target is now required");e=new Ft}return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Ft;var t=new Gt;return function r(n,i){var a=i||t.getNormalMatrix(n);var o=this.coplanarPoint(e).applyMatrix4(n);var s=this.normal.applyMatrix3(a).normalize();this.constant=-o.dot(s);return this}}(),translate:function(e){this.constant-=e.dot(this.normal);return this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});function Jt(e,t,r,n,i,a){this.planes=[void 0!==e?e:new Zt,void 0!==t?t:new Zt,void 0!==r?r:new Zt,void 0!==n?n:new Zt,void 0!==i?i:new Zt,void 0!==a?a:new Zt]}Object.assign(Jt.prototype,{set:function(e,t,r,n,i,a){var o=this.planes;o[0].copy(e);o[1].copy(t);o[2].copy(r);o[3].copy(n);o[4].copy(i);o[5].copy(a);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){var t=this.planes;for(var r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes;var r=e.elements;var n=r[0],i=r[1],a=r[2],o=r[3];var s=r[4],l=r[5],c=r[6],u=r[7];var h=r[8],f=r[9],p=r[10],d=r[11];var m=r[12],v=r[13],g=r[14],y=r[15];t[0].setComponents(o-n,u-s,d-h,y-m).normalize();t[1].setComponents(o+n,u+s,d+h,y+m).normalize();t[2].setComponents(o+i,u+l,d+f,y+v).normalize();t[3].setComponents(o-i,u-l,d-f,y-v).normalize();t[4].setComponents(o-a,u-c,d-p,y-g).normalize();t[5].setComponents(o+a,u+c,d+p,y+g).normalize();return this},intersectsObject:function(){var e=new Yt;return function t(r){var n=r.geometry;null===n.boundingSphere&&n.computeBoundingSphere();e.copy(n.boundingSphere).applyMatrix4(r.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Yt;return function t(r){e.center.set(0,0,0);e.radius=.7071067811865476;e.applyMatrix4(r.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes;var r=e.center;var n=-e.radius;for(var i=0;i<6;i++){var a=t[i].distanceToPoint(r);if(a<n)return false}return true},intersectsBox:function(){var e=new Ft,t=new Ft;return function r(n){var i=this.planes;for(var a=0;a<6;a++){var o=i[a];e.x=o.normal.x>0?n.min.x:n.max.x;t.x=o.normal.x>0?n.max.x:n.min.x;e.y=o.normal.y>0?n.min.y:n.max.y;t.y=o.normal.y>0?n.max.y:n.min.y;e.z=o.normal.z>0?n.min.z:n.max.z;t.z=o.normal.z>0?n.max.z:n.min.z;var s=o.distanceToPoint(e);var l=o.distanceToPoint(t);if(s<0&&l<0)return false}return true}}(),containsPoint:function(e){var t=this.planes;for(var r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return false;return true}});var Qt="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n";var Kt="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";var $t="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n";var er="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";var tr="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";var rr="\nvec3 transformed = vec3( position );\n";var nr="\nvec3 objectNormal = vec3( normal );\n";var ir="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";var ar="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";var or="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n";var sr="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";var lr="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";var cr="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";var ur="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";var hr="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";var fr="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var pr="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";var dr="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n";var mr="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";var vr="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n";var gr="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";var yr="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";var xr="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n";var br="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";var _r="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n";var wr="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n";var Sr="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";var Tr="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";var Mr="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";var Er="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";var Ar="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif";var Rr="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n";var Pr="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";var Cr="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n";var Lr="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n";var Or="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";var Ir="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";var Br="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";var Ur="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n";var Dr="#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";var kr="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";var Nr="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";var Fr="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n";var Gr="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n";var zr="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n";var Hr="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n";var Vr="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n";var jr="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif";var Wr="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";var Xr="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";var qr="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n";var Yr="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n";var Zr="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";var Jr="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n";var Qr="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n";var Kr="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n";var $r="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";var en="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";var tn="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";var rn="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";var nn="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n";var an="#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";var on="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\t\tscale *= float( gl_FrontFacing ) * 2.0 - 1.0;\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";var sn="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";var ln="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";var cn="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n";var un="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n";var hn="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n";var fn="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n";var pn="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";var dn="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";var mn="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";var vn="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";var gn="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";var yn="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";var xn="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";var bn="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n";var _n="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";var wn="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";var Sn="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";var Tn="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n";var Mn="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";var En="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";var An="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n";var Rn="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif";var Pn="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";var Cn="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";var Ln="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";var On="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n";var In="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n";var Bn="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n";var Un="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";var Dn="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";var kn="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n";var Nn="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n";var Fn="uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n";var Gn="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";var zn="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var Hn="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n";var Vn="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var jn="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n";var Wn="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var Xn="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var qn="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var Yn="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var Zn="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var Jn="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var Qn="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n";var Kn="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n";var $n="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var ei="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var ti="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n";var ri="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var ni={alphamap_fragment:Qt,alphamap_pars_fragment:Kt,alphatest_fragment:$t,aomap_fragment:er,aomap_pars_fragment:tr,begin_vertex:rr,beginnormal_vertex:nr,bsdfs:ir,bumpmap_pars_fragment:ar,clipping_planes_fragment:or,clipping_planes_pars_fragment:sr,clipping_planes_pars_vertex:lr,clipping_planes_vertex:cr,color_fragment:ur,color_pars_fragment:hr,color_pars_vertex:fr,color_vertex:pr,common:dr,cube_uv_reflection_fragment:mr,defaultnormal_vertex:vr,displacementmap_pars_vertex:gr,displacementmap_vertex:yr,emissivemap_fragment:xr,emissivemap_pars_fragment:br,encodings_fragment:_r,encodings_pars_fragment:wr,envmap_fragment:Sr,envmap_pars_fragment:Tr,envmap_pars_vertex:Mr,envmap_vertex:Er,fog_vertex:Ar,fog_pars_vertex:Rr,fog_fragment:Pr,fog_pars_fragment:Cr,gradientmap_pars_fragment:Lr,lightmap_fragment:Or,lightmap_pars_fragment:Ir,lights_lambert_vertex:Br,lights_pars_begin:Ur,lights_pars_maps:Dr,lights_phong_fragment:kr,lights_phong_pars_fragment:Nr,lights_physical_fragment:Fr,lights_physical_pars_fragment:Gr,lights_fragment_begin:zr,lights_fragment_maps:Hr,lights_fragment_end:Vr,logdepthbuf_fragment:jr,logdepthbuf_pars_fragment:Wr,logdepthbuf_pars_vertex:Xr,logdepthbuf_vertex:qr,map_fragment:Yr,map_pars_fragment:Zr,map_particle_fragment:Jr,map_particle_pars_fragment:Qr,metalnessmap_fragment:Kr,metalnessmap_pars_fragment:$r,morphnormal_vertex:en,morphtarget_pars_vertex:tn,morphtarget_vertex:rn,normal_fragment_begin:nn,normal_fragment_maps:an,normalmap_pars_fragment:on,packing:sn,premultiplied_alpha_fragment:ln,project_vertex:cn,dithering_fragment:un,dithering_pars_fragment:hn,roughnessmap_fragment:fn,roughnessmap_pars_fragment:pn,shadowmap_pars_fragment:dn,shadowmap_pars_vertex:mn,shadowmap_vertex:vn,shadowmask_pars_fragment:gn,skinbase_vertex:yn,skinning_pars_vertex:xn,skinning_vertex:bn,skinnormal_vertex:_n,specularmap_fragment:wn,specularmap_pars_fragment:Sn,tonemapping_fragment:Tn,tonemapping_pars_fragment:Mn,uv_pars_fragment:En,uv_pars_vertex:An,uv_vertex:Rn,uv2_pars_fragment:Pn,uv2_pars_vertex:Cn,uv2_vertex:Ln,worldpos_vertex:On,cube_frag:In,cube_vert:Bn,depth_frag:Un,depth_vert:Dn,distanceRGBA_frag:kn,distanceRGBA_vert:Nn,equirect_frag:Fn,equirect_vert:Gn,linedashed_frag:zn,linedashed_vert:Hn,meshbasic_frag:Vn,meshbasic_vert:jn,meshlambert_frag:Wn,meshlambert_vert:Xn,meshphong_frag:qn,meshphong_vert:Yn,meshphysical_frag:Zn,meshphysical_vert:Jn,normal_frag:Qn,normal_vert:Kn,points_frag:$n,points_vert:ei,shadow_frag:ti,shadow_vert:ri};var ii={merge:function(e){var t={};for(var r=0;r<e.length;r++){var n=this.clone(e[r]);for(var i in n)t[i]=n[i]}return t},clone:function(e){var t={};for(var r in e){t[r]={};for(var n in e[r]){var i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}}return t}};var ai={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function oi(e,t,r){if(void 0===t&&void 0===r)return this.set(e);return this.setRGB(e,t,r)}Object.assign(oi.prototype,{isColor:true,r:1,g:1,b:1,set:function(e){e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e);return this},setScalar:function(e){this.r=e;this.g=e;this.b=e;return this},setHex:function(e){e=Math.floor(e);this.r=(e>>16&255)/255;this.g=(e>>8&255)/255;this.b=(255&e)/255;return this},setRGB:function(e,t,r){this.r=e;this.g=t;this.b=r;return this},setHSL:function(){function e(e,t,r){r<0&&(r+=1);r>1&&(r-=1);if(r<1/6)return e+6*(t-e)*r;if(r<.5)return t;if(r<2/3)return e+6*(t-e)*(2/3-r);return e}return function t(r,n,i){r=Ut.euclideanModulo(r,1);n=Ut.clamp(n,0,1);i=Ut.clamp(i,0,1);if(0===n)this.r=this.g=this.b=i;else{var a=i<=.5?i*(1+n):i+n-i*n;var o=2*i-a;this.r=e(o,a,r+1/3);this.g=e(o,a,r);this.b=e(o,a,r-1/3)}return this}}(),setStyle:function(e){function t(t){if(void 0===t)return;parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n;var i=r[1];var a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(255,parseInt(n[1],10))/255;this.g=Math.min(255,parseInt(n[2],10))/255;this.b=Math.min(255,parseInt(n[3],10))/255;t(n[5]);return this}if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(100,parseInt(n[1],10))/100;this.g=Math.min(100,parseInt(n[2],10))/100;this.b=Math.min(100,parseInt(n[3],10))/100;t(n[5]);return this}break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360;var s=parseInt(n[2],10)/100;var l=parseInt(n[3],10)/100;t(n[5]);return this.setHSL(o,s,l)}break}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c=r[1];var u=c.length;if(3===u){this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255;this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255;this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255;return this}if(6===u){this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255;this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255;this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255;return this}}if(e&&e.length>0){var c=ai[e];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){this.r=e.r;this.g=e.g;this.b=e.b;return this},copyGammaToLinear:function(e,t){void 0===t&&(t=2);this.r=Math.pow(e.r,t);this.g=Math.pow(e.g,t);this.b=Math.pow(e.b,t);return this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;this.r=Math.pow(e.r,r);this.g=Math.pow(e.g,r);this.b=Math.pow(e.b,r);return this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;this.r=e*e;this.g=t*t;this.b=r*r;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){if(void 0===e){console.warn("THREE.Color: .getHSL() target is now required");e={h:0,s:0,l:0}}var t=this.r,r=this.g,n=this.b;var i=Math.max(t,r,n);var a=Math.min(t,r,n);var o,s;var l=(a+i)/2;if(a===i){o=0;s=0}else{var c=i-a;s=l<=.5?c/(i+a):c/(2-i-a);switch(i){case t:o=(r-n)/c+(r<n?6:0);break;case r:o=(n-t)/c+2;break;case n:o=(t-r)/c+4;break}o/=6}e.h=o;e.s=s;e.l=l;return e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,r,n){this.getHSL(e);e.h+=t;e.s+=r;e.l+=n;this.setHSL(e.h,e.s,e.l);return this}}(),add:function(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;return this},addColors:function(e,t){this.r=e.r+t.r;this.g=e.g+t.g;this.b=e.b+t.b;return this},addScalar:function(e){this.r+=e;this.g+=e;this.b+=e;return this},sub:function(e){this.r=Math.max(0,this.r-e.r);this.g=Math.max(0,this.g-e.g);this.b=Math.max(0,this.b-e.b);return this},multiply:function(e){this.r*=e.r;this.g*=e.g;this.b*=e.b;return this},multiplyScalar:function(e){this.r*=e;this.g*=e;this.b*=e;return this},lerp:function(e,t){this.r+=(e.r-this.r)*t;this.g+=(e.g-this.g)*t;this.b+=(e.b-this.b)*t;return this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){void 0===t&&(t=0);this.r=e[t];this.g=e[t+1];this.b=e[t+2];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.r;e[t+1]=this.g;e[t+2]=this.b;return e},toJSON:function(){return this.getHex()}});var si={common:{diffuse:{value:new oi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Gt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new oi(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new oi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Gt}}};var li={basic:{uniforms:ii.merge([si.common,si.specularmap,si.envmap,si.aomap,si.lightmap,si.fog]),vertexShader:ni.meshbasic_vert,fragmentShader:ni.meshbasic_frag},lambert:{uniforms:ii.merge([si.common,si.specularmap,si.envmap,si.aomap,si.lightmap,si.emissivemap,si.fog,si.lights,{emissive:{value:new oi(0)}}]),vertexShader:ni.meshlambert_vert,fragmentShader:ni.meshlambert_frag},phong:{uniforms:ii.merge([si.common,si.specularmap,si.envmap,si.aomap,si.lightmap,si.emissivemap,si.bumpmap,si.normalmap,si.displacementmap,si.gradientmap,si.fog,si.lights,{emissive:{value:new oi(0)},specular:{value:new oi(1118481)},shininess:{value:30}}]),vertexShader:ni.meshphong_vert,fragmentShader:ni.meshphong_frag},standard:{uniforms:ii.merge([si.common,si.envmap,si.aomap,si.lightmap,si.emissivemap,si.bumpmap,si.normalmap,si.displacementmap,si.roughnessmap,si.metalnessmap,si.fog,si.lights,{emissive:{value:new oi(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ni.meshphysical_vert,fragmentShader:ni.meshphysical_frag},points:{uniforms:ii.merge([si.points,si.fog]),vertexShader:ni.points_vert,fragmentShader:ni.points_frag},dashed:{uniforms:ii.merge([si.common,si.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ni.linedashed_vert,fragmentShader:ni.linedashed_frag},depth:{uniforms:ii.merge([si.common,si.displacementmap]),vertexShader:ni.depth_vert,fragmentShader:ni.depth_frag},normal:{uniforms:ii.merge([si.common,si.bumpmap,si.normalmap,si.displacementmap,{opacity:{value:1}}]),vertexShader:ni.normal_vert,fragmentShader:ni.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ni.cube_vert,fragmentShader:ni.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ni.equirect_vert,fragmentShader:ni.equirect_frag},distanceRGBA:{uniforms:ii.merge([si.common,si.displacementmap,{referencePosition:{value:new Ft},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ni.distanceRGBA_vert,fragmentShader:ni.distanceRGBA_frag},shadow:{uniforms:ii.merge([si.lights,si.fog,{color:{value:new oi(0)},opacity:{value:1}}]),vertexShader:ni.shadow_vert,fragmentShader:ni.shadow_frag}};li.physical={uniforms:ii.merge([li.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ni.meshphysical_vert,fragmentShader:ni.meshphysical_frag};function ci(e){var t=new WeakMap;function r(t,r){var n=t.array;var i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;var a=e.createBuffer();e.bindBuffer(r,a);e.bufferData(r,n,i);t.onUploadCallback();var o=e.FLOAT;n instanceof Float32Array?o=e.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?o=e.UNSIGNED_SHORT:n instanceof Int16Array?o=e.SHORT:n instanceof Uint32Array?o=e.UNSIGNED_INT:n instanceof Int32Array?o=e.INT:n instanceof Int8Array?o=e.BYTE:n instanceof Uint8Array&&(o=e.UNSIGNED_BYTE);return{buffer:a,type:o,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}function n(t,r,n){var i=r.array;var a=r.updateRange;e.bindBuffer(n,t);if(false===r.dynamic)e.bufferData(n,i,e.STATIC_DRAW);else if(-1===a.count)e.bufferSubData(n,0,i);else if(0===a.count)console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.");else{e.bufferSubData(n,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count));a.count=-1}}function i(e){e.isInterleavedBufferAttribute&&(e=e.data);return t.get(e)}function a(r){r.isInterleavedBufferAttribute&&(r=r.data);var n=t.get(r);if(n){e.deleteBuffer(n.buffer);t.delete(r)}}function o(e,i){e.isInterleavedBufferAttribute&&(e=e.data);var a=t.get(e);if(void 0===a)t.set(e,r(e,i));else if(a.version<e.version){n(a.buffer,e,i);a.version=e.version}}return{get:i,remove:a,update:o}}function ui(e,t,r,n){this._x=e||0;this._y=t||0;this._z=r||0;this._order=n||ui.DefaultOrder}ui.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];ui.DefaultOrder="XYZ";Object.defineProperties(ui.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e;this.onChangeCallback()}}});Object.assign(ui.prototype,{isEuler:true,set:function(e,t,r,n){this._x=e;this._y=t;this._z=r;this._order=n||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){this._x=e._x;this._y=e._y;this._z=e._z;this._order=e._order;this.onChangeCallback();return this},setFromRotationMatrix:function(e,t,r){var n=Ut.clamp;var i=e.elements;var a=i[0],o=i[4],s=i[8];var l=i[1],c=i[5],u=i[9];var h=i[2],f=i[6],p=i[10];t=t||this._order;if("XYZ"===t){this._y=Math.asin(n(s,-1,1));if(Math.abs(s)<.99999){this._x=Math.atan2(-u,p);this._z=Math.atan2(-o,a)}else{this._x=Math.atan2(f,c);this._z=0}}else if("YXZ"===t){this._x=Math.asin(-n(u,-1,1));if(Math.abs(u)<.99999){this._y=Math.atan2(s,p);this._z=Math.atan2(l,c)}else{this._y=Math.atan2(-h,a);this._z=0}}else if("ZXY"===t){this._x=Math.asin(n(f,-1,1));if(Math.abs(f)<.99999){this._y=Math.atan2(-h,p);this._z=Math.atan2(-o,c)}else{this._y=0;this._z=Math.atan2(l,a)}}else if("ZYX"===t){this._y=Math.asin(-n(h,-1,1));if(Math.abs(h)<.99999){this._x=Math.atan2(f,p);this._z=Math.atan2(l,a)}else{this._x=0;this._z=Math.atan2(-o,c)}}else if("YZX"===t){this._z=Math.asin(n(l,-1,1));if(Math.abs(l)<.99999){this._x=Math.atan2(-u,c);this._y=Math.atan2(-h,a)}else{this._x=0;this._y=Math.atan2(s,p)}}else if("XZY"===t){this._z=Math.asin(-n(o,-1,1));if(Math.abs(o)<.99999){this._x=Math.atan2(f,c);this._y=Math.atan2(s,a)}else{this._x=Math.atan2(-u,p);this._y=0}}else console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t);this._order=t;false!==r&&this.onChangeCallback();return this},setFromQuaternion:function(){var e=new kt;return function t(r,n,i){e.makeRotationFromQuaternion(r);return this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Nt;return function t(r){e.setFromEuler(this);return this.setFromQuaternion(e,r)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){this._x=e[0];this._y=e[1];this._z=e[2];void 0!==e[3]&&(this._order=e[3]);this.onChangeCallback();return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._order;return e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Ft(this._x,this._y,this._z)},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function hi(){this.mask=1}Object.assign(hi.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var fi=0;function pi(){Object.defineProperty(this,"id",{value:fi++});this.uuid=Ut.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=pi.DefaultUp.clone();var e=new Ft;var t=new ui;var r=new Nt;var n=new Ft(1,1,1);function i(){r.setFromEuler(t,false)}function a(){t.setFromQuaternion(r,void 0,false)}t.onChange(i);r.onChange(a);Object.defineProperties(this,{position:{enumerable:true,value:e},rotation:{enumerable:true,value:t},quaternion:{enumerable:true,value:r},scale:{enumerable:true,value:n},modelViewMatrix:{value:new kt},normalMatrix:{value:new Gt}});this.matrix=new kt;this.matrixWorld=new kt;this.matrixAutoUpdate=pi.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=false;this.layers=new hi;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.renderOrder=0;this.userData={}}pi.DefaultUp=new Ft(0,1,0);pi.DefaultMatrixAutoUpdate=true;pi.prototype=Object.assign(Object.create(n.prototype),{constructor:pi,isObject3D:true,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){this.quaternion.premultiply(e);return this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,true)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Nt;return function t(r,n){e.setFromAxisAngle(r,n);this.quaternion.multiply(e);return this}}(),rotateOnWorldAxis:function(){var e=new Nt;return function t(r,n){e.setFromAxisAngle(r,n);this.quaternion.premultiply(e);return this}}(),rotateX:function(){var e=new Ft(1,0,0);return function t(r){return this.rotateOnAxis(e,r)}}(),rotateY:function(){var e=new Ft(0,1,0);return function t(r){return this.rotateOnAxis(e,r)}}(),rotateZ:function(){var e=new Ft(0,0,1);return function t(r){return this.rotateOnAxis(e,r)}}(),translateOnAxis:function(){var e=new Ft;return function t(r,n){e.copy(r).applyQuaternion(this.quaternion);this.position.add(e.multiplyScalar(n));return this}}(),translateX:function(){var e=new Ft(1,0,0);return function t(r){return this.translateOnAxis(e,r)}}(),translateY:function(){var e=new Ft(0,1,0);return function t(r){return this.translateOnAxis(e,r)}}(),translateZ:function(){var e=new Ft(0,0,1);return function t(r){return this.translateOnAxis(e,r)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new kt;return function t(r){return r.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new kt;var t=new Ft;return function r(n,i,a){n.isVector3?t.copy(n):t.set(n,i,a);this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up);this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}if(e===this){console.error("THREE.Object3D.add: object can't be added as a child of itself.",e);return this}if(e&&e.isObject3D){null!==e.parent&&e.parent.remove(e);e.parent=this;e.dispatchEvent({type:"added"});this.children.push(e)}else console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e);return this},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);if(-1!==r){e.parent=null;e.dispatchEvent({type:"removed"});this.children.splice(r,1)}return this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r];var a=i.getObjectByProperty(e,t);if(void 0!==a)return a}return},getWorldPosition:function(e){if(void 0===e){console.warn("THREE.Object3D: .getWorldPosition() target is now required");e=new Ft}this.updateMatrixWorld(true);return e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Ft;var t=new Ft;return function r(n){if(void 0===n){console.warn("THREE.Object3D: .getWorldQuaternion() target is now required");n=new Nt}this.updateMatrixWorld(true);this.matrixWorld.decompose(e,n,t);return n}}(),getWorldScale:function(){var e=new Ft;var t=new Nt;return function r(n){if(void 0===n){console.warn("THREE.Object3D: .getWorldScale() target is now required");n=new Ft}this.updateMatrixWorld(true);this.matrixWorld.decompose(e,t,n);return n}}(),getWorldDirection:function(){var e=new Nt;return function t(r){if(void 0===r){console.warn("THREE.Object3D: .getWorldDirection() target is now required");r=new Ft}this.getWorldQuaternion(e);return r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);var t=this.children;for(var r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(false===this.visible)return;e(this);var t=this.children;for(var r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)},traverseAncestors:function(e){var t=this.parent;if(null!==t){e(t);t.traverseAncestors(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||e){null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);this.matrixWorldNeedsUpdate=false;e=true}var t=this.children;for(var r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"===typeof e;var r={};if(t){e={geometries:{},materials:{},textures:{},images:{},shapes:{}};r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}}var n={};n.uuid=this.uuid;n.type=this.type;""!==this.name&&(n.name=this.name);true===this.castShadow&&(n.castShadow=true);true===this.receiveShadow&&(n.receiveShadow=true);false===this.visible&&(n.visible=false);false===this.frustumCulled&&(n.frustumCulled=false);0!==this.renderOrder&&(n.renderOrder=this.renderOrder);"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData);n.matrix=this.matrix.toArray();false===this.matrixAutoUpdate&&(n.matrixAutoUpdate=false);function i(t,r){void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e));return r.uuid}if(void 0!==this.geometry){n.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var c=o[s];i(e.shapes,c)}else i(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(var s=0,l=this.material.length;s<l;s++)u.push(i(e.materials,this.material[s]));n.material=u}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(var s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries);var f=m(e.materials);var p=m(e.textures);var d=m(e.images);var o=m(e.shapes);h.length>0&&(r.geometries=h);f.length>0&&(r.materials=f);p.length>0&&(r.textures=p);d.length>0&&(r.images=d);o.length>0&&(r.shapes=o)}r.object=n;return r;function m(e){var t=[];for(var r in e){var n=e[r];delete n.metadata;t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){void 0===t&&(t=true);this.name=e.name;this.up.copy(e.up);this.position.copy(e.position);this.quaternion.copy(e.quaternion);this.scale.copy(e.scale);this.matrix.copy(e.matrix);this.matrixWorld.copy(e.matrixWorld);this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate;this.layers.mask=e.layers.mask;this.visible=e.visible;this.castShadow=e.castShadow;this.receiveShadow=e.receiveShadow;this.frustumCulled=e.frustumCulled;this.renderOrder=e.renderOrder;this.userData=JSON.parse(JSON.stringify(e.userData));if(true===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}});function di(){pi.call(this);this.type="Camera";this.matrixWorldInverse=new kt;this.projectionMatrix=new kt}di.prototype=Object.assign(Object.create(pi.prototype),{constructor:di,isCamera:true,copy:function(e,t){pi.prototype.copy.call(this,e,t);this.matrixWorldInverse.copy(e.matrixWorldInverse);this.projectionMatrix.copy(e.projectionMatrix);return this},getWorldDirection:function(){var e=new Nt;return function t(r){if(void 0===r){console.warn("THREE.Camera: .getWorldDirection() target is now required");r=new Ft}this.getWorldQuaternion(e);return r.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){pi.prototype.updateMatrixWorld.call(this,e);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});function mi(e,t,r,n,i,a){di.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=e;this.right=t;this.top=r;this.bottom=n;this.near=void 0!==i?i:.1;this.far=void 0!==a?a:2e3;this.updateProjectionMatrix()}mi.prototype=Object.assign(Object.create(di.prototype),{constructor:mi,isOrthographicCamera:true,copy:function(e,t){di.prototype.copy.call(this,e,t);this.left=e.left;this.right=e.right;this.top=e.top;this.bottom=e.bottom;this.near=e.near;this.far=e.far;this.zoom=e.zoom;this.view=null===e.view?null:Object.assign({},e.view);return this},setViewOffset:function(e,t,r,n,i,a){null===this.view&&(this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=true;this.view.fullWidth=e;this.view.fullHeight=t;this.view.offsetX=r;this.view.offsetY=n;this.view.width=i;this.view.height=a;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=false);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom);var t=(this.top-this.bottom)/(2*this.zoom);var r=(this.right+this.left)/2;var n=(this.top+this.bottom)/2;var i=r-e;var a=r+e;var o=n+t;var s=n-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth);var c=this.zoom/(this.view.height/this.view.fullHeight);var u=(this.right-this.left)/this.view.width;var h=(this.top-this.bottom)/this.view.height;i+=u*(this.view.offsetX/l);a=i+u*(this.view.width/l);o-=h*(this.view.offsetY/c);s=o-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far)},toJSON:function(e){var t=pi.prototype.toJSON.call(this,e);t.object.zoom=this.zoom;t.object.left=this.left;t.object.right=this.right;t.object.top=this.top;t.object.bottom=this.bottom;t.object.near=this.near;t.object.far=this.far;null!==this.view&&(t.object.view=Object.assign({},this.view));return t}});function vi(e,t,r,n,i,a){this.a=e;this.b=t;this.c=r;this.normal=n&&n.isVector3?n:new Ft;this.vertexNormals=Array.isArray(n)?n:[];this.color=i&&i.isColor?i:new oi;this.vertexColors=Array.isArray(i)?i:[];this.materialIndex=void 0!==a?a:0}Object.assign(vi.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.normal.copy(e.normal);this.color.copy(e.color);this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var gi=0;function yi(){Object.defineProperty(this,"id",{value:gi+=2});this.uuid=Ut.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.elementsNeedUpdate=false;this.verticesNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.groupsNeedUpdate=false}yi.prototype=Object.assign(Object.create(n.prototype),{constructor:yi,isGeometry:true,applyMatrix:function(e){var t=(new Gt).getNormalMatrix(e);for(var r=0,n=this.vertices.length;r<n;r++){var i=this.vertices[r];i.applyMatrix4(e)}for(var r=0,n=this.faces.length;r<n;r++){var a=this.faces[r];a.normal.applyMatrix3(t).normalize();for(var o=0,s=a.vertexNormals.length;o<s;o++)a.vertexNormals[o].applyMatrix3(t).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.verticesNeedUpdate=true;this.normalsNeedUpdate=true;return this},rotateX:function(){var e=new kt;return function t(r){e.makeRotationX(r);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new kt;return function t(r){e.makeRotationY(r);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new kt;return function t(r){e.makeRotationZ(r);this.applyMatrix(e);return this}}(),translate:function(){var e=new kt;return function t(r,n,i){e.makeTranslation(r,n,i);this.applyMatrix(e);return this}}(),scale:function(){var e=new kt;return function t(r,n,i){e.makeScale(r,n,i);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new pi;return function t(r){e.lookAt(r);e.updateMatrix();this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this;var r=null!==e.index?e.index.array:void 0;var n=e.attributes;var i=n.position.array;var a=void 0!==n.normal?n.normal.array:void 0;var o=void 0!==n.color?n.color.array:void 0;var s=void 0!==n.uv?n.uv.array:void 0;var l=void 0!==n.uv2?n.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);var c=[];var u=[];var h=[];for(var f=0,p=0;f<i.length;f+=3,p+=2){t.vertices.push(new Ft(i[f],i[f+1],i[f+2]));void 0!==a&&c.push(new Ft(a[f],a[f+1],a[f+2]));void 0!==o&&t.colors.push(new oi(o[f],o[f+1],o[f+2]));void 0!==s&&u.push(new Dt(s[p],s[p+1]));void 0!==l&&h.push(new Dt(l[p],l[p+1]))}function d(e,r,n,i){var f=void 0!==a?[c[e].clone(),c[r].clone(),c[n].clone()]:[];var p=void 0!==o?[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()]:[];var d=new vi(e,r,n,f,p,i);t.faces.push(d);void 0!==s&&t.faceVertexUvs[0].push([u[e].clone(),u[r].clone(),u[n].clone()]);void 0!==l&&t.faceVertexUvs[1].push([h[e].clone(),h[r].clone(),h[n].clone()])}var m=e.groups;if(m.length>0)for(var f=0;f<m.length;f++){var v=m[f];var g=v.start;var y=v.count;for(var p=g,x=g+y;p<x;p+=3)void 0!==r?d(r[p],r[p+1],r[p+2],v.materialIndex):d(p,p+1,p+2,v.materialIndex)}else if(void 0!==r)for(var f=0;f<r.length;f+=3)d(r[f],r[f+1],r[f+2]);else for(var f=0;f<i.length/3;f+=3)d(f,f+1,f+2);this.computeFaceNormals();null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone());null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone());return this},center:function(){var e=new Ft;return function t(){this.computeBoundingBox();this.boundingBox.getCenter(e).negate();this.translate(e.x,e.y,e.z);return this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center;var t=this.boundingSphere.radius;var r=0===t?1:1/t;var n=new kt;n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1);this.applyMatrix(n);return this},computeFaceNormals:function(){var e=new Ft,t=new Ft;for(var r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];var a=this.vertices[i.a];var o=this.vertices[i.b];var s=this.vertices[i.c];e.subVectors(s,o);t.subVectors(a,o);e.cross(t);e.normalize();i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=true);var t,r,n,i,a,o;o=new Array(this.vertices.length);for(t=0,r=this.vertices.length;t<r;t++)o[t]=new Ft;if(e){var s,l,c;var u=new Ft,h=new Ft;for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];s=this.vertices[a.a];l=this.vertices[a.b];c=this.vertices[a.c];u.subVectors(c,l);h.subVectors(s,l);u.cross(h);o[a.a].add(u);o[a.b].add(u);o[a.c].add(u)}}else{this.computeFaceNormals();for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];o[a.a].add(a.normal);o[a.b].add(a.normal);o[a.c].add(a.normal)}}for(t=0,r=this.vertices.length;t<r;t++)o[t].normalize();for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];var f=a.vertexNormals;if(3===f.length){f[0].copy(o[a.a]);f[1].copy(o[a.b]);f[2].copy(o[a.c])}else{f[0]=o[a.a].clone();f[1]=o[a.b].clone();f[2]=o[a.c].clone()}}this.faces.length>0&&(this.normalsNeedUpdate=true)},computeFlatVertexNormals:function(){var e,t,r;this.computeFaceNormals();for(e=0,t=this.faces.length;e<t;e++){r=this.faces[e];var n=r.vertexNormals;if(3===n.length){n[0].copy(r.normal);n[1].copy(r.normal);n[2].copy(r.normal)}else{n[0]=r.normal.clone();n[1]=r.normal.clone();n[2]=r.normal.clone()}}this.faces.length>0&&(this.normalsNeedUpdate=true)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone();i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone()}var a=new yi;a.faces=this.faces;for(e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals;var s=this.morphNormals[e].vertexNormals;var l,c;for(r=0,n=this.faces.length;r<n;r++){l=new Ft;c={a:new Ft,b:new Ft,c:new Ft};o.push(l);s.push(c)}}var u=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices;a.computeFaceNormals();a.computeVertexNormals();var l,c;for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r];l=u.faceNormals[r];c=u.vertexNormals[r];l.copy(i.normal);c.a.copy(i.vertexNormals[0]);c.b.copy(i.vertexNormals[1]);c.c.copy(i.vertexNormals[2])}}for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r];i.normal=i.__originalFaceNormal;i.vertexNormals=i.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new qt);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Yt);this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var n,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0],h=this.colors,f=e.colors;void 0===r&&(r=0);void 0!==t&&(n=(new Gt).getNormalMatrix(t));for(var p=0,d=o.length;p<d;p++){var m=o[p];var v=m.clone();void 0!==t&&v.applyMatrix4(t);a.push(v)}for(var p=0,d=f.length;p<d;p++)h.push(f[p].clone());for(p=0,d=l.length;p<d;p++){var g=l[p],y,x,b,_=g.vertexNormals,w=g.vertexColors;y=new vi(g.a+i,g.b+i,g.c+i);y.normal.copy(g.normal);void 0!==n&&y.normal.applyMatrix3(n).normalize();for(var S=0,T=_.length;S<T;S++){x=_[S].clone();void 0!==n&&x.applyMatrix3(n).normalize();y.vertexNormals.push(x)}y.color.copy(g.color);for(var S=0,T=w.length;S<T;S++){b=w[S];y.vertexColors.push(b.clone())}y.materialIndex=g.materialIndex+r;s.push(y)}for(p=0,d=u.length;p<d;p++){var M=u[p],E=[];if(void 0===M)continue;for(var S=0,T=M.length;S<T;S++)E.push(M[S].clone());c.push(E)}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix();this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={};var t=[],r=[];var n,i;var a=4;var o=Math.pow(10,a);var s,l,c;var u,h,f;for(s=0,l=this.vertices.length;s<l;s++){n=this.vertices[s];i=Math.round(n.x*o)+"_"+Math.round(n.y*o)+"_"+Math.round(n.z*o);if(void 0===e[i]){e[i]=s;t.push(this.vertices[s]);r[s]=t.length-1}else r[s]=r[e[i]]}var p=[];for(s=0,l=this.faces.length;s<l;s++){c=this.faces[s];c.a=r[c.a];c.b=r[c.b];c.c=r[c.c];u=[c.a,c.b,c.c];for(var d=0;d<3;d++)if(u[d]===u[(d+1)%3]){p.push(s);break}}for(s=p.length-1;s>=0;s--){var m=p[s];this.faces.splice(m,1);for(h=0,f=this.faceVertexUvs.length;h<f;h++)this.faceVertexUvs[h].splice(m,1)}var v=this.vertices.length-t.length;this.vertices=t;return v},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new Ft(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){var e=this.faces;var t=e.length;for(var r=0;r<t;r++)e[r]._id=r;function n(e,t){return e.materialIndex-t.materialIndex}e.sort(n);var i=this.faceVertexUvs[0];var a=this.faceVertexUvs[1];var o,s;i&&i.length===t&&(o=[]);a&&a.length===t&&(s=[]);for(var r=0;r<t;r++){var l=e[r]._id;o&&o.push(i[l]);s&&s.push(a[l])}o&&(this.faceVertexUvs[0]=o);s&&(this.faceVertexUvs[1]=s)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}var n=[];for(var i=0;i<this.vertices.length;i++){var a=this.vertices[i];n.push(a.x,a.y,a.z)}var o=[];var s=[];var l={};var c=[];var u={};var h=[];var f={};for(var i=0;i<this.faces.length;i++){var p=this.faces[i];var d=true;var m=false;var v=void 0!==this.faceVertexUvs[0][i];var g=p.normal.length()>0;var y=p.vertexNormals.length>0;var x=1!==p.color.r||1!==p.color.g||1!==p.color.b;var b=p.vertexColors.length>0;var _=0;_=M(_,0,0);_=M(_,1,d);_=M(_,2,m);_=M(_,3,v);_=M(_,4,g);_=M(_,5,y);_=M(_,6,x);_=M(_,7,b);o.push(_);o.push(p.a,p.b,p.c);o.push(p.materialIndex);if(v){var w=this.faceVertexUvs[0][i];o.push(R(w[0]),R(w[1]),R(w[2]))}g&&o.push(E(p.normal));if(y){var S=p.vertexNormals;o.push(E(S[0]),E(S[1]),E(S[2]))}x&&o.push(A(p.color));if(b){var T=p.vertexColors;o.push(A(T[0]),A(T[1]),A(T[2]))}}function M(e,t,r){return r?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();if(void 0!==l[t])return l[t];l[t]=s.length/3;s.push(e.x,e.y,e.z);return l[t]}function A(e){var t=e.r.toString()+e.g.toString()+e.b.toString();if(void 0!==u[t])return u[t];u[t]=c.length;c.push(e.getHex());return u[t]}function R(e){var t=e.x.toString()+e.y.toString();if(void 0!==f[t])return f[t];f[t]=h.length/2;h.push(e.x,e.y);return f[t]}e.data={};e.data.vertices=n;e.data.normals=s;c.length>0&&(e.data.colors=c);h.length>0&&(e.data.uvs=[h]);e.data.faces=o;return e},clone:function(){return(new yi).copy(this)},copy:function(e){var t,r,n,i,a,o;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,r=l.length;t<r;t++)this.colors.push(l[t].clone());var c=e.faces;for(t=0,r=c.length;t<r;t++)this.faces.push(c[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var u=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(n=0,i=u.length;n<i;n++){var h=u[n],f=[];for(a=0,o=h.length;a<o;a++){var p=h[a];f.push(p.clone())}this.faceVertexUvs[t].push(f)}}var d=e.morphTargets;for(t=0,r=d.length;t<r;t++){var m={};m.name=d[t].name;if(void 0!==d[t].vertices){m.vertices=[];for(n=0,i=d[t].vertices.length;n<i;n++)m.vertices.push(d[t].vertices[n].clone())}if(void 0!==d[t].normals){m.normals=[];for(n=0,i=d[t].normals.length;n<i;n++)m.normals.push(d[t].normals[n].clone())}this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,r=v.length;t<r;t++){var g={};if(void 0!==v[t].vertexNormals){g.vertexNormals=[];for(n=0,i=v[t].vertexNormals.length;n<i;n++){var y=v[t].vertexNormals[n];var x={};x.a=y.a.clone();x.b=y.b.clone();x.c=y.c.clone();g.vertexNormals.push(x)}}if(void 0!==v[t].faceNormals){g.faceNormals=[];for(n=0,i=v[t].faceNormals.length;n<i;n++)g.faceNormals.push(v[t].faceNormals[n].clone())}this.morphNormals.push(g)}var b=e.skinWeights;for(t=0,r=b.length;t<r;t++)this.skinWeights.push(b[t].clone());var _=e.skinIndices;for(t=0,r=_.length;t<r;t++)this.skinIndices.push(_[t].clone());var w=e.lineDistances;for(t=0,r=w.length;t<r;t++)this.lineDistances.push(w[t]);var S=e.boundingBox;null!==S&&(this.boundingBox=S.clone());var T=e.boundingSphere;null!==T&&(this.boundingSphere=T.clone());this.elementsNeedUpdate=e.elementsNeedUpdate;this.verticesNeedUpdate=e.verticesNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function xi(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="";this.array=e;this.itemSize=t;this.count=void 0!==e?e.length/t:0;this.normalized=true===r;this.dynamic=false;this.updateRange={offset:0,count:-1};this.version=0}Object.defineProperty(xi.prototype,"needsUpdate",{set:function(e){true===e&&this.version++}});Object.assign(xi.prototype,{isBufferAttribute:true,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0;this.array=e;return this},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.name=e.name;this.array=new e.array.constructor(e.array);this.itemSize=e.itemSize;this.count=e.count;this.normalized=e.normalized;this.dynamic=e.dynamic;return this},copyAt:function(e,t,r){e*=this.itemSize;r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){this.array.set(e);return this},copyColorsArray:function(e){var t=this.array,r=0;for(var n=0,i=e.length;n<i;n++){var a=e[n];if(void 0===a){console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n);a=new oi}t[r++]=a.r;t[r++]=a.g;t[r++]=a.b}return this},copyVector2sArray:function(e){var t=this.array,r=0;for(var n=0,i=e.length;n<i;n++){var a=e[n];if(void 0===a){console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n);a=new Dt}t[r++]=a.x;t[r++]=a.y}return this},copyVector3sArray:function(e){var t=this.array,r=0;for(var n=0,i=e.length;n<i;n++){var a=e[n];if(void 0===a){console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n);a=new Ft}t[r++]=a.x;t[r++]=a.y;t[r++]=a.z}return this},copyVector4sArray:function(e){var t=this.array,r=0;for(var n=0,i=e.length;n<i;n++){var a=e[n];if(void 0===a){console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n);a=new Vt}t[r++]=a.x;t[r++]=a.y;t[r++]=a.z;t[r++]=a.w}return this},set:function(e,t){void 0===t&&(t=0);this.array.set(e,t);return this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){this.array[e*this.itemSize]=t;return this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){this.array[e*this.itemSize+1]=t;return this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){this.array[e*this.itemSize+2]=t;return this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){this.array[e*this.itemSize+3]=t;return this},setXY:function(e,t,r){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=r;return this},setXYZ:function(e,t,r,n){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=r;this.array[e+2]=n;return this},setXYZW:function(e,t,r,n,i){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=r;this.array[e+2]=n;this.array[e+3]=i;return this},onUpload:function(e){this.onUploadCallback=e;return this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function bi(e,t,r){xi.call(this,new Int8Array(e),t,r)}bi.prototype=Object.create(xi.prototype);bi.prototype.constructor=bi;function _i(e,t,r){xi.call(this,new Uint8Array(e),t,r)}_i.prototype=Object.create(xi.prototype);_i.prototype.constructor=_i;function wi(e,t,r){xi.call(this,new Uint8ClampedArray(e),t,r)}wi.prototype=Object.create(xi.prototype);wi.prototype.constructor=wi;function Si(e,t,r){xi.call(this,new Int16Array(e),t,r)}Si.prototype=Object.create(xi.prototype);Si.prototype.constructor=Si;function Ti(e,t,r){xi.call(this,new Uint16Array(e),t,r)}Ti.prototype=Object.create(xi.prototype);Ti.prototype.constructor=Ti;function Mi(e,t,r){xi.call(this,new Int32Array(e),t,r)}Mi.prototype=Object.create(xi.prototype);Mi.prototype.constructor=Mi;function Ei(e,t,r){xi.call(this,new Uint32Array(e),t,r)}Ei.prototype=Object.create(xi.prototype);Ei.prototype.constructor=Ei;function Ai(e,t,r){xi.call(this,new Float32Array(e),t,r)}Ai.prototype=Object.create(xi.prototype);Ai.prototype.constructor=Ai;function Ri(e,t,r){xi.call(this,new Float64Array(e),t,r)}Ri.prototype=Object.create(xi.prototype);Ri.prototype.constructor=Ri;function Pi(){this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingBox=null;this.boundingSphere=null;this.verticesNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.uvsNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(Pi.prototype,{computeGroups:function(e){var t;var r=[];var n=void 0;var i=e.faces;for(var a=0;a<i.length;a++){var o=i[a];if(o.materialIndex!==n){n=o.materialIndex;if(void 0!==t){t.count=3*a-t.start;r.push(t)}t={start:3*a,materialIndex:n}}}if(void 0!==t){t.count=3*a-t.start;r.push(t)}this.groups=r},fromGeometry:function(e){var t=e.faces;var r=e.vertices;var n=e.faceVertexUvs;var i=n[0]&&n[0].length>0;var a=n[1]&&n[1].length>0;var o=e.morphTargets;var s=o.length;var l;if(s>0){l=[];for(var c=0;c<s;c++)l[c]=[];this.morphTargets.position=l}var u=e.morphNormals;var h=u.length;var f;if(h>0){f=[];for(var c=0;c<h;c++)f[c]=[];this.morphTargets.normal=f}var p=e.skinIndices;var d=e.skinWeights;var m=p.length===r.length;var v=d.length===r.length;for(var c=0;c<t.length;c++){var g=t[c];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var _=g.color;this.colors.push(_,_,_)}if(true===i){var w=n[0][c];if(void 0!==w)this.uvs.push(w[0],w[1],w[2]);else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c);this.uvs.push(new Dt,new Dt,new Dt)}}if(true===a){var w=n[1][c];if(void 0!==w)this.uvs2.push(w[0],w[1],w[2]);else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c);this.uvs2.push(new Dt,new Dt,new Dt)}}for(var S=0;S<s;S++){var T=o[S].vertices;l[S].push(T[g.a],T[g.b],T[g.c])}for(var S=0;S<h;S++){var M=u[S].vertexNormals[c];f[S].push(M.a,M.b,M.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]);v&&this.skinWeights.push(d[g.a],d[g.b],d[g.c])}this.computeGroups(e);this.verticesNeedUpdate=e.verticesNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this}});function Ci(e){if(0===e.length)return-Infinity;var t=e[0];for(var r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}var Li=1;function Oi(){Object.defineProperty(this,"id",{value:Li+=2});this.uuid=Ut.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.drawRange={start:0,count:Infinity}}Oi.prototype=Object.assign(Object.create(n.prototype),{constructor:Oi,isBufferGeometry:true,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Ci(e)>65535?Ei:Ti)(e,1):this.index=e},addAttribute:function(e,t){if(!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).");this.addAttribute(e,new xi(arguments[1],arguments[2]));return}if("index"===e){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.");this.setIndex(t);return}this.attributes[e]=t;return this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){delete this.attributes[e];return this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e;this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;if(void 0!==t){e.applyToBufferAttribute(t);t.needsUpdate=true}var r=this.attributes.normal;if(void 0!==r){var n=(new Gt).getNormalMatrix(e);n.applyToBufferAttribute(r);r.needsUpdate=true}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var e=new kt;return function t(r){e.makeRotationX(r);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new kt;return function t(r){e.makeRotationY(r);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new kt;return function t(r){e.makeRotationZ(r);this.applyMatrix(e);return this}}(),translate:function(){var e=new kt;return function t(r,n,i){e.makeTranslation(r,n,i);this.applyMatrix(e);return this}}(),scale:function(){var e=new kt;return function t(r,n,i){e.makeScale(r,n,i);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new pi;return function t(r){e.lookAt(r);e.updateMatrix();this.applyMatrix(e.matrix)}}(),center:function(){var e=new Ft;return function t(){this.computeBoundingBox();this.boundingBox.getCenter(e).negate();this.translate(e.x,e.y,e.z);return this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new Ai(3*t.vertices.length,3);var n=new Ai(3*t.colors.length,3);this.addAttribute("position",r.copyVector3sArray(t.vertices));this.addAttribute("color",n.copyColorsArray(t.colors));if(t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Ai(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone());null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){var t=[];for(var r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}this.addAttribute("position",new Ai(t,3));return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var r=t.__directGeometry;if(true===t.elementsNeedUpdate){r=void 0;t.elementsNeedUpdate=false}if(void 0===r)return this.fromGeometry(t);r.verticesNeedUpdate=t.verticesNeedUpdate;r.normalsNeedUpdate=t.normalsNeedUpdate;r.colorsNeedUpdate=t.colorsNeedUpdate;r.uvsNeedUpdate=t.uvsNeedUpdate;r.groupsNeedUpdate=t.groupsNeedUpdate;t.verticesNeedUpdate=false;t.normalsNeedUpdate=false;t.colorsNeedUpdate=false;t.uvsNeedUpdate=false;t.groupsNeedUpdate=false;t=r}var n;if(true===t.verticesNeedUpdate){n=this.attributes.position;if(void 0!==n){n.copyVector3sArray(t.vertices);n.needsUpdate=true}t.verticesNeedUpdate=false}if(true===t.normalsNeedUpdate){n=this.attributes.normal;if(void 0!==n){n.copyVector3sArray(t.normals);n.needsUpdate=true}t.normalsNeedUpdate=false}if(true===t.colorsNeedUpdate){n=this.attributes.color;if(void 0!==n){n.copyColorsArray(t.colors);n.needsUpdate=true}t.colorsNeedUpdate=false}if(t.uvsNeedUpdate){n=this.attributes.uv;if(void 0!==n){n.copyVector2sArray(t.uvs);n.needsUpdate=true}t.uvsNeedUpdate=false}if(t.lineDistancesNeedUpdate){n=this.attributes.lineDistance;if(void 0!==n){n.copyArray(t.lineDistances);n.needsUpdate=true}t.lineDistancesNeedUpdate=false}if(t.groupsNeedUpdate){t.computeGroups(e.geometry);this.groups=t.groups;t.groupsNeedUpdate=false}return this},fromGeometry:function(e){e.__directGeometry=(new Pi).fromGeometry(e);return this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);this.addAttribute("position",new xi(t,3).copyVector3sArray(e.vertices));if(e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new xi(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new xi(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new xi(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new xi(a,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(var o in e.morphTargets){var s=[];var l=e.morphTargets[o];for(var c=0,u=l.length;c<u;c++){var h=l[c];var f=new Ai(3*h.length,3);s.push(f.copyVector3sArray(h))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var p=new Ai(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var d=new Ai(4*e.skinWeights.length,4);this.addAttribute("skinWeight",d.copyVector4sArray(e.skinWeights))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone());null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new qt);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new qt;var t=new Ft;return function r(){null===this.boundingSphere&&(this.boundingSphere=new Yt);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n);e.getCenter(i);var a=0;for(var o=0,s=n.count;o<s;o++){t.x=n.getX(o);t.y=n.getY(o);t.z=n.getZ(o);a=Math.max(a,i.distanceToSquared(t))}this.boundingSphere.radius=Math.sqrt(a);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index;var t=this.attributes;var r=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new xi(new Float32Array(n.length),3));else{var i=t.normal.array;for(var a=0,o=i.length;a<o;a++)i[a]=0}var s=t.normal.array;var l,c,u;var h=new Ft,f=new Ft,p=new Ft;var d=new Ft,m=new Ft;if(e){var v=e.array;0===r.length&&this.addGroup(0,v.length);for(var g=0,y=r.length;g<y;++g){var x=r[g];var b=x.start;var _=x.count;for(var a=b,o=b+_;a<o;a+=3){l=3*v[a+0];c=3*v[a+1];u=3*v[a+2];h.fromArray(n,l);f.fromArray(n,c);p.fromArray(n,u);d.subVectors(p,f);m.subVectors(h,f);d.cross(m);s[l]+=d.x;s[l+1]+=d.y;s[l+2]+=d.z;s[c]+=d.x;s[c+1]+=d.y;s[c+2]+=d.z;s[u]+=d.x;s[u+1]+=d.y;s[u+2]+=d.z}}}else for(var a=0,o=n.length;a<o;a+=9){h.fromArray(n,a);f.fromArray(n,a+3);p.fromArray(n,a+6);d.subVectors(p,f);m.subVectors(h,f);d.cross(m);s[a]=d.x;s[a+1]=d.y;s[a+2]=d.z;s[a+3]=d.x;s[a+4]=d.y;s[a+5]=d.z;s[a+6]=d.x;s[a+7]=d.y;s[a+8]=d.z}this.normalizeNormals();t.normal.needsUpdate=true}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}if(void 0===t){t=0;console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.")}var r=this.attributes;for(var n in r){if(void 0===e.attributes[n])continue;var i=r[n];var a=i.array;var o=e.attributes[n];var s=o.array;var l=o.itemSize;for(var c=0,u=l*t;c<s.length;c++,u++)a[u]=s[c]}return this},normalizeNormals:function(){var e=new Ft;return function t(){var r=this.attributes.normal;for(var n=0,i=r.count;n<i;n++){e.x=r.getX(n);e.y=r.getY(n);e.z=r.getZ(n);e.normalize();r.setXYZ(n,e.x,e.y,e.z)}}}(),toNonIndexed:function(){if(null===this.index){console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.");return this}var e=new Oi;var t=this.index.array;var r=this.attributes;for(var n in r){var i=r[n];var a=i.array;var o=i.itemSize;var s=new a.constructor(t.length*o);var l=0,c=0;for(var u=0,h=t.length;u<h;u++){l=t[u]*o;for(var f=0;f<o;f++)s[c++]=a[l++]}e.addAttribute(n,new xi(s,o))}var p=this.groups;for(var u=0,h=p.length;u<h;u++){var d=p[u];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:i}}var a=this.attributes;for(var r in a){var o=a[r];var i=Array.prototype.slice.call(o.array);e.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius});return e},clone:function(){return(new Oi).copy(this)},copy:function(e){var t,r,n;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var l=[];var c=s[t];for(r=0,n=c.length;r<n;r++)l.push(c[r].clone());this.morphAttributes[t]=l}var u=e.groups;for(r=0,n=u.length;r<n;r++){var h=u[r];this.addGroup(h.start,h.count,h.materialIndex)}var f=e.boundingBox;null!==f&&(this.boundingBox=f.clone());var p=e.boundingSphere;null!==p&&(this.boundingSphere=p.clone());this.drawRange.start=e.drawRange.start;this.drawRange.count=e.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Ii(e,t,r,n,i,a){yi.call(this);this.type="BoxGeometry";this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};this.fromBufferGeometry(new Bi(e,t,r,n,i,a));this.mergeVertices()}Ii.prototype=Object.create(yi.prototype);Ii.prototype.constructor=Ii;function Bi(e,t,r,n,i,a){Oi.call(this);this.type="BoxBufferGeometry";this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};var o=this;e=e||1;t=t||1;r=r||1;n=Math.floor(n)||1;i=Math.floor(i)||1;a=Math.floor(a)||1;var s=[];var l=[];var c=[];var u=[];var h=0;var f=0;p("z","y","x",-1,-1,r,t,e,a,i,0);p("z","y","x",1,-1,r,t,-e,a,i,1);p("x","z","y",1,1,e,r,t,n,a,2);p("x","z","y",1,-1,e,r,-t,n,a,3);p("x","y","z",1,-1,e,t,r,n,i,4);p("x","y","z",-1,-1,e,t,-r,n,i,5);this.setIndex(s);this.addAttribute("position",new Ai(l,3));this.addAttribute("normal",new Ai(c,3));this.addAttribute("uv",new Ai(u,2));function p(e,t,r,n,i,a,p,d,m,v,g){var y=a/m;var x=p/v;var b=a/2;var _=p/2;var w=d/2;var S=m+1;var T=v+1;var M=0;var E=0;var A,R;var P=new Ft;for(R=0;R<T;R++){var C=R*x-_;for(A=0;A<S;A++){var L=A*y-b;P[e]=L*n;P[t]=C*i;P[r]=w;l.push(P.x,P.y,P.z);P[e]=0;P[t]=0;P[r]=d>0?1:-1;c.push(P.x,P.y,P.z);u.push(A/m);u.push(1-R/v);M+=1}}for(R=0;R<v;R++)for(A=0;A<m;A++){var O=h+A+S*R;var I=h+A+S*(R+1);var B=h+(A+1)+S*(R+1);var U=h+(A+1)+S*R;s.push(O,I,U);s.push(I,B,U);E+=6}o.addGroup(f,E,g);f+=E;h+=M}}Bi.prototype=Object.create(Oi.prototype);Bi.prototype.constructor=Bi;function Ui(e,t,r,n){yi.call(this);this.type="PlaneGeometry";this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};this.fromBufferGeometry(new Di(e,t,r,n));this.mergeVertices()}Ui.prototype=Object.create(yi.prototype);Ui.prototype.constructor=Ui;function Di(e,t,r,n){Oi.call(this);this.type="PlaneBufferGeometry";this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};e=e||1;t=t||1;var i=e/2;var a=t/2;var o=Math.floor(r)||1;var s=Math.floor(n)||1;var l=o+1;var c=s+1;var u=e/o;var h=t/s;var f,p;var d=[];var m=[];var v=[];var g=[];for(p=0;p<c;p++){var y=p*h-a;for(f=0;f<l;f++){var x=f*u-i;m.push(x,-y,0);v.push(0,0,1);g.push(f/o);g.push(1-p/s)}}for(p=0;p<s;p++)for(f=0;f<o;f++){var b=f+l*p;var _=f+l*(p+1);var w=f+1+l*(p+1);var S=f+1+l*p;d.push(b,_,S);d.push(_,w,S)}this.setIndex(d);this.addAttribute("position",new Ai(m,3));this.addAttribute("normal",new Ai(v,3));this.addAttribute("uv",new Ai(g,2))}Di.prototype=Object.create(Oi.prototype);Di.prototype.constructor=Di;var ki=0;function Ni(){Object.defineProperty(this,"id",{value:ki++});this.uuid=Ut.generateUUID();this.name="";this.type="Material";this.fog=true;this.lights=true;this.blending=T;this.side=m;this.flatShading=false;this.vertexColors=b;this.opacity=1;this.transparent=false;this.blendSrc=N;this.blendDst=F;this.blendEquation=P;this.blendSrcAlpha=null;this.blendDstAlpha=null;this.blendEquationAlpha=null;this.depthFunc=Y;this.depthTest=true;this.depthWrite=true;this.clippingPlanes=null;this.clipIntersection=false;this.clipShadows=false;this.shadowSide=null;this.colorWrite=true;this.precision=null;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.dithering=false;this.alphaTest=0;this.premultipliedAlpha=false;this.overdraw=0;this.visible=true;this.userData={};this.needsUpdate=true}Ni.prototype=Object.assign(Object.create(n.prototype),{constructor:Ni,isMaterial:true,onBeforeCompile:function(){},setValues:function(e){if(void 0===e)return;for(var t in e){var r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=r===y;continue}var n=this[t];if(void 0===n){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]="overdraw"===t?Number(r):r}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid;r.type=this.type;""!==this.name&&(r.name=this.name);this.color&&this.color.isColor&&(r.color=this.color.getHex());void 0!==this.roughness&&(r.roughness=this.roughness);void 0!==this.metalness&&(r.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex());void 0!==this.shininess&&(r.shininess=this.shininess);void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid);this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid);this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid);if(this.bumpMap&&this.bumpMap.isTexture){r.bumpMap=this.bumpMap.toJSON(e).uuid;r.bumpScale=this.bumpScale}if(this.normalMap&&this.normalMap.isTexture){r.normalMap=this.normalMap.toJSON(e).uuid;r.normalScale=this.normalScale.toArray()}if(this.displacementMap&&this.displacementMap.isTexture){r.displacementMap=this.displacementMap.toJSON(e).uuid;r.displacementScale=this.displacementScale;r.displacementBias=this.displacementBias}this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid);this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid);if(this.envMap&&this.envMap.isTexture){r.envMap=this.envMap.toJSON(e).uuid;r.reflectivity=this.reflectivity}this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid);void 0!==this.size&&(r.size=this.size);void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation);this.blending!==T&&(r.blending=this.blending);true===this.flatShading&&(r.flatShading=this.flatShading);this.side!==m&&(r.side=this.side);this.vertexColors!==b&&(r.vertexColors=this.vertexColors);this.opacity<1&&(r.opacity=this.opacity);true===this.transparent&&(r.transparent=this.transparent);r.depthFunc=this.depthFunc;r.depthTest=this.depthTest;r.depthWrite=this.depthWrite;0!==this.rotation&&(r.rotation=this.rotation);1!==this.linewidth&&(r.linewidth=this.linewidth);void 0!==this.dashSize&&(r.dashSize=this.dashSize);void 0!==this.gapSize&&(r.gapSize=this.gapSize);void 0!==this.scale&&(r.scale=this.scale);true===this.dithering&&(r.dithering=true);this.alphaTest>0&&(r.alphaTest=this.alphaTest);true===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha);true===this.wireframe&&(r.wireframe=this.wireframe);this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin);true===this.morphTargets&&(r.morphTargets=true);true===this.skinning&&(r.skinning=true);false===this.visible&&(r.visible=false);"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData);function n(e){var t=[];for(var r in e){var n=e[r];delete n.metadata;t.push(n)}return t}if(t){var i=n(e.textures);var a=n(e.images);i.length>0&&(r.textures=i);a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.fog=e.fog;this.lights=e.lights;this.blending=e.blending;this.side=e.side;this.flatShading=e.flatShading;this.vertexColors=e.vertexColors;this.opacity=e.opacity;this.transparent=e.transparent;this.blendSrc=e.blendSrc;this.blendDst=e.blendDst;this.blendEquation=e.blendEquation;this.blendSrcAlpha=e.blendSrcAlpha;this.blendDstAlpha=e.blendDstAlpha;this.blendEquationAlpha=e.blendEquationAlpha;this.depthFunc=e.depthFunc;this.depthTest=e.depthTest;this.depthWrite=e.depthWrite;this.colorWrite=e.colorWrite;this.precision=e.precision;this.polygonOffset=e.polygonOffset;this.polygonOffsetFactor=e.polygonOffsetFactor;this.polygonOffsetUnits=e.polygonOffsetUnits;this.dithering=e.dithering;this.alphaTest=e.alphaTest;this.premultipliedAlpha=e.premultipliedAlpha;this.overdraw=e.overdraw;this.visible=e.visible;this.userData=JSON.parse(JSON.stringify(e.userData));this.clipShadows=e.clipShadows;this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}this.clippingPlanes=r;this.shadowSide=e.shadowSide;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Fi(e){Ni.call(this);this.type="MeshBasicMaterial";this.color=new oi(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=$;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.lights=false;this.setValues(e)}Fi.prototype=Object.create(Ni.prototype);Fi.prototype.constructor=Fi;Fi.prototype.isMeshBasicMaterial=true;Fi.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;return this};function Gi(e){Ni.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.clipping=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.extensions={derivatives:false,fragDepth:false,drawBuffers:false,shaderTextureLOD:false};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=false;if(void 0!==e){void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.");this.setValues(e)}}Gi.prototype=Object.create(Ni.prototype);Gi.prototype.constructor=Gi;Gi.prototype.isShaderMaterial=true;Gi.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.fragmentShader=e.fragmentShader;this.vertexShader=e.vertexShader;this.uniforms=ii.clone(e.uniforms);this.defines=Object.assign({},e.defines);this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.lights=e.lights;this.clipping=e.clipping;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;this.extensions=e.extensions;return this};Gi.prototype.toJSON=function(e){var t=Ni.prototype.toJSON.call(this,e);t.uniforms=this.uniforms;t.vertexShader=this.vertexShader;t.fragmentShader=this.fragmentShader;return t};function zi(e,t){this.origin=void 0!==e?e:new Ft;this.direction=void 0!==t?t:new Ft}Object.assign(zi.prototype,{set:function(e,t){this.origin.copy(e);this.direction.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.origin.copy(e.origin);this.direction.copy(e.direction);return this},at:function(e,t){if(void 0===t){console.warn("THREE.Ray: .at() target is now required");t=new Ft}return t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){this.direction.copy(e).sub(this.origin).normalize();return this},recast:function(){var e=new Ft;return function t(r){this.origin.copy(this.at(r,e));return this}}(),closestPointToPoint:function(e,t){if(void 0===t){console.warn("THREE.Ray: .closestPointToPoint() target is now required");t=new Ft}t.subVectors(e,this.origin);var r=t.dot(this.direction);if(r<0)return t.copy(this.origin);return t.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Ft;return function t(r){var n=e.subVectors(r,this.origin).dot(this.direction);if(n<0)return this.origin.distanceToSquared(r);e.copy(this.direction).multiplyScalar(n).add(this.origin);return e.distanceToSquared(r)}}(),distanceSqToSegment:function(){var e=new Ft;var t=new Ft;var r=new Ft;return function n(i,a,o,s){e.copy(i).add(a).multiplyScalar(.5);t.copy(a).sub(i).normalize();r.copy(this.origin).sub(e);var l=.5*i.distanceTo(a);var c=-this.direction.dot(t);var u=r.dot(this.direction);var h=-r.dot(t);var f=r.lengthSq();var p=Math.abs(1-c*c);var d,m,v,g;if(p>0){d=c*h-u;m=c*u-h;g=l*p;if(d>=0)if(m>=-g)if(m<=g){var y=1/p;d*=y;m*=y;v=d*(d+c*m+2*u)+m*(c*d+m+2*h)+f}else{m=l;d=Math.max(0,-(c*m+u));v=-d*d+m*(m+2*h)+f}else{m=-l;d=Math.max(0,-(c*m+u));v=-d*d+m*(m+2*h)+f}else if(m<=-g){d=Math.max(0,-(-c*l+u));m=d>0?-l:Math.min(Math.max(-l,-h),l);v=-d*d+m*(m+2*h)+f}else if(m<=g){d=0;m=Math.min(Math.max(-l,-h),l);v=m*(m+2*h)+f}else{d=Math.max(0,-(c*l+u));m=d>0?l:Math.min(Math.max(-l,-h),l);v=-d*d+m*(m+2*h)+f}}else{m=c>0?-l:l;d=Math.max(0,-(c*m+u));v=-d*d+m*(m+2*h)+f}o&&o.copy(this.direction).multiplyScalar(d).add(this.origin);s&&s.copy(t).multiplyScalar(m).add(e);return v}}(),intersectSphere:function(){var e=new Ft;return function t(r,n){e.subVectors(r.center,this.origin);var i=e.dot(this.direction);var a=e.dot(e)-i*i;var o=r.radius*r.radius;if(a>o)return null;var s=Math.sqrt(o-a);var l=i-s;var c=i+s;if(l<0&&c<0)return null;if(l<0)return this.at(c,n);return this.at(l,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t){if(0===e.distanceToPoint(this.origin))return 0;return null}var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);if(null===r)return null;return this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return true;var r=e.normal.dot(this.direction);if(r*t<0)return true;return false},intersectBox:function(e,t){var r,n,i,a,o,s;var l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z;var h=this.origin;if(l>=0){r=(e.min.x-h.x)*l;n=(e.max.x-h.x)*l}else{r=(e.max.x-h.x)*l;n=(e.min.x-h.x)*l}if(c>=0){i=(e.min.y-h.y)*c;a=(e.max.y-h.y)*c}else{i=(e.max.y-h.y)*c;a=(e.min.y-h.y)*c}if(r>a||i>n)return null;(i>r||r!==r)&&(r=i);(a<n||n!==n)&&(n=a);if(u>=0){o=(e.min.z-h.z)*u;s=(e.max.z-h.z)*u}else{o=(e.max.z-h.z)*u;s=(e.min.z-h.z)*u}if(r>s||o>n)return null;(o>r||r!==r)&&(r=o);(s<n||n!==n)&&(n=s);if(n<0)return null;return this.at(r>=0?r:n,t)},intersectsBox:function(){var e=new Ft;return function t(r){return null!==this.intersectBox(r,e)}}(),intersectTriangle:function(){var e=new Ft;var t=new Ft;var r=new Ft;var n=new Ft;return function i(a,o,s,l,c){t.subVectors(o,a);r.subVectors(s,a);n.crossVectors(t,r);var u=this.direction.dot(n);var h;if(u>0){if(l)return null;h=1}else{if(!(u<0))return null;h=-1;u=-u}e.subVectors(this.origin,a);var f=h*this.direction.dot(r.crossVectors(e,r));if(f<0)return null;var p=h*this.direction.dot(t.cross(e));if(p<0)return null;if(f+p>u)return null;var d=-h*e.dot(n);if(d<0)return null;return this.at(d/u,c)}}(),applyMatrix4:function(e){this.origin.applyMatrix4(e);this.direction.transformDirection(e);return this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});function Hi(e,t){this.start=void 0!==e?e:new Ft;this.end=void 0!==t?t:new Ft}Object.assign(Hi.prototype,{set:function(e,t){this.start.copy(e);this.end.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.start.copy(e.start);this.end.copy(e.end);return this},getCenter:function(e){if(void 0===e){console.warn("THREE.Line3: .getCenter() target is now required");e=new Ft}return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){if(void 0===e){console.warn("THREE.Line3: .delta() target is now required");e=new Ft}return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){if(void 0===t){console.warn("THREE.Line3: .at() target is now required");t=new Ft}return this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Ft;var t=new Ft;return function r(n,i){e.subVectors(n,this.start);t.subVectors(this.end,this.start);var a=t.dot(t);var o=t.dot(e);var s=o/a;i&&(s=Ut.clamp(s,0,1));return s}}(),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t);if(void 0===r){console.warn("THREE.Line3: .closestPointToPoint() target is now required");r=new Ft}return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){this.start.applyMatrix4(e);this.end.applyMatrix4(e);return this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function Vi(e,t,r){this.a=void 0!==e?e:new Ft;this.b=void 0!==t?t:new Ft;this.c=void 0!==r?r:new Ft}Object.assign(Vi,{getNormal:function(){var e=new Ft;return function t(r,n,i,a){if(void 0===a){console.warn("THREE.Triangle: .getNormal() target is now required");a=new Ft}a.subVectors(i,n);e.subVectors(r,n);a.cross(e);var o=a.lengthSq();if(o>0)return a.multiplyScalar(1/Math.sqrt(o));return a.set(0,0,0)}}(),getBarycoord:function(){var e=new Ft;var t=new Ft;var r=new Ft;return function n(i,a,o,s,l){e.subVectors(s,a);t.subVectors(o,a);r.subVectors(i,a);var c=e.dot(e);var u=e.dot(t);var h=e.dot(r);var f=t.dot(t);var p=t.dot(r);var d=c*f-u*u;if(void 0===l){console.warn("THREE.Triangle: .getBarycoord() target is now required");l=new Ft}if(0===d)return l.set(-2,-1,-1);var m=1/d;var v=(f*h-u*p)*m;var g=(c*p-u*h)*m;return l.set(1-v-g,g,v)}}(),containsPoint:function(){var e=new Ft;return function t(r,n,i,a){Vi.getBarycoord(r,n,i,a,e);return e.x>=0&&e.y>=0&&e.x+e.y<=1}}()});Object.assign(Vi.prototype,{set:function(e,t,r){this.a.copy(e);this.b.copy(t);this.c.copy(r);return this},setFromPointsAndIndices:function(e,t,r,n){this.a.copy(e[t]);this.b.copy(e[r]);this.c.copy(e[n]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a.copy(e.a);this.b.copy(e.b);this.c.copy(e.c);return this},getArea:function(){var e=new Ft;var t=new Ft;return function r(){e.subVectors(this.c,this.b);t.subVectors(this.a,this.b);return.5*e.cross(t).length()}}(),getMidpoint:function(e){if(void 0===e){console.warn("THREE.Triangle: .getMidpoint() target is now required");e=new Ft}return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Vi.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){if(void 0===e){console.warn("THREE.Triangle: .getPlane() target is now required");e=new Ft}return e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Vi.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Vi.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new Zt;var t=[new Hi,new Hi,new Hi];var r=new Ft;var n=new Ft;return function i(a,o){if(void 0===o){console.warn("THREE.Triangle: .closestPointToPoint() target is now required");o=new Ft}var s=Infinity;e.setFromCoplanarPoints(this.a,this.b,this.c);e.projectPoint(a,r);if(true===this.containsPoint(r))o.copy(r);else{t[0].set(this.a,this.b);t[1].set(this.b,this.c);t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(r,true,n);var c=r.distanceToSquared(n);if(c<s){s=c;o.copy(n)}}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});function ji(e,t){pi.call(this);this.type="Mesh";this.geometry=void 0!==e?e:new Oi;this.material=void 0!==t?t:new Fi({color:16777215*Math.random()});this.drawMode=wt;this.updateMorphTargets()}ji.prototype=Object.assign(Object.create(pi.prototype),{constructor:ji,isMesh:true,setDrawMode:function(e){this.drawMode=e},copy:function(e){pi.prototype.copy.call(this,e);this.drawMode=e.drawMode;void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice());void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary));return this},updateMorphTargets:function(){var e=this.geometry;var t,r,n;if(e.isBufferGeometry){var i=e.morphAttributes;var a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,r=o.length;t<r;t++){n=o[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=t}}}}else{var s=e.morphTargets;if(void 0!==s&&s.length>0){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,r=s.length;t<r;t++){n=s[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=t}}}},raycast:function(){var e=new kt;var t=new zi;var r=new Yt;var n=new Ft;var i=new Ft;var a=new Ft;var o=new Ft;var s=new Ft;var l=new Ft;var c=new Dt;var u=new Dt;var h=new Dt;var f=new Ft;var p=new Ft;var d=new Ft;function m(e,t,r,n,i,a,o){Vi.getBarycoord(e,t,r,n,f);i.multiplyScalar(f.x);a.multiplyScalar(f.y);o.multiplyScalar(f.z);i.add(a).add(o);return i.clone()}function y(e,t,r,n,i,a,o,s){var l;l=t.side===v?n.intersectTriangle(o,a,i,true,s):n.intersectTriangle(i,a,o,t.side!==g,s);if(null===l)return null;d.copy(s);d.applyMatrix4(e.matrixWorld);var c=r.ray.origin.distanceTo(d);if(c<r.near||c>r.far)return null;return{distance:c,point:d.clone(),object:e}}function x(e,t,r,o,s,l,f,d){n.fromBufferAttribute(o,l);i.fromBufferAttribute(o,f);a.fromBufferAttribute(o,d);var v=y(e,e.material,t,r,n,i,a,p);if(v){if(s){c.fromBufferAttribute(s,l);u.fromBufferAttribute(s,f);h.fromBufferAttribute(s,d);v.uv=m(p,n,i,a,c,u,h)}var g=new vi(l,f,d);Vi.getNormal(n,i,a,g.normal);v.face=g;v.faceIndex=l}return v}return function f(d,v){var g=this.geometry;var b=this.material;var _=this.matrixWorld;if(void 0===b)return;null===g.boundingSphere&&g.computeBoundingSphere();r.copy(g.boundingSphere);r.applyMatrix4(_);if(false===d.ray.intersectsSphere(r))return;e.getInverse(_);t.copy(d.ray).applyMatrix4(e);if(null!==g.boundingBox&&false===t.intersectsBox(g.boundingBox))return;var w;if(g.isBufferGeometry){var S,T,M;var E=g.index;var A=g.attributes.position;var R=g.attributes.uv;var P,C;if(null!==E)for(P=0,C=E.count;P<C;P+=3){S=E.getX(P);T=E.getX(P+1);M=E.getX(P+2);w=x(this,d,t,A,R,S,T,M);if(w){w.faceIndex=Math.floor(P/3);v.push(w)}}else if(void 0!==A)for(P=0,C=A.count;P<C;P+=3){S=P;T=P+1;M=P+2;w=x(this,d,t,A,R,S,T,M);w&&v.push(w)}}else if(g.isGeometry){var L,O,I;var B=Array.isArray(b);var U=g.vertices;var D=g.faces;var k;var N=g.faceVertexUvs[0];N.length>0&&(k=N);for(var F=0,G=D.length;F<G;F++){var z=D[F];var H=B?b[z.materialIndex]:b;if(void 0===H)continue;L=U[z.a];O=U[z.b];I=U[z.c];if(true===H.morphTargets){var V=g.morphTargets;var j=this.morphTargetInfluences;n.set(0,0,0);i.set(0,0,0);a.set(0,0,0);for(var W=0,X=V.length;W<X;W++){var q=j[W];if(0===q)continue;var Y=V[W].vertices;n.addScaledVector(o.subVectors(Y[z.a],L),q);i.addScaledVector(s.subVectors(Y[z.b],O),q);a.addScaledVector(l.subVectors(Y[z.c],I),q)}n.add(L);i.add(O);a.add(I);L=n;O=i;I=a}w=y(this,H,d,t,L,O,I,p);if(w){if(k&&k[F]){var Z=k[F];c.copy(Z[0]);u.copy(Z[1]);h.copy(Z[2]);w.uv=m(p,L,O,I,c,u,h)}w.face=z;w.faceIndex=F;v.push(w)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Wi(e,t,r,n){var i=new oi(0);var a=0;var o,s;var l;function c(t,n,c,h){var f=n.background;if(null===f)u(i,a);else if(f&&f.isColor){u(f,1);h=true}(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil);if(f&&f.isCubeTexture){if(void 0===l){l=new ji(new Bi(1,1,1),new Gi({uniforms:li.cube.uniforms,vertexShader:li.cube.vertexShader,fragmentShader:li.cube.fragmentShader,side:v,depthTest:true,depthWrite:false,fog:false}));l.geometry.removeAttribute("normal");l.geometry.removeAttribute("uv");l.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)};r.update(l.geometry)}l.material.uniforms.tCube.value=f;t.push(l,l.geometry,l.material,0,null)}else if(f&&f.isTexture){if(void 0===o){o=new mi(-1,1,1,-1,0,1);s=new ji(new Di(2,2),new Fi({depthTest:false,depthWrite:false,fog:false}));r.update(s.geometry)}s.material.map=f;e.renderBufferDirect(o,null,s.geometry,s.material,s,null)}}function u(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,n)}return{getClearColor:function(){return i},setClearColor:function(e,t){i.set(e);a=void 0!==t?t:1;u(i,a)},getClearAlpha:function(){return a},setClearAlpha:function(e){a=e;u(i,a)},render:c}}function Xi(e,t,r){var n;function i(e){n=e}function a(t,i){e.drawArrays(n,t,i);r.update(i,n)}function o(e,i,a){var o=t.get("ANGLE_instanced_arrays");if(null===o){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var s=e.attributes.position;if(s.isInterleavedBufferAttribute){a=s.data.count;o.drawArraysInstancedANGLE(n,0,a,e.maxInstancedCount)}else o.drawArraysInstancedANGLE(n,i,a,e.maxInstancedCount);r.update(a,n,e.maxInstancedCount)}this.setMode=i;this.render=a;this.renderInstances=o}function qi(e,t,r){var n;function i(){if(void 0!==n)return n;var r=t.get("EXT_texture_filter_anisotropic");n=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0;return n}function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}if("mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0)return"mediump";return"lowp"}var o=void 0!==r.precision?r.precision:"highp";var s=a(o);if(s!==o){console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead.");o=s}var l=true===r.logarithmicDepthBuffer;var c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);var u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);var h=e.getParameter(e.MAX_TEXTURE_SIZE);var f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE);var p=e.getParameter(e.MAX_VERTEX_ATTRIBS);var d=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS);var m=e.getParameter(e.MAX_VARYING_VECTORS);var v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS);var g=u>0;var y=!!t.get("OES_texture_float");var x=g&&y;return{getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:x}}function Yi(){var e=this,t=null,r=0,n=false,i=false,a=new Zt,o=new Gt,s={value:null,needsUpdate:false};this.uniform=s;this.numPlanes=0;this.numIntersection=0;this.init=function(e,i,a){var o=0!==e.length||i||0!==r||n;n=i;t=c(e,a,0);r=e.length;return o};this.beginShadows=function(){i=true;c(null)};this.endShadows=function(){i=false;l()};this.setState=function(e,a,o,u,h,f){if(!n||null===e||0===e.length||i&&!o)i?c(null):l();else{var p=i?0:r,d=4*p,m=h.clippingState||null;s.value=m;m=c(e,u,d,f);for(var v=0;v!==d;++v)m[v]=t[v];h.clippingState=m;this.numIntersection=a?this.numPlanes:0;this.numPlanes+=p}};function l(){if(s.value!==t){s.value=t;s.needsUpdate=r>0}e.numPlanes=r;e.numIntersection=0}function c(t,r,n,i){var l=null!==t?t.length:0,c=null;if(0!==l){c=s.value;if(true!==i||null===c){var u=n+4*l,h=r.matrixWorldInverse;o.getNormalMatrix(h);(null===c||c.length<u)&&(c=new Float32Array(u));for(var f=0,p=n;f!==l;++f,p+=4){a.copy(t[f]).applyMatrix4(h,o);a.normal.toArray(c,p);c[p+3]=a.constant}}s.value=c;s.needsUpdate=true}e.numPlanes=l;return c}}function Zi(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported.");t[r]=n;return n}}}function Ji(e,t,r){var n={};var i={};function a(e){var o=e.target;var s=n[o.id];null!==s.index&&t.remove(s.index);for(var l in s.attributes)t.remove(s.attributes[l]);o.removeEventListener("dispose",a);delete n[o.id];var c=i[o.id];if(c){t.remove(c);delete i[o.id]}c=i[s.id];if(c){t.remove(c);delete i[s.id]}r.memory.geometries--}function o(e,t){var i=n[t.id];if(i)return i;t.addEventListener("dispose",a);if(t.isBufferGeometry)i=t;else if(t.isGeometry){void 0===t._bufferGeometry&&(t._bufferGeometry=(new Oi).setFromObject(e));i=t._bufferGeometry}n[t.id]=i;r.memory.geometries++;return i}function s(r){var n=r.index;var i=r.attributes;null!==n&&t.update(n,e.ELEMENT_ARRAY_BUFFER);for(var a in i)t.update(i[a],e.ARRAY_BUFFER);var o=r.morphAttributes;for(var a in o){var s=o[a];for(var l=0,c=s.length;l<c;l++)t.update(s[l],e.ARRAY_BUFFER)}}function l(r){var n=i[r.id];if(n)return n;var a=[];var o=r.index;var s=r.attributes;if(null!==o){var l=o.array;for(var c=0,u=l.length;c<u;c+=3){var h=l[c+0];var f=l[c+1];var p=l[c+2];a.push(h,f,f,p,p,h)}}else{var l=s.position.array;for(var c=0,u=l.length/3-1;c<u;c+=3){var h=c+0;var f=c+1;var p=c+2;a.push(h,f,f,p,p,h)}}n=new(Ci(a)>65535?Ei:Ti)(a,1);t.update(n,e.ELEMENT_ARRAY_BUFFER);i[r.id]=n;return n}return{get:o,update:s,getWireframeAttribute:l}}function Qi(e,t,r){var n;function i(e){n=e}var a,o;function s(e){a=e.type;o=e.bytesPerElement}function l(t,i){e.drawElements(n,i,a,t*o);r.update(i,n)}function c(e,i,s){var l=t.get("ANGLE_instanced_arrays");if(null===l){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}l.drawElementsInstancedANGLE(n,s,a,i*o,e.maxInstancedCount);r.update(s,n,e.maxInstancedCount)}this.setMode=i;this.setIndex=s;this.render=l;this.renderInstances=c}function Ki(e){var t={geometries:0,textures:0};var r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(t,n,i){i=i||1;r.calls++;switch(n){case e.TRIANGLES:r.triangles+=i*(t/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:r.triangles+=i*(t-2);break;case e.LINES:r.lines+=i*(t/2);break;case e.LINE_STRIP:r.lines+=i*(t-1);break;case e.LINE_LOOP:r.lines+=i*t;break;case e.POINTS:r.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n);break}}function i(){r.frame++;r.calls=0;r.triangles=0;r.points=0;r.lines=0}return{memory:t,render:r,programs:null,autoReset:true,reset:i,update:n}}function $i(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ea(e){var t={};var r=new Float32Array(8);function n(n,i,a,o){var s=n.morphTargetInfluences;var l=s.length;var c=t[i.id];if(void 0===c){c=[];for(var u=0;u<l;u++)c[u]=[u,0];t[i.id]=c}var h=a.morphTargets&&i.morphAttributes.position;var f=a.morphNormals&&i.morphAttributes.normal;for(var u=0;u<l;u++){var p=c[u];if(0!==p[1]){h&&i.removeAttribute("morphTarget"+u);f&&i.removeAttribute("morphNormal"+u)}}for(var u=0;u<l;u++){var p=c[u];p[0]=u;p[1]=s[u]}c.sort($i);for(var u=0;u<8;u++){var p=c[u];if(p){var d=p[0];var m=p[1];if(m){h&&i.addAttribute("morphTarget"+u,h[d]);f&&i.addAttribute("morphNormal"+u,f[d]);r[u]=m;continue}}r[u]=0}o.getUniforms().setValue(e,"morphTargetInfluences",r)}return{update:n}}function ta(e,t){var r={};function n(n){var i=t.render.frame;var a=n.geometry;var o=e.get(n,a);if(r[o.id]!==i){a.isGeometry&&o.updateFromObject(n);e.update(o);r[o.id]=i}return o}function i(){r={}}return{update:n,dispose:i}}function ra(e,t,r,n,i,a,o,s,l,c){e=void 0!==e?e:[];t=void 0!==t?t:le;Ht.call(this,e,t,r,n,i,a,o,s,l,c);this.flipY=false}ra.prototype=Object.create(Ht.prototype);ra.prototype.constructor=ra;ra.prototype.isCubeTexture=true;Object.defineProperty(ra.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var na=new Ht;var ia=new ra;function aa(){this.seq=[];this.map={}}var oa=[];var sa=[];var la=new Float32Array(16);var ca=new Float32Array(9);function ua(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,a=oa[i];if(void 0===a){a=new Float32Array(i);oa[i]=a}if(0!==t){n.toArray(a,0);for(var o=1,s=0;o!==t;++o){s+=r;e[o].toArray(a,s)}}return a}function ha(e,t){var r=sa[t];if(void 0===r){r=new Int32Array(t);sa[t]=r}for(var n=0;n!==t;++n)r[n]=e.allocTextureUnit();return r}function fa(e,t){e.uniform1f(this.addr,t)}function pa(e,t){e.uniform1i(this.addr,t)}function da(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function ma(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function va(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function ga(e,t){e.uniformMatrix2fv(this.addr,false,t.elements||t)}function ya(e,t){if(void 0===t.elements)e.uniformMatrix3fv(this.addr,false,t);else{ca.set(t.elements);e.uniformMatrix3fv(this.addr,false,ca)}}function xa(e,t){if(void 0===t.elements)e.uniformMatrix4fv(this.addr,false,t);else{la.set(t.elements);e.uniformMatrix4fv(this.addr,false,la)}}function ba(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n);r.setTexture2D(t||na,n)}function _a(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n);r.setTextureCube(t||ia,n)}function wa(e,t){e.uniform2iv(this.addr,t)}function Sa(e,t){e.uniform3iv(this.addr,t)}function Ta(e,t){e.uniform4iv(this.addr,t)}function Ma(e){switch(e){case 5126:return fa;case 35664:return da;case 35665:return ma;case 35666:return va;case 35674:return ga;case 35675:return ya;case 35676:return xa;case 35678:case 36198:return ba;case 35680:return _a;case 5124:case 35670:return pa;case 35667:case 35671:return wa;case 35668:case 35672:return Sa;case 35669:case 35673:return Ta}}function Ea(e,t){e.uniform1fv(this.addr,t)}function Aa(e,t){e.uniform1iv(this.addr,t)}function Ra(e,t){e.uniform2fv(this.addr,ua(t,this.size,2))}function Pa(e,t){e.uniform3fv(this.addr,ua(t,this.size,3))}function Ca(e,t){e.uniform4fv(this.addr,ua(t,this.size,4))}function La(e,t){e.uniformMatrix2fv(this.addr,false,ua(t,this.size,4))}function Oa(e,t){e.uniformMatrix3fv(this.addr,false,ua(t,this.size,9))}function Ia(e,t){e.uniformMatrix4fv(this.addr,false,ua(t,this.size,16))}function Ba(e,t,r){var n=t.length,i=ha(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTexture2D(t[a]||na,i[a])}function Ua(e,t,r){var n=t.length,i=ha(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTextureCube(t[a]||ia,i[a])}function Da(e){switch(e){case 5126:return Ea;case 35664:return Ra;case 35665:return Pa;case 35666:return Ca;case 35674:return La;case 35675:return Oa;case 35676:return Ia;case 35678:return Ba;case 35680:return Ua;case 5124:case 35670:return Aa;case 35667:case 35671:return wa;case 35668:case 35672:return Sa;case 35669:case 35673:return Ta}}function ka(e,t,r){this.id=e;this.addr=r;this.setValue=Ma(t.type)}function Na(e,t,r){this.id=e;this.addr=r;this.size=t.size;this.setValue=Da(t.type)}function Fa(e){this.id=e;aa.call(this)}Fa.prototype.setValue=function(e,t){var r=this.seq;for(var n=0,i=r.length;n!==i;++n){var a=r[n];a.setValue(e,t[a.id])}};var Ga=/([\w\d_]+)(\])?(\[|\.)?/g;function za(e,t){e.seq.push(t);e.map[t.id]=t}function Ha(e,t,r){var n=e.name,i=n.length;Ga.lastIndex=0;for(;;){var a=Ga.exec(n),o=Ga.lastIndex,s=a[1],l="]"===a[2],c=a[3];l&&(s|=0);if(void 0===c||"["===c&&o+2===i){za(r,void 0===c?new ka(s,e,t):new Na(s,e,t));break}var u=r.map,h=u[s];if(void 0===h){h=new Fa(s);za(r,h)}r=h}}function Va(e,t,r){aa.call(this);this.renderer=r;var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(var i=0;i<n;++i){var a=e.getActiveUniform(t,i),o=e.getUniformLocation(t,a.name);Ha(a,o,this)}}Va.prototype.setValue=function(e,t,r){var n=this.map[t];void 0!==n&&n.setValue(e,r,this.renderer)};Va.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)};Va.upload=function(e,t,r,n){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=r[o.id];false!==s.needsUpdate&&o.setValue(e,s.value,n)}};Va.seqWithValue=function(e,t){var r=[];for(var n=0,i=e.length;n!==i;++n){var a=e[n];a.id in t&&r.push(a)}return r};function ja(e){var t=e.split("\n");for(var r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function Wa(e,t,r){var n=e.createShader(t);e.shaderSource(n,r);e.compileShader(n);false===e.getShaderParameter(n,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(n),ja(r));return n}var Xa=0;function qa(e){switch(e){case Mt:return["Linear","( value )"];case Et:return["sRGB","( value )"];case Rt:return["RGBE","( value )"];case Ct:return["RGBM","( value, 7.0 )"];case Lt:return["RGBM","( value, 16.0 )"];case Ot:return["RGBD","( value, 256.0 )"];case At:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ya(e,t){var r=qa(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function Za(e,t){var r=qa(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Ja(e,t){var r;switch(t){case ne:r="Linear";break;case ie:r="Reinhard";break;case ae:r="Uncharted2";break;case oe:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Qa(e,t,r){e=e||{};var n=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return n.filter(eo).join("\n")}function Ka(e){var t=[];for(var r in e){var n=e[r];if(false===n)continue;t.push("#define "+r+" "+n)}return t.join("\n")}function $a(e,t){var r={};var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(var i=0;i<n;i++){var a=e.getActiveAttrib(t,i);var o=a.name;r[o]=e.getAttribLocation(t,o)}return r}function eo(e){return""!==e}function to(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function ro(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function no(e){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;function r(e,t){var r=ni[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return no(r)}return e.replace(t,r)}function io(e){var t=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function r(e,t,r,n){var i="";for(var a=parseInt(t);a<parseInt(r);a++)i+=n.replace(/\[ i \]/g,"[ "+a+" ]");return i}return e.replace(t,r)}function ao(e,t,r,n,i,a){var o=e.context;var s=n.defines;var l=i.vertexShader;var c=i.fragmentShader;var u="SHADOWMAP_TYPE_BASIC";a.shadowMapType===p?u="SHADOWMAP_TYPE_PCF":a.shadowMapType===d&&(u="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE";var f="ENVMAP_MODE_REFLECTION";var m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case le:case ce:h="ENVMAP_TYPE_CUBE";break;case pe:case de:h="ENVMAP_TYPE_CUBE_UV";break;case ue:case he:h="ENVMAP_TYPE_EQUIREC";break;case fe:h="ENVMAP_TYPE_SPHERE";break}switch(n.envMap.mapping){case ce:case he:f="ENVMAP_MODE_REFRACTION";break}switch(n.combine){case $:m="ENVMAP_BLENDING_MULTIPLY";break;case ee:m="ENVMAP_BLENDING_MIX";break;case te:m="ENVMAP_BLENDING_ADD";break}}var v=e.gammaFactor>0?e.gammaFactor:1;var g=Qa(n.extensions,a,t);var y=Ka(s);var x=o.createProgram();var b,_;if(n.isRawShaderMaterial){b=[y].filter(eo).join("\n");b.length>0&&(b+="\n");_=[g,y].filter(eo).join("\n");_.length>0&&(_+="\n")}else{b=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,y,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&false===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(eo).join("\n");_=[g,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,y,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"","#define GAMMA_FACTOR "+v,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.envMap?"#define "+f:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==re?"#define TONE_MAPPING":"",a.toneMapping!==re?ni["tonemapping_pars_fragment"]:"",a.toneMapping!==re?Ja("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?ni["encodings_pars_fragment"]:"",a.mapEncoding?Ya("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?Ya("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Ya("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?Za("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(eo).join("\n")}l=no(l);l=to(l,a);l=ro(l,a);c=no(c);c=to(c,a);c=ro(c,a);l=io(l);c=io(c);var w=b+l;var S=_+c;var T=Wa(o,o.VERTEX_SHADER,w);var M=Wa(o,o.FRAGMENT_SHADER,S);o.attachShader(x,T);o.attachShader(x,M);void 0!==n.index0AttributeName?o.bindAttribLocation(x,0,n.index0AttributeName):true===a.morphTargets&&o.bindAttribLocation(x,0,"position");o.linkProgram(x);var E=o.getProgramInfoLog(x).trim();var A=o.getShaderInfoLog(T).trim();var R=o.getShaderInfoLog(M).trim();var P=true;var C=true;if(false===o.getProgramParameter(x,o.LINK_STATUS)){P=false;console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(x,o.VALIDATE_STATUS),"gl.getProgramInfoLog",E,A,R)}else""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==A&&""!==R||(C=false);C&&(this.diagnostics={runnable:P,material:n,programLog:E,vertexShader:{log:A,prefix:b},fragmentShader:{log:R,prefix:_}});o.deleteShader(T);o.deleteShader(M);var L;this.getUniforms=function(){void 0===L&&(L=new Va(o,x,e));return L};var O;this.getAttributes=function(){void 0===O&&(O=$a(o,x));return O};this.destroy=function(){o.deleteProgram(x);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.name=i.name;this.id=Xa++;this.code=r;this.usedTimes=1;this.program=x;this.vertexShader=T;this.fragmentShader=M;return this}function oo(e,t,r){var n=[];var i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"};var a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e){var t=e.skeleton;var n=t.bones;if(r.floatVertexTextures)return 1024;var i=r.maxVertexUniforms;var a=Math.floor((i-20)/4);var o=Math.min(a,n.length);if(o<n.length){console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+o+".");return 0}return o}function s(e,t){var r;if(e){if(e.isTexture)r=e.encoding;else if(e.isWebGLRenderTarget){console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.");r=e.texture.encoding}}else r=Mt;r===Mt&&t&&(r=At);return r}this.getParameters=function(t,n,a,l,c,u,h){var f=i[t.type];var p=h.isSkinnedMesh?o(h):0;var d=r.precision;if(null!==t.precision){d=r.getMaxPrecision(t.precision);d!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead.")}var m=e.getRenderTarget();var y={shaderID:f,precision:d,supportsVertexTextures:r.vertexTextures,outputEncoding:s(m?m.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:s(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:s(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===pe||t.envMap.mapping===de),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:s(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!l,useFog:t.fog,fogExp:l&&l.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:r.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:c,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===g,flipSided:t.side===v,depthPacking:void 0!==t.depthPacking&&t.depthPacking};return y};this.getProgramCode=function(t,r){var n=[];if(r.shaderID)n.push(r.shaderID);else{n.push(t.fragmentShader);n.push(t.vertexShader)}if(void 0!==t.defines)for(var i in t.defines){n.push(i);n.push(t.defines[i])}for(var o=0;o<a.length;o++)n.push(r[a[o]]);n.push(t.onBeforeCompile.toString());n.push(e.gammaOutput);return n.join()};this.acquireProgram=function(r,i,a,o){var s;for(var l=0,c=n.length;l<c;l++){var u=n[l];if(u.code===o){s=u;++s.usedTimes;break}}if(void 0===s){s=new ao(e,t,o,r,i,a);n.push(s)}return s};this.releaseProgram=function(e){if(0===--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1];n.pop();e.destroy()}};this.programs=n}function so(){var e=new WeakMap;function t(t){var r=e.get(t);if(void 0===r){r={};e.set(t,r)}return r}function r(t){e.delete(t)}function n(t,r,n){e.get(t)[r]=n}function i(){e=new WeakMap}return{get:t,remove:r,update:n,dispose:i}}function lo(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function co(e,t){if(e.renderOrder!==t.renderOrder)return e.renderOrder-t.renderOrder;return e.z!==t.z?t.z-e.z:e.id-t.id}function uo(){var e=[];var t=0;var r=[];var n=[];function i(){t=0;r.length=0;n.length=0}function a(i,a,o,s,l){var c=e[t];if(void 0===c){c={id:i.id,object:i,geometry:a,material:o,program:o.program,renderOrder:i.renderOrder,z:s,group:l};e[t]=c}else{c.id=i.id;c.object=i;c.geometry=a;c.material=o;c.program=o.program;c.renderOrder=i.renderOrder;c.z=s;c.group=l}(true===o.transparent?n:r).push(c);t++}function o(){r.length>1&&r.sort(lo);n.length>1&&n.sort(co)}return{opaque:r,transparent:n,init:i,push:a,sort:o}}function ho(){var e={};function t(t,r){var n=t.id+","+r.id;var i=e[n];if(void 0===i){i=new uo;e[n]=i}return i}function r(){e={}}return{get:t,dispose:r}}function fo(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new Ft,color:new oi,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"SpotLight":r={position:new Ft,direction:new Ft,color:new oi,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"PointLight":r={position:new Ft,color:new oi,distance:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new Dt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new Ft,skyColor:new oi,groundColor:new oi};break;case"RectAreaLight":r={color:new oi,position:new Ft,halfWidth:new Ft,halfHeight:new Ft};break}e[t.id]=r;return r}}}var po=0;function mo(){var e=new fo;var t={id:po++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};var r=new Ft;var n=new kt;var i=new kt;function a(a,o,s){var l=0,c=0,u=0;var h=0;var f=0;var p=0;var d=0;var m=0;var v=s.matrixWorldInverse;for(var g=0,y=a.length;g<y;g++){var x=a[g];var b=x.color;var _=x.intensity;var w=x.distance;var S=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight){l+=b.r*_;c+=b.g*_;u+=b.b*_}else if(x.isDirectionalLight){var T=e.get(x);T.color.copy(x.color).multiplyScalar(x.intensity);T.direction.setFromMatrixPosition(x.matrixWorld);r.setFromMatrixPosition(x.target.matrixWorld);T.direction.sub(r);T.direction.transformDirection(v);T.shadow=x.castShadow;if(x.castShadow){var M=x.shadow;T.shadowBias=M.bias;T.shadowRadius=M.radius;T.shadowMapSize=M.mapSize}t.directionalShadowMap[h]=S;t.directionalShadowMatrix[h]=x.shadow.matrix;t.directional[h]=T;h++}else if(x.isSpotLight){var T=e.get(x);T.position.setFromMatrixPosition(x.matrixWorld);T.position.applyMatrix4(v);T.color.copy(b).multiplyScalar(_);T.distance=w;T.direction.setFromMatrixPosition(x.matrixWorld);r.setFromMatrixPosition(x.target.matrixWorld);T.direction.sub(r);T.direction.transformDirection(v);T.coneCos=Math.cos(x.angle);T.penumbraCos=Math.cos(x.angle*(1-x.penumbra));T.decay=0===x.distance?0:x.decay;T.shadow=x.castShadow;if(x.castShadow){var M=x.shadow;T.shadowBias=M.bias;T.shadowRadius=M.radius;T.shadowMapSize=M.mapSize}t.spotShadowMap[p]=S;t.spotShadowMatrix[p]=x.shadow.matrix;t.spot[p]=T;p++}else if(x.isRectAreaLight){var T=e.get(x);T.color.copy(b).multiplyScalar(_);T.position.setFromMatrixPosition(x.matrixWorld);T.position.applyMatrix4(v);i.identity();n.copy(x.matrixWorld);n.premultiply(v);i.extractRotation(n);T.halfWidth.set(.5*x.width,0,0);T.halfHeight.set(0,.5*x.height,0);T.halfWidth.applyMatrix4(i);T.halfHeight.applyMatrix4(i);t.rectArea[d]=T;d++}else if(x.isPointLight){var T=e.get(x);T.position.setFromMatrixPosition(x.matrixWorld);T.position.applyMatrix4(v);T.color.copy(x.color).multiplyScalar(x.intensity);T.distance=x.distance;T.decay=0===x.distance?0:x.decay;T.shadow=x.castShadow;if(x.castShadow){var M=x.shadow;T.shadowBias=M.bias;T.shadowRadius=M.radius;T.shadowMapSize=M.mapSize;T.shadowCameraNear=M.camera.near;T.shadowCameraFar=M.camera.far}t.pointShadowMap[f]=S;t.pointShadowMatrix[f]=x.shadow.matrix;t.point[f]=T;f++}else if(x.isHemisphereLight){var T=e.get(x);T.direction.setFromMatrixPosition(x.matrixWorld);T.direction.transformDirection(v);T.direction.normalize();T.skyColor.copy(x.color).multiplyScalar(_);T.groundColor.copy(x.groundColor).multiplyScalar(_);t.hemi[m]=T;m++}}t.ambient[0]=l;t.ambient[1]=c;t.ambient[2]=u;t.directional.length=h;t.spot.length=p;t.rectArea.length=d;t.point.length=f;t.hemi.length=m;t.hash=t.id+","+h+","+f+","+p+","+d+","+m+","+o.length}return{setup:a,state:t}}function vo(){var e=new mo;var t=[];var r=[];var n=[];function i(){t.length=0;r.length=0;n.length=0}function a(e){t.push(e)}function o(e){r.push(e)}function s(e){n.push(e)}function l(n){e.setup(t,r,n)}var c={lightsArray:t,shadowsArray:r,spritesArray:n,lights:e};return{init:i,state:c,setupLights:l,pushLight:a,pushShadow:o,pushSprite:s}}function go(){var e={};function t(t,r){var n=t.id+","+r.id;var i=e[n];if(void 0===i){i=new vo;e[n]=i}return i}function r(){e={}}return{get:t,dispose:r}}function yo(e){Ni.call(this);this.type="MeshDepthMaterial";this.depthPacking=It;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.setValues(e)}yo.prototype=Object.create(Ni.prototype);yo.prototype.constructor=yo;yo.prototype.isMeshDepthMaterial=true;yo.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.depthPacking=e.depthPacking;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;return this};function xo(e){Ni.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new Ft;this.nearDistance=1;this.farDistance=1e3;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.fog=false;this.lights=false;this.setValues(e)}xo.prototype=Object.create(Ni.prototype);xo.prototype.constructor=xo;xo.prototype.isMeshDistanceMaterial=true;xo.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.referencePosition.copy(e.referencePosition);this.nearDistance=e.nearDistance;this.farDistance=e.farDistance;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;return this};function bo(e,t,r){var n=new Jt,i=new kt,a=new Dt,o=new Dt(r,r),s=new Ft,l=new Ft,c=1,u=2,h=1+(c|u),f=new Array(h),d=new Array(h),y={};var x={0:v,1:m,2:g};var b=[new Ft(1,0,0),new Ft(-1,0,0),new Ft(0,0,1),new Ft(0,0,-1),new Ft(0,1,0),new Ft(0,-1,0)];var _=[new Ft(0,1,0),new Ft(0,1,0),new Ft(0,1,0),new Ft(0,1,0),new Ft(0,0,1),new Ft(0,0,-1)];var w=[new Vt,new Vt,new Vt,new Vt,new Vt,new Vt];for(var S=0;S!==h;++S){var T=0!==(S&c);var M=0!==(S&u);var E=new yo({depthPacking:Bt,morphTargets:T,skinning:M});f[S]=E;var A=new xo({morphTargets:T,skinning:M});d[S]=A}var R=this;this.enabled=false;this.autoUpdate=true;this.needsUpdate=false;this.type=p;this.render=function(t,r,c){if(false===R.enabled)return;if(false===R.autoUpdate&&false===R.needsUpdate)return;if(0===t.length)return;var u=e.context;var h=e.state;h.disable(u.BLEND);h.buffers.color.setClear(1,1,1,1);h.buffers.depth.setTest(true);h.setScissorTest(false);var f;for(var p=0,d=t.length;p<d;p++){var m=t[p];var v=m.shadow;var g=m&&m.isPointLight;if(void 0===v){console.warn("THREE.WebGLShadowMap:",m,"has no shadow.");continue}var y=v.camera;a.copy(v.mapSize);a.min(o);if(g){var x=a.x;var S=a.y;w[0].set(2*x,S,x,S);w[1].set(0,S,x,S);w[2].set(3*x,S,x,S);w[3].set(x,S,x,S);w[4].set(3*x,0,x,S);w[5].set(x,0,x,S);a.x*=4;a.y*=2}if(null===v.map){var T={minFilter:ye,magFilter:ye,format:Ne};v.map=new jt(a.x,a.y,T);v.map.texture.name=m.name+".shadowMap";y.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(m);var M=v.map;var E=v.matrix;l.setFromMatrixPosition(m.matrixWorld);y.position.copy(l);if(g){f=6;E.makeTranslation(-l.x,-l.y,-l.z)}else{f=1;s.setFromMatrixPosition(m.target.matrixWorld);y.lookAt(s);y.updateMatrixWorld();E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);E.multiply(y.projectionMatrix);E.multiply(y.matrixWorldInverse)}e.setRenderTarget(M);e.clear();for(var A=0;A<f;A++){if(g){s.copy(y.position);s.add(b[A]);y.up.copy(_[A]);y.lookAt(s);y.updateMatrixWorld();var P=w[A];h.viewport(P)}i.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse);n.setFromMatrix(i);C(r,c,y,g)}}R.needsUpdate=false};function P(t,r,n,i,a,o){var s=t.geometry;var l=null;var h=f;var p=t.customDepthMaterial;if(n){h=d;p=t.customDistanceMaterial}if(p)l=p;else{var m=false;r.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0));t.isSkinnedMesh&&false===r.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var v=t.isSkinnedMesh&&r.skinning;var g=0;m&&(g|=c);v&&(g|=u);l=h[g]}if(e.localClippingEnabled&&true===r.clipShadows&&0!==r.clippingPlanes.length){var b=l.uuid,_=r.uuid;var w=y[b];if(void 0===w){w={};y[b]=w}var S=w[_];if(void 0===S){S=l.clone();w[_]=S}l=S}l.visible=r.visible;l.wireframe=r.wireframe;l.side=null!=r.shadowSide?r.shadowSide:x[r.side];l.clipShadows=r.clipShadows;l.clippingPlanes=r.clippingPlanes;l.clipIntersection=r.clipIntersection;l.wireframeLinewidth=r.wireframeLinewidth;l.linewidth=r.linewidth;if(n&&l.isMeshDistanceMaterial){l.referencePosition.copy(i);l.nearDistance=a;l.farDistance=o}return l}function C(r,i,a,o){if(false===r.visible)return;var s=r.layers.test(i.layers);if(s&&(r.isMesh||r.isLine||r.isPoints)&&r.castShadow&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,r.matrixWorld);var c=t.update(r);var u=r.material;if(Array.isArray(u)){var h=c.groups;for(var f=0,p=h.length;f<p;f++){var d=h[f];var m=u[d.materialIndex];if(m&&m.visible){var v=P(r,m,o,l,a.near,a.far);e.renderBufferDirect(a,null,c,v,r,d)}}}else if(u.visible){var v=P(r,u,o,l,a.near,a.far);e.renderBufferDirect(a,null,c,v,r,null)}}var g=r.children;for(var y=0,x=g.length;y<x;y++)C(g[y],i,a,o)}}function _o(e,t,r,n,i,a,o,s,l){Ht.call(this,e,t,r,n,i,a,o,s,l);this.needsUpdate=true}_o.prototype=Object.create(Ht.prototype);_o.prototype.constructor=_o;function wo(e,t,r,n,i){var a,o;var s,l,c;var u;var h=new Ft;var f=new Nt;var p=new Ft;function d(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);var r=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer();o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW);s=m();l={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")};c={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),center:t.getUniformLocation(s,"center"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),fogDepth:t.getUniformLocation(s,"fogDepth"),alphaTest:t.getUniformLocation(s,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8;n.height=8;var i=n.getContext("2d");i.fillStyle="white";i.fillRect(0,0,8,8);u=new _o(n)}this.render=function(i,m,g){if(0===i.length)return;void 0===s&&d();r.useProgram(s);r.initAttributes();r.enableAttribute(l.position);r.enableAttribute(l.uv);r.disableUnusedAttributes();r.disable(t.CULL_FACE);r.enable(t.BLEND);t.bindBuffer(t.ARRAY_BUFFER,a);t.vertexAttribPointer(l.position,2,t.FLOAT,false,16,0);t.vertexAttribPointer(l.uv,2,t.FLOAT,false,16,8);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);t.uniformMatrix4fv(c.projectionMatrix,false,g.projectionMatrix.elements);r.activeTexture(t.TEXTURE0);t.uniform1i(c.map,0);var y=0;var x=0;var b=m.fog;if(b){t.uniform3f(c.fogColor,b.color.r,b.color.g,b.color.b);if(b.isFog){t.uniform1f(c.fogNear,b.near);t.uniform1f(c.fogFar,b.far);t.uniform1i(c.fogType,1);y=1;x=1}else if(b.isFogExp2){t.uniform1f(c.fogDensity,b.density);t.uniform1i(c.fogType,2);y=2;x=2}}else{t.uniform1i(c.fogType,0);y=0;x=0}for(var _=0,w=i.length;_<w;_++){var S=i[_];S.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,S.matrixWorld);S.z=-S.modelViewMatrix.elements[14]}i.sort(v);var T=[];var M=[];for(var _=0,w=i.length;_<w;_++){var S=i[_];var E=S.material;if(false===E.visible)continue;S.onBeforeRender(e,m,g,void 0,E,void 0);t.uniform1f(c.alphaTest,E.alphaTest);t.uniformMatrix4fv(c.modelViewMatrix,false,S.modelViewMatrix.elements);S.matrixWorld.decompose(h,f,p);T[0]=p.x;T[1]=p.y;M[0]=S.center.x-.5;M[1]=S.center.y-.5;var A=0;m.fog&&E.fog&&(A=x);if(y!==A){t.uniform1i(c.fogType,A);y=A}if(null!==E.map){t.uniform2f(c.uvOffset,E.map.offset.x,E.map.offset.y);t.uniform2f(c.uvScale,E.map.repeat.x,E.map.repeat.y)}else{t.uniform2f(c.uvOffset,0,0);t.uniform2f(c.uvScale,1,1)}t.uniform1f(c.opacity,E.opacity);t.uniform3f(c.color,E.color.r,E.color.g,E.color.b);t.uniform1f(c.rotation,E.rotation);t.uniform2fv(c.center,M);t.uniform2fv(c.scale,T);r.setBlending(E.blending,E.blendEquation,E.blendSrc,E.blendDst,E.blendEquationAlpha,E.blendSrcAlpha,E.blendDstAlpha,E.premultipliedAlpha);r.buffers.depth.setTest(E.depthTest);r.buffers.depth.setMask(E.depthWrite);r.buffers.color.setMask(E.colorWrite);n.setTexture2D(E.map||u,0);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);S.onAfterRender(e,m,g,void 0,E,void 0)}r.enable(t.CULL_FACE);r.reset()};function m(){var e=t.createProgram();var r=t.createShader(t.VERTEX_SHADER);var n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n"));t.shaderSource(n,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n"));t.compileShader(r);t.compileShader(n);t.attachShader(e,r);t.attachShader(e,n);t.linkProgram(e);return e}function v(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}}function So(e,t,r){function n(){var t=false;var r=new Vt;var n=null;var i=new Vt(0,0,0,0);return{setMask:function(r){if(n!==r&&!t){e.colorMask(r,r,r,r);n=r}},setLocked:function(e){t=e},setClear:function(t,n,a,o,s){if(true===s){t*=o;n*=o;a*=o}r.set(t,n,a,o);if(false===i.equals(r)){e.clearColor(t,n,a,o);i.copy(r)}},reset:function(){t=false;n=null;i.set(-1,0,0,0)}}}function i(){var t=false;var r=null;var n=null;var i=null;return{setTest:function(t){t?le(e.DEPTH_TEST):ce(e.DEPTH_TEST)},setMask:function(n){if(r!==n&&!t){e.depthMask(n);r=n}},setFunc:function(t){if(n!==t){if(t)switch(t){case W:e.depthFunc(e.NEVER);break;case X:e.depthFunc(e.ALWAYS);break;case q:e.depthFunc(e.LESS);break;case Y:e.depthFunc(e.LEQUAL);break;case Z:e.depthFunc(e.EQUAL);break;case J:e.depthFunc(e.GEQUAL);break;case Q:e.depthFunc(e.GREATER);break;case K:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);n=t}},setLocked:function(e){t=e},setClear:function(t){if(i!==t){e.clearDepth(t);i=t}},reset:function(){t=false;r=null;n=null;i=null}}}function a(){var t=false;var r=null;var n=null;var i=null;var a=null;var o=null;var s=null;var l=null;var c=null;return{setTest:function(t){t?le(e.STENCIL_TEST):ce(e.STENCIL_TEST)},setMask:function(n){if(r!==n&&!t){e.stencilMask(n);r=n}},setFunc:function(t,r,o){if(n!==t||i!==r||a!==o){e.stencilFunc(t,r,o);n=t;i=r;a=o}},setOp:function(t,r,n){if(o!==t||s!==r||l!==n){e.stencilOp(t,r,n);o=t;s=r;l=n}},setLocked:function(e){t=e},setClear:function(t){if(c!==t){e.clearStencil(t);c=t}},reset:function(){t=false;r=null;n=null;i=null;a=null;o=null;s=null;l=null;c=null}}}var c=new n;var u=new i;var h=new a;var f=e.getParameter(e.MAX_VERTEX_ATTRIBS);var p=new Uint8Array(f);var d=new Uint8Array(f);var m=new Uint8Array(f);var y={};var x=null;var b=null;var _=null;var w=null;var P=null;var C=null;var L=null;var O=null;var I=null;var B=false;var U=null;var D=null;var k=null;var N=null;var F=null;var G=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);var z=false;var H=0;var V=e.getParameter(e.VERSION);if(-1!==V.indexOf("WebGL")){H=parseFloat(/^WebGL\ ([0-9])/.exec(V)[1]);z=H>=1}else if(-1!==V.indexOf("OpenGL ES")){H=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(V)[1]);z=H>=2}var j=null;var $={};var ee=new Vt;var te=new Vt;function re(t,r,n){var i=new Uint8Array(4);var a=e.createTexture();e.bindTexture(t,a);e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<n;o++)e.texImage2D(r+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return a}var ne={};ne[e.TEXTURE_2D]=re(e.TEXTURE_2D,e.TEXTURE_2D,1);ne[e.TEXTURE_CUBE_MAP]=re(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6);c.setClear(0,0,0,1);u.setClear(1);h.setClear(0);le(e.DEPTH_TEST);u.setFunc(Y);de(false);me(s);le(e.CULL_FACE);le(e.BLEND);fe(T);function ie(){for(var e=0,t=p.length;e<t;e++)p[e]=0}function ae(r){p[r]=1;if(0===d[r]){e.enableVertexAttribArray(r);d[r]=1}if(0!==m[r]){var n=t.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(r,0);m[r]=0}}function oe(r,n){p[r]=1;if(0===d[r]){e.enableVertexAttribArray(r);d[r]=1}if(m[r]!==n){var i=t.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(r,n);m[r]=n}}function se(){for(var t=0,r=d.length;t!==r;++t)if(d[t]!==p[t]){e.disableVertexAttribArray(t);d[t]=0}}function le(t){if(true!==y[t]){e.enable(t);y[t]=true}}function ce(t){if(false!==y[t]){e.disable(t);y[t]=false}}function ue(){if(null===x){x=[];if(t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")){var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS);for(var n=0;n<r.length;n++)x.push(r[n])}}return x}function he(t){if(b!==t){e.useProgram(t);b=t;return true}return false}function fe(t,n,i,a,o,s,l,c){t!==S?le(e.BLEND):ce(e.BLEND);if(t!==R){if(t!==_||c!==B)switch(t){case M:if(c){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.SRC_ALPHA,e.ONE)}break;case E:if(c){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)}break;case A:if(c){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.ZERO,e.SRC_COLOR)}break;default:if(c){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)}else{e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)}}w=null;P=null;C=null;L=null;O=null;I=null}else{o=o||n;s=s||i;l=l||a;if(n!==w||o!==L){e.blendEquationSeparate(r.convert(n),r.convert(o));w=n;L=o}if(i!==P||a!==C||s!==O||l!==I){e.blendFuncSeparate(r.convert(i),r.convert(a),r.convert(s),r.convert(l));P=i;C=a;O=s;I=l}}_=t;B=c}function pe(t,r){t.side===g?ce(e.CULL_FACE):le(e.CULL_FACE);var n=t.side===v;r&&(n=!n);de(n);true===t.transparent?fe(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):fe(S);u.setFunc(t.depthFunc);u.setTest(t.depthTest);u.setMask(t.depthWrite);c.setMask(t.colorWrite);ge(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function de(t){if(U!==t){t?e.frontFace(e.CW):e.frontFace(e.CCW);U=t}}function me(t){if(t!==o){le(e.CULL_FACE);t!==D&&(t===s?e.cullFace(e.BACK):t===l?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))}else ce(e.CULL_FACE);D=t}function ve(t){if(t!==k){z&&e.lineWidth(t);k=t}}function ge(t,r,n){if(t){le(e.POLYGON_OFFSET_FILL);if(N!==r||F!==n){e.polygonOffset(r,n);N=r;F=n}}else ce(e.POLYGON_OFFSET_FILL)}function ye(t){t?le(e.SCISSOR_TEST):ce(e.SCISSOR_TEST)}function xe(t){void 0===t&&(t=e.TEXTURE0+G-1);if(j!==t){e.activeTexture(t);j=t}}function be(t,r){null===j&&xe();var n=$[j];if(void 0===n){n={type:void 0,texture:void 0};$[j]=n}if(n.type!==t||n.texture!==r){e.bindTexture(t,r||ne[t]);n.type=t;n.texture=r}}function _e(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function we(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Se(t){if(false===ee.equals(t)){e.scissor(t.x,t.y,t.z,t.w);ee.copy(t)}}function Te(t){if(false===te.equals(t)){e.viewport(t.x,t.y,t.z,t.w);te.copy(t)}}function Me(){for(var t=0;t<d.length;t++)if(1===d[t]){e.disableVertexAttribArray(t);d[t]=0}y={};x=null;j=null;$={};b=null;_=null;U=null;D=null;c.reset();u.reset();h.reset()}return{buffers:{color:c,depth:u,stencil:h},initAttributes:ie,enableAttribute:ae,enableAttributeAndDivisor:oe,disableUnusedAttributes:se,enable:le,disable:ce,getCompressedTextureFormats:ue,useProgram:he,setBlending:fe,setMaterial:pe,setFlipSided:de,setCullFace:me,setLineWidth:ve,setPolygonOffset:ge,setScissorTest:ye,activeTexture:xe,bindTexture:be,compressedTexImage2D:_e,texImage2D:we,scissor:Se,viewport:Te,reset:Me}}function To(e,t,r,n,i,a,o){var s="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;var l={};var c;function u(e,t){if(e.width>t||e.height>t){if("data"in e){console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");return}var r=t/Math.max(e.width,e.height);var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(e.width*r);n.height=Math.floor(e.height*r);var i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height);console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e);return n}return e}function h(e){return Ut.isPowerOfTwo(e.width)&&Ut.isPowerOfTwo(e.height)}function f(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){void 0===c&&(c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));c.width=Ut.floorPowerOfTwo(e.width);c.height=Ut.floorPowerOfTwo(e.height);var t=c.getContext("2d");t.drawImage(e,0,0,c.width,c.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+c.width+"x"+c.height,e);return c}return e}function p(e){return e.wrapS!==ve||e.wrapT!==ve||e.minFilter!==ye&&e.minFilter!==_e}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==ye&&e.minFilter!==_e}function m(t,r,i,a){e.generateMipmap(t);var o=n.get(r);o.__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function v(t){if(t===ye||t===xe||t===be)return e.NEAREST;return e.LINEAR}function g(e){var t=e.target;t.removeEventListener("dispose",g);x(t);t.isVideoTexture&&delete l[t.id];o.memory.textures--}function y(e){var t=e.target;t.removeEventListener("dispose",y);b(t);o.memory.textures--}function x(t){var r=n.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}n.remove(t)}function b(t){var r=n.get(t);var i=n.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var a=0;a<6;a++){e.deleteFramebuffer(r.__webglFramebuffer[a]);r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[a])}else{e.deleteFramebuffer(r.__webglFramebuffer);r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer)}n.remove(t.texture);n.remove(t)}function _(t,i){var a=n.get(t);t.isVideoTexture&&O(t);if(t.version>0&&a.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(false!==o.complete){M(a,t,i);return}console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}r.activeTexture(e.TEXTURE0+i);r.bindTexture(e.TEXTURE_2D,a.__webglTexture)}function w(t,s){var l=n.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){if(!l.__image__webglTextureCube){t.addEventListener("dispose",g);l.__image__webglTextureCube=e.createTexture();o.memory.textures++}r.activeTexture(e.TEXTURE0+s);r.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);var c=t&&t.isCompressedTexture;var f=t.image[0]&&t.image[0].isDataTexture;var p=[];for(var v=0;v<6;v++)p[v]=c||f?f?t.image[v].image:t.image[v]:u(t.image[v],i.maxCubemapSize);var y=p[0],x=h(y),b=a.convert(t.format),_=a.convert(t.type);T(e.TEXTURE_CUBE_MAP,t,x);for(var v=0;v<6;v++)if(c){var w,S=p[v].mipmaps;for(var M=0,E=S.length;M<E;M++){w=S[M];t.format!==Ne&&t.format!==ke?r.getCompressedTextureFormats().indexOf(b)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,b,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,b,w.width,w.height,0,b,_,w.data)}}else f?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,p[v].width,p[v].height,0,b,_,p[v].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,_,p[v]);l.__maxMipLevel=c?S.length-1:0;d(t,x)&&m(e.TEXTURE_CUBE_MAP,t,y.width,y.height);l.__version=t.version;t.onUpdate&&t.onUpdate(t)}else{r.activeTexture(e.TEXTURE0+s);r.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)}}function S(t,i){r.activeTexture(e.TEXTURE0+i);r.bindTexture(e.TEXTURE_CUBE_MAP,n.get(t).__webglTexture)}function T(r,o,s){var l;if(s){e.texParameteri(r,e.TEXTURE_WRAP_S,a.convert(o.wrapS));e.texParameteri(r,e.TEXTURE_WRAP_T,a.convert(o.wrapT));e.texParameteri(r,e.TEXTURE_MAG_FILTER,a.convert(o.magFilter));e.texParameteri(r,e.TEXTURE_MIN_FILTER,a.convert(o.minFilter))}else{e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);o.wrapS===ve&&o.wrapT===ve||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o);e.texParameteri(r,e.TEXTURE_MAG_FILTER,v(o.magFilter));e.texParameteri(r,e.TEXTURE_MIN_FILTER,v(o.minFilter));o.minFilter!==ye&&o.minFilter!==_e&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)}l=t.get("EXT_texture_filter_anisotropic");if(l){if(o.type===Ce&&null===t.get("OES_texture_float_linear"))return;if(o.type===Le&&null===t.get("OES_texture_half_float_linear"))return;if(o.anisotropy>1||n.get(o).__currentAnisotropy){e.texParameterf(r,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy()));n.get(o).__currentAnisotropy=o.anisotropy}}}function M(t,n,l){if(void 0===t.__webglInit){t.__webglInit=true;n.addEventListener("dispose",g);t.__webglTexture=e.createTexture();o.memory.textures++}r.activeTexture(e.TEXTURE0+l);r.bindTexture(e.TEXTURE_2D,t.__webglTexture);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha);e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment);var c=u(n.image,i.maxTextureSize);p(n)&&false===h(c)&&(c=f(c));var v=h(c),y=a.convert(n.format),x=a.convert(n.type);T(e.TEXTURE_2D,n,v);var b,_=n.mipmaps;if(n.isDepthTexture){var w=e.DEPTH_COMPONENT;if(n.type===Ce){if(!s)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else s&&(w=e.DEPTH_COMPONENT16);if(n.format===He&&w===e.DEPTH_COMPONENT&&n.type!==Ae&&n.type!==Pe){console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.");n.type=Ae;x=a.convert(n.type)}if(n.format===Ve){w=e.DEPTH_STENCIL;if(n.type!==Ue){console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.");n.type=Ue;x=a.convert(n.type)}}r.texImage2D(e.TEXTURE_2D,0,w,c.width,c.height,0,y,x,null)}else if(n.isDataTexture)if(_.length>0&&v){for(var S=0,M=_.length;S<M;S++){b=_[S];r.texImage2D(e.TEXTURE_2D,S,y,b.width,b.height,0,y,x,b.data)}n.generateMipmaps=false;t.__maxMipLevel=_.length-1}else{r.texImage2D(e.TEXTURE_2D,0,y,c.width,c.height,0,y,x,c.data);t.__maxMipLevel=0}else if(n.isCompressedTexture){for(var S=0,M=_.length;S<M;S++){b=_[S];n.format!==Ne&&n.format!==ke?r.getCompressedTextureFormats().indexOf(y)>-1?r.compressedTexImage2D(e.TEXTURE_2D,S,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,S,y,b.width,b.height,0,y,x,b.data)}t.__maxMipLevel=_.length-1}else if(_.length>0&&v){for(var S=0,M=_.length;S<M;S++){b=_[S];r.texImage2D(e.TEXTURE_2D,S,y,y,x,b)}n.generateMipmaps=false;t.__maxMipLevel=_.length-1}else{r.texImage2D(e.TEXTURE_2D,0,y,y,x,c);t.__maxMipLevel=0}d(n,v)&&m(e.TEXTURE_2D,n,c.width,c.height);t.__version=n.version;n.onUpdate&&n.onUpdate(n)}function E(t,i,o,s){var l=a.convert(i.texture.format);var c=a.convert(i.texture.type);r.texImage2D(s,0,l,i.width,i.height,0,l,c,null);e.bindFramebuffer(e.FRAMEBUFFER,t);e.framebufferTexture2D(e.FRAMEBUFFER,o,s,n.get(i.texture).__webglTexture,0);e.bindFramebuffer(e.FRAMEBUFFER,null)}function A(t,r){e.bindRenderbuffer(e.RENDERBUFFER,t);if(r.depthBuffer&&!r.stencilBuffer){e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.width,r.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(r.depthBuffer&&r.stencilBuffer){e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,r.width,r.height);e.bindRenderbuffer(e.RENDERBUFFER,null)}function R(t,r){var i=r&&r.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported");e.bindFramebuffer(e.FRAMEBUFFER,t);if(!(r.depthTexture&&r.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(!n.get(r.depthTexture).__webglTexture||r.depthTexture.image.width!==r.width||r.depthTexture.image.height!==r.height){r.depthTexture.image.width=r.width;r.depthTexture.image.height=r.height;r.depthTexture.needsUpdate=true}_(r.depthTexture,0);var a=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===He)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==Ve)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}function P(t){var r=n.get(t);var i=true===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");R(r.__webglFramebuffer,t)}else if(i){r.__webglDepthbuffer=[];for(var a=0;a<6;a++){e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[a]);r.__webglDepthbuffer[a]=e.createRenderbuffer();A(r.__webglDepthbuffer[a],t)}}else{e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer);r.__webglDepthbuffer=e.createRenderbuffer();A(r.__webglDepthbuffer,t)}e.bindFramebuffer(e.FRAMEBUFFER,null)}function C(t){var i=n.get(t);var a=n.get(t.texture);t.addEventListener("dispose",y);a.__webglTexture=e.createTexture();o.memory.textures++;var s=true===t.isWebGLRenderTargetCube;var l=h(t);if(s){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){r.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture);T(e.TEXTURE_CUBE_MAP,t.texture,l);for(var c=0;c<6;c++)E(i.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);d(t.texture,l)&&m(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height);r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else{r.bindTexture(e.TEXTURE_2D,a.__webglTexture);T(e.TEXTURE_2D,t.texture,l);E(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D);d(t.texture,l)&&m(e.TEXTURE_2D,t.texture,t.width,t.height);r.bindTexture(e.TEXTURE_2D,null)}t.depthBuffer&&P(t)}function L(t){var i=t.texture;var a=h(t);if(d(i,a)){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D;var s=n.get(i).__webglTexture;r.bindTexture(o,s);m(o,i,t.width,t.height);r.bindTexture(o,null)}}function O(e){var t=e.id;var r=o.render.frame;if(l[t]!==r){l[t]=r;e.update()}}this.setTexture2D=_;this.setTextureCube=w;this.setTextureCubeDynamic=S;this.setupRenderTarget=C;this.updateRenderTargetMipmap=L}function Mo(e,t){function r(r){var n;if(r===me)return e.REPEAT;if(r===ve)return e.CLAMP_TO_EDGE;if(r===ge)return e.MIRRORED_REPEAT;if(r===ye)return e.NEAREST;if(r===xe)return e.NEAREST_MIPMAP_NEAREST;if(r===be)return e.NEAREST_MIPMAP_LINEAR;if(r===_e)return e.LINEAR;if(r===we)return e.LINEAR_MIPMAP_NEAREST;if(r===Se)return e.LINEAR_MIPMAP_LINEAR;if(r===Te)return e.UNSIGNED_BYTE;if(r===Oe)return e.UNSIGNED_SHORT_4_4_4_4;if(r===Ie)return e.UNSIGNED_SHORT_5_5_5_1;if(r===Be)return e.UNSIGNED_SHORT_5_6_5;if(r===Me)return e.BYTE;if(r===Ee)return e.SHORT;if(r===Ae)return e.UNSIGNED_SHORT;if(r===Re)return e.INT;if(r===Pe)return e.UNSIGNED_INT;if(r===Ce)return e.FLOAT;if(r===Le){n=t.get("OES_texture_half_float");if(null!==n)return n.HALF_FLOAT_OES}if(r===De)return e.ALPHA;if(r===ke)return e.RGB;if(r===Ne)return e.RGBA;if(r===Fe)return e.LUMINANCE;if(r===Ge)return e.LUMINANCE_ALPHA;if(r===He)return e.DEPTH_COMPONENT;if(r===Ve)return e.DEPTH_STENCIL;if(r===P)return e.FUNC_ADD;if(r===C)return e.FUNC_SUBTRACT;if(r===L)return e.FUNC_REVERSE_SUBTRACT;if(r===B)return e.ZERO;if(r===U)return e.ONE;if(r===D)return e.SRC_COLOR;if(r===k)return e.ONE_MINUS_SRC_COLOR;if(r===N)return e.SRC_ALPHA;if(r===F)return e.ONE_MINUS_SRC_ALPHA;if(r===G)return e.DST_ALPHA;if(r===z)return e.ONE_MINUS_DST_ALPHA;if(r===H)return e.DST_COLOR;if(r===V)return e.ONE_MINUS_DST_COLOR;if(r===j)return e.SRC_ALPHA_SATURATE;if(r===je||r===We||r===Xe||r===qe){n=t.get("WEBGL_compressed_texture_s3tc");if(null!==n){if(r===je)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===We)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Xe)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===qe)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(r===Ye||r===Ze||r===Je||r===Qe){n=t.get("WEBGL_compressed_texture_pvrtc");if(null!==n){if(r===Ye)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Ze)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Je)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Qe)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}if(r===Ke){n=t.get("WEBGL_compressed_texture_etc1");if(null!==n)return n.COMPRESSED_RGB_ETC1_WEBGL}if(r===$e||r===et||r===tt||r===rt||r===nt||r===it||r===at||r===ot||r===st||r===lt||r===ct||r===ut||r===ht||r===ft){n=t.get("WEBGL_compressed_texture_astc");if(null!==n)return r}if(r===O||r===I){n=t.get("EXT_blend_minmax");if(null!==n){if(r===O)return n.MIN_EXT;if(r===I)return n.MAX_EXT}}if(r===Ue){n=t.get("WEBGL_depth_texture");if(null!==n)return n.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:r}}function Eo(e,t,r,n){di.call(this);this.type="PerspectiveCamera";this.fov=void 0!==e?e:50;this.zoom=1;this.near=void 0!==r?r:.1;this.far=void 0!==n?n:2e3;this.focus=10;this.aspect=void 0!==t?t:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}Eo.prototype=Object.assign(Object.create(di.prototype),{constructor:Eo,isPerspectiveCamera:true,copy:function(e,t){di.prototype.copy.call(this,e,t);this.fov=e.fov;this.zoom=e.zoom;this.near=e.near;this.far=e.far;this.focus=e.focus;this.aspect=e.aspect;this.view=null===e.view?null:Object.assign({},e.view);this.filmGauge=e.filmGauge;this.filmOffset=e.filmOffset;return this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ut.RAD2DEG*Math.atan(t);this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ut.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ut.RAD2DEG*Math.atan(Math.tan(.5*Ut.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,a){this.aspect=e/t;null===this.view&&(this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=true;this.view.fullWidth=e;this.view.fullHeight=t;this.view.offsetX=r;this.view.offsetY=n;this.view.width=i;this.view.height=a;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=false);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ut.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*n/o;t-=a.offsetY*r/s;n*=a.width/o;r*=a.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth());this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far)},toJSON:function(e){var t=pi.prototype.toJSON.call(this,e);t.object.fov=this.fov;t.object.zoom=this.zoom;t.object.near=this.near;t.object.far=this.far;t.object.focus=this.focus;t.object.aspect=this.aspect;null!==this.view&&(t.object.view=Object.assign({},this.view));t.object.filmGauge=this.filmGauge;t.object.filmOffset=this.filmOffset;return t}});function Ao(e){Eo.call(this);this.cameras=e||[]}Ao.prototype=Object.assign(Object.create(Eo.prototype),{constructor:Ao,isArrayCamera:true});function Ro(e){var t=this;var r=null;var n=null;var i=null;var a=new kt;var o=new kt;if("undefined"!==typeof window&&"VRFrameData"in window){n=new window.VRFrameData;window.addEventListener("vrdisplaypresentchange",v,false)}var s=new kt;var l=new Nt;var c=new Ft;var u=new Eo;u.bounds=new Vt(0,0,.5,1);u.layers.enable(1);var h=new Eo;h.bounds=new Vt(.5,0,.5,1);h.layers.enable(2);var f=new Ao([u,h]);f.layers.enable(1);f.layers.enable(2);function p(){return null!==r&&true===r.isPresenting}var d,m;function v(){if(p()){var n=r.getEyeParameters("left");var i=n.renderWidth;var a=n.renderHeight;m=e.getPixelRatio();d=e.getSize();e.setDrawingBufferSize(2*i,a,1)}else t.enabled&&e.setDrawingBufferSize(d.width,d.height,m)}this.enabled=false;this.userHeight=1.6;this.getDevice=function(){return r};this.setDevice=function(e){void 0!==e&&(r=e)};this.setPoseTarget=function(e){void 0!==e&&(i=e)};this.getCamera=function(e){if(null===r)return e;r.depthNear=e.near;r.depthFar=e.far;r.getFrameData(n);var p=r.stageParameters;p?a.fromArray(p.sittingToStandingTransform):a.makeTranslation(0,t.userHeight,0);var d=n.pose;var m=null!==i?i:e;m.matrix.copy(a);m.matrix.decompose(m.position,m.quaternion,m.scale);if(null!==d.orientation){l.fromArray(d.orientation);m.quaternion.multiply(l)}if(null!==d.position){l.setFromRotationMatrix(a);c.fromArray(d.position);c.applyQuaternion(l);m.position.add(c)}m.updateMatrixWorld();if(false===r.isPresenting)return e;u.near=e.near;h.near=e.near;u.far=e.far;h.far=e.far;f.matrixWorld.copy(e.matrixWorld);f.matrixWorldInverse.copy(e.matrixWorldInverse);u.matrixWorldInverse.fromArray(n.leftViewMatrix);h.matrixWorldInverse.fromArray(n.rightViewMatrix);o.getInverse(a);u.matrixWorldInverse.multiply(o);h.matrixWorldInverse.multiply(o);var v=m.parent;if(null!==v){s.getInverse(v.matrixWorld);u.matrixWorldInverse.multiply(s);h.matrixWorldInverse.multiply(s)}u.matrixWorld.getInverse(u.matrixWorldInverse);h.matrixWorld.getInverse(h.matrixWorldInverse);u.projectionMatrix.fromArray(n.leftProjectionMatrix);h.projectionMatrix.fromArray(n.rightProjectionMatrix);f.projectionMatrix.copy(u.projectionMatrix);var g=r.getLayers();if(g.length){var y=g[0];null!==y.leftBounds&&4===y.leftBounds.length&&u.bounds.fromArray(y.leftBounds);null!==y.rightBounds&&4===y.rightBounds.length&&h.bounds.fromArray(y.rightBounds)}return f};this.getStandingMatrix=function(){return a};this.submitFrame=function(){p()&&r.submitFrame()};this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",v)}}function Po(e){console.log("THREE.WebGLRenderer",i);e=e||{};var t=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,a=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,l=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default";var h=null;var f=null;this.domElement=t;this.context=null;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.clippingPlanes=[];this.localClippingEnabled=false;this.gammaFactor=2;this.gammaInput=false;this.gammaOutput=false;this.physicallyCorrectLights=false;this.toneMapping=ne;this.toneMappingExposure=1;this.toneMappingWhitePoint=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var p=this,d=false,m=null,v=null,g=-1,y="",x=null,_=null,w=new Vt,S=new Vt,T=null,M=0,E=t.width,A=t.height,R=1,P=new Vt(0,0,E,A),C=new Vt(0,0,E,A),L=false,O=new Jt,I=new Yi,B=false,U=false,D=new kt,k=new Ft;function N(){return null===m?R:1}var F;try{var G={alpha:n,depth:a,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u};t.addEventListener("webglcontextlost",ce,false);t.addEventListener("webglcontextrestored",ue,false);F=r||t.getContext("webgl",G)||t.getContext("experimental-webgl",G);if(null===F)throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===F.getShaderPrecisionFormat&&(F.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}var z,H,V,j;var W,X,q,Y,Z;var J,Q,K;var $,ee,te,re;var ie;var ae;function oe(){z=new Zi(F);z.get("WEBGL_depth_texture");z.get("OES_texture_float");z.get("OES_texture_float_linear");z.get("OES_texture_half_float");z.get("OES_texture_half_float_linear");z.get("OES_standard_derivatives");z.get("OES_element_index_uint");z.get("ANGLE_instanced_arrays");ae=new Mo(F,z);H=new qi(F,z,e);V=new So(F,z,ae);V.scissor(S.copy(C).multiplyScalar(R));V.viewport(w.copy(P).multiplyScalar(R));j=new Ki(F);W=new so;X=new To(F,z,V,W,H,ae,j);q=new ci(F);Y=new Ji(F,q,j);Z=new ta(Y,j);ee=new ea(F);J=new oo(p,z,H);Q=new ho;K=new go;$=new Wi(p,V,Y,l);te=new Xi(F,z,j);re=new Qi(F,z,j);ie=new wo(p,F,V,X,H);j.programs=J.programs;p.context=F;p.capabilities=H;p.extensions=z;p.properties=W;p.renderLists=Q;p.state=V;p.info=j}oe();var se=new Ro(p);this.vr=se;var le=new bo(p,Z,H.maxTextureSize);this.shadowMap=le;this.getContext=function(){return F};this.getContextAttributes=function(){return F.getContextAttributes()};this.forceContextLoss=function(){var e=z.get("WEBGL_lose_context");e&&e.loseContext()};this.forceContextRestore=function(){var e=z.get("WEBGL_lose_context");e&&e.restoreContext()};this.getPixelRatio=function(){return R};this.setPixelRatio=function(e){if(void 0===e)return;R=e;this.setSize(E,A,false)};this.getSize=function(){return{width:E,height:A}};this.setSize=function(e,r,n){var i=se.getDevice();if(i&&i.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}E=e;A=r;t.width=e*R;t.height=r*R;if(false!==n){t.style.width=e+"px";t.style.height=r+"px"}this.setViewport(0,0,e,r)};this.getDrawingBufferSize=function(){return{width:E*R,height:A*R}};this.setDrawingBufferSize=function(e,r,n){E=e;A=r;R=n;t.width=e*n;t.height=r*n;this.setViewport(0,0,e,r)};this.getCurrentViewport=function(){return w};this.setViewport=function(e,t,r,n){P.set(e,A-t-n,r,n);V.viewport(w.copy(P).multiplyScalar(R))};this.setScissor=function(e,t,r,n){C.set(e,A-t-n,r,n);V.scissor(S.copy(C).multiplyScalar(R))};this.setScissorTest=function(e){V.setScissorTest(L=e)};this.getClearColor=function(){return $.getClearColor()};this.setClearColor=function(){$.setClearColor.apply($,arguments)};this.getClearAlpha=function(){return $.getClearAlpha()};this.setClearAlpha=function(){$.setClearAlpha.apply($,arguments)};this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=F.COLOR_BUFFER_BIT);(void 0===t||t)&&(n|=F.DEPTH_BUFFER_BIT);(void 0===r||r)&&(n|=F.STENCIL_BUFFER_BIT);F.clear(n)};this.clearColor=function(){this.clear(true,false,false)};this.clearDepth=function(){this.clear(false,true,false)};this.clearStencil=function(){this.clear(false,false,true)};this.clearTarget=function(e,t,r,n){this.setRenderTarget(e);this.clear(t,r,n)};this.dispose=function(){t.removeEventListener("webglcontextlost",ce,false);t.removeEventListener("webglcontextrestored",ue,false);Q.dispose();K.dispose();W.dispose();Z.dispose();se.dispose();xe()};function ce(e){e.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");d=true}function ue(){console.log("THREE.WebGLRenderer: Context Restored.");d=false;oe()}function he(e){var t=e.target;t.removeEventListener("dispose",he);fe(t)}function fe(e){pe(e);W.remove(e)}function pe(e){var t=W.get(e).program;e.program=void 0;void 0!==t&&J.releaseProgram(t)}function de(e,t,r){e.render(function(e){p.renderBufferImmediate(e,t,r)})}this.renderBufferImmediate=function(e,t,r){V.initAttributes();var n=W.get(e);e.hasPositions&&!n.position&&(n.position=F.createBuffer());e.hasNormals&&!n.normal&&(n.normal=F.createBuffer());e.hasUvs&&!n.uv&&(n.uv=F.createBuffer());e.hasColors&&!n.color&&(n.color=F.createBuffer());var i=t.getAttributes();if(e.hasPositions){F.bindBuffer(F.ARRAY_BUFFER,n.position);F.bufferData(F.ARRAY_BUFFER,e.positionArray,F.DYNAMIC_DRAW);V.enableAttribute(i.position);F.vertexAttribPointer(i.position,3,F.FLOAT,false,0,0)}if(e.hasNormals){F.bindBuffer(F.ARRAY_BUFFER,n.normal);if(!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&true===r.flatShading)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray;var l=(s[a+0]+s[a+3]+s[a+6])/3;var c=(s[a+1]+s[a+4]+s[a+7])/3;var u=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l;s[a+1]=c;s[a+2]=u;s[a+3]=l;s[a+4]=c;s[a+5]=u;s[a+6]=l;s[a+7]=c;s[a+8]=u}F.bufferData(F.ARRAY_BUFFER,e.normalArray,F.DYNAMIC_DRAW);V.enableAttribute(i.normal);F.vertexAttribPointer(i.normal,3,F.FLOAT,false,0,0)}if(e.hasUvs&&r.map){F.bindBuffer(F.ARRAY_BUFFER,n.uv);F.bufferData(F.ARRAY_BUFFER,e.uvArray,F.DYNAMIC_DRAW);V.enableAttribute(i.uv);F.vertexAttribPointer(i.uv,2,F.FLOAT,false,0,0)}if(e.hasColors&&r.vertexColors!==b){F.bindBuffer(F.ARRAY_BUFFER,n.color);F.bufferData(F.ARRAY_BUFFER,e.colorArray,F.DYNAMIC_DRAW);V.enableAttribute(i.color);F.vertexAttribPointer(i.color,3,F.FLOAT,false,0,0)}V.disableUnusedAttributes();F.drawArrays(F.TRIANGLES,0,e.count);e.count=0};this.renderBufferDirect=function(e,t,r,n,i,a){var o=i.isMesh&&i.matrixWorld.determinant()<0;V.setMaterial(n,o);var s=Ae(e,t,n,i);var l=r.id+"_"+s.id+"_"+(true===n.wireframe);var c=false;if(l!==y){y=l;c=true}if(i.morphTargetInfluences){ee.update(i,r,n,s);c=true}var u=r.index;var h=r.attributes.position;var f=1;if(true===n.wireframe){u=Y.getWireframeAttribute(r);f=2}var p;var d=te;if(null!==u){p=q.get(u);d=re;d.setIndex(p)}if(c){me(n,s,r);null!==u&&F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,p.buffer)}var m=Infinity;null!==u?m=u.count:void 0!==h&&(m=h.count);var v=r.drawRange.start*f;var g=r.drawRange.count*f;var x=null!==a?a.start*f:0;var b=null!==a?a.count*f:Infinity;var _=Math.max(v,x);var w=Math.min(m,v+g,x+b)-1;var S=Math.max(0,w-_+1);if(0===S)return;if(i.isMesh)if(true===n.wireframe){V.setLineWidth(n.wireframeLinewidth*N());d.setMode(F.LINES)}else switch(i.drawMode){case wt:d.setMode(F.TRIANGLES);break;case St:d.setMode(F.TRIANGLE_STRIP);break;case Tt:d.setMode(F.TRIANGLE_FAN);break}else if(i.isLine){var T=n.linewidth;void 0===T&&(T=1);V.setLineWidth(T*N());i.isLineSegments?d.setMode(F.LINES):i.isLineLoop?d.setMode(F.LINE_LOOP):d.setMode(F.LINE_STRIP)}else i.isPoints&&d.setMode(F.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&d.renderInstances(r,_,S):d.render(_,S)};function me(e,t,r){if(r&&r.isInstancedBufferGeometry&&null===z.get("ANGLE_instanced_arrays")){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}V.initAttributes();var n=r.attributes;var i=t.getAttributes();var a=e.defaultAttributeValues;for(var o in i){var s=i[o];if(s>=0){var l=n[o];if(void 0!==l){var c=l.normalized;var u=l.itemSize;var h=q.get(l);if(void 0===h)continue;var f=h.buffer;var p=h.type;var d=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data;var v=m.stride;var g=l.offset;if(m&&m.isInstancedInterleavedBuffer){V.enableAttributeAndDivisor(s,m.meshPerAttribute);void 0===r.maxInstancedCount&&(r.maxInstancedCount=m.meshPerAttribute*m.count)}else V.enableAttribute(s);F.bindBuffer(F.ARRAY_BUFFER,f);F.vertexAttribPointer(s,u,p,c,v*d,g*d)}else{if(l.isInstancedBufferAttribute){V.enableAttributeAndDivisor(s,l.meshPerAttribute);void 0===r.maxInstancedCount&&(r.maxInstancedCount=l.meshPerAttribute*l.count)}else V.enableAttribute(s);F.bindBuffer(F.ARRAY_BUFFER,f);F.vertexAttribPointer(s,u,p,c,0,0)}}else if(void 0!==a){var y=a[o];if(void 0!==y)switch(y.length){case 2:F.vertexAttrib2fv(s,y);break;case 3:F.vertexAttrib3fv(s,y);break;case 4:F.vertexAttrib4fv(s,y);break;default:F.vertexAttrib1fv(s,y)}}}}V.disableUnusedAttributes()}this.compile=function(e,t){f=K.get(e,t);f.init();e.traverse(function(e){if(e.isLight){f.pushLight(e);e.castShadow&&f.pushShadow(e)}});f.setupLights(t);e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)Ee(t.material[r],e.fog,t);else Ee(t.material,e.fog,t)})};var ve=false;var ge=null;function ye(){if(ve)return;be();ve=true}function xe(){ve=false}function be(){var e=se.getDevice();e&&e.isPresenting?e.requestAnimationFrame(_e):window.requestAnimationFrame(_e)}function _e(e){if(false===ve)return;ge(e);be()}this.animate=function(e){ge=e;null!==ge?ye():xe()};this.render=function(e,t,r,n){if(!(t&&t.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(d)return;y="";g=-1;x=null;true===e.autoUpdate&&e.updateMatrixWorld();null===t.parent&&t.updateMatrixWorld();se.enabled&&(t=se.getCamera(t));f=K.get(e,t);f.init();e.onBeforeRender(p,e,t,r);D.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);O.setFromMatrix(D);U=this.localClippingEnabled;B=I.init(this.clippingPlanes,U,t);h=Q.get(e,t);h.init();we(e,t,p.sortObjects);true===p.sortObjects&&h.sort();B&&I.beginShadows();var i=f.state.shadowsArray;le.render(i,e,t);f.setupLights(t);B&&I.endShadows();this.info.autoReset&&this.info.reset();void 0===r&&(r=null);this.setRenderTarget(r);$.render(h,e,t,n);var a=h.opaque;var o=h.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&Se(a,e,t,s);o.length&&Se(o,e,t,s)}else{a.length&&Se(a,e,t);o.length&&Se(o,e,t)}var l=f.state.spritesArray;ie.render(l,e,t);r&&X.updateRenderTargetMipmap(r);V.buffers.depth.setTest(true);V.buffers.depth.setMask(true);V.buffers.color.setMask(true);V.setPolygonOffset(false);e.onAfterRender(p,e,t);se.enabled&&se.submitFrame();h=null;f=null};function we(e,t,r){if(false===e.visible)return;var n=e.layers.test(t.layers);if(n)if(e.isLight){f.pushLight(e);e.castShadow&&f.pushShadow(e)}else if(e.isSprite)e.frustumCulled&&!O.intersectsSprite(e)||f.pushSprite(e);else if(e.isImmediateRenderObject){r&&k.setFromMatrixPosition(e.matrixWorld).applyMatrix4(D);h.push(e,null,e.material,k.z,null)}else if(e.isMesh||e.isLine||e.isPoints){e.isSkinnedMesh&&e.skeleton.update();if(!e.frustumCulled||O.intersectsObject(e)){r&&k.setFromMatrixPosition(e.matrixWorld).applyMatrix4(D);var i=Z.update(e);var a=e.material;if(Array.isArray(a)){var o=i.groups;for(var s=0,l=o.length;s<l;s++){var c=o[s];var u=a[c.materialIndex];u&&u.visible&&h.push(e,i,u,k.z,c)}}else a.visible&&h.push(e,i,a,k.z,null)}}var p=e.children;for(var s=0,l=p.length;s<l;s++)we(p[s],t,r)}function Se(e,t,r,n){for(var i=0,a=e.length;i<a;i++){var o=e[i];var s=o.object;var l=o.geometry;var c=void 0===n?o.material:n;var u=o.group;if(r.isArrayCamera){_=r;var h=r.cameras;for(var f=0,p=h.length;f<p;f++){var d=h[f];if(s.layers.test(d.layers)){var m=d.bounds;var v=m.x*E;var g=m.y*A;var y=m.z*E;var x=m.w*A;V.viewport(w.set(v,g,y,x).multiplyScalar(R));Me(s,t,d,l,c,u)}}}else{_=null;Me(s,t,r,l,c,u)}}}function Me(e,t,r,n,i,a){e.onBeforeRender(p,t,r,n,i,a);f=K.get(t,_||r);e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld);e.normalMatrix.getNormalMatrix(e.modelViewMatrix);if(e.isImmediateRenderObject){var o=e.isMesh&&e.matrixWorld.determinant()<0;V.setMaterial(i,o);var s=Ae(r,t.fog,i,e);y="";de(e,s,i)}else p.renderBufferDirect(r,t.fog,n,i,e,a);e.onAfterRender(p,t,r,n,i,a);f=K.get(t,_||r)}function Ee(e,t,r){var n=W.get(e);var i=f.state.lights;var a=f.state.shadowsArray;var o=J.getParameters(e,i.state,a,t,I.numPlanes,I.numIntersection,r);var s=J.getProgramCode(e,o);var l=n.program;var c=true;if(void 0===l)e.addEventListener("dispose",he);else if(l.code!==s)pe(e);else if(n.lightsHash!==i.state.hash){W.update(e,"lightsHash",i.state.hash);c=false}else{if(void 0!==o.shaderID)return;c=false}if(c){if(o.shaderID){var u=li[o.shaderID];n.shader={name:e.type,uniforms:ii.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(n.shader,p);l=J.acquireProgram(e,n.shader,o,s);n.program=l;e.program=l}var h=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<p.maxMorphTargets;d++)h["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var d=0;d<p.maxMorphNormals;d++)h["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var m=n.shader.uniforms;if(!e.isShaderMaterial&&!e.isRawShaderMaterial||true===e.clipping){n.numClippingPlanes=I.numPlanes;n.numIntersection=I.numIntersection;m.clippingPlanes=I.uniform}n.fog=t;n.lightsHash=i.state.hash;if(e.lights){m.ambientLightColor.value=i.state.ambient;m.directionalLights.value=i.state.directional;m.spotLights.value=i.state.spot;m.rectAreaLights.value=i.state.rectArea;m.pointLights.value=i.state.point;m.hemisphereLights.value=i.state.hemi;m.directionalShadowMap.value=i.state.directionalShadowMap;m.directionalShadowMatrix.value=i.state.directionalShadowMatrix;m.spotShadowMap.value=i.state.spotShadowMap;m.spotShadowMatrix.value=i.state.spotShadowMatrix;m.pointShadowMap.value=i.state.pointShadowMap;m.pointShadowMatrix.value=i.state.pointShadowMatrix}var v=n.program.getUniforms(),g=Va.seqWithValue(v.seq,m);n.uniformsList=g}function Ae(e,t,r,n){M=0;var i=W.get(r);var a=f.state.lights;if(B&&(U||e!==x)){var o=e===x&&r.id===g;I.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,i,o)}false===r.needsUpdate&&(void 0===i.program?r.needsUpdate=true:r.fog&&i.fog!==t?r.needsUpdate=true:r.lights&&i.lightsHash!==a.state.hash?r.needsUpdate=true:void 0===i.numClippingPlanes||i.numClippingPlanes===I.numPlanes&&i.numIntersection===I.numIntersection||(r.needsUpdate=true));if(r.needsUpdate){Ee(r,t,n);r.needsUpdate=false}var s=false;var l=false;var c=false;var u=i.program,h=u.getUniforms(),d=i.shader.uniforms;if(V.useProgram(u.program)){s=true;l=true;c=true}if(r.id!==g){g=r.id;l=true}if(s||e!==x){h.setValue(F,"projectionMatrix",e.projectionMatrix);H.logarithmicDepthBuffer&&h.setValue(F,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2));if(x!==(_||e)){x=_||e;l=true;c=true}if(r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var m=h.map.cameraPosition;void 0!==m&&m.setValue(F,k.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&h.setValue(F,"viewMatrix",e.matrixWorldInverse)}if(r.skinning){h.setOptional(F,n,"bindMatrix");h.setOptional(F,n,"bindMatrixInverse");var v=n.skeleton;if(v){var y=v.bones;if(H.floatVertexTextures){if(void 0===v.boneTexture){var b=Math.sqrt(4*y.length);b=Ut.ceilPowerOfTwo(b);b=Math.max(b,4);var w=new Float32Array(b*b*4);w.set(v.boneMatrices);var S=new Xt(w,b,b,Ne,Ce);S.needsUpdate=true;v.boneMatrices=w;v.boneTexture=S;v.boneTextureSize=b}h.setValue(F,"boneTexture",v.boneTexture);h.setValue(F,"boneTextureSize",v.boneTextureSize)}else h.setOptional(F,v,"boneMatrices")}}if(l){h.setValue(F,"toneMappingExposure",p.toneMappingExposure);h.setValue(F,"toneMappingWhitePoint",p.toneMappingWhitePoint);r.lights&&je(d,c);t&&r.fog&&Be(d,t);if(r.isMeshBasicMaterial)Re(d,r);else if(r.isMeshLambertMaterial){Re(d,r);Ue(d,r)}else if(r.isMeshPhongMaterial){Re(d,r);r.isMeshToonMaterial?ke(d,r):De(d,r)}else if(r.isMeshStandardMaterial){Re(d,r);r.isMeshPhysicalMaterial?Ge(d,r):Fe(d,r)}else if(r.isMeshDepthMaterial){Re(d,r);ze(d,r)}else if(r.isMeshDistanceMaterial){Re(d,r);He(d,r)}else if(r.isMeshNormalMaterial){Re(d,r);Ve(d,r)}else if(r.isLineBasicMaterial){Pe(d,r);r.isLineDashedMaterial&&Oe(d,r)}else if(r.isPointsMaterial)Ie(d,r);else if(r.isShadowMaterial){d.color.value=r.color;d.opacity.value=r.opacity}void 0!==d.ltc_1&&(d.ltc_1.value=si.LTC_1);void 0!==d.ltc_2&&(d.ltc_2.value=si.LTC_2);Va.upload(F,i.uniformsList,d,p)}if(r.isShaderMaterial&&true===r.uniformsNeedUpdate){Va.upload(F,i.uniformsList,d,p);r.uniformsNeedUpdate=false}h.setValue(F,"modelViewMatrix",n.modelViewMatrix);h.setValue(F,"normalMatrix",n.normalMatrix);h.setValue(F,"modelMatrix",n.matrixWorld);return u}function Re(e,t){e.opacity.value=t.opacity;t.color&&(e.diffuse.value=t.color);t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity);t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.specularMap&&(e.specularMap.value=t.specularMap);if(t.envMap){e.envMap.value=t.envMap;e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1;e.reflectivity.value=t.reflectivity;e.refractionRatio.value=t.refractionRatio;e.maxMipLevel.value=W.get(t.envMap).__maxMipLevel}if(t.lightMap){e.lightMap.value=t.lightMap;e.lightMapIntensity.value=t.lightMapIntensity}if(t.aoMap){e.aoMap.value=t.aoMap;e.aoMapIntensity.value=t.aoMapIntensity}var r;t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap);if(void 0!==r){r.isWebGLRenderTarget&&(r=r.texture);true===r.matrixAutoUpdate&&r.updateMatrix();e.uvTransform.value.copy(r.matrix)}}function Pe(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity}function Oe(e,t){e.dashSize.value=t.dashSize;e.totalSize.value=t.dashSize+t.gapSize;e.scale.value=t.scale}function Ie(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity;e.size.value=t.size*R;e.scale.value=.5*A;e.map.value=t.map;if(null!==t.map){true===t.map.matrixAutoUpdate&&t.map.updateMatrix();e.uvTransform.value.copy(t.map.matrix)}}function Be(e,t){e.fogColor.value=t.color;if(t.isFog){e.fogNear.value=t.near;e.fogFar.value=t.far}else t.isFogExp2&&(e.fogDensity.value=t.density)}function Ue(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function De(e,t){e.specular.value=t.specular;e.shininess.value=Math.max(t.shininess,1e-4);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function ke(e,t){De(e,t);t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function Fe(e,t){e.roughness.value=t.roughness;e.metalness.value=t.metalness;t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap);t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function Ge(e,t){e.clearCoat.value=t.clearCoat;e.clearCoatRoughness.value=t.clearCoatRoughness;Fe(e,t)}function ze(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function He(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}e.referencePosition.value.copy(t.referencePosition);e.nearDistance.value=t.nearDistance;e.farDistance.value=t.farDistance}function Ve(e,t){if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function je(e,t){e.ambientLightColor.needsUpdate=t;e.directionalLights.needsUpdate=t;e.pointLights.needsUpdate=t;e.spotLights.needsUpdate=t;e.rectAreaLights.needsUpdate=t;e.hemisphereLights.needsUpdate=t}function We(){var e=M;e>=H.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+H.maxTextures);M+=1;return e}this.allocTextureUnit=We;this.setTexture2D=function(){var e=false;return function t(r,n){if(r&&r.isWebGLRenderTarget){if(!e){console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.");e=true}r=r.texture}X.setTexture2D(r,n)}}();this.setTexture=function(){var e=false;return function t(r,n){if(!e){console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.");e=true}X.setTexture2D(r,n)}}();this.setTextureCube=function(){var e=false;return function t(r,n){if(r&&r.isWebGLRenderTargetCube){if(!e){console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.");e=true}r=r.texture}r&&r.isCubeTexture||Array.isArray(r.image)&&6===r.image.length?X.setTextureCube(r,n):X.setTextureCubeDynamic(r,n)}}();this.getRenderTarget=function(){return m};this.setRenderTarget=function(e){m=e;e&&void 0===W.get(e).__webglFramebuffer&&X.setupRenderTarget(e);var t=null;var r=false;if(e){var n=W.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube){t=n[e.activeCubeFace];r=true}else t=n;w.copy(e.viewport);S.copy(e.scissor);T=e.scissorTest}else{w.copy(P).multiplyScalar(R);S.copy(C).multiplyScalar(R);T=L}if(v!==t){F.bindFramebuffer(F.FRAMEBUFFER,t);v=t}V.viewport(w);V.scissor(S);V.setScissorTest(T);if(r){var i=W.get(e.texture);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}};this.readRenderTargetPixels=function(e,t,r,n,i,a){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var o=W.get(e).__webglFramebuffer;if(o){var s=false;if(o!==v){F.bindFramebuffer(F.FRAMEBUFFER,o);s=true}try{var l=e.texture;var c=l.format;var u=l.type;if(c!==Ne&&ae.convert(c)!==F.getParameter(F.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(u!==Te&&ae.convert(u)!==F.getParameter(F.IMPLEMENTATION_COLOR_READ_TYPE)&&!(u===Ce&&(z.get("OES_texture_float")||z.get("WEBGL_color_buffer_float")))&&!(u===Le&&z.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}F.checkFramebufferStatus(F.FRAMEBUFFER)===F.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&F.readPixels(t,r,n,i,ae.convert(c),ae.convert(u),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&F.bindFramebuffer(F.FRAMEBUFFER,v)}}};this.copyFramebufferToTexture=function(e,t,r){var n=t.image.width;var i=t.image.height;var a=ae.convert(t.format);this.setTexture2D(t,0);F.copyTexImage2D(F.TEXTURE_2D,r||0,a,e.x,e.y,n,i,0)};this.copyTextureToTexture=function(e,t,r,n){var i=t.image.width;var a=t.image.height;var o=ae.convert(r.format);var s=ae.convert(r.type);var l=t.isDataTexture?t.image.data:t.image;this.setTexture2D(r,0);F.texSubImage2D(F.TEXTURE_2D,n||0,e.x,e.y,i,a,o,s,l)}}function Co(e,t){this.name="";this.color=new oi(e);this.density=void 0!==t?t:25e-5}Co.prototype.isFogExp2=true;Co.prototype.clone=function(){return new Co(this.color.getHex(),this.density)};Co.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function Lo(e,t,r){this.name="";this.color=new oi(e);this.near=void 0!==t?t:1;this.far=void 0!==r?r:1e3}Lo.prototype.isFog=true;Lo.prototype.clone=function(){return new Lo(this.color.getHex(),this.near,this.far)};Lo.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function Oo(){pi.call(this);this.type="Scene";this.background=null;this.fog=null;this.overrideMaterial=null;this.autoUpdate=true}Oo.prototype=Object.assign(Object.create(pi.prototype),{constructor:Oo,copy:function(e,t){pi.prototype.copy.call(this,e,t);null!==e.background&&(this.background=e.background.clone());null!==e.fog&&(this.fog=e.fog.clone());null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone());this.autoUpdate=e.autoUpdate;this.matrixAutoUpdate=e.matrixAutoUpdate;return this},toJSON:function(e){var t=pi.prototype.toJSON.call(this,e);null!==this.background&&(t.object.background=this.background.toJSON(e));null!==this.fog&&(t.object.fog=this.fog.toJSON());return t}});function Io(e){Ni.call(this);this.type="SpriteMaterial";this.color=new oi(16777215);this.map=null;this.rotation=0;this.fog=false;this.lights=false;this.setValues(e)}Io.prototype=Object.create(Ni.prototype);Io.prototype.constructor=Io;Io.prototype.isSpriteMaterial=true;Io.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.rotation=e.rotation;return this};function Bo(e){pi.call(this);this.type="Sprite";this.material=void 0!==e?e:new Io;this.center=new Dt(.5,.5)}Bo.prototype=Object.assign(Object.create(pi.prototype),{constructor:Bo,isSprite:true,raycast:function(){var e=new Ft;var t=new Ft;var r=new Ft;return function n(i,a){t.setFromMatrixPosition(this.matrixWorld);i.ray.closestPointToPoint(t,e);r.setFromMatrixScale(this.matrixWorld);var o=r.x*r.y/4;if(t.distanceToSquared(e)>o)return;var s=i.ray.origin.distanceTo(e);if(s<i.near||s>i.far)return;a.push({distance:s,point:e.clone(),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){pi.prototype.copy.call(this,e);void 0!==e.center&&this.center.copy(e.center);return this}});function Uo(){pi.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:true,value:[]}})}Uo.prototype=Object.assign(Object.create(pi.prototype),{constructor:Uo,copy:function(e){pi.prototype.copy.call(this,e,false);var t=e.levels;for(var r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0);t=Math.abs(t);var r=this.levels;for(var n=0;n<r.length;n++)if(t<r[n].distance)break;r.splice(n,0,{distance:t,object:e});this.add(e)},getObjectForDistance:function(e){var t=this.levels;for(var r=1,n=t.length;r<n;r++)if(e<t[r].distance)break;return t[r-1].object},raycast:function(){var e=new Ft;return function t(r,n){e.setFromMatrixPosition(this.matrixWorld);var i=r.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(r,n)}}(),update:function(){var e=new Ft;var t=new Ft;return function r(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld);t.setFromMatrixPosition(this.matrixWorld);var a=e.distanceTo(t);i[0].object.visible=true;for(var o=1,s=i.length;o<s;o++){if(!(a>=i[o].distance))break;i[o-1].object.visible=false;i[o].object.visible=true}for(;o<s;o++)i[o].object.visible=false}}}(),toJSON:function(e){var t=pi.prototype.toJSON.call(this,e);t.object.levels=[];var r=this.levels;for(var n=0,i=r.length;n<i;n++){var a=r[n];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}});function Do(e,t){e=e||[];this.bones=e.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length.");this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new kt)}}Object.assign(Do.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new kt;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld);this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++){e=this.bones[t];e&&e.matrixWorld.getInverse(this.boneInverses[t])}for(t=0,r=this.bones.length;t<r;t++){e=this.bones[t];if(e){if(e.parent&&e.parent.isBone){e.matrix.getInverse(e.parent.matrixWorld);e.matrix.multiply(e.matrixWorld)}else e.matrix.copy(e.matrixWorld);e.matrix.decompose(e.position,e.quaternion,e.scale)}}},update:function(){var e=new kt;var t=new kt;return function r(){var n=this.bones;var i=this.boneInverses;var a=this.boneMatrices;var o=this.boneTexture;for(var s=0,l=n.length;s<l;s++){var c=n[s]?n[s].matrixWorld:t;e.multiplyMatrices(c,i[s]);e.toArray(a,16*s)}void 0!==o&&(o.needsUpdate=true)}}(),clone:function(){return new Do(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t];if(n.name===e)return n}return}});function ko(){pi.call(this);this.type="Bone"}ko.prototype=Object.assign(Object.create(pi.prototype),{constructor:ko,isBone:true});function No(e,t){ji.call(this,e,t);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new kt;this.bindMatrixInverse=new kt;var r=this.initBones();var n=new Do(r);this.bind(n,this.matrixWorld);this.normalizeSkinWeights()}No.prototype=Object.assign(Object.create(ji.prototype),{constructor:No,isSkinnedMesh:true,initBones:function(){var e=[],t,r;var n,i;if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++){r=this.geometry.bones[n];t=new ko;e.push(t);t.name=r.name;t.position.fromArray(r.pos);t.quaternion.fromArray(r.rotq);void 0!==r.scl&&t.scale.fromArray(r.scl)}for(n=0,i=this.geometry.bones.length;n<i;n++){r=this.geometry.bones[n];-1!==r.parent&&null!==r.parent&&void 0!==e[r.parent]?e[r.parent].add(e[n]):this.add(e[n])}}this.updateMatrixWorld(true);return e},bind:function(e,t){this.skeleton=e;if(void 0===t){this.updateMatrixWorld(true);this.skeleton.calculateInverses();t=this.matrixWorld}this.bindMatrix.copy(t);this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var r=this.geometry.skinWeights[t];e=1/r.manhattanLength();Infinity!==e?r.multiplyScalar(e):r.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new Vt;var i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++){n.x=i.getX(t);n.y=i.getY(t);n.z=i.getZ(t);n.w=i.getW(t);e=1/n.manhattanLength();Infinity!==e?n.multiplyScalar(e):n.set(1,0,0,0);i.setXYZW(t,n.x,n.y,n.z,n.w)}}},updateMatrixWorld:function(e){ji.prototype.updateMatrixWorld.call(this,e);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Fo(e){Ni.call(this);this.type="LineBasicMaterial";this.color=new oi(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.lights=false;this.setValues(e)}Fo.prototype=Object.create(Ni.prototype);Fo.prototype.constructor=Fo;Fo.prototype.isLineBasicMaterial=true;Fo.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.color.copy(e.color);this.linewidth=e.linewidth;this.linecap=e.linecap;this.linejoin=e.linejoin;return this};function Go(e,t,r){if(1===r){console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.");return new zo(e,t)}pi.call(this);this.type="Line";this.geometry=void 0!==e?e:new Oi;this.material=void 0!==t?t:new Fo({color:16777215*Math.random()})}Go.prototype=Object.assign(Object.create(pi.prototype),{constructor:Go,isLine:true,computeLineDistances:function(){var e=new Ft;var t=new Ft;return function r(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){var i=n.attributes.position;var a=[0];for(var o=1,s=i.count;o<s;o++){e.fromBufferAttribute(i,o-1);t.fromBufferAttribute(i,o);a[o]=a[o-1];a[o]+=e.distanceTo(t)}n.addAttribute("lineDistance",new Ai(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var l=n.vertices;var a=n.lineDistances;a[0]=0;for(var o=1,s=l.length;o<s;o++){a[o]=a[o-1];a[o]+=l[o-1].distanceTo(l[o])}}return this}}(),raycast:function(){var e=new kt;var t=new zi;var r=new Yt;return function n(i,a){var o=i.linePrecision;var s=o*o;var l=this.geometry;var c=this.matrixWorld;null===l.boundingSphere&&l.computeBoundingSphere();r.copy(l.boundingSphere);r.applyMatrix4(c);if(false===i.ray.intersectsSphere(r))return;e.getInverse(c);t.copy(i.ray).applyMatrix4(e);var u=new Ft;var h=new Ft;var f=new Ft;var p=new Ft;var d=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var m=l.index;var v=l.attributes;var g=v.position.array;if(null!==m){var y=m.array;for(var x=0,b=y.length-1;x<b;x+=d){var _=y[x];var w=y[x+1];u.fromArray(g,3*_);h.fromArray(g,3*w);var S=t.distanceSqToSegment(u,h,p,f);if(S>s)continue;p.applyMatrix4(this.matrixWorld);var T=i.ray.origin.distanceTo(p);if(T<i.near||T>i.far)continue;a.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else for(var x=0,b=g.length/3-1;x<b;x+=d){u.fromArray(g,3*x);h.fromArray(g,3*x+3);var S=t.distanceSqToSegment(u,h,p,f);if(S>s)continue;p.applyMatrix4(this.matrixWorld);var T=i.ray.origin.distanceTo(p);if(T<i.near||T>i.far)continue;a.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else if(l.isGeometry){var M=l.vertices;var E=M.length;for(var x=0;x<E-1;x+=d){var S=t.distanceSqToSegment(M[x],M[x+1],p,f);if(S>s)continue;p.applyMatrix4(this.matrixWorld);var T=i.ray.origin.distanceTo(p);if(T<i.near||T>i.far)continue;a.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function zo(e,t){Go.call(this,e,t);this.type="LineSegments"}zo.prototype=Object.assign(Object.create(Go.prototype),{constructor:zo,isLineSegments:true,computeLineDistances:function(){var e=new Ft;var t=new Ft;return function r(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){var i=n.attributes.position;var a=[];for(var o=0,s=i.count;o<s;o+=2){e.fromBufferAttribute(i,o);t.fromBufferAttribute(i,o+1);a[o]=0===o?0:a[o-1];a[o+1]=a[o]+e.distanceTo(t)}n.addAttribute("lineDistance",new Ai(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var l=n.vertices;var a=n.lineDistances;for(var o=0,s=l.length;o<s;o+=2){e.copy(l[o]);t.copy(l[o+1]);a[o]=0===o?0:a[o-1];a[o+1]=a[o]+e.distanceTo(t)}}return this}}()});function Ho(e,t){Go.call(this,e,t);this.type="LineLoop"}Ho.prototype=Object.assign(Object.create(Go.prototype),{constructor:Ho,isLineLoop:true});function Vo(e){Ni.call(this);this.type="PointsMaterial";this.color=new oi(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.lights=false;this.setValues(e)}Vo.prototype=Object.create(Ni.prototype);Vo.prototype.constructor=Vo;Vo.prototype.isPointsMaterial=true;Vo.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.size=e.size;this.sizeAttenuation=e.sizeAttenuation;return this};function jo(e,t){pi.call(this);this.type="Points";this.geometry=void 0!==e?e:new Oi;this.material=void 0!==t?t:new Vo({color:16777215*Math.random()})}jo.prototype=Object.assign(Object.create(pi.prototype),{constructor:jo,isPoints:true,raycast:function(){var e=new kt;var t=new zi;var r=new Yt;return function n(i,a){var o=this;var s=this.geometry;var l=this.matrixWorld;var c=i.params.Points.threshold;null===s.boundingSphere&&s.computeBoundingSphere();r.copy(s.boundingSphere);r.applyMatrix4(l);r.radius+=c;if(false===i.ray.intersectsSphere(r))return;e.getInverse(l);t.copy(i.ray).applyMatrix4(e);var u=c/((this.scale.x+this.scale.y+this.scale.z)/3);var h=u*u;var f=new Ft;var p=new Ft;function d(e,r){var n=t.distanceSqToPoint(e);if(n<h){t.closestPointToPoint(e,p);p.applyMatrix4(l);var s=i.ray.origin.distanceTo(p);if(s<i.near||s>i.far)return;a.push({distance:s,distanceToRay:Math.sqrt(n),point:p.clone(),index:r,face:null,object:o})}}if(s.isBufferGeometry){var m=s.index;var v=s.attributes;var g=v.position.array;if(null!==m){var y=m.array;for(var x=0,b=y.length;x<b;x++){var _=y[x];f.fromArray(g,3*_);d(f,_)}}else for(var x=0,w=g.length/3;x<w;x++){f.fromArray(g,3*x);d(f,x)}}else{var S=s.vertices;for(var x=0,w=S.length;x<w;x++)d(S[x],x)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Wo(){pi.call(this);this.type="Group"}Wo.prototype=Object.assign(Object.create(pi.prototype),{constructor:Wo,isGroup:true});function Xo(e,t,r,n,i,a,o,s,l){Ht.call(this,e,t,r,n,i,a,o,s,l);this.generateMipmaps=false}Xo.prototype=Object.assign(Object.create(Ht.prototype),{constructor:Xo,isVideoTexture:true,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=true)}});function qo(e,t,r,n,i,a,o,s,l,c,u,h){Ht.call(this,null,a,o,s,l,c,n,i,u,h);this.image={width:t,height:r};this.mipmaps=e;this.flipY=false;this.generateMipmaps=false}qo.prototype=Object.create(Ht.prototype);qo.prototype.constructor=qo;qo.prototype.isCompressedTexture=true;function Yo(e,t,r,n,i,a,o,s,l,c){c=void 0!==c?c:He;if(c!==He&&c!==Ve)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&c===He&&(r=Ae);void 0===r&&c===Ve&&(r=Ue);Ht.call(this,null,n,i,a,o,s,c,r,l);this.image={width:e,height:t};this.magFilter=void 0!==o?o:ye;this.minFilter=void 0!==s?s:ye;this.flipY=false;this.generateMipmaps=false}Yo.prototype=Object.create(Ht.prototype);Yo.prototype.constructor=Yo;Yo.prototype.isDepthTexture=true;function Zo(e){Oi.call(this);this.type="WireframeGeometry";var t=[];var r,n,i,a,o;var s=[0,0],l={},c,u,h;var f,p=["a","b","c"];var d;if(e&&e.isGeometry){var m=e.faces;for(r=0,i=m.length;r<i;r++){var v=m[r];for(n=0;n<3;n++){u=v[p[n]];h=v[p[(n+1)%3]];s[0]=Math.min(u,h);s[1]=Math.max(u,h);f=s[0]+","+s[1];void 0===l[f]&&(l[f]={index1:s[0],index2:s[1]})}}for(f in l){c=l[f];d=e.vertices[c.index1];t.push(d.x,d.y,d.z);d=e.vertices[c.index2];t.push(d.x,d.y,d.z)}}else if(e&&e.isBufferGeometry){var g,y,x;var b,_,w;var S,T;d=new Ft;if(null!==e.index){g=e.attributes.position;y=e.index;x=e.groups;0===x.length&&(x=[{start:0,count:y.count,materialIndex:0}]);for(a=0,o=x.length;a<o;++a){b=x[a];_=b.start;w=b.count;for(r=_,i=_+w;r<i;r+=3)for(n=0;n<3;n++){u=y.getX(r+n);h=y.getX(r+(n+1)%3);s[0]=Math.min(u,h);s[1]=Math.max(u,h);f=s[0]+","+s[1];void 0===l[f]&&(l[f]={index1:s[0],index2:s[1]})}}for(f in l){c=l[f];d.fromBufferAttribute(g,c.index1);t.push(d.x,d.y,d.z);d.fromBufferAttribute(g,c.index2);t.push(d.x,d.y,d.z)}}else{g=e.attributes.position;for(r=0,i=g.count/3;r<i;r++)for(n=0;n<3;n++){S=3*r+n;d.fromBufferAttribute(g,S);t.push(d.x,d.y,d.z);T=3*r+(n+1)%3;d.fromBufferAttribute(g,T);t.push(d.x,d.y,d.z)}}}this.addAttribute("position",new Ai(t,3))}Zo.prototype=Object.create(Oi.prototype);Zo.prototype.constructor=Zo;function Jo(e,t,r){yi.call(this);this.type="ParametricGeometry";this.parameters={func:e,slices:t,stacks:r};this.fromBufferGeometry(new Qo(e,t,r));this.mergeVertices()}Jo.prototype=Object.create(yi.prototype);Jo.prototype.constructor=Jo;function Qo(e,t,r){Oi.call(this);this.type="ParametricBufferGeometry";this.parameters={func:e,slices:t,stacks:r};var n=[];var i=[];var a=[];var o=[];var s=1e-5;var l=new Ft;var c=new Ft,u=new Ft;var h=new Ft,f=new Ft;var p,d;var m=t+1;for(p=0;p<=r;p++){var v=p/r;for(d=0;d<=t;d++){var g=d/t;e(g,v,c);i.push(c.x,c.y,c.z);if(g-s>=0){e(g-s,v,u);h.subVectors(c,u)}else{e(g+s,v,u);h.subVectors(u,c)}if(v-s>=0){e(g,v-s,u);f.subVectors(c,u)}else{e(g,v+s,u);f.subVectors(u,c)}l.crossVectors(h,f).normalize();a.push(l.x,l.y,l.z);o.push(g,v)}}for(p=0;p<r;p++)for(d=0;d<t;d++){var y=p*m+d;var x=p*m+d+1;var b=(p+1)*m+d+1;var _=(p+1)*m+d;n.push(y,x,_);n.push(x,b,_)}this.setIndex(n);this.addAttribute("position",new Ai(i,3));this.addAttribute("normal",new Ai(a,3));this.addAttribute("uv",new Ai(o,2))}Qo.prototype=Object.create(Oi.prototype);Qo.prototype.constructor=Qo;function Ko(e,t,r,n){yi.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:e,indices:t,radius:r,detail:n};this.fromBufferGeometry(new $o(e,t,r,n));this.mergeVertices()}Ko.prototype=Object.create(yi.prototype);Ko.prototype.constructor=Ko;function $o(e,t,r,n){Oi.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:e,indices:t,radius:r,detail:n};r=r||1;n=n||0;var i=[];var a=[];o(n);l(r);c();this.addAttribute("position",new Ai(i,3));this.addAttribute("normal",new Ai(i.slice(),3));this.addAttribute("uv",new Ai(a,2));0===n?this.computeVertexNormals():this.normalizeNormals();function o(e){var r=new Ft;var n=new Ft;var i=new Ft;for(var a=0;a<t.length;a+=3){f(t[a+0],r);f(t[a+1],n);f(t[a+2],i);s(r,n,i,e)}}function s(e,t,r,n){var i=Math.pow(2,n);var a=[];var o,s;for(o=0;o<=i;o++){a[o]=[];var l=e.clone().lerp(r,o/i);var c=t.clone().lerp(r,o/i);var u=i-o;for(s=0;s<=u;s++)a[o][s]=0===s&&o===i?l:l.clone().lerp(c,s/u)}for(o=0;o<i;o++)for(s=0;s<2*(i-o)-1;s++){var f=Math.floor(s/2);if(s%2===0){h(a[o][f+1]);h(a[o+1][f]);h(a[o][f])}else{h(a[o][f+1]);h(a[o+1][f+1]);h(a[o+1][f])}}}function l(e){var t=new Ft;for(var r=0;r<i.length;r+=3){t.x=i[r+0];t.y=i[r+1];t.z=i[r+2];t.normalize().multiplyScalar(e);i[r+0]=t.x;i[r+1]=t.y;i[r+2]=t.z}}function c(){var e=new Ft;for(var t=0;t<i.length;t+=3){e.x=i[t+0];e.y=i[t+1];e.z=i[t+2];var r=m(e)/2/Math.PI+.5;var n=v(e)/Math.PI+.5;a.push(r,1-n)}p();u()}function u(){for(var e=0;e<a.length;e+=6){var t=a[e+0];var r=a[e+2];var n=a[e+4];var i=Math.max(t,r,n);var o=Math.min(t,r,n);if(i>.9&&o<.1){t<.2&&(a[e+0]+=1);r<.2&&(a[e+2]+=1);n<.2&&(a[e+4]+=1)}}}function h(e){i.push(e.x,e.y,e.z)}function f(t,r){var n=3*t;r.x=e[n+0];r.y=e[n+1];r.z=e[n+2]}function p(){var e=new Ft;var t=new Ft;var r=new Ft;var n=new Ft;var o=new Dt;var s=new Dt;var l=new Dt;for(var c=0,u=0;c<i.length;c+=9,u+=6){e.set(i[c+0],i[c+1],i[c+2]);t.set(i[c+3],i[c+4],i[c+5]);r.set(i[c+6],i[c+7],i[c+8]);o.set(a[u+0],a[u+1]);s.set(a[u+2],a[u+3]);l.set(a[u+4],a[u+5]);n.copy(e).add(t).add(r).divideScalar(3);var h=m(n);d(o,u+0,e,h);d(s,u+2,t,h);d(l,u+4,r,h)}}function d(e,t,r,n){n<0&&1===e.x&&(a[t]=e.x-1);0===r.x&&0===r.z&&(a[t]=n/2/Math.PI+.5)}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}$o.prototype=Object.create(Oi.prototype);$o.prototype.constructor=$o;function es(e,t){yi.call(this);this.type="TetrahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new ts(e,t));this.mergeVertices()}es.prototype=Object.create(yi.prototype);es.prototype.constructor=es;function ts(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var n=[2,1,0,0,3,2,1,3,0,2,3,1];$o.call(this,r,n,e,t);this.type="TetrahedronBufferGeometry";this.parameters={radius:e,detail:t}}ts.prototype=Object.create($o.prototype);ts.prototype.constructor=ts;function rs(e,t){yi.call(this);this.type="OctahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new ns(e,t));this.mergeVertices()}rs.prototype=Object.create(yi.prototype);rs.prototype.constructor=rs;function ns(e,t){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];$o.call(this,r,n,e,t);this.type="OctahedronBufferGeometry";this.parameters={radius:e,detail:t}}ns.prototype=Object.create($o.prototype);ns.prototype.constructor=ns;function is(e,t){yi.call(this);this.type="IcosahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new as(e,t));this.mergeVertices()}is.prototype=Object.create(yi.prototype);is.prototype.constructor=is;function as(e,t){var r=(1+Math.sqrt(5))/2;var n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];var i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];$o.call(this,n,i,e,t);this.type="IcosahedronBufferGeometry";this.parameters={radius:e,detail:t}}as.prototype=Object.create($o.prototype);as.prototype.constructor=as;function os(e,t){yi.call(this);this.type="DodecahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new ss(e,t));this.mergeVertices()}os.prototype=Object.create(yi.prototype);os.prototype.constructor=os;function ss(e,t){var r=(1+Math.sqrt(5))/2;var n=1/r;var i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];var a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];$o.call(this,i,a,e,t);this.type="DodecahedronBufferGeometry";this.parameters={radius:e,detail:t}}ss.prototype=Object.create($o.prototype);ss.prototype.constructor=ss;function ls(e,t,r,n,i,a){yi.call(this);this.type="TubeGeometry";this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i};void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new cs(e,t,r,n,i);this.tangents=o.tangents;this.normals=o.normals;this.binormals=o.binormals;this.fromBufferGeometry(o);this.mergeVertices()}ls.prototype=Object.create(yi.prototype);ls.prototype.constructor=ls;function cs(e,t,r,n,i){Oi.call(this);this.type="TubeBufferGeometry";this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i};t=t||64;r=r||1;n=n||8;i=i||false;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;var o=new Ft;var s=new Ft;var l=new Dt;var c=new Ft;var u,h;var f=[];var p=[];var d=[];var m=[];v();this.setIndex(m);this.addAttribute("position",new Ai(f,3));this.addAttribute("normal",new Ai(p,3));this.addAttribute("uv",new Ai(d,2));function v(){for(u=0;u<t;u++)g(u);g(false===i?t:0);x();y()}function g(i){c=e.getPointAt(i/t,c);var l=a.normals[i];var u=a.binormals[i];for(h=0;h<=n;h++){var d=h/n*Math.PI*2;var m=Math.sin(d);var v=-Math.cos(d);s.x=v*l.x+m*u.x;s.y=v*l.y+m*u.y;s.z=v*l.z+m*u.z;s.normalize();p.push(s.x,s.y,s.z);o.x=c.x+r*s.x;o.y=c.y+r*s.y;o.z=c.z+r*s.z;f.push(o.x,o.y,o.z)}}function y(){for(h=1;h<=t;h++)for(u=1;u<=n;u++){var e=(n+1)*(h-1)+(u-1);var r=(n+1)*h+(u-1);var i=(n+1)*h+u;var a=(n+1)*(h-1)+u;m.push(e,r,a);m.push(r,i,a)}}function x(){for(u=0;u<=t;u++)for(h=0;h<=n;h++){l.x=u/t;l.y=h/n;d.push(l.x,l.y)}}}cs.prototype=Object.create(Oi.prototype);cs.prototype.constructor=cs;function us(e,t,r,n,i,a,o){yi.call(this);this.type="TorusKnotGeometry";this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a};void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new hs(e,t,r,n,i,a));this.mergeVertices()}us.prototype=Object.create(yi.prototype);us.prototype.constructor=us;function hs(e,t,r,n,i,a){Oi.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a};e=e||1;t=t||.4;r=Math.floor(r)||64;n=Math.floor(n)||8;i=i||2;a=a||3;var o=[];var s=[];var l=[];var c=[];var u,h;var f=new Ft;var p=new Ft;var d=new Ft;var m=new Ft;var v=new Ft;var g=new Ft;var y=new Ft;for(u=0;u<=r;++u){var x=u/r*i*Math.PI*2;A(x,i,a,e,d);A(x+.01,i,a,e,m);g.subVectors(m,d);y.addVectors(m,d);v.crossVectors(g,y);y.crossVectors(v,g);v.normalize();y.normalize();for(h=0;h<=n;++h){var b=h/n*Math.PI*2;var _=-t*Math.cos(b);var w=t*Math.sin(b);f.x=d.x+(_*y.x+w*v.x);f.y=d.y+(_*y.y+w*v.y);f.z=d.z+(_*y.z+w*v.z);s.push(f.x,f.y,f.z);p.subVectors(f,d).normalize();l.push(p.x,p.y,p.z);c.push(u/r);c.push(h/n)}}for(h=1;h<=r;h++)for(u=1;u<=n;u++){var S=(n+1)*(h-1)+(u-1);var T=(n+1)*h+(u-1);var M=(n+1)*h+u;var E=(n+1)*(h-1)+u;o.push(S,T,E);o.push(T,M,E)}this.setIndex(o);this.addAttribute("position",new Ai(s,3));this.addAttribute("normal",new Ai(l,3));this.addAttribute("uv",new Ai(c,2));function A(e,t,r,n,i){var a=Math.cos(e);var o=Math.sin(e);var s=r/t*e;var l=Math.cos(s);i.x=n*(2+l)*.5*a;i.y=n*(2+l)*o*.5;i.z=n*Math.sin(s)*.5}}hs.prototype=Object.create(Oi.prototype);hs.prototype.constructor=hs;function fs(e,t,r,n,i){yi.call(this);this.type="TorusGeometry";this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i};this.fromBufferGeometry(new ps(e,t,r,n,i));this.mergeVertices()}fs.prototype=Object.create(yi.prototype);fs.prototype.constructor=fs;function ps(e,t,r,n,i){Oi.call(this);this.type="TorusBufferGeometry";this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i};e=e||1;t=t||.4;r=Math.floor(r)||8;n=Math.floor(n)||6;i=i||2*Math.PI;var a=[];var o=[];var s=[];var l=[];var c=new Ft;var u=new Ft;var h=new Ft;var f,p;for(f=0;f<=r;f++)for(p=0;p<=n;p++){var d=p/n*i;var m=f/r*Math.PI*2;u.x=(e+t*Math.cos(m))*Math.cos(d);u.y=(e+t*Math.cos(m))*Math.sin(d);u.z=t*Math.sin(m);o.push(u.x,u.y,u.z);c.x=e*Math.cos(d);c.y=e*Math.sin(d);h.subVectors(u,c).normalize();s.push(h.x,h.y,h.z);l.push(p/n);l.push(f/r)}for(f=1;f<=r;f++)for(p=1;p<=n;p++){var v=(n+1)*f+p-1;var g=(n+1)*(f-1)+p-1;var y=(n+1)*(f-1)+p;var x=(n+1)*f+p;a.push(v,g,x);a.push(g,y,x)}this.setIndex(a);this.addAttribute("position",new Ai(o,3));this.addAttribute("normal",new Ai(s,3));this.addAttribute("uv",new Ai(l,2))}ps.prototype=Object.create(Oi.prototype);ps.prototype.constructor=ps;var ds={triangulate:function(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,a=ms(e,0,i,r,true),o=[];if(!a)return o;var s,l,c,u,h,f,p;n&&(a=ws(e,t,a,r));if(e.length>80*r){s=c=e[0];l=u=e[1];for(var d=r;d<i;d+=r){h=e[d];f=e[d+1];h<s&&(s=h);f<l&&(l=f);h>c&&(c=h);f>u&&(u=f)}p=Math.max(c-s,u-l);p=0!==p?1/p:0}gs(a,o,r,s,l,p);return o}};function ms(e,t,r,n,i){var a,o;if(i===Hs(e,t,r,n)>0)for(a=t;a<r;a+=n)o=Fs(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=Fs(a,e[a],e[a+1],o);if(o&&Is(o,o.next)){Gs(o);o=o.next}return o}function vs(e,t){if(!e)return e;t||(t=e);var r=e,n;do{n=false;if(r.steiner||!Is(r,r.next)&&0!==Os(r.prev,r,r.next))r=r.next;else{Gs(r);r=t=r.prev;if(r===r.next)break;n=true}}while(n||r!==t);return t}function gs(e,t,r,n,i,a,o){if(!e)return;!o&&a&&Es(e,n,i,a);var s=e,l,c;while(e.prev!==e.next){l=e.prev;c=e.next;if(a?xs(e,n,i,a):ys(e)){t.push(l.i/r);t.push(e.i/r);t.push(c.i/r);Gs(e);e=c.next;s=c.next;continue}e=c;if(e===s){if(o)if(1===o){e=bs(e,t,r);gs(e,t,r,n,i,a,2)}else 2===o&&_s(e,t,r,n,i,a);else gs(vs(e),t,r,n,i,a,1);break}}}function ys(e){var t=e.prev,r=e,n=e.next;if(Os(t,r,n)>=0)return false;var i=e.next.next;while(i!==e.prev){if(Cs(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Os(i.prev,i,i.next)>=0)return false;i=i.next}return true}function xs(e,t,r,n){var i=e.prev,a=e,o=e.next;if(Os(i,a,o)>=0)return false;var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y;var h=Rs(s,l,t,r,n),f=Rs(c,u,t,r,n);var p=e.nextZ;while(p&&p.z<=f){if(p!==e.prev&&p!==e.next&&Cs(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Os(p.prev,p,p.next)>=0)return false;p=p.nextZ}p=e.prevZ;while(p&&p.z>=h){if(p!==e.prev&&p!==e.next&&Cs(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Os(p.prev,p,p.next)>=0)return false;p=p.prevZ}return true}function bs(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;if(!Is(i,a)&&Bs(i,n,n.next,a)&&Ds(i,a)&&Ds(a,i)){t.push(i.i/r);t.push(n.i/r);t.push(a.i/r);Gs(n);Gs(n.next);n=e=a}n=n.next}while(n!==e);return n}function _s(e,t,r,n,i,a){var o=e;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&Ls(o,s)){var l=Ns(o,s);o=vs(o,o.next);l=vs(l,l.next);gs(o,t,r,n,i,a);gs(l,t,r,n,i,a);return}s=s.next}o=o.next}while(o!==e)}function ws(e,t,r,n){var i=[],a,o,s,l,c;for(a=0,o=t.length;a<o;a++){s=t[a]*n;l=a<o-1?t[a+1]*n:e.length;c=ms(e,s,l,n,false);c===c.next&&(c.steiner=true);i.push(Ps(c))}i.sort(Ss);for(a=0;a<i.length;a++){Ts(i[a],r);r=vs(r,r.next)}return r}function Ss(e,t){return e.x-t.x}function Ts(e,t){t=Ms(e,t);if(t){var r=Ns(t,e);vs(r,r.next)}}function Ms(e,t){var r=t,n=e.x,i=e.y,a=-Infinity,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){a=s;if(s===n){if(i===r.y)return r;if(i===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(n===a)return o.prev;var l=o,c=o.x,u=o.y,h=Infinity,f;r=o.next;while(r!==l){if(n>=r.x&&r.x>=c&&n!==r.x&&Cs(i<u?n:a,i,c,u,i<u?a:n,i,r.x,r.y)){f=Math.abs(i-r.y)/(n-r.x);if((f<h||f===h&&r.x>o.x)&&Ds(r,e)){o=r;h=f}}r=r.next}return o}function Es(e,t,r,n){var i=e;do{null===i.z&&(i.z=Rs(i.x,i.y,t,r,n));i.prevZ=i.prev;i.nextZ=i.next;i=i.next}while(i!==e);i.prevZ.nextZ=null;i.prevZ=null;As(i)}function As(e){var t,r,n,i,a,o,s,l,c=1;do{r=e;e=null;a=null;o=0;while(r){o++;n=r;s=0;for(t=0;t<c;t++){s++;n=n.nextZ;if(!n)break}l=c;while(s>0||l>0&&n){if(0!==s&&(0===l||!n||r.z<=n.z)){i=r;r=r.nextZ;s--}else{i=n;n=n.nextZ;l--}a?a.nextZ=i:e=i;i.prevZ=a;a=i}r=n}a.nextZ=null;c*=2}while(o>1);return e}function Rs(e,t,r,n,i){e=32767*(e-r)*i;t=32767*(t-n)*i;e=16711935&(e|e<<8);e=252645135&(e|e<<4);e=858993459&(e|e<<2);e=1431655765&(e|e<<1);t=16711935&(t|t<<8);t=252645135&(t|t<<4);t=858993459&(t|t<<2);t=1431655765&(t|t<<1);return e|t<<1}function Ps(e){var t=e,r=e;do{t.x<r.x&&(r=t);t=t.next}while(t!==e);return r}function Cs(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function Ls(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Us(e,t)&&Ds(e,t)&&Ds(t,e)&&ks(e,t)}function Os(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Is(e,t){return e.x===t.x&&e.y===t.y}function Bs(e,t,r,n){if(Is(e,t)&&Is(r,n)||Is(e,n)&&Is(r,t))return true;return Os(e,t,r)>0!==Os(e,t,n)>0&&Os(r,n,e)>0!==Os(r,n,t)>0}function Us(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Bs(r,r.next,e,t))return true;r=r.next}while(r!==e);return false}function Ds(e,t){return Os(e.prev,e,e.next)<0?Os(e,t,e.next)>=0&&Os(e,e.prev,t)>=0:Os(e,t,e.prev)<0||Os(e,e.next,t)<0}function ks(e,t){var r=e,n=false,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!==r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n);r=r.next}while(r!==e);return n}function Ns(e,t){var r=new zs(e.i,e.x,e.y),n=new zs(t.i,t.x,t.y),i=e.next,a=t.prev;e.next=t;t.prev=e;r.next=i;i.prev=r;n.next=r;r.prev=n;a.next=n;n.prev=a;return n}function Fs(e,t,r,n){var i=new zs(e,t,r);if(n){i.next=n.next;i.prev=n;n.next.prev=i;n.next=i}else{i.prev=i;i.next=i}return i}function Gs(e){e.next.prev=e.prev;e.prev.next=e.next;e.prevZ&&(e.prevZ.nextZ=e.nextZ);e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function zs(e,t,r){this.i=e;this.x=t;this.y=r;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}function Hs(e,t,r,n){var i=0;for(var a=t,o=r-n;a<r;a+=n){i+=(e[o]-e[a])*(e[a+1]+e[o+1]);o=a}return i}var Vs={area:function(e){var t=e.length;var r=0;for(var n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},isClockWise:function(e){return Vs.area(e)<0},triangulateShape:function(e,t){var r=[];var n=[];var i=[];js(e);Ws(r,e);var a=e.length;t.forEach(js);for(var o=0;o<t.length;o++){n.push(a);a+=t[o].length;Ws(r,t[o])}var s=ds.triangulate(r,n);for(var o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}};function js(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Ws(e,t){for(var r=0;r<t.length;r++){e.push(t[r].x);e.push(t[r].y)}}function Xs(e,t){yi.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:e,options:t};this.fromBufferGeometry(new qs(e,t));this.mergeVertices()}Xs.prototype=Object.create(yi.prototype);Xs.prototype.constructor=Xs;function qs(e,t){Oi.call(this);this.type="ExtrudeBufferGeometry";this.parameters={shapes:e,options:t};e=Array.isArray(e)?e:[e];var r=this;var n=[];var i=[];for(var a=0,o=e.length;a<o;a++){var s=e[a];l(s,t)}this.addAttribute("position",new Ai(n,3));this.addAttribute("uv",new Ai(i,2));this.computeVertexNormals();function l(e){var a=[];var o=void 0!==t.curveSegments?t.curveSegments:12;var s=void 0!==t.steps?t.steps:1;var l=void 0!==t.amount?t.amount:100;var c=void 0===t.bevelEnabled||t.bevelEnabled;var u=void 0!==t.bevelThickness?t.bevelThickness:6;var h=void 0!==t.bevelSize?t.bevelSize:u-2;var f=void 0!==t.bevelSegments?t.bevelSegments:3;var p=t.extrudePath;var d=void 0!==t.UVGenerator?t.UVGenerator:Ys;var m,v=false;var g,y,x,b;if(p){m=p.getSpacedPoints(s);v=true;c=false;g=p.computeFrenetFrames(s,false);y=new Ft;x=new Ft;b=new Ft}if(!c){f=0;u=0;h=0}var _,w,S;var T=e.extractPoints(o);var M=T.shape;var E=T.holes;var A=!Vs.isClockWise(M);if(A){M=M.reverse();for(w=0,S=E.length;w<S;w++){_=E[w];Vs.isClockWise(_)&&(E[w]=_.reverse())}}var R=Vs.triangulateShape(M,E);var P=M;for(w=0,S=E.length;w<S;w++){_=E[w];M=M.concat(_)}function C(e,t,r){t||console.error("THREE.ExtrudeGeometry: vec does not exist");return t.clone().multiplyScalar(r).add(e)}var L,O,I,B,U,D=M.length,k,N=R.length;function F(e,t,r){var n,i,a;var o=e.x-t.x,s=e.y-t.y;var l=r.x-e.x,c=r.y-e.y;var u=o*o+s*s;var h=o*c-s*l;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(u);var p=Math.sqrt(l*l+c*c);var d=t.x-s/f;var m=t.y+o/f;var v=r.x-c/p;var g=r.y+l/p;var y=((v-d)*c-(g-m)*l)/(o*c-s*l);n=d+o*y-e.x;i=m+s*y-e.y;var x=n*n+i*i;if(x<=2)return new Dt(n,i);a=Math.sqrt(x/2)}else{var b=false;o>Number.EPSILON?l>Number.EPSILON&&(b=true):o<-Number.EPSILON?l<-Number.EPSILON&&(b=true):Math.sign(s)===Math.sign(c)&&(b=true);if(b){n=-s;i=o;a=Math.sqrt(u)}else{n=o;i=s;a=Math.sqrt(u/2)}}return new Dt(n/a,i/a)}var G=[];for(var z=0,H=P.length,V=H-1,j=z+1;z<H;z++,V++,j++){V===H&&(V=0);j===H&&(j=0);G[z]=F(P[z],P[V],P[j])}var W=[],X,q=G.concat();for(w=0,S=E.length;w<S;w++){_=E[w];X=[];for(z=0,H=_.length,V=H-1,j=z+1;z<H;z++,V++,j++){V===H&&(V=0);j===H&&(j=0);X[z]=F(_[z],_[V],_[j])}W.push(X);q=q.concat(X)}for(L=0;L<f;L++){I=L/f;B=u*Math.cos(I*Math.PI/2);O=h*Math.sin(I*Math.PI/2);for(z=0,H=P.length;z<H;z++){U=C(P[z],G[z],O);K(U.x,U.y,-B)}for(w=0,S=E.length;w<S;w++){_=E[w];X=W[w];for(z=0,H=_.length;z<H;z++){U=C(_[z],X[z],O);K(U.x,U.y,-B)}}}O=h;for(z=0;z<D;z++){U=c?C(M[z],q[z],O):M[z];if(v){x.copy(g.normals[0]).multiplyScalar(U.x);y.copy(g.binormals[0]).multiplyScalar(U.y);b.copy(m[0]).add(x).add(y);K(b.x,b.y,b.z)}else K(U.x,U.y,0)}var Y;for(Y=1;Y<=s;Y++)for(z=0;z<D;z++){U=c?C(M[z],q[z],O):M[z];if(v){x.copy(g.normals[Y]).multiplyScalar(U.x);y.copy(g.binormals[Y]).multiplyScalar(U.y);b.copy(m[Y]).add(x).add(y);K(b.x,b.y,b.z)}else K(U.x,U.y,l/s*Y)}for(L=f-1;L>=0;L--){I=L/f;B=u*Math.cos(I*Math.PI/2);O=h*Math.sin(I*Math.PI/2);for(z=0,H=P.length;z<H;z++){U=C(P[z],G[z],O);K(U.x,U.y,l+B)}for(w=0,S=E.length;w<S;w++){_=E[w];X=W[w];for(z=0,H=_.length;z<H;z++){U=C(_[z],X[z],O);v?K(U.x,U.y+m[s-1].y,m[s-1].x+B):K(U.x,U.y,l+B)}}}Z();J();function Z(){var e=n.length/3;if(c){var t=0;var i=D*t;for(z=0;z<N;z++){k=R[z];$(k[2]+i,k[1]+i,k[0]+i)}t=s+2*f;i=D*t;for(z=0;z<N;z++){k=R[z];$(k[0]+i,k[1]+i,k[2]+i)}}else{for(z=0;z<N;z++){k=R[z];$(k[2],k[1],k[0])}for(z=0;z<N;z++){k=R[z];$(k[0]+D*s,k[1]+D*s,k[2]+D*s)}}r.addGroup(e,n.length/3-e,0)}function J(){var e=n.length/3;var t=0;Q(P,t);t+=P.length;for(w=0,S=E.length;w<S;w++){_=E[w];Q(_,t);t+=_.length}r.addGroup(e,n.length/3-e,1)}function Q(e,t){var r,n;z=e.length;while(--z>=0){r=z;n=z-1;n<0&&(n=e.length-1);var i=0,a=s+2*f;for(i=0;i<a;i++){var o=D*i;var l=D*(i+1);var c=t+r+o,u=t+n+o,h=t+n+l,p=t+r+l;ee(c,u,h,p)}}}function K(e,t,r){a.push(e);a.push(t);a.push(r)}function $(e,t,i){te(e);te(t);te(i);var a=n.length/3;var o=d.generateTopUV(r,n,a-3,a-2,a-1);re(o[0]);re(o[1]);re(o[2])}function ee(e,t,i,a){te(e);te(t);te(a);te(t);te(i);te(a);var o=n.length/3;var s=d.generateSideWallUV(r,n,o-6,o-3,o-2,o-1);re(s[0]);re(s[1]);re(s[3]);re(s[1]);re(s[2]);re(s[3])}function te(e){n.push(a[3*e+0]);n.push(a[3*e+1]);n.push(a[3*e+2])}function re(e){i.push(e.x);i.push(e.y)}}}qs.prototype=Object.create(Oi.prototype);qs.prototype.constructor=qs;var Ys={generateTopUV:function(e,t,r,n,i){var a=t[3*r];var o=t[3*r+1];var s=t[3*n];var l=t[3*n+1];var c=t[3*i];var u=t[3*i+1];return[new Dt(a,o),new Dt(s,l),new Dt(c,u)]},generateSideWallUV:function(e,t,r,n,i,a){var o=t[3*r];var s=t[3*r+1];var l=t[3*r+2];var c=t[3*n];var u=t[3*n+1];var h=t[3*n+2];var f=t[3*i];var p=t[3*i+1];var d=t[3*i+2];var m=t[3*a];var v=t[3*a+1];var g=t[3*a+2];return Math.abs(s-u)<.01?[new Dt(o,1-l),new Dt(c,1-h),new Dt(f,1-d),new Dt(m,1-g)]:[new Dt(s,1-l),new Dt(u,1-h),new Dt(p,1-d),new Dt(v,1-g)]}};function Zs(e,t){yi.call(this);this.type="TextGeometry";this.parameters={text:e,parameters:t};this.fromBufferGeometry(new Js(e,t));this.mergeVertices()}Zs.prototype=Object.create(yi.prototype);Zs.prototype.constructor=Zs;function Js(e,t){t=t||{};var r=t.font;if(!(r&&r.isFont)){console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font.");return new yi}var n=r.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50;void 0===t.bevelThickness&&(t.bevelThickness=10);void 0===t.bevelSize&&(t.bevelSize=8);void 0===t.bevelEnabled&&(t.bevelEnabled=false);qs.call(this,n,t);this.type="TextBufferGeometry"}Js.prototype=Object.create(qs.prototype);Js.prototype.constructor=Js;function Qs(e,t,r,n,i,a,o){yi.call(this);this.type="SphereGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o};this.fromBufferGeometry(new Ks(e,t,r,n,i,a,o));this.mergeVertices()}Qs.prototype=Object.create(yi.prototype);Qs.prototype.constructor=Qs;function Ks(e,t,r,n,i,a,o){Oi.call(this);this.type="SphereBufferGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o};e=e||1;t=Math.max(3,Math.floor(t)||8);r=Math.max(2,Math.floor(r)||6);n=void 0!==n?n:0;i=void 0!==i?i:2*Math.PI;a=void 0!==a?a:0;o=void 0!==o?o:Math.PI;var s=a+o;var l,c;var u=0;var h=[];var f=new Ft;var p=new Ft;var d=[];var m=[];var v=[];var g=[];for(c=0;c<=r;c++){var y=[];var x=c/r;for(l=0;l<=t;l++){var b=l/t;f.x=-e*Math.cos(n+b*i)*Math.sin(a+x*o);f.y=e*Math.cos(a+x*o);f.z=e*Math.sin(n+b*i)*Math.sin(a+x*o);m.push(f.x,f.y,f.z);p.set(f.x,f.y,f.z).normalize();v.push(p.x,p.y,p.z);g.push(b,1-x);y.push(u++)}h.push(y)}for(c=0;c<r;c++)for(l=0;l<t;l++){var _=h[c][l+1];var w=h[c][l];var S=h[c+1][l];var T=h[c+1][l+1];(0!==c||a>0)&&d.push(_,w,T);(c!==r-1||s<Math.PI)&&d.push(w,S,T)}this.setIndex(d);this.addAttribute("position",new Ai(m,3));this.addAttribute("normal",new Ai(v,3));this.addAttribute("uv",new Ai(g,2))}Ks.prototype=Object.create(Oi.prototype);Ks.prototype.constructor=Ks;function $s(e,t,r,n,i,a){yi.call(this);this.type="RingGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a};this.fromBufferGeometry(new el(e,t,r,n,i,a));this.mergeVertices()}$s.prototype=Object.create(yi.prototype);$s.prototype.constructor=$s;function el(e,t,r,n,i,a){Oi.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a};e=e||.5;t=t||1;i=void 0!==i?i:0;a=void 0!==a?a:2*Math.PI;r=void 0!==r?Math.max(3,r):8;n=void 0!==n?Math.max(1,n):1;var o=[];var s=[];var l=[];var c=[];var u;var h=e;var f=(t-e)/n;var p=new Ft;var d=new Dt;var m,v;for(m=0;m<=n;m++){for(v=0;v<=r;v++){u=i+v/r*a;p.x=h*Math.cos(u);p.y=h*Math.sin(u);s.push(p.x,p.y,p.z);l.push(0,0,1);d.x=(p.x/t+1)/2;d.y=(p.y/t+1)/2;c.push(d.x,d.y)}h+=f}for(m=0;m<n;m++){var g=m*(r+1);for(v=0;v<r;v++){u=v+g;var y=u;var x=u+r+1;var b=u+r+2;var _=u+1;o.push(y,x,_);o.push(x,b,_)}}this.setIndex(o);this.addAttribute("position",new Ai(s,3));this.addAttribute("normal",new Ai(l,3));this.addAttribute("uv",new Ai(c,2))}el.prototype=Object.create(Oi.prototype);el.prototype.constructor=el;function tl(e,t,r,n){yi.call(this);this.type="LatheGeometry";this.parameters={points:e,segments:t,phiStart:r,phiLength:n};this.fromBufferGeometry(new rl(e,t,r,n));this.mergeVertices()}tl.prototype=Object.create(yi.prototype);tl.prototype.constructor=tl;function rl(e,t,r,n){Oi.call(this);this.type="LatheBufferGeometry";this.parameters={points:e,segments:t,phiStart:r,phiLength:n};t=Math.floor(t)||12;r=r||0;n=n||2*Math.PI;n=Ut.clamp(n,0,2*Math.PI);var i=[];var a=[];var o=[];var s;var l=1/t;var c=new Ft;var u=new Dt;var h,f;for(h=0;h<=t;h++){var p=r+h*l*n;var d=Math.sin(p);var m=Math.cos(p);for(f=0;f<=e.length-1;f++){c.x=e[f].x*d;c.y=e[f].y;c.z=e[f].x*m;a.push(c.x,c.y,c.z);u.x=h/t;u.y=f/(e.length-1);o.push(u.x,u.y)}}for(h=0;h<t;h++)for(f=0;f<e.length-1;f++){s=f+h*e.length;var v=s;var g=s+e.length;var y=s+e.length+1;var x=s+1;i.push(v,g,x);i.push(g,y,x)}this.setIndex(i);this.addAttribute("position",new Ai(a,3));this.addAttribute("uv",new Ai(o,2));this.computeVertexNormals();if(n===2*Math.PI){var b=this.attributes.normal.array;var _=new Ft;var w=new Ft;var S=new Ft;s=t*e.length*3;for(h=0,f=0;h<e.length;h++,f+=3){_.x=b[f+0];_.y=b[f+1];_.z=b[f+2];w.x=b[s+f+0];w.y=b[s+f+1];w.z=b[s+f+2];S.addVectors(_,w).normalize();b[f+0]=b[s+f+0]=S.x;b[f+1]=b[s+f+1]=S.y;b[f+2]=b[s+f+2]=S.z}}}rl.prototype=Object.create(Oi.prototype);rl.prototype.constructor=rl;function nl(e,t){yi.call(this);this.type="ShapeGeometry";if("object"===typeof t){console.warn("THREE.ShapeGeometry: Options parameter has been removed.");t=t.curveSegments}this.parameters={shapes:e,curveSegments:t};this.fromBufferGeometry(new il(e,t));this.mergeVertices()}nl.prototype=Object.create(yi.prototype);nl.prototype.constructor=nl;nl.prototype.toJSON=function(){var e=yi.prototype.toJSON.call(this);var t=this.parameters.shapes;return al(t,e)};function il(e,t){Oi.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:e,curveSegments:t};t=t||12;var r=[];var n=[];var i=[];var a=[];var o=0;var s=0;if(false===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++){c(e[l]);this.addGroup(o,s,l);o+=s;s=0}this.setIndex(r);this.addAttribute("position",new Ai(n,3));this.addAttribute("normal",new Ai(i,3));this.addAttribute("uv",new Ai(a,2));function c(e){var o,l,c;var u=n.length/3;var h=e.extractPoints(t);var f=h.shape;var p=h.holes;if(false===Vs.isClockWise(f)){f=f.reverse();for(o=0,l=p.length;o<l;o++){c=p[o];true===Vs.isClockWise(c)&&(p[o]=c.reverse())}}var d=Vs.triangulateShape(f,p);for(o=0,l=p.length;o<l;o++){c=p[o];f=f.concat(c)}for(o=0,l=f.length;o<l;o++){var m=f[o];n.push(m.x,m.y,0);i.push(0,0,1);a.push(m.x,m.y)}for(o=0,l=d.length;o<l;o++){var v=d[o];var g=v[0]+u;var y=v[1]+u;var x=v[2]+u;r.push(g,y,x);s+=3}}}il.prototype=Object.create(Oi.prototype);il.prototype.constructor=il;il.prototype.toJSON=function(){var e=Oi.prototype.toJSON.call(this);var t=this.parameters.shapes;return al(t,e)};function al(e,t){t.shapes=[];if(Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function ol(e,t){Oi.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:t};t=void 0!==t?t:1;var r=[];var n=Math.cos(Ut.DEG2RAD*t);var i=[0,0],a={},o,s;var l,c=["a","b","c"];var u;if(e.isBufferGeometry){u=new yi;u.fromBufferGeometry(e)}else u=e.clone();u.mergeVertices();u.computeFaceNormals();var h=u.vertices;var f=u.faces;for(var p=0,d=f.length;p<d;p++){var m=f[p];for(var v=0;v<3;v++){o=m[c[v]];s=m[c[(v+1)%3]];i[0]=Math.min(o,s);i[1]=Math.max(o,s);l=i[0]+","+i[1];void 0===a[l]?a[l]={index1:i[0],index2:i[1],face1:p,face2:void 0}:a[l].face2=p}}for(l in a){var g=a[l];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=n){var y=h[g.index1];r.push(y.x,y.y,y.z);y=h[g.index2];r.push(y.x,y.y,y.z)}}this.addAttribute("position",new Ai(r,3))}ol.prototype=Object.create(Oi.prototype);ol.prototype.constructor=ol;function sl(e,t,r,n,i,a,o,s){yi.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};this.fromBufferGeometry(new ll(e,t,r,n,i,a,o,s));this.mergeVertices()}sl.prototype=Object.create(yi.prototype);sl.prototype.constructor=sl;function ll(e,t,r,n,i,a,o,s){Oi.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var l=this;e=void 0!==e?e:1;t=void 0!==t?t:1;r=r||1;n=Math.floor(n)||8;i=Math.floor(i)||1;a=void 0!==a&&a;o=void 0!==o?o:0;s=void 0!==s?s:2*Math.PI;var c=[];var u=[];var h=[];var f=[];var p=0;var d=[];var m=r/2;var v=0;g();if(false===a){e>0&&y(true);t>0&&y(false)}this.setIndex(c);this.addAttribute("position",new Ai(u,3));this.addAttribute("normal",new Ai(h,3));this.addAttribute("uv",new Ai(f,2));function g(){var a,g;var y=new Ft;var x=new Ft;var b=0;var _=(t-e)/r;for(g=0;g<=i;g++){var w=[];var S=g/i;var T=S*(t-e)+e;for(a=0;a<=n;a++){var M=a/n;var E=M*s+o;var A=Math.sin(E);var R=Math.cos(E);x.x=T*A;x.y=-S*r+m;x.z=T*R;u.push(x.x,x.y,x.z);y.set(A,_,R).normalize();h.push(y.x,y.y,y.z);f.push(M,1-S);w.push(p++)}d.push(w)}for(a=0;a<n;a++)for(g=0;g<i;g++){var P=d[g][a];var C=d[g+1][a];var L=d[g+1][a+1];var O=d[g][a+1];c.push(P,C,O);c.push(C,L,O);b+=6}l.addGroup(v,b,0);v+=b}function y(r){var i,a,d;var g=new Dt;var y=new Ft;var x=0;var b=true===r?e:t;var _=true===r?1:-1;a=p;for(i=1;i<=n;i++){u.push(0,m*_,0);h.push(0,_,0);f.push(.5,.5);p++}d=p;for(i=0;i<=n;i++){var w=i/n;var S=w*s+o;var T=Math.cos(S);var M=Math.sin(S);y.x=b*M;y.y=m*_;y.z=b*T;u.push(y.x,y.y,y.z);h.push(0,_,0);g.x=.5*T+.5;g.y=.5*M*_+.5;f.push(g.x,g.y);p++}for(i=0;i<n;i++){var E=a+i;var A=d+i;true===r?c.push(A,A+1,E):c.push(A+1,A,E);x+=3}l.addGroup(v,x,true===r?1:2);v+=x}}ll.prototype=Object.create(Oi.prototype);ll.prototype.constructor=ll;function cl(e,t,r,n,i,a,o){sl.call(this,0,e,t,r,n,i,a,o);this.type="ConeGeometry";this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}cl.prototype=Object.create(sl.prototype);cl.prototype.constructor=cl;function ul(e,t,r,n,i,a,o){ll.call(this,0,e,t,r,n,i,a,o);this.type="ConeBufferGeometry";this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}ul.prototype=Object.create(ll.prototype);ul.prototype.constructor=ul;function hl(e,t,r,n){yi.call(this);this.type="CircleGeometry";this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n};this.fromBufferGeometry(new fl(e,t,r,n));this.mergeVertices()}hl.prototype=Object.create(yi.prototype);hl.prototype.constructor=hl;function fl(e,t,r,n){Oi.call(this);this.type="CircleBufferGeometry";this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n};e=e||1;t=void 0!==t?Math.max(3,t):8;r=void 0!==r?r:0;n=void 0!==n?n:2*Math.PI;var i=[];var a=[];var o=[];var s=[];var l,c;var u=new Ft;var h=new Dt;a.push(0,0,0);o.push(0,0,1);s.push(.5,.5);for(c=0,l=3;c<=t;c++,l+=3){var f=r+c/t*n;u.x=e*Math.cos(f);u.y=e*Math.sin(f);a.push(u.x,u.y,u.z);o.push(0,0,1);h.x=(a[l]/e+1)/2;h.y=(a[l+1]/e+1)/2;s.push(h.x,h.y)}for(l=1;l<=t;l++)i.push(l,l+1,0);this.setIndex(i);this.addAttribute("position",new Ai(a,3));this.addAttribute("normal",new Ai(o,3));this.addAttribute("uv",new Ai(s,2))}fl.prototype=Object.create(Oi.prototype);fl.prototype.constructor=fl;var pl=Object.freeze({WireframeGeometry:Zo,ParametricGeometry:Jo,ParametricBufferGeometry:Qo,TetrahedronGeometry:es,TetrahedronBufferGeometry:ts,OctahedronGeometry:rs,OctahedronBufferGeometry:ns,IcosahedronGeometry:is,IcosahedronBufferGeometry:as,DodecahedronGeometry:os,DodecahedronBufferGeometry:ss,PolyhedronGeometry:Ko,PolyhedronBufferGeometry:$o,TubeGeometry:ls,TubeBufferGeometry:cs,TorusKnotGeometry:us,TorusKnotBufferGeometry:hs,TorusGeometry:fs,TorusBufferGeometry:ps,TextGeometry:Zs,TextBufferGeometry:Js,SphereGeometry:Qs,SphereBufferGeometry:Ks,RingGeometry:$s,RingBufferGeometry:el,PlaneGeometry:Ui,PlaneBufferGeometry:Di,LatheGeometry:tl,LatheBufferGeometry:rl,ShapeGeometry:nl,ShapeBufferGeometry:il,ExtrudeGeometry:Xs,ExtrudeBufferGeometry:qs,EdgesGeometry:ol,ConeGeometry:cl,ConeBufferGeometry:ul,CylinderGeometry:sl,CylinderBufferGeometry:ll,CircleGeometry:hl,CircleBufferGeometry:fl,BoxGeometry:Ii,BoxBufferGeometry:Bi});function dl(e){Ni.call(this);this.type="ShadowMaterial";this.color=new oi(0);this.transparent=true;this.setValues(e)}dl.prototype=Object.create(Ni.prototype);dl.prototype.constructor=dl;dl.prototype.isShadowMaterial=true;dl.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.color.copy(e.color);return this};function ml(e){Gi.call(this,e);this.type="RawShaderMaterial"}ml.prototype=Object.create(Gi.prototype);ml.prototype.constructor=ml;ml.prototype.isRawShaderMaterial=true;function vl(e){Ni.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new oi(16777215);this.roughness=.5;this.metalness=.5;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new oi(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new Dt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.roughnessMap=null;this.metalnessMap=null;this.alphaMap=null;this.envMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}vl.prototype=Object.create(Ni.prototype);vl.prototype.constructor=vl;vl.prototype.isMeshStandardMaterial=true;vl.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.defines={STANDARD:""};this.color.copy(e.color);this.roughness=e.roughness;this.metalness=e.metalness;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.roughnessMap=e.roughnessMap;this.metalnessMap=e.metalnessMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.envMapIntensity=e.envMapIntensity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function gl(e){vl.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoat=0;this.clearCoatRoughness=0;this.setValues(e)}gl.prototype=Object.create(vl.prototype);gl.prototype.constructor=gl;gl.prototype.isMeshPhysicalMaterial=true;gl.prototype.copy=function(e){vl.prototype.copy.call(this,e);this.defines={PHYSICAL:""};this.reflectivity=e.reflectivity;this.clearCoat=e.clearCoat;this.clearCoatRoughness=e.clearCoatRoughness;return this};function yl(e){Ni.call(this);this.type="MeshPhongMaterial";this.color=new oi(16777215);this.specular=new oi(1118481);this.shininess=30;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new oi(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new Dt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=$;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}yl.prototype=Object.create(Ni.prototype);yl.prototype.constructor=yl;yl.prototype.isMeshPhongMaterial=true;yl.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.color.copy(e.color);this.specular.copy(e.specular);this.shininess=e.shininess;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function xl(e){yl.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(e)}xl.prototype=Object.create(yl.prototype);xl.prototype.constructor=xl;xl.prototype.isMeshToonMaterial=true;xl.prototype.copy=function(e){yl.prototype.copy.call(this,e);this.gradientMap=e.gradientMap;return this};function bl(e){Ni.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new Dt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}bl.prototype=Object.create(Ni.prototype);bl.prototype.constructor=bl;bl.prototype.isMeshNormalMaterial=true;bl.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function _l(e){Ni.call(this);this.type="MeshLambertMaterial";this.color=new oi(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new oi(0);this.emissiveIntensity=1;this.emissiveMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=$;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}_l.prototype=Object.create(Ni.prototype);_l.prototype.constructor=_l;_l.prototype.isMeshLambertMaterial=true;_l.prototype.copy=function(e){Ni.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function wl(e){Fo.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(e)}wl.prototype=Object.create(Fo.prototype);wl.prototype.constructor=wl;wl.prototype.isLineDashedMaterial=true;wl.prototype.copy=function(e){Fo.prototype.copy.call(this,e);this.scale=e.scale;this.dashSize=e.dashSize;this.gapSize=e.gapSize;return this};var Sl=Object.freeze({ShadowMaterial:dl,SpriteMaterial:Io,RawShaderMaterial:ml,ShaderMaterial:Gi,PointsMaterial:Vo,MeshPhysicalMaterial:gl,MeshStandardMaterial:vl,MeshPhongMaterial:yl,MeshToonMaterial:xl,MeshNormalMaterial:bl,MeshLambertMaterial:_l,MeshDepthMaterial:yo,MeshDistanceMaterial:xo,MeshBasicMaterial:Fi,LineDashedMaterial:wl,LineBasicMaterial:Fo,Material:Ni});var Tl={enabled:false,files:{},add:function(e,t){if(false===this.enabled)return;this.files[e]=t},get:function(e){if(false===this.enabled)return;return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Ml(e,t,r){var n=this;var i=false;var a=0;var o=0;var s=void 0;this.onStart=void 0;this.onLoad=e;this.onProgress=t;this.onError=r;this.itemStart=function(e){o++;false===i&&void 0!==n.onStart&&n.onStart(e,a,o);i=true};this.itemEnd=function(e){a++;void 0!==n.onProgress&&n.onProgress(e,a,o);if(a===o){i=false;void 0!==n.onLoad&&n.onLoad()}};this.itemError=function(e){void 0!==n.onError&&n.onError(e)};this.resolveURL=function(e){if(s)return s(e);return e};this.setURLModifier=function(e){s=e;return this}}var El=new Ml;var Al={};function Rl(e){this.manager=void 0!==e?e:El}Object.assign(Rl.prototype,{load:function(e,t,r,n){void 0===e&&(e="");void 0!==this.path&&(e=this.path+e);e=this.manager.resolveURL(e);var i=this;var a=Tl.get(e);if(void 0!==a){i.manager.itemStart(e);setTimeout(function(){t&&t(a);i.manager.itemEnd(e)},0);return a}if(void 0!==Al[e]){Al[e].push({onLoad:t,onProgress:r,onError:n});return}var o=/^data:(.*?)(;base64)?,(.*)$/;var s=e.match(o);if(s){var l=s[1];var c=!!s[2];var u=s[3];u=window.decodeURIComponent(u);c&&(u=window.atob(u));try{var h;var f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":var p=new Uint8Array(u.length);for(var d=0;d<u.length;d++)p[d]=u.charCodeAt(d);h="blob"===f?new Blob([p.buffer],{type:l}):p.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(u,l);break;case"json":h=JSON.parse(u);break;default:h=u;break}window.setTimeout(function(){t&&t(h);i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){n&&n(t);i.manager.itemEnd(e);i.manager.itemError(e)},0)}}else{Al[e]=[];Al[e].push({onLoad:t,onProgress:r,onError:n});var v=new XMLHttpRequest;v.open("GET",e,true);v.addEventListener("load",function(t){var r=this.response;Tl.add(e,r);var n=Al[e];delete Al[e];if(200===this.status){for(var a=0,o=n.length;a<o;a++){var s=n[a];s.onLoad&&s.onLoad(r)}i.manager.itemEnd(e)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=n.length;a<o;a++){var s=n[a];s.onLoad&&s.onLoad(r)}i.manager.itemEnd(e)}else{for(var a=0,o=n.length;a<o;a++){var s=n[a];s.onError&&s.onError(t)}i.manager.itemEnd(e);i.manager.itemError(e)}},false);v.addEventListener("progress",function(t){var r=Al[e];for(var n=0,i=r.length;n<i;n++){var a=r[n];a.onProgress&&a.onProgress(t)}},false);v.addEventListener("error",function(t){var r=Al[e];delete Al[e];for(var n=0,a=r.length;n<a;n++){var o=r[n];o.onError&&o.onError(t)}i.manager.itemEnd(e);i.manager.itemError(e)},false);void 0!==this.responseType&&(v.responseType=this.responseType);void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials);v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var g in this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}i.manager.itemStart(e);return v},setPath:function(e){this.path=e;return this},setResponseType:function(e){this.responseType=e;return this},setWithCredentials:function(e){this.withCredentials=e;return this},setMimeType:function(e){this.mimeType=e;return this},setRequestHeader:function(e){this.requestHeader=e;return this}});function Pl(e){this.manager=void 0!==e?e:El;this._parser=null}Object.assign(Pl.prototype,{load:function(e,t,r,n){var i=this;var a=[];var o=new qo;o.image=a;var s=new Rl(this.manager);s.setPath(this.path);s.setResponseType("arraybuffer");function l(l){s.load(e[l],function(e){var r=i._parser(e,true);a[l]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps};c+=1;if(6===c){1===r.mipmapCount&&(o.minFilter=_e);o.format=r.format;o.needsUpdate=true;t&&t(o)}},r,n)}if(Array.isArray(e)){var c=0;for(var u=0,h=e.length;u<h;++u)l(u)}else s.load(e,function(e){var r=i._parser(e,true);if(r.isCubemap){var n=r.mipmaps.length/r.mipmapCount;for(var s=0;s<n;s++){a[s]={mipmaps:[]};for(var l=0;l<r.mipmapCount;l++){a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+l]);a[s].format=r.format;a[s].width=r.width;a[s].height=r.height}}}else{o.image.width=r.width;o.image.height=r.height;o.mipmaps=r.mipmaps}1===r.mipmapCount&&(o.minFilter=_e);o.format=r.format;o.needsUpdate=true;t&&t(o)},r,n);return o},setPath:function(e){this.path=e;return this}});function Cl(e){this.manager=void 0!==e?e:El;this._parser=null}Object.assign(Cl.prototype,{load:function(e,t,r,n){var i=this;var a=new Xt;var o=new Rl(this.manager);o.setResponseType("arraybuffer");o.load(e,function(e){var r=i._parser(e);if(!r)return;if(void 0!==r.image)a.image=r.image;else if(void 0!==r.data){a.image.width=r.width;a.image.height=r.height;a.image.data=r.data}a.wrapS=void 0!==r.wrapS?r.wrapS:ve;a.wrapT=void 0!==r.wrapT?r.wrapT:ve;a.magFilter=void 0!==r.magFilter?r.magFilter:_e;a.minFilter=void 0!==r.minFilter?r.minFilter:Se;a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1;void 0!==r.format&&(a.format=r.format);void 0!==r.type&&(a.type=r.type);void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps);1===r.mipmapCount&&(a.minFilter=_e);a.needsUpdate=true;t&&t(a,r)},r,n);return a}});function Ll(e){this.manager=void 0!==e?e:El}Object.assign(Ll.prototype,{crossOrigin:"Anonymous",load:function(e,t,r,n){void 0===e&&(e="");void 0!==this.path&&(e=this.path+e);e=this.manager.resolveURL(e);var i=this;var a=Tl.get(e);if(void 0!==a){i.manager.itemStart(e);setTimeout(function(){t&&t(a);i.manager.itemEnd(e)},0);return a}var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");o.addEventListener("load",function(){Tl.add(e,this);t&&t(this);i.manager.itemEnd(e)},false);o.addEventListener("error",function(t){n&&n(t);i.manager.itemEnd(e);i.manager.itemError(e)},false);"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin);i.manager.itemStart(e);o.src=e;return o},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Ol(e){this.manager=void 0!==e?e:El}Object.assign(Ol.prototype,{crossOrigin:"Anonymous",load:function(e,t,r,n){var i=new ra;var a=new Ll(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);var o=0;function s(r){a.load(e[r],function(e){i.images[r]=e;o++;if(6===o){i.needsUpdate=true;t&&t(i)}},void 0,n)}for(var l=0;l<e.length;++l)s(l);return i},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Il(e){this.manager=void 0!==e?e:El}Object.assign(Il.prototype,{crossOrigin:"Anonymous",load:function(e,t,r,n){var i=new Ht;var a=new Ll(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);a.load(e,function(r){i.image=r;var n=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=n?ke:Ne;i.needsUpdate=true;void 0!==t&&t(i)},r,n);return i},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Bl(){this.type="Curve";this.arcLengthDivisions=200}Object.assign(Bl.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){void 0===e&&(e=5);var t=[];for(var r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);var t=[];for(var r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){void 0===e&&(e=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=false;var t=[];var r,n=this.getPoint(0);var i,a=0;t.push(0);for(i=1;i<=e;i++){r=this.getPoint(i/e);a+=r.distanceTo(n);t.push(a);n=r}this.cacheArcLengths=t;return t},updateArcLengths:function(){this.needsUpdate=true;this.getLengths()},getUtoTmapping:function(e,t){var r=this.getLengths();var n=0,i=r.length;var a;a=t||e*r[i-1];var o=0,s=i-1,l;while(o<=s){n=Math.floor(o+(s-o)/2);l=r[n]-a;if(l<0)o=n+1;else{if(!(l>0)){s=n;break}s=n-1}}n=s;if(r[n]===a)return n/(i-1);var c=r[n];var u=r[n+1];var h=u-c;var f=(a-c)/h;var p=(n+f)/(i-1);return p},getTangent:function(e){var t=1e-4;var r=e-t;var n=e+t;r<0&&(r=0);n>1&&(n=1);var i=this.getPoint(r);var a=this.getPoint(n);var o=a.clone().sub(i);return o.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r=new Ft;var n=[];var i=[];var a=[];var o=new Ft;var s=new kt;var l,c,u;for(l=0;l<=e;l++){c=l/e;n[l]=this.getTangentAt(c);n[l].normalize()}i[0]=new Ft;a[0]=new Ft;var h=Number.MAX_VALUE;var f=Math.abs(n[0].x);var p=Math.abs(n[0].y);var d=Math.abs(n[0].z);if(f<=h){h=f;r.set(1,0,0)}if(p<=h){h=p;r.set(0,1,0)}d<=h&&r.set(0,0,1);o.crossVectors(n[0],r).normalize();i[0].crossVectors(n[0],o);a[0].crossVectors(n[0],i[0]);for(l=1;l<=e;l++){i[l]=i[l-1].clone();a[l]=a[l-1].clone();o.crossVectors(n[l-1],n[l]);if(o.length()>Number.EPSILON){o.normalize();u=Math.acos(Ut.clamp(n[l-1].dot(n[l]),-1,1));i[l].applyMatrix4(s.makeRotationAxis(o,u))}a[l].crossVectors(n[l],i[l])}if(true===t){u=Math.acos(Ut.clamp(i[0].dot(i[e]),-1,1));u/=e;n[0].dot(o.crossVectors(i[0],i[e]))>0&&(u=-u);for(l=1;l<=e;l++){i[l].applyMatrix4(s.makeRotationAxis(n[l],u*l));a[l].crossVectors(n[l],i[l])}}return{tangents:n,normals:i,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.arcLengthDivisions=e.arcLengthDivisions;return this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};e.arcLengthDivisions=this.arcLengthDivisions;e.type=this.type;return e},fromJSON:function(e){this.arcLengthDivisions=e.arcLengthDivisions;return this}});function Ul(e,t,r,n,i,a,o,s){Bl.call(this);this.type="EllipseCurve";this.aX=e||0;this.aY=t||0;this.xRadius=r||1;this.yRadius=n||1;this.aStartAngle=i||0;this.aEndAngle=a||2*Math.PI;this.aClockwise=o||false;this.aRotation=s||0}Ul.prototype=Object.create(Bl.prototype);Ul.prototype.constructor=Ul;Ul.prototype.isEllipseCurve=true;Ul.prototype.getPoint=function(e,t){var r=t||new Dt;var n=2*Math.PI;var i=this.aEndAngle-this.aStartAngle;var a=Math.abs(i)<Number.EPSILON;while(i<0)i+=n;while(i>n)i-=n;i<Number.EPSILON&&(i=a?0:n);true!==this.aClockwise||a||(i===n?i=-n:i-=n);var o=this.aStartAngle+e*i;var s=this.aX+this.xRadius*Math.cos(o);var l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation);var u=Math.sin(this.aRotation);var h=s-this.aX;var f=l-this.aY;s=h*c-f*u+this.aX;l=h*u+f*c+this.aY}return r.set(s,l)};Ul.prototype.copy=function(e){Bl.prototype.copy.call(this,e);this.aX=e.aX;this.aY=e.aY;this.xRadius=e.xRadius;this.yRadius=e.yRadius;this.aStartAngle=e.aStartAngle;this.aEndAngle=e.aEndAngle;this.aClockwise=e.aClockwise;this.aRotation=e.aRotation;return this};Ul.prototype.toJSON=function(){var e=Bl.prototype.toJSON.call(this);e.aX=this.aX;e.aY=this.aY;e.xRadius=this.xRadius;e.yRadius=this.yRadius;e.aStartAngle=this.aStartAngle;e.aEndAngle=this.aEndAngle;e.aClockwise=this.aClockwise;e.aRotation=this.aRotation;return e};Ul.prototype.fromJSON=function(e){Bl.prototype.fromJSON.call(this,e);this.aX=e.aX;this.aY=e.aY;this.xRadius=e.xRadius;this.yRadius=e.yRadius;this.aStartAngle=e.aStartAngle;this.aEndAngle=e.aEndAngle;this.aClockwise=e.aClockwise;this.aRotation=e.aRotation;return this};function Dl(e,t,r,n,i,a){Ul.call(this,e,t,r,r,n,i,a);this.type="ArcCurve"}Dl.prototype=Object.create(Ul.prototype);Dl.prototype.constructor=Dl;Dl.prototype.isArcCurve=true;function kl(){var e=0,t=0,r=0,n=0;function i(i,a,o,s){e=i;t=o;r=-3*i+3*a-2*o-s;n=2*i-2*a+o+s}return{initCatmullRom:function(e,t,r,n,a){i(t,r,a*(r-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,a,o,s){var l=(t-e)/a-(r-e)/(a+o)+(r-t)/o;var c=(r-t)/o-(n-t)/(o+s)+(n-r)/s;l*=o;c*=o;i(t,r,l,c)},calc:function(i){var a=i*i;var o=a*i;return e+t*i+r*a+n*o}}}var Nl=new Ft;var Fl=new kl;var Gl=new kl;var zl=new kl;function Hl(e,t,r,n){Bl.call(this);this.type="CatmullRomCurve3";this.points=e||[];this.closed=t||false;this.curveType=r||"centripetal";this.tension=n||.5}Hl.prototype=Object.create(Bl.prototype);Hl.prototype.constructor=Hl;Hl.prototype.isCatmullRomCurve3=true;Hl.prototype.getPoint=function(e,t){var r=t||new Ft;var n=this.points;var i=n.length;var a=(i-(this.closed?0:1))*e;var o=Math.floor(a);var s=a-o;if(this.closed)o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i;else if(0===s&&o===i-1){o=i-2;s=1}var l,c,u,h;if(this.closed||o>0)l=n[(o-1)%i];else{Nl.subVectors(n[0],n[1]).add(n[0]);l=Nl}c=n[o%i];u=n[(o+1)%i];if(this.closed||o+2<i)h=n[(o+2)%i];else{Nl.subVectors(n[i-1],n[i-2]).add(n[i-1]);h=Nl}if("centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25;var p=Math.pow(l.distanceToSquared(c),f);var d=Math.pow(c.distanceToSquared(u),f);var m=Math.pow(u.distanceToSquared(h),f);d<1e-4&&(d=1);p<1e-4&&(p=d);m<1e-4&&(m=d);Fl.initNonuniformCatmullRom(l.x,c.x,u.x,h.x,p,d,m);Gl.initNonuniformCatmullRom(l.y,c.y,u.y,h.y,p,d,m);zl.initNonuniformCatmullRom(l.z,c.z,u.z,h.z,p,d,m)}else if("catmullrom"===this.curveType){Fl.initCatmullRom(l.x,c.x,u.x,h.x,this.tension);Gl.initCatmullRom(l.y,c.y,u.y,h.y,this.tension);zl.initCatmullRom(l.z,c.z,u.z,h.z,this.tension)}r.set(Fl.calc(s),Gl.calc(s),zl.calc(s));return r};Hl.prototype.copy=function(e){Bl.prototype.copy.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}this.closed=e.closed;this.curveType=e.curveType;this.tension=e.tension;return this};Hl.prototype.toJSON=function(){var e=Bl.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}e.closed=this.closed;e.curveType=this.curveType;e.tension=this.tension;return e};Hl.prototype.fromJSON=function(e){Bl.prototype.fromJSON.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Ft).fromArray(n))}this.closed=e.closed;this.curveType=e.curveType;this.tension=e.tension;return this};function Vl(e,t,r,n,i){var a=.5*(n-t);var o=.5*(i-r);var s=e*e;var l=e*s;return(2*r-2*n+a+o)*l+(-3*r+3*n-2*a-o)*s+a*e+r}function jl(e,t){var r=1-e;return r*r*t}function Wl(e,t){return 2*(1-e)*e*t}function Xl(e,t){return e*e*t}function ql(e,t,r,n){return jl(e,t)+Wl(e,r)+Xl(e,n)}function Yl(e,t){var r=1-e;return r*r*r*t}function Zl(e,t){var r=1-e;return 3*r*r*e*t}function Jl(e,t){return 3*(1-e)*e*e*t}function Ql(e,t){return e*e*e*t}function Kl(e,t,r,n,i){return Yl(e,t)+Zl(e,r)+Jl(e,n)+Ql(e,i)}function $l(e,t,r,n){Bl.call(this);this.type="CubicBezierCurve";this.v0=e||new Dt;this.v1=t||new Dt;this.v2=r||new Dt;this.v3=n||new Dt}$l.prototype=Object.create(Bl.prototype);$l.prototype.constructor=$l;$l.prototype.isCubicBezierCurve=true;$l.prototype.getPoint=function(e,t){var r=t||new Dt;var n=this.v0,i=this.v1,a=this.v2,o=this.v3;r.set(Kl(e,n.x,i.x,a.x,o.x),Kl(e,n.y,i.y,a.y,o.y));return r};$l.prototype.copy=function(e){Bl.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);this.v3.copy(e.v3);return this};$l.prototype.toJSON=function(){var e=Bl.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();e.v3=this.v3.toArray();return e};$l.prototype.fromJSON=function(e){Bl.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);this.v3.fromArray(e.v3);return this};function ec(e,t,r,n){Bl.call(this);this.type="CubicBezierCurve3";this.v0=e||new Ft;this.v1=t||new Ft;this.v2=r||new Ft;this.v3=n||new Ft}ec.prototype=Object.create(Bl.prototype);ec.prototype.constructor=ec;ec.prototype.isCubicBezierCurve3=true;ec.prototype.getPoint=function(e,t){var r=t||new Ft;var n=this.v0,i=this.v1,a=this.v2,o=this.v3;r.set(Kl(e,n.x,i.x,a.x,o.x),Kl(e,n.y,i.y,a.y,o.y),Kl(e,n.z,i.z,a.z,o.z));return r};ec.prototype.copy=function(e){Bl.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);this.v3.copy(e.v3);return this};ec.prototype.toJSON=function(){var e=Bl.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();e.v3=this.v3.toArray();return e};ec.prototype.fromJSON=function(e){Bl.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);this.v3.fromArray(e.v3);return this};function tc(e,t){Bl.call(this);this.type="LineCurve";this.v1=e||new Dt;this.v2=t||new Dt}tc.prototype=Object.create(Bl.prototype);tc.prototype.constructor=tc;tc.prototype.isLineCurve=true;tc.prototype.getPoint=function(e,t){var r=t||new Dt;if(1===e)r.copy(this.v2);else{r.copy(this.v2).sub(this.v1);r.multiplyScalar(e).add(this.v1)}return r};tc.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};tc.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()};tc.prototype.copy=function(e){Bl.prototype.copy.call(this,e);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};tc.prototype.toJSON=function(){var e=Bl.prototype.toJSON.call(this);e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};tc.prototype.fromJSON=function(e){Bl.prototype.fromJSON.call(this,e);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};function rc(e,t){Bl.call(this);this.type="LineCurve3";this.v1=e||new Ft;this.v2=t||new Ft}rc.prototype=Object.create(Bl.prototype);rc.prototype.constructor=rc;rc.prototype.isLineCurve3=true;rc.prototype.getPoint=function(e,t){var r=t||new Ft;if(1===e)r.copy(this.v2);else{r.copy(this.v2).sub(this.v1);r.multiplyScalar(e).add(this.v1)}return r};rc.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};rc.prototype.copy=function(e){Bl.prototype.copy.call(this,e);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};rc.prototype.toJSON=function(){var e=Bl.prototype.toJSON.call(this);e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};rc.prototype.fromJSON=function(e){Bl.prototype.fromJSON.call(this,e);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};function nc(e,t,r){Bl.call(this);this.type="QuadraticBezierCurve";this.v0=e||new Dt;this.v1=t||new Dt;this.v2=r||new Dt}nc.prototype=Object.create(Bl.prototype);nc.prototype.constructor=nc;nc.prototype.isQuadraticBezierCurve=true;nc.prototype.getPoint=function(e,t){var r=t||new Dt;var n=this.v0,i=this.v1,a=this.v2;r.set(ql(e,n.x,i.x,a.x),ql(e,n.y,i.y,a.y));return r};nc.prototype.copy=function(e){Bl.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};nc.prototype.toJSON=function(){var e=Bl.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};nc.prototype.fromJSON=function(e){Bl.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};function ic(e,t,r){Bl.call(this);this.type="QuadraticBezierCurve3";this.v0=e||new Ft;this.v1=t||new Ft;this.v2=r||new Ft}ic.prototype=Object.create(Bl.prototype);ic.prototype.constructor=ic;ic.prototype.isQuadraticBezierCurve3=true;ic.prototype.getPoint=function(e,t){var r=t||new Ft;var n=this.v0,i=this.v1,a=this.v2;r.set(ql(e,n.x,i.x,a.x),ql(e,n.y,i.y,a.y),ql(e,n.z,i.z,a.z));return r};ic.prototype.copy=function(e){Bl.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};ic.prototype.toJSON=function(){var e=Bl.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};ic.prototype.fromJSON=function(e){Bl.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};function ac(e){Bl.call(this);this.type="SplineCurve";this.points=e||[]}ac.prototype=Object.create(Bl.prototype);ac.prototype.constructor=ac;ac.prototype.isSplineCurve=true;ac.prototype.getPoint=function(e,t){var r=t||new Dt;var n=this.points;var i=(n.length-1)*e;var a=Math.floor(i);var o=i-a;var s=n[0===a?a:a-1];var l=n[a];var c=n[a>n.length-2?n.length-1:a+1];var u=n[a>n.length-3?n.length-1:a+2];r.set(Vl(o,s.x,l.x,c.x,u.x),Vl(o,s.y,l.y,c.y,u.y));return r};ac.prototype.copy=function(e){Bl.prototype.copy.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this};ac.prototype.toJSON=function(){var e=Bl.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e};ac.prototype.fromJSON=function(e){Bl.prototype.fromJSON.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Dt).fromArray(n))}return this};var oc=Object.freeze({ArcCurve:Dl,CatmullRomCurve3:Hl,CubicBezierCurve:$l,CubicBezierCurve3:ec,EllipseCurve:Ul,LineCurve:tc,LineCurve3:rc,QuadraticBezierCurve:nc,QuadraticBezierCurve3:ic,SplineCurve:ac});function sc(){Bl.call(this);this.type="CurvePath";this.curves=[];this.autoClose=false}sc.prototype=Object.assign(Object.create(Bl.prototype),{constructor:sc,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0);var t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new tc(t,e))},getPoint:function(e){var t=e*this.getLength();var r=this.getCurveLengths();var n=0;while(n<r.length){if(r[n]>=t){var i=r[n]-t;var a=this.curves[n];var o=a.getLength();var s=0===o?0:1-i/o;return a.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=true;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;var e=[],t=0;for(var r=0,n=this.curves.length;r<n;r++){t+=this.curves[r].getLength();e.push(t)}this.cacheLengths=e;return e},getSpacedPoints:function(e){void 0===e&&(e=40);var t=[];for(var r=0;r<=e;r++)t.push(this.getPoint(r/e));this.autoClose&&t.push(t[0]);return t},getPoints:function(e){e=e||12;var t=[],r;for(var n=0,i=this.curves;n<i.length;n++){var a=i[n];var o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e;var s=a.getPoints(o);for(var l=0;l<s.length;l++){var c=s[l];if(r&&r.equals(c))continue;t.push(c);r=c}}this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]);return t},copy:function(e){Bl.prototype.copy.call(this,e);this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(n.clone())}this.autoClose=e.autoClose;return this},toJSON:function(){var e=Bl.prototype.toJSON.call(this);e.autoClose=this.autoClose;e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Bl.prototype.fromJSON.call(this,e);this.autoClose=e.autoClose;this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push((new oc[n.type]).fromJSON(n))}return this}});function lc(e){sc.call(this);this.type="Path";this.currentPoint=new Dt;e&&this.setFromPoints(e)}lc.prototype=Object.assign(Object.create(sc.prototype),{constructor:lc,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new tc(this.currentPoint.clone(),new Dt(e,t));this.curves.push(r);this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,n){var i=new nc(this.currentPoint.clone(),new Dt(e,t),new Dt(r,n));this.curves.push(i);this.currentPoint.set(r,n)},bezierCurveTo:function(e,t,r,n,i,a){var o=new $l(this.currentPoint.clone(),new Dt(e,t),new Dt(r,n),new Dt(i,a));this.curves.push(o);this.currentPoint.set(i,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);var r=new ac(t);this.curves.push(r);this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,n,i,a){var o=this.currentPoint.x;var s=this.currentPoint.y;this.absarc(e+o,t+s,r,n,i,a)},absarc:function(e,t,r,n,i,a){this.absellipse(e,t,r,r,n,i,a)},ellipse:function(e,t,r,n,i,a,o,s){var l=this.currentPoint.x;var c=this.currentPoint.y;this.absellipse(e+l,t+c,r,n,i,a,o,s)},absellipse:function(e,t,r,n,i,a,o,s){var l=new Ul(e,t,r,n,i,a,o,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(e){sc.prototype.copy.call(this,e);this.currentPoint.copy(e.currentPoint);return this},toJSON:function(){var e=sc.prototype.toJSON.call(this);e.currentPoint=this.currentPoint.toArray();return e},fromJSON:function(e){sc.prototype.fromJSON.call(this,e);this.currentPoint.fromArray(e.currentPoint);return this}});function cc(e){lc.call(this,e);this.uuid=Ut.generateUUID();this.type="Shape";this.holes=[]}cc.prototype=Object.assign(Object.create(lc.prototype),{constructor:cc,getPointsHoles:function(e){var t=[];for(var r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){lc.prototype.copy.call(this,e);this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=lc.prototype.toJSON.call(this);e.uuid=this.uuid;e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){lc.prototype.fromJSON.call(this,e);this.uuid=e.uuid;this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push((new lc).fromJSON(n))}return this}});function uc(e,t){pi.call(this);this.type="Light";this.color=new oi(e);this.intensity=void 0!==t?t:1;this.receiveShadow=void 0}uc.prototype=Object.assign(Object.create(pi.prototype),{constructor:uc,isLight:true,copy:function(e){pi.prototype.copy.call(this,e);this.color.copy(e.color);this.intensity=e.intensity;return this},toJSON:function(e){var t=pi.prototype.toJSON.call(this,e);t.object.color=this.color.getHex();t.object.intensity=this.intensity;void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(t.object.distance=this.distance);void 0!==this.angle&&(t.object.angle=this.angle);void 0!==this.decay&&(t.object.decay=this.decay);void 0!==this.penumbra&&(t.object.penumbra=this.penumbra);void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON());return t}});function hc(e,t,r){uc.call(this,e,r);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(pi.DefaultUp);this.updateMatrix();this.groundColor=new oi(t)}hc.prototype=Object.assign(Object.create(uc.prototype),{constructor:hc,isHemisphereLight:true,copy:function(e){uc.prototype.copy.call(this,e);this.groundColor.copy(e.groundColor);return this}});function fc(e){this.camera=e;this.bias=0;this.radius=1;this.mapSize=new Dt(512,512);this.map=null;this.matrix=new kt}Object.assign(fc.prototype,{copy:function(e){this.camera=e.camera.clone();this.bias=e.bias;this.radius=e.radius;this.mapSize.copy(e.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};0!==this.bias&&(e.bias=this.bias);1!==this.radius&&(e.radius=this.radius);512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray());e.camera=this.camera.toJSON(false).object;delete e.camera.matrix;return e}});function pc(){fc.call(this,new Eo(50,1,.5,500))}pc.prototype=Object.assign(Object.create(fc.prototype),{constructor:pc,isSpotLightShadow:true,update:function(e){var t=this.camera;var r=2*Ut.RAD2DEG*e.angle;var n=this.mapSize.width/this.mapSize.height;var i=e.distance||t.far;if(r!==t.fov||n!==t.aspect||i!==t.far){t.fov=r;t.aspect=n;t.far=i;t.updateProjectionMatrix()}}});function dc(e,t,r,n,i,a){uc.call(this,e,t);this.type="SpotLight";this.position.copy(pi.DefaultUp);this.updateMatrix();this.target=new pi;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}});this.distance=void 0!==r?r:0;this.angle=void 0!==n?n:Math.PI/3;this.penumbra=void 0!==i?i:0;this.decay=void 0!==a?a:1;this.shadow=new pc}dc.prototype=Object.assign(Object.create(uc.prototype),{constructor:dc,isSpotLight:true,copy:function(e){uc.prototype.copy.call(this,e);this.distance=e.distance;this.angle=e.angle;this.penumbra=e.penumbra;this.decay=e.decay;this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function mc(e,t,r,n){uc.call(this,e,t);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}});this.distance=void 0!==r?r:0;this.decay=void 0!==n?n:1;this.shadow=new fc(new Eo(90,1,.5,500))}mc.prototype=Object.assign(Object.create(uc.prototype),{constructor:mc,isPointLight:true,copy:function(e){uc.prototype.copy.call(this,e);this.distance=e.distance;this.decay=e.decay;this.shadow=e.shadow.clone();return this}});function vc(){fc.call(this,new mi(-5,5,5,-5,.5,500))}vc.prototype=Object.assign(Object.create(fc.prototype),{constructor:vc});function gc(e,t){uc.call(this,e,t);this.type="DirectionalLight";this.position.copy(pi.DefaultUp);this.updateMatrix();this.target=new pi;this.shadow=new vc}gc.prototype=Object.assign(Object.create(uc.prototype),{constructor:gc,isDirectionalLight:true,copy:function(e){uc.prototype.copy.call(this,e);this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function yc(e,t){uc.call(this,e,t);this.type="AmbientLight";this.castShadow=void 0}yc.prototype=Object.assign(Object.create(uc.prototype),{constructor:yc,isAmbientLight:true});function xc(e,t,r,n){uc.call(this,e,t);this.type="RectAreaLight";this.width=void 0!==r?r:10;this.height=void 0!==n?n:10}xc.prototype=Object.assign(Object.create(uc.prototype),{constructor:xc,isRectAreaLight:true,copy:function(e){uc.prototype.copy.call(this,e);this.width=e.width;this.height=e.height;return this},toJSON:function(e){var t=uc.prototype.toJSON.call(this,e);t.object.width=this.width;t.object.height=this.height;return t}});function bc(e,t,r,n){Lc.call(this,e,t,r,n)}bc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:bc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:vt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function _c(e,t,r){Lc.call(this,e,t,r)}_c.prototype=Object.assign(Object.create(Lc.prototype),{constructor:_c,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:vt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function wc(e,t,r,n){this.parameterPositions=e;this._cachedIndex=0;this.resultBuffer=void 0!==n?n:new t.constructor(r);this.sampleValues=t;this.valueSize=r}Object.assign(wc.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var a;r:{n:if(!(e<n)){for(var o=r+2;;){if(void 0===n){if(e<i)break n;r=t.length;this._cachedIndex=r;return this.afterEnd_(r-1,e,i)}if(r===o)break;i=n;n=t[++r];if(e<n)break t}a=t.length;break r}if(!(e>=i)){var s=t[1];if(e<s){r=2;i=s}for(var o=r-2;;){if(void 0===i){this._cachedIndex=0;return this.beforeStart_(0,e,n)}if(r===o)break;n=i;i=t[--r-1];if(e>=i)break t}a=r;r=0;break r}break e}while(r<a){var l=r+a>>>1;e<t[l]?a=l:r=l+1}n=t[r];i=t[r-1];if(void 0===i){this._cachedIndex=0;return this.beforeStart_(0,e,n)}if(void 0===n){r=t.length;this._cachedIndex=r;return this.afterEnd_(r-1,i,e)}}this._cachedIndex=r;this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n;for(var a=0;a!==n;++a)t[a]=r[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(wc.prototype,{beforeStart_:wc.prototype.copySampleValue_,afterEnd_:wc.prototype.copySampleValue_});function Sc(e,t,r,n){wc.call(this,e,t,r,n)}Sc.prototype=Object.assign(Object.create(wc.prototype),{constructor:Sc,interpolate_:function(e,t,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=(r-t)/(n-t);for(var c=s+o;s!==c;s+=4)Nt.slerpFlat(i,0,a,s-o,a,s,l);return i}});function Tc(e,t,r,n){Lc.call(this,e,t,r,n)}Tc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Tc,ValueTypeName:"quaternion",DefaultInterpolation:gt,InterpolantFactoryMethodLinear:function(e){return new Sc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function Mc(e,t,r,n){Lc.call(this,e,t,r,n)}Mc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Mc,ValueTypeName:"color"});function Ec(e,t,r,n){Lc.call(this,e,t,r,n)}Ec.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Ec,ValueTypeName:"number"});function Ac(e,t,r,n){wc.call(this,e,t,r,n);this._weightPrev=-0;this._offsetPrev=-0;this._weightNext=-0;this._offsetNext=-0}Ac.prototype=Object.assign(Object.create(wc.prototype),{constructor:Ac,DefaultSettings_:{endingStart:xt,endingEnd:xt},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,a=e+1,o=n[i],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case bt:i=e;o=2*t-r;break;case _t:i=n.length-2;o=t+n[i]-n[i+1];break;default:i=e;o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case bt:a=e;s=2*r-t;break;case _t:a=1;s=r+n[1]-n[0];break;default:a=e-1;s=t}var l=.5*(r-t),c=this.valueSize;this._weightPrev=l/(t-o);this._weightNext=l/(s-r);this._offsetPrev=i*c;this._offsetNext=a*c},interpolate_:function(e,t,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(r-t)/(n-t),d=p*p,m=d*p;var v=-h*m+2*h*d-h*p;var g=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1;var y=(-1-f)*m+(1.5+f)*d+.5*p;var x=f*m-f*d;for(var b=0;b!==o;++b)i[b]=v*a[c+b]+g*a[l+b]+y*a[s+b]+x*a[u+b];return i}});function Rc(e,t,r,n){wc.call(this,e,t,r,n)}Rc.prototype=Object.assign(Object.create(wc.prototype),{constructor:Rc,interpolate_:function(e,t,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(r-t)/(n-t),u=1-c;for(var h=0;h!==o;++h)i[h]=a[l+h]*u+a[s+h]*c;return i}});function Pc(e,t,r,n){wc.call(this,e,t,r,n)}Pc.prototype=Object.assign(Object.create(wc.prototype),{constructor:Pc,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Cc={arraySlice:function(e,t,r){if(Cc.isTypedArray(e))return new e.constructor(e.subarray(t,void 0!==r?r:e.length));return e.slice(t,r)},convertArray:function(e,t,r){if(!e||!r&&e.constructor===t)return e;if("number"===typeof t.BYTES_PER_ELEMENT)return new t(e);return Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,r){return e[t]-e[r]}var r=e.length;var n=new Array(r);for(var i=0;i!==r;++i)n[i]=i;n.sort(t);return n},sortedArray:function(e,t,r){var n=e.length;var i=new e.constructor(n);for(var a=0,o=0;o!==n;++a){var s=r[a]*t;for(var l=0;l!==t;++l)i[o++]=e[s+l]}return i},flattenJSON:function(e,t,r,n){var i=1,a=e[0];while(void 0!==a&&void 0===a[n])a=e[i++];if(void 0===a)return;var o=a[n];if(void 0===o)return;if(Array.isArray(o))do{o=a[n];if(void 0!==o){t.push(a.time);r.push.apply(r,o)}a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[n];if(void 0!==o){t.push(a.time);o.toArray(r,r.length)}a=e[i++]}while(void 0!==a);else do{o=a[n];if(void 0!==o){t.push(a.time);r.push(o)}a=e[i++]}while(void 0!==a)}};function Lc(e,t,r,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e;this.times=Cc.convertArray(t,this.TimeBufferType);this.values=Cc.convertArray(r,this.ValueBufferType);this.setInterpolation(n||this.DefaultInterpolation);this.validate();this.optimize()}Object.assign(Lc,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Lc._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],n=[];Cc.flattenJSON(e.keys,r,n,"value");e.times=r;e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t=e.constructor;var r;if(void 0!==t.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Cc.convertArray(e.times,Array),values:Cc.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(r.interpolation=n)}r.type=e.ValueTypeName;return r},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ec;case"vector":case"vector2":case"vector3":case"vector4":return Oc;case"color":return Mc;case"quaternion":return Tc;case"bool":case"boolean":return _c;case"string":return bc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}});Object.assign(Lc.prototype,{constructor:Lc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:gt,InterpolantFactoryMethodDiscrete:function(e){return new Pc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Rc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ac(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case vt:t=this.InterpolantFactoryMethodDiscrete;break;case gt:t=this.InterpolantFactoryMethodLinear;break;case yt:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",r);return}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return vt;case this.InterpolantFactoryMethodLinear:return gt;case this.InterpolantFactoryMethodSmooth:return yt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e){var t=this.times;for(var r=0,n=t.length;r!==n;++r)t[r]+=e}return this},scale:function(e){if(1!==e){var t=this.times;for(var r=0,n=t.length;r!==n;++r)t[r]*=e}return this},trim:function(e,t){var r=this.times,n=r.length,i=0,a=n-1;while(i!==n&&r[i]<e)++i;while(-1!==a&&r[a]>t)--a;++a;if(0!==i||a!==n){i>=a&&(a=Math.max(a,1),i=a-1);var o=this.getValueSize();this.times=Cc.arraySlice(r,i,a);this.values=Cc.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=true;var t=this.getValueSize();if(t-Math.floor(t)!==0){console.error("THREE.KeyframeTrack: Invalid value size in track.",this);e=false}var r=this.times,n=this.values,i=r.length;if(0===i){console.error("THREE.KeyframeTrack: Track is empty.",this);e=false}var a=null;for(var o=0;o!==i;o++){var s=r[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s);e=false;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a);e=false;break}a=s}if(void 0!==n&&Cc.isTypedArray(n))for(var o=0,l=n.length;o!==l;++o){var c=n[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c);e=false;break}}return e},optimize:function(){var e=this.times,t=this.values,r=this.getValueSize(),n=this.getInterpolation()===yt,i=1,a=e.length-1;for(var o=1;o<a;++o){var s=false;var l=e[o];var c=e[o+1];if(l!==c&&(1!==o||l!==l[0]))if(n)s=true;else{var u=o*r,h=u-r,f=u+r;for(var p=0;p!==r;++p){var d=t[u+p];if(d!==t[h+p]||d!==t[f+p]){s=true;break}}}if(s){if(o!==i){e[i]=e[o];var m=o*r,v=i*r;for(var p=0;p!==r;++p)t[v+p]=t[m+p]}++i}}if(a>0){e[i]=e[a];for(var m=a*r,v=i*r,p=0;p!==r;++p)t[v+p]=t[m+p];++i}if(i!==e.length){this.times=Cc.arraySlice(e,0,i);this.values=Cc.arraySlice(t,0,i*r)}return this}});function Oc(e,t,r,n){Lc.call(this,e,t,r,n)}Oc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Oc,ValueTypeName:"vector"});function Ic(e,t,r){this.name=e;this.tracks=r;this.duration=void 0!==t?t:-1;this.uuid=Ut.generateUUID();this.duration<0&&this.resetDuration();this.optimize()}Object.assign(Ic,{parse:function(e){var t=[],r=e.tracks,n=1/(e.fps||1);for(var i=0,a=r.length;i!==a;++i)t.push(Lc.parse(r[i]).scale(n));return new Ic(e.name,e.duration,t)},toJSON:function(e){var t=[],r=e.tracks;var n={name:e.name,duration:e.duration,tracks:t};for(var i=0,a=r.length;i!==a;++i)t.push(Lc.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){var i=t.length;var a=[];for(var o=0;o<i;o++){var s=[];var l=[];s.push((o+i-1)%i,o,(o+1)%i);l.push(0,1,0);var c=Cc.getKeyframeOrder(s);s=Cc.sortedArray(s,1,c);l=Cc.sortedArray(l,1,c);if(!n&&0===s[0]){s.push(i);l.push(l[0])}a.push(new Ec(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/r))}return new Ic(e,-1,a)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){var n={};var i=/^([\w-]*?)([\d]+)$/;for(var a=0,o=e.length;a<o;a++){var s=e[a];var l=s.name.match(i);if(l&&l.length>1){var c=l[1];var u=n[c];u||(n[c]=u=[]);u.push(s)}}var h=[];for(var c in n)h.push(Ic.CreateFromMorphTargetSequence(c,n[c],t,r));return h},parseAnimation:function(e,t){if(!e){console.error("THREE.AnimationClip: No animation in JSONLoader data.");return null}var r=function(e,t,r,n,i){if(0!==r.length){var a=[];var o=[];Cc.flattenJSON(r,a,o,n);0!==a.length&&i.push(new e(t,a,o))}};var n=[];var i=e.name||"default";var a=e.length||-1;var o=e.fps||30;var s=e.hierarchy||[];for(var l=0;l<s.length;l++){var c=s[l].keys;if(!c||0===c.length)continue;if(c[0].morphTargets){var u={};for(var h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)u[c[h].morphTargets[f]]=-1;for(var p in u){var d=[];var m=[];for(var f=0;f!==c[h].morphTargets.length;++f){var v=c[h];d.push(v.time);m.push(v.morphTarget===p?1:0)}n.push(new Ec(".morphTargetInfluence["+p+"]",d,m))}a=u.length*(o||1)}else{var g=".bones["+t[l].name+"]";r(Oc,g+".position",c,"pos",n);r(Tc,g+".quaternion",c,"rot",n);r(Oc,g+".scale",c,"scl",n)}}if(0===n.length)return null;var y=new Ic(i,a,n);return y}});Object.assign(Ic.prototype,{resetDuration:function(){var e=this.tracks,t=0;for(var r=0,n=e.length;r!==n;++r){var i=this.tracks[r];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}});function Bc(e){this.manager=void 0!==e?e:El;this.textures={}}Object.assign(Bc.prototype,{load:function(e,t,r,n){var i=this;var a=new Rl(i.manager);a.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function r(e){void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e);return t[e]}var n=new Sl[e.type];void 0!==e.uuid&&(n.uuid=e.uuid);void 0!==e.name&&(n.name=e.name);void 0!==e.color&&n.color.setHex(e.color);void 0!==e.roughness&&(n.roughness=e.roughness);void 0!==e.metalness&&(n.metalness=e.metalness);void 0!==e.emissive&&n.emissive.setHex(e.emissive);void 0!==e.specular&&n.specular.setHex(e.specular);void 0!==e.shininess&&(n.shininess=e.shininess);void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat);void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness);void 0!==e.uniforms&&(n.uniforms=e.uniforms);void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader);void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader);void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors);void 0!==e.fog&&(n.fog=e.fog);void 0!==e.flatShading&&(n.flatShading=e.flatShading);void 0!==e.blending&&(n.blending=e.blending);void 0!==e.side&&(n.side=e.side);void 0!==e.opacity&&(n.opacity=e.opacity);void 0!==e.transparent&&(n.transparent=e.transparent);void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest);void 0!==e.depthTest&&(n.depthTest=e.depthTest);void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite);void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite);void 0!==e.wireframe&&(n.wireframe=e.wireframe);void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth);void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap);void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin);void 0!==e.rotation&&(n.rotation=e.rotation);1!==e.linewidth&&(n.linewidth=e.linewidth);void 0!==e.dashSize&&(n.dashSize=e.dashSize);void 0!==e.gapSize&&(n.gapSize=e.gapSize);void 0!==e.scale&&(n.scale=e.scale);void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset);void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor);void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits);void 0!==e.skinning&&(n.skinning=e.skinning);void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets);void 0!==e.dithering&&(n.dithering=e.dithering);void 0!==e.visible&&(n.visible=e.visible);void 0!==e.userData&&(n.userData=e.userData);void 0!==e.shading&&(n.flatShading=1===e.shading);void 0!==e.size&&(n.size=e.size);void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation);void 0!==e.map&&(n.map=r(e.map));if(void 0!==e.alphaMap){n.alphaMap=r(e.alphaMap);n.transparent=true}void 0!==e.bumpMap&&(n.bumpMap=r(e.bumpMap));void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale);void 0!==e.normalMap&&(n.normalMap=r(e.normalMap));if(void 0!==e.normalScale){var i=e.normalScale;false===Array.isArray(i)&&(i=[i,i]);n.normalScale=(new Dt).fromArray(i)}void 0!==e.displacementMap&&(n.displacementMap=r(e.displacementMap));void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale);void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias);void 0!==e.roughnessMap&&(n.roughnessMap=r(e.roughnessMap));void 0!==e.metalnessMap&&(n.metalnessMap=r(e.metalnessMap));void 0!==e.emissiveMap&&(n.emissiveMap=r(e.emissiveMap));void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity);void 0!==e.specularMap&&(n.specularMap=r(e.specularMap));void 0!==e.envMap&&(n.envMap=r(e.envMap));void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity);void 0!==e.lightMap&&(n.lightMap=r(e.lightMap));void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity);void 0!==e.aoMap&&(n.aoMap=r(e.aoMap));void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity);void 0!==e.gradientMap&&(n.gradientMap=r(e.gradientMap));return n}});function Uc(e){this.manager=void 0!==e?e:El}Object.assign(Uc.prototype,{load:function(e,t,r,n){var i=this;var a=new Rl(i.manager);a.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=new Oi;var r=e.data.index;if(void 0!==r){var n=new Dc[r.type](r.array);t.setIndex(new xi(n,1))}var i=e.data.attributes;for(var a in i){var o=i[a];var n=new Dc[o.type](o.array);t.addAttribute(a,new xi(n,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,c=s.length;l!==c;++l){var u=s[l];t.addGroup(u.start,u.count,u.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var f=new Ft;void 0!==h.center&&f.fromArray(h.center);t.boundingSphere=new Yt(f,h.radius)}return t}});var Dc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function kc(){}kc.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){var t=this.handlers;for(var r=0,n=t.length;r<n;r+=2){var i=t[r];var a=t[r+1];if(i.test(e))return a}return null}};Object.assign(kc.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,r){var n=[];for(var i=0;i<e.length;++i)n[i]=this.createMaterial(e[i],t,r);return n},createMaterial:function(){var e={NoBlending:S,NormalBlending:T,AdditiveBlending:M,SubtractiveBlending:E,MultiplyBlending:A,CustomBlending:R};var t=new oi;var r=new Il;var n=new Bc;return function i(a,o,s){var l={};function c(e,t,n,i,a){var c=o+e;var u=kc.Handlers.get(c);var h;if(null!==u)h=u.load(c);else{r.setCrossOrigin(s);h=r.load(c)}if(void 0!==t){h.repeat.fromArray(t);1!==t[0]&&(h.wrapS=me);1!==t[1]&&(h.wrapT=me)}void 0!==n&&h.offset.fromArray(n);if(void 0!==i){"repeat"===i[0]&&(h.wrapS=me);"mirror"===i[0]&&(h.wrapS=ge);"repeat"===i[1]&&(h.wrapT=me);"mirror"===i[1]&&(h.wrapT=ge)}void 0!==a&&(h.anisotropy=a);var f=Ut.generateUUID();l[f]=h;return f}var u={uuid:Ut.generateUUID(),type:"MeshLambertMaterial"};for(var h in a){var f=a[h];switch(h){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=f;break;case"blending":u.blending=e[f];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",h,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(f).getHex();break;case"colorSpecular":u.specular=t.fromArray(f).getHex();break;case"colorEmissive":u.emissive=t.fromArray(f).getHex();break;case"specularCoef":u.shininess=f;break;case"shading":"basic"===f.toLowerCase()&&(u.type="MeshBasicMaterial");"phong"===f.toLowerCase()&&(u.type="MeshPhongMaterial");"standard"===f.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=c(f,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=c(f,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=c(f,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=c(f,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=c(f,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=f;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=c(f,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=f;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=c(f,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=c(f,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=c(f,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=c(f,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=v;break;case"doubleSided":u.side=g;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");u.opacity=f;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[h]=f;break;case"vertexColors":true===f&&(u.vertexColors=w);"face"===f&&(u.vertexColors=_);break;default:console.error("THREE.Loader.createMaterial: Unsupported",h,f);break}}"MeshBasicMaterial"===u.type&&delete u.emissive;"MeshPhongMaterial"!==u.type&&delete u.specular;u.opacity<1&&(u.transparent=true);n.setTextures(l);return n.parse(u)}}()});var Nc={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);var t="";for(var r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");if(-1===t)return"./";return e.substr(0,t+1)}};function Fc(e){if("boolean"===typeof e){console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor.");e=void 0}this.manager=void 0!==e?e:El;this.withCredentials=false}Object.assign(Fc.prototype,{load:function(e,t,r,n){var i=this;var a=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Nc.extractUrlBase(e);var o=new Rl(this.manager);o.setWithCredentials(this.withCredentials);o.load(e,function(r){var n=JSON.parse(r);var o=n.metadata;if(void 0!==o){var s=o.type;if(void 0!==s&&"object"===s.toLowerCase()){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}}var l=i.parse(n,a);t(l.geometry,l.materials)},r,n)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function r(e,t){return e&1<<t}var n,i,a,o,s,l,c,u,h,f,p,d,m,v,g,y,x,b,_,w,S,T,M,E,A,R,P,C=e.faces,L=e.vertices,O=e.normals,I=e.colors,B=e.scale,U=0;if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&U++;for(n=0;n<U;n++)t.faceVertexUvs[n]=[]}o=0;s=L.length;while(o<s){b=new Ft;b.x=L[o++]*B;b.y=L[o++]*B;b.z=L[o++]*B;t.vertices.push(b)}o=0;s=C.length;while(o<s){f=C[o++];p=r(f,0);d=r(f,1);m=r(f,3);v=r(f,4);g=r(f,5);y=r(f,6);x=r(f,7);if(p){w=new vi;w.a=C[o];w.b=C[o+1];w.c=C[o+3];S=new vi;S.a=C[o+1];S.b=C[o+2];S.c=C[o+3];o+=4;if(d){h=C[o++];w.materialIndex=h;S.materialIndex=h}a=t.faces.length;if(m)for(n=0;n<U;n++){E=e.uvs[n];t.faceVertexUvs[n][a]=[];t.faceVertexUvs[n][a+1]=[];for(i=0;i<4;i++){u=C[o++];R=E[2*u];P=E[2*u+1];A=new Dt(R,P);2!==i&&t.faceVertexUvs[n][a].push(A);0!==i&&t.faceVertexUvs[n][a+1].push(A)}}if(v){c=3*C[o++];w.normal.set(O[c++],O[c++],O[c]);S.normal.copy(w.normal)}if(g)for(n=0;n<4;n++){c=3*C[o++];M=new Ft(O[c++],O[c++],O[c]);2!==n&&w.vertexNormals.push(M);0!==n&&S.vertexNormals.push(M)}if(y){l=C[o++];T=I[l];w.color.setHex(T);S.color.setHex(T)}if(x)for(n=0;n<4;n++){l=C[o++];T=I[l];2!==n&&w.vertexColors.push(new oi(T));0!==n&&S.vertexColors.push(new oi(T))}t.faces.push(w);t.faces.push(S)}else{_=new vi;_.a=C[o++];_.b=C[o++];_.c=C[o++];if(d){h=C[o++];_.materialIndex=h}a=t.faces.length;if(m)for(n=0;n<U;n++){E=e.uvs[n];t.faceVertexUvs[n][a]=[];for(i=0;i<3;i++){u=C[o++];R=E[2*u];P=E[2*u+1];A=new Dt(R,P);t.faceVertexUvs[n][a].push(A)}}if(v){c=3*C[o++];_.normal.set(O[c++],O[c++],O[c])}if(g)for(n=0;n<3;n++){c=3*C[o++];M=new Ft(O[c++],O[c++],O[c]);_.vertexNormals.push(M)}if(y){l=C[o++];_.color.setHex(I[l])}if(x)for(n=0;n<3;n++){l=C[o++];_.vertexColors.push(new oi(I[l]))}t.faces.push(_)}}}function t(e,t){var r=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,i=e.skinWeights.length;n<i;n+=r){var a=e.skinWeights[n];var o=r>1?e.skinWeights[n+1]:0;var s=r>2?e.skinWeights[n+2]:0;var l=r>3?e.skinWeights[n+3]:0;t.skinWeights.push(new Vt(a,o,s,l))}if(e.skinIndices)for(var n=0,i=e.skinIndices.length;n<i;n+=r){var c=e.skinIndices[n];var u=r>1?e.skinIndices[n+1]:0;var h=r>2?e.skinIndices[n+2]:0;var f=r>3?e.skinIndices[n+3]:0;t.skinIndices.push(new Vt(c,u,h,f))}t.bones=e.bones;t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function r(e,t){var r=e.scale;if(void 0!==e.morphTargets)for(var n=0,i=e.morphTargets.length;n<i;n++){t.morphTargets[n]={};t.morphTargets[n].name=e.morphTargets[n].name;t.morphTargets[n].vertices=[];var a=t.morphTargets[n].vertices;var o=e.morphTargets[n].vertices;for(var s=0,l=o.length;s<l;s+=3){var c=new Ft;c.x=o[s]*r;c.y=o[s+1]*r;c.z=o[s+2]*r;a.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var u=t.faces;var h=e.morphColors[0].colors;for(var n=0,i=u.length;n<i;n++)u[n].color.fromArray(h,3*n)}}function n(e,t){var r=[];var n=[];void 0!==e.animation&&n.push(e.animation);void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var i=0;i<n.length;i++){var a=Ic.parseAnimation(n[i],t.bones);a&&r.push(a)}if(t.morphTargets){var o=Ic.CreateClipsFromMorphTargetSequences(t.morphTargets,10);r=r.concat(o)}r.length>0&&(t.animations=r)}return function i(a,o){void 0!==a.data&&(a=a.data);void 0!==a.scale?a.scale=1/a.scale:a.scale=1;var s=new yi;e(a,s);t(a,s);r(a,s);n(a,s);s.computeFaceNormals();s.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:s};var l=kc.prototype.initMaterials(a.materials,o,this.crossOrigin);return{geometry:s,materials:l}}}()});function Gc(e){this.manager=void 0!==e?e:El;this.texturePath=""}Object.assign(Gc.prototype,{load:function(e,t,r,n){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;var a=new Rl(i.manager);a.load(e,function(r){var a=null;try{a=JSON.parse(r)}catch(t){void 0!==n&&n(t);console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);return}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase()){console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");return}i.parse(a,t)},r,n)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseShape(e.shapes);var n=this.parseGeometries(e.geometries,r);var i=this.parseImages(e.images,function(){void 0!==t&&t(s)});var a=this.parseTextures(e.textures,i);var o=this.parseMaterials(e.materials,a);var s=this.parseObject(e.object,n,o);e.animations&&(s.animations=this.parseAnimations(e.animations));void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s);return s},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,n=e.length;r<n;r++){var i=(new cc).fromJSON(e[r]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var r={};if(void 0!==e){var n=new Fc;var i=new Uc;for(var a=0,o=e.length;a<o;a++){var s;var l=e[a];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new pl[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new pl[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new pl[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new pl[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new pl[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new pl[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new pl[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new pl[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new pl[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new pl[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new pl[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new pl[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":var c=[];for(var u=0,h=l.shapes.length;u<h;u++){var f=t[l.shapes[u]];c.push(f)}s=new pl[l.type](c,l.curveSegments);break;case"BufferGeometry":s=i.parse(l);break;case"Geometry":s=n.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid;void 0!==l.name&&(s.name=l.name);r[l.uuid]=s}}return r},parseMaterials:function(e,t){var r={};if(void 0!==e){var n=new Bc;n.setTextures(t);for(var i=0,a=e.length;i<a;i++){var o=e[i];if("MultiMaterial"===o.type){var s=[];for(var l=0;l<o.materials.length;l++)s.push(n.parse(o.materials[l]));r[o.uuid]=s}else r[o.uuid]=n.parse(o)}}return r},parseAnimations:function(e){var t=[];for(var r=0;r<e.length;r++){var n=Ic.parse(e[r]);t.push(n)}return t},parseImages:function(e,t){var r=this;var n={};function i(e){r.manager.itemStart(e);return o.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemEnd(e);r.manager.itemError(e)})}if(void 0!==e&&e.length>0){var a=new Ml(t);var o=new Ll(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var c=e[s];var u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.texturePath+c.url;n[c.uuid]=i(u)}}return n},parseTextures:function(e,t){function r(e,t){if("number"===typeof e)return e;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e);return t[e]}var n={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid);void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=new Ht(t[o.image]);s.needsUpdate=true;s.uuid=o.uuid;void 0!==o.name&&(s.name=o.name);void 0!==o.mapping&&(s.mapping=r(o.mapping,zc));void 0!==o.offset&&s.offset.fromArray(o.offset);void 0!==o.repeat&&s.repeat.fromArray(o.repeat);void 0!==o.center&&s.center.fromArray(o.center);void 0!==o.rotation&&(s.rotation=o.rotation);if(void 0!==o.wrap){s.wrapS=r(o.wrap[0],Hc);s.wrapT=r(o.wrap[1],Hc)}void 0!==o.format&&(s.format=o.format);void 0!==o.minFilter&&(s.minFilter=r(o.minFilter,Vc));void 0!==o.magFilter&&(s.magFilter=r(o.magFilter,Vc));void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy);void 0!==o.flipY&&(s.flipY=o.flipY);n[o.uuid]=s}return n},parseObject:function(e,t,r){var n;function i(e){void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e);return t[e]}function a(e){if(void 0===e)return;if(Array.isArray(e)){var t=[];for(var n=0,i=e.length;n<i;n++){var a=e[n];void 0===r[a]&&console.warn("THREE.ObjectLoader: Undefined material",a);t.push(r[a])}return t}void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e);return r[e]}switch(e.type){case"Scene":n=new Oo;void 0!==e.background&&Number.isInteger(e.background)&&(n.background=new oi(e.background));void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new Lo(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new Co(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":n=new Eo(e.fov,e.aspect,e.near,e.far);void 0!==e.focus&&(n.focus=e.focus);void 0!==e.zoom&&(n.zoom=e.zoom);void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge);void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset);void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new mi(e.left,e.right,e.top,e.bottom,e.near,e.far);void 0!==e.zoom&&(n.zoom=e.zoom);void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"AmbientLight":n=new yc(e.color,e.intensity);break;case"DirectionalLight":n=new gc(e.color,e.intensity);break;case"PointLight":n=new mc(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new xc(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new dc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new hc(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(e.geometry);var s=a(e.material);n=o.bones&&o.bones.length>0?new No(o,s):new ji(o,s);break;case"LOD":n=new Uo;break;case"Line":n=new Go(i(e.geometry),a(e.material),e.mode);break;case"LineLoop":n=new Ho(i(e.geometry),a(e.material));break;case"LineSegments":n=new zo(i(e.geometry),a(e.material));break;case"PointCloud":case"Points":n=new jo(i(e.geometry),a(e.material));break;case"Sprite":n=new Bo(a(e.material));break;case"Group":n=new Wo;break;default:n=new pi}n.uuid=e.uuid;void 0!==e.name&&(n.name=e.name);if(void 0!==e.matrix){n.matrix.fromArray(e.matrix);void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate);n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)}else{void 0!==e.position&&n.position.fromArray(e.position);void 0!==e.rotation&&n.rotation.fromArray(e.rotation);void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion);void 0!==e.scale&&n.scale.fromArray(e.scale)}void 0!==e.castShadow&&(n.castShadow=e.castShadow);void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow);if(e.shadow){void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias);void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius);void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize);void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))}void 0!==e.visible&&(n.visible=e.visible);void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled);void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder);void 0!==e.userData&&(n.userData=e.userData);if(void 0!==e.children){var l=e.children;for(var c=0;c<l.length;c++)n.add(this.parseObject(l[c],t,r))}if("LOD"===e.type){var u=e.levels;for(var h=0;h<u.length;h++){var f=u[h];var p=n.getObjectByProperty("uuid",f.object);void 0!==p&&n.addLevel(p,f.distance)}}return n}});var zc={UVMapping:se,CubeReflectionMapping:le,CubeRefractionMapping:ce,EquirectangularReflectionMapping:ue,EquirectangularRefractionMapping:he,SphericalReflectionMapping:fe,CubeUVReflectionMapping:pe,CubeUVRefractionMapping:de};var Hc={RepeatWrapping:me,ClampToEdgeWrapping:ve,MirroredRepeatWrapping:ge};var Vc={NearestFilter:ye,NearestMipMapNearestFilter:xe,NearestMipMapLinearFilter:be,LinearFilter:_e,LinearMipMapNearestFilter:we,LinearMipMapLinearFilter:Se};function jc(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=void 0!==e?e:El;this.options=void 0}jc.prototype={constructor:jc,setOptions:function e(t){this.options=t;return this},load:function e(t,r,n,i){void 0===t&&(t="");void 0!==this.path&&(t=this.path+t);var a=this;var o=Tl.get(t);if(void 0!==o){a.manager.itemStart(t);setTimeout(function(){r&&r(o);a.manager.itemEnd(t)},0);return o}fetch(t).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,a.options)}).then(function(e){Tl.add(t,e);r&&r(e);a.manager.itemEnd(t)}).catch(function(e){i&&i(e);a.manager.itemEnd(t);a.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(e){this.path=e;return this}};function Wc(){this.type="ShapePath";this.color=new oi;this.subPaths=[];this.currentPath=null}Object.assign(Wc.prototype,{moveTo:function(e,t){this.currentPath=new lc;this.subPaths.push(this.currentPath);this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n)},bezierCurveTo:function(e,t,r,n,i,a){this.currentPath.bezierCurveTo(e,t,r,n,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){var t=[];for(var r=0,n=e.length;r<n;r++){var i=e[r];var a=new cc;a.curves=i.curves;t.push(a)}return t}function n(e,t){var r=t.length;var n=false;for(var i=r-1,a=0;a<r;i=a++){var o=t[i];var s=t[a];var l=s.x-o.x;var c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0){o=t[a];l=-l;s=t[i];c=-c}if(e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return true}else{var u=c*(e.x-o.x)-l*(e.y-o.y);if(0===u)return true;if(u<0)continue;n=!n}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return true}}return n}var i=Vs.isClockWise;var a=this.subPaths;if(0===a.length)return[];if(true===t)return r(a);var o,s,l,c=[];if(1===a.length){s=a[0];l=new cc;l.curves=s.curves;c.push(l);return c}var u=!i(a[0].getPoints());u=e?!u:u;var h=[];var f=[];var p=[];var d=0;var m;f[d]=void 0;p[d]=[];for(var v=0,g=a.length;v<g;v++){s=a[v];m=s.getPoints();o=i(m);o=e?!o:o;if(o){!u&&f[d]&&d++;f[d]={s:new cc,p:m};f[d].s.curves=s.curves;u&&d++;p[d]=[]}else p[d].push({h:s,p:m[0]})}if(!f[0])return r(a);if(f.length>1){var y=false;var x=[];for(var b=0,_=f.length;b<_;b++)h[b]=[];for(var b=0,_=f.length;b<_;b++){var w=p[b];for(var S=0;S<w.length;S++){var T=w[S];var M=true;for(var E=0;E<f.length;E++)if(n(T.p,f[E].p)){b!==E&&x.push({froms:b,tos:E,hole:S});if(M){M=false;h[E].push(T)}else y=true}M&&h[b].push(T)}}x.length>0&&(y||(p=h))}var A;for(var v=0,R=f.length;v<R;v++){l=f[v].s;c.push(l);A=p[v];for(var P=0,C=A.length;P<C;P++)l.holes.push(A[P].h)}return c}});function Xc(e){this.type="Font";this.data=e}Object.assign(Xc.prototype,{isFont:true,generateShapes:function(e,t,r){void 0===t&&(t=100);void 0===r&&(r=4);var n=[];var i=qc(e,t,r,this.data);for(var a=0,o=i.length;a<o;a++)Array.prototype.push.apply(n,i[a].toShapes());return n}});function qc(e,t,r,n){var i=String(e).split("");var a=t/n.resolution;var o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*a;var s=[];var l=0,c=0;for(var u=0;u<i.length;u++){var h=i[u];if("\n"===h){l=0;c-=o}else{var f=Yc(h,r,a,l,c,n);l+=f.offsetX;s.push(f.path)}}return s}function Yc(e,t,r,n,i,a){var o=a.glyphs[e]||a.glyphs["?"];if(!o)return;var s=new Wc;var l,c,u,h,f,p,d,m;if(o.o){var v=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(var g=0,y=v.length;g<y;){var x=v[g++];switch(x){case"m":l=v[g++]*r+n;c=v[g++]*r+i;s.moveTo(l,c);break;case"l":l=v[g++]*r+n;c=v[g++]*r+i;s.lineTo(l,c);break;case"q":u=v[g++]*r+n;h=v[g++]*r+i;f=v[g++]*r+n;p=v[g++]*r+i;s.quadraticCurveTo(f,p,u,h);break;case"b":u=v[g++]*r+n;h=v[g++]*r+i;f=v[g++]*r+n;p=v[g++]*r+i;d=v[g++]*r+n;m=v[g++]*r+i;s.bezierCurveTo(f,p,d,m,u,h);break}}}return{offsetX:o.ha*r,path:s}}function Zc(e){this.manager=void 0!==e?e:El}Object.assign(Zc.prototype,{load:function(e,t,r,n){var i=this;var a=new Rl(this.manager);a.setPath(this.path);a.load(e,function(e){var r;try{r=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.");r=JSON.parse(e.substring(65,e.length-2))}var n=i.parse(r);t&&t(n)},r,n)},parse:function(e){return new Xc(e)},setPath:function(e){this.path=e;return this}});var Jc;var Qc={getContext:function(){void 0===Jc&&(Jc=new(window.AudioContext||window.webkitAudioContext));return Jc},setContext:function(e){Jc=e}};function Kc(e){this.manager=void 0!==e?e:El}Object.assign(Kc.prototype,{load:function(e,t,r,n){var i=new Rl(this.manager);i.setResponseType("arraybuffer");i.load(e,function(e){var r=Qc.getContext();r.decodeAudioData(e,function(e){t(e)})},r,n)}});function $c(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new Eo;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=false;this.cameraR=new Eo;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=false}Object.assign($c.prototype,{update:function(){var e,t,r,n,i,a,o,s;var l=new kt;var c=new kt;return function u(h){var f=e!==this||t!==h.focus||r!==h.fov||n!==h.aspect*this.aspect||i!==h.near||a!==h.far||o!==h.zoom||s!==this.eyeSep;if(f){e=this;t=h.focus;r=h.fov;n=h.aspect*this.aspect;i=h.near;a=h.far;o=h.zoom;var p=h.projectionMatrix.clone();s=this.eyeSep/2;var d=s*i/t;var m=i*Math.tan(Ut.DEG2RAD*r*.5)/o;var v,g;c.elements[12]=-s;l.elements[12]=s;v=-m*n+d;g=m*n+d;p.elements[0]=2*i/(g-v);p.elements[8]=(g+v)/(g-v);this.cameraL.projectionMatrix.copy(p);v=-m*n-d;g=m*n-d;p.elements[0]=2*i/(g-v);p.elements[8]=(g+v)/(g-v);this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(c);this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(l)}}()});function eu(e,t,r){pi.call(this);this.type="CubeCamera";var n=90,i=1;var a=new Eo(n,i,e,t);a.up.set(0,-1,0);a.lookAt(new Ft(1,0,0));this.add(a);var o=new Eo(n,i,e,t);o.up.set(0,-1,0);o.lookAt(new Ft(-1,0,0));this.add(o);var s=new Eo(n,i,e,t);s.up.set(0,0,1);s.lookAt(new Ft(0,1,0));this.add(s);var l=new Eo(n,i,e,t);l.up.set(0,0,-1);l.lookAt(new Ft(0,-1,0));this.add(l);var c=new Eo(n,i,e,t);c.up.set(0,-1,0);c.lookAt(new Ft(0,0,1));this.add(c);var u=new Eo(n,i,e,t);u.up.set(0,-1,0);u.lookAt(new Ft(0,0,-1));this.add(u);var h={format:ke,magFilter:_e,minFilter:_e};this.renderTarget=new Wt(r,r,h);this.renderTarget.texture.name="CubeCamera";this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget;var n=r.texture.generateMipmaps;r.texture.generateMipmaps=false;r.activeCubeFace=0;e.render(t,a,r);r.activeCubeFace=1;e.render(t,o,r);r.activeCubeFace=2;e.render(t,s,r);r.activeCubeFace=3;e.render(t,l,r);r.activeCubeFace=4;e.render(t,c,r);r.texture.generateMipmaps=n;r.activeCubeFace=5;e.render(t,u,r);e.setRenderTarget(null)};this.clear=function(e,t,r,n){var i=this.renderTarget;for(var a=0;a<6;a++){i.activeCubeFace=a;e.setRenderTarget(i);e.clear(t,r,n)}e.setRenderTarget(null)}}eu.prototype=Object.create(pi.prototype);eu.prototype.constructor=eu;function tu(){pi.call(this);this.type="AudioListener";this.context=Qc.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}tu.prototype=Object.assign(Object.create(pi.prototype),{constructor:tu,getInput:function(){return this.gain},removeFilter:function(){if(null!==this.filter){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination);this.gain.connect(this.context.destination);this.filter=null}},getFilter:function(){return this.filter},setFilter:function(e){if(null!==this.filter){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination)}else this.gain.disconnect(this.context.destination);this.filter=e;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01)},updateMatrixWorld:function(){var e=new Ft;var t=new Nt;var r=new Ft;var n=new Ft;return function i(a){pi.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener;var s=this.up;this.matrixWorld.decompose(e,t,r);n.set(0,0,-1).applyQuaternion(t);if(o.positionX){o.positionX.setValueAtTime(e.x,this.context.currentTime);o.positionY.setValueAtTime(e.y,this.context.currentTime);o.positionZ.setValueAtTime(e.z,this.context.currentTime);o.forwardX.setValueAtTime(n.x,this.context.currentTime);o.forwardY.setValueAtTime(n.y,this.context.currentTime);o.forwardZ.setValueAtTime(n.z,this.context.currentTime);o.upX.setValueAtTime(s.x,this.context.currentTime);o.upY.setValueAtTime(s.y,this.context.currentTime);o.upZ.setValueAtTime(s.z,this.context.currentTime)}else{o.setPosition(e.x,e.y,e.z);o.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z)}}}()});function ru(e){pi.call(this);this.type="Audio";this.context=e.context;this.gain=this.context.createGain();this.gain.connect(e.getInput());this.autoplay=false;this.buffer=null;this.loop=false;this.startTime=0;this.offset=0;this.playbackRate=1;this.isPlaying=false;this.hasPlaybackControl=true;this.sourceType="empty";this.filters=[]}ru.prototype=Object.assign(Object.create(pi.prototype),{constructor:ru,getOutput:function(){return this.gain},setNodeSource:function(e){this.hasPlaybackControl=false;this.sourceType="audioNode";this.source=e;this.connect();return this},setBuffer:function(e){this.buffer=e;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(true===this.isPlaying){console.warn("THREE.Audio: Audio is already playing.");return}if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();e.buffer=this.buffer;e.loop=this.loop;e.onended=this.onEnded.bind(this);e.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;e.start(this.startTime,this.offset);this.isPlaying=true;this.source=e;return this.connect()},pause:function(){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}if(true===this.isPlaying){this.source.stop();this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate;this.isPlaying=false}return this},stop:function(){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop();this.offset=0;this.isPlaying=false;return this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){e||(e=[]);if(true===this.isPlaying){this.disconnect();this.filters=e;this.connect()}else this.filters=e;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}this.playbackRate=e;true===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime);return this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=false},getLoop:function(){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return false}return this.loop},setLoop:function(e){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}this.loop=e;true===this.isPlaying&&(this.source.loop=this.loop);return this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01);return this}});function nu(e){ru.call(this,e);this.panner=this.context.createPanner();this.panner.connect(this.gain)}nu.prototype=Object.assign(Object.create(ru.prototype),{constructor:nu,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Ft;return function t(r){pi.prototype.updateMatrixWorld.call(this,r);e.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(e.x,e.y,e.z)}}()});function iu(e,t){this.analyser=e.context.createAnalyser();this.analyser.fftSize=void 0!==t?t:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);e.getOutput().connect(this.analyser)}Object.assign(iu.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){var e=0,t=this.getFrequencyData();for(var r=0;r<t.length;r++)e+=t[r];return e/t.length}});function au(e,t,r){this.binding=e;this.valueSize=r;var n=Float64Array,i;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":n=Array;i=this._select;break;default:i=this._lerp}this.buffer=new n(4*r);this._mixBufferRegion=i;this.cumulativeWeight=0;this.useCount=0;this.referenceCount=0}Object.assign(au.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==n;++o)r[i+o]=r[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,a=this.binding;this.cumulativeWeight=0;if(i<1){var o=3*t;this._mixBufferRegion(r,n,o,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){a.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding;var t=this.buffer,r=this.valueSize,n=3*r;e.getValue(t,n);for(var i=r,a=n;i!==a;++i)t[i]=t[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5)for(var a=0;a!==i;++a)e[t+a]=e[r+a]},_slerp:function(e,t,r,n){Nt.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){var a=1-n;for(var o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[r+o]*n}}});var ou="\\[\\]\\.:\\/";function su(e,t,r){var n=r||lu.parseTrackName(t);this._targetGroup=e;this._bindings=e.subscribe_(t,n)}Object.assign(su.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){var r=this._bindings;for(var n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}});function lu(e,t,r){this.path=t;this.parsedPath=r||lu.parseTrackName(t);this.node=lu.findNode(e,this.parsedPath.nodeName)||e;this.rootNode=e}Object.assign(lu,{Composite:su,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new lu.Composite(e,t,r):new lu(e,t,r)},sanitizeNodeName:function(){var e=new RegExp("["+ou+"]","g");return function t(r){return r.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+ou+"]";var t="[^"+ou.replace("\\.","")+"]";var r=/((?:WC+[\/:])*)/.source.replace("WC",e);var n=/(WCOD+)?/.source.replace("WCOD",t);var i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e);var a=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e);var o=new RegExp("^"+r+n+i+a+"$");var s=["material","materials","bones"];return function e(t){var r=o.exec(t);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};var i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var a=n.nodeName.substring(i+1);if(-1!==s.indexOf(a)){n.nodeName=n.nodeName.substring(0,i);n.objectName=a}}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var n=function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t)return i;var a=n(i.children);if(a)return a}return null};var i=n(e.children);if(i)return i}return null}});Object.assign(lu.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function e(t,r){t[r]=this.node[this.propertyName]},function e(t,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i)t[r++]=n[i]},function e(t,r){t[r]=this.resolvedProperty[this.propertyIndex]},function e(t,r){this.resolvedProperty.toArray(t,r)}],SetterByBindingTypeAndVersioning:[[function e(t,r){this.targetObject[this.propertyName]=t[r]},function e(t,r){this.targetObject[this.propertyName]=t[r];this.targetObject.needsUpdate=true},function e(t,r){this.targetObject[this.propertyName]=t[r];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i)n[i]=t[r++]},function e(t,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i)n[i]=t[r++];this.targetObject.needsUpdate=true},function e(t,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i)n[i]=t[r++];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,r){this.resolvedProperty[this.propertyIndex]=t[r]},function e(t,r){this.resolvedProperty[this.propertyIndex]=t[r];this.targetObject.needsUpdate=true},function e(t,r){this.resolvedProperty[this.propertyIndex]=t[r];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,r){this.resolvedProperty.fromArray(t,r)},function e(t,r){this.resolvedProperty.fromArray(t,r);this.targetObject.needsUpdate=true},function e(t,r){this.resolvedProperty.fromArray(t,r);this.targetObject.matrixWorldNeedsUpdate=true}]],getValue:function e(t,r){this.bind();this.getValue(t,r)},setValue:function e(t,r){this.bind();this.setValue(t,r)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(!e){e=lu.findNode(this.rootNode,t.nodeName)||this.rootNode;this.node=e}this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){var a=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[r]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(void 0!==a){if(void 0===e[a]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[a]}}var s=e[n];if(void 0===s){var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",e);return}var c=this.Versioning.None;if(void 0!==e.needsUpdate){c=this.Versioning.NeedsUpdate;this.targetObject=e}else if(void 0!==e.matrixWorldNeedsUpdate){c=this.Versioning.MatrixWorldNeedsUpdate;this.targetObject=e}var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!e.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}}u=this.BindingType.ArrayElement;this.resolvedProperty=s;this.propertyIndex=i}else if(void 0!==s.fromArray&&void 0!==s.toArray){u=this.BindingType.HasFromToArray;this.resolvedProperty=s}else if(Array.isArray(s)){u=this.BindingType.EntireArray;this.resolvedProperty=s}else this.propertyName=n;this.getValue=this.GetterByBindingType[u];this.setValue=this.SetterByBindingTypeAndVersioning[u][c]},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(lu.prototype,{_getValue_unbound:lu.prototype.getValue,_setValue_unbound:lu.prototype.setValue});function cu(){this.uuid=Ut.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}Object.assign(cu.prototype,{isAnimationObjectGroup:true,add:function(){var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0;for(var c=0,u=arguments.length;c!==u;++c){var h=arguments[c],f=h.uuid,p=n[f];if(void 0===p){p=t++;n[f]=p;e.push(h);for(var d=0,m=s;d!==m;++d)o[d].push(new lu(h,i[d],a[d]))}else if(p<r){l=e[p];var v=--r,g=e[v];n[g.uuid]=p;e[p]=g;n[f]=v;e[v]=h;for(var d=0,m=s;d!==m;++d){var y=o[d],x=y[v],b=y[p];y[p]=x;void 0===b&&(b=new lu(h,i[d],a[d]));y[v]=b}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length;for(var a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,c=r[l];if(void 0!==c&&c>=t){var u=t++,h=e[u];r[h.uuid]=c;e[c]=h;r[l]=u;e[u]=s;for(var f=0,p=i;f!==p;++f){var d=n[f],m=d[u],v=d[c];d[c]=m;d[u]=v}}}this.nCachedObjects_=t},uncache:function(){var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,a=i.length;for(var o=0,s=arguments.length;o!==s;++o){var l=arguments[o],c=l.uuid,u=n[c];if(void 0!==u){delete n[c];if(u<r){var h=--r,f=e[h],p=--t,d=e[p];n[f.uuid]=u;e[u]=f;n[d.uuid]=h;e[h]=d;e.pop();for(var m=0,v=a;m!==v;++m){var g=i[m],y=g[h],x=g[p];g[u]=y;g[h]=x;g.pop()}}else{var p=--t,d=e[p];n[d.uuid]=u;e[u]=d;e.pop();for(var m=0,v=a;m!==v;++m){var g=i[m];g[u]=g[p];g.pop()}}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);n=i.length;r[e]=n;a.push(e);o.push(t);i.push(u);for(var h=c,f=s.length;h!==f;++h){var p=s[h];u[h]=new lu(p,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],l=e[o];t[l]=r;a[r]=s;a.pop();i[r]=i[o];i.pop();n[r]=n[o];n.pop()}}});function uu(e,t,r){this._mixer=e;this._clip=t;this._localRoot=r||null;var n=t.tracks,i=n.length,a=new Array(i);var o={endingStart:xt,endingEnd:xt};for(var s=0;s!==i;++s){var l=n[s].createInterpolant(null);a[s]=l;l.settings=o}this._interpolantSettings=o;this._interpolants=a;this._propertyBindings=new Array(i);this._cacheIndex=null;this._byClipCacheIndex=null;this._timeScaleInterpolant=null;this._weightInterpolant=null;this.loop=dt;this._loopCount=-1;this._startTime=null;this.time=0;this.timeScale=1;this._effectiveTimeScale=1;this.weight=1;this._effectiveWeight=1;this.repetitions=Infinity;this.paused=false;this.enabled=true;this.clampWhenFinished=false;this.zeroSlopeAtStart=true;this.zeroSlopeAtEnd=true}Object.assign(uu.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=false;this.enabled=true;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){this._startTime=e;return this},setLoop:function(e,t){this.loop=e;this.repetitions=t;return this},setEffectiveWeight:function(e){this.weight=e;this._effectiveWeight=this.enabled?e:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){e.fadeOut(t);this.fadeIn(t);if(r){var n=this._clip.duration,i=e._clip.duration,a=i/n,o=n/i;e.warp(1,a,t);this.warp(o,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;if(null!==e){this._weightInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},setEffectiveTimeScale:function(e){this.timeScale=e;this._effectiveTimeScale=this.paused?0:e;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){this.timeScale=this._clip.duration/e;return this.stopWarping()},syncWith:function(e){this.time=e.time;this.timeScale=e.timeScale;return this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,a=this._timeScaleInterpolant,o=this.timeScale;if(null===a){a=n._lendControlInterpolant();this._timeScaleInterpolant=a}var s=a.parameterPositions,l=a.sampleValues;s[0]=i;s[1]=i+r;l[0]=e/o;l[1]=t/o;return this},stopWarping:function(){var e=this._timeScaleInterpolant;if(null!==e){this._timeScaleInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(!this.enabled){this._updateWeight(e);return}var i=this._startTime;if(null!==i){var a=(e-i)*r;if(a<0||0===r)return;this._startTime=null;t=r*a}t*=this._updateTimeScale(e);var o=this._updateTime(t);var s=this._updateWeight(e);if(s>0){var l=this._interpolants;var c=this._propertyBindings;for(var u=0,h=l.length;u!==h;++u){l[u].evaluate(o);c[u].accumulate(n,s)}}},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n;if(e>r.parameterPositions[1]){this.stopFading();0===n&&(this.enabled=false)}}}this._effectiveWeight=t;return t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n;if(e>r.parameterPositions[1]){this.stopWarping();0===t?this.paused=true:this.timeScale=t}}}this._effectiveTimeScale=t;return t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var r=this._clip.duration,n=this.loop,i=this._loopCount;if(n===pt){if(-1===i){this._loopCount=0;this._setEndings(true,true,false)}e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=true:this.enabled=false;this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=n===mt;if(-1===i)if(e>=0){i=0;this._setEndings(true,0===this.repetitions,a)}else this._setEndings(0===this.repetitions,true,a);if(t>=r||t<0){var o=Math.floor(t/r);t-=r*o;i+=Math.abs(o);var s=this.repetitions-i;if(s<=0){this.clampWhenFinished?this.paused=true:this.enabled=false;t=e>0?r:0;this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1})}else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(false,false,a);this._loopCount=i;this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1===(1&i)){this.time=t;return r-t}}this.time=t;return t},_setEndings:function(e,t,r){var n=this._interpolantSettings;if(r){n.endingStart=bt;n.endingEnd=bt}else{n.endingStart=e?this.zeroSlopeAtStart?bt:xt:_t;n.endingEnd=t?this.zeroSlopeAtEnd?bt:xt:_t}},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,a=this._weightInterpolant;if(null===a){a=n._lendControlInterpolant();this._weightInterpolant=a}var o=a.parameterPositions,s=a.sampleValues;o[0]=i;s[0]=t;o[1]=i+e;s[1]=r;return this}});function hu(e){this._root=e;this._initMemoryManager();this._accuIndex=0;this.time=0;this.timeScale=1}hu.prototype=Object.assign(Object.create(n.prototype),{constructor:hu,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,c=l[s];if(void 0===c){c={};l[s]=c}for(var u=0;u!==i;++u){var h=n[u],f=h.name,p=c[f];if(void 0!==p)a[u]=p;else{p=a[u];if(void 0!==p){if(null===p._cacheIndex){++p.referenceCount;this._addInactiveBinding(p,s,f)}continue}var d=t&&t._propertyBindings[u].binding.parsedPath;p=new au(lu.create(r,f,d),h.ValueTypeName,h.getValueSize());++p.referenceCount;this._addInactiveBinding(p,s,f);a[u]=p}o[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]);this._addInactiveAction(e,r,t)}var i=e._propertyBindings;for(var a=0,o=i.length;a!==o;++a){var s=i[a];if(0===s.useCount++){this._lendBinding(s);s.saveOriginalState()}}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){var t=e._propertyBindings;for(var r=0,n=t.length;r!==n;++r){var i=t[r];if(0===--i.useCount){i.restoreOriginalState();this._takeBackBinding(i)}}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a){a={knownActions:[e],actionByRoot:{}};e._byClipCacheIndex=0;i[t]=a}else{var o=a.knownActions;e._byClipCacheIndex=o.length;o.push(e)}e._cacheIndex=n.length;n.push(e);a.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n;t[n]=r;t.pop();e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c;s[c]=l;s.pop();e._byClipCacheIndex=null;var u=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h];0===s.length&&delete a[i];this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){var t=e._propertyBindings;for(var r=0,n=t.length;r!==n;++r){var i=t[r];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],a=this._bindings;if(void 0===i){i={};n[t]=i}i[r]=e;e._cacheIndex=a.length;a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l;t[l]=s;t.pop();delete o[i];e:{for(var c in o)break e;delete a[n]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];if(void 0===r){r=new Rc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer);r.__cacheIndex=t;e[t]=r}return r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n;t[n]=e;i.__cacheIndex=r;t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"===typeof e?Ic.findByName(r,e):e,a=null!==i?i.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[n];if(void 0!==l)return l;s=o.knownActions[0];null===i&&(i=s._clip)}if(null===i)return null;var c=new uu(this,i,t);this._bindAction(c,s);this._addInactiveAction(c,a,n);return c},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"===typeof e?Ic.findByName(r,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];if(void 0!==o)return o.actionByRoot[n]||null;return null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0;this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==n;++i)r[i].useCount=0;return this},update:function(e){e*=this.timeScale;var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(var o=0;o!==r;++o){var s=t[o];s._update(n,e,i,a)}var l=this._bindings,c=this._nActiveBindings;for(var o=0;o!==c;++o)l[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){var a=i.knownActions;for(var o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null;l._byClipCacheIndex=null;u._cacheIndex=c;t[c]=u;t.pop();this._removeInactiveBindingsForAction(l)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot,a=i[t];if(void 0!==a){this._deactivateAction(a);this._removeInactiveAction(a)}}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var l in s){var c=s[l];c.restoreOriginalState();this._removeInactiveBinding(c)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);if(null!==r){this._deactivateAction(r);this._removeInactiveAction(r)}}});function fu(e){if("string"===typeof e){console.warn("THREE.Uniform: Type parameter is no longer needed.");e=arguments[1]}this.value=e}fu.prototype.clone=function(){return new fu(void 0===this.value.clone?this.value:this.value.clone())};function pu(){Oi.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}pu.prototype=Object.assign(Object.create(Oi.prototype),{constructor:pu,isInstancedBufferGeometry:true,copy:function(e){Oi.prototype.copy.call(this,e);this.maxInstancedCount=e.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});function du(e,t,r,n){this.data=e;this.itemSize=t;this.offset=r;this.normalized=true===n}Object.defineProperties(du.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(du.prototype,{isInterleavedBufferAttribute:true,setX:function(e,t){this.data.array[e*this.data.stride+this.offset]=t;return this},setY:function(e,t){this.data.array[e*this.data.stride+this.offset+1]=t;return this},setZ:function(e,t){this.data.array[e*this.data.stride+this.offset+2]=t;return this},setW:function(e,t){this.data.array[e*this.data.stride+this.offset+3]=t;return this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=r;return this},setXYZ:function(e,t,r,n){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=r;this.data.array[e+2]=n;return this},setXYZW:function(e,t,r,n,i){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=r;this.data.array[e+2]=n;this.data.array[e+3]=i;return this}});function mu(e,t){this.array=e;this.stride=t;this.count=void 0!==e?e.length/t:0;this.dynamic=false;this.updateRange={offset:0,count:-1};this.version=0}Object.defineProperty(mu.prototype,"needsUpdate",{set:function(e){true===e&&this.version++}});Object.assign(mu.prototype,{isInterleavedBuffer:true,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0;this.array=e;return this},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.count=e.count;this.stride=e.stride;this.dynamic=e.dynamic;return this},copyAt:function(e,t,r){e*=this.stride;r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){void 0===t&&(t=0);this.array.set(e,t);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){this.onUploadCallback=e;return this}});function vu(e,t,r){mu.call(this,e,t);this.meshPerAttribute=r||1}vu.prototype=Object.assign(Object.create(mu.prototype),{constructor:vu,isInstancedInterleavedBuffer:true,copy:function(e){mu.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function gu(e,t,r){xi.call(this,e,t);this.meshPerAttribute=r||1}gu.prototype=Object.assign(Object.create(xi.prototype),{constructor:gu,isInstancedBufferAttribute:true,copy:function(e){xi.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function yu(e,t,r,n){this.ray=new zi(e,t);this.near=r||0;this.far=n||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function xu(e,t){return e.distance-t.distance}function bu(e,t,r,n){if(false===e.visible)return;e.raycast(t,r);if(true===n){var i=e.children;for(var a=0,o=i.length;a<o;a++)bu(i[a],t,r,true)}}Object.assign(yu.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){if(t&&t.isPerspectiveCamera){this.ray.origin.setFromMatrixPosition(t.matrixWorld);this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()}else if(t&&t.isOrthographicCamera){this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t);this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)}else console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,r){var n=r||[];bu(e,this,n,t);n.sort(xu);return n},intersectObjects:function(e,t,r){var n=r||[];if(false===Array.isArray(e)){console.warn("THREE.Raycaster.intersectObjects: objects is not an Array.");return n}for(var i=0,a=e.length;i<a;i++)bu(e[i],this,n,t);n.sort(xu);return n}});function _u(e){this.autoStart=void 0===e||e;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false}Object.assign(_u.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now();this.oldTime=this.startTime;this.elapsedTime=0;this.running=true},stop:function(){this.getElapsedTime();this.running=false;this.autoStart=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running){this.start();return 0}if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3;this.oldTime=t;this.elapsedTime+=e}return e}});function wu(e,t,r){this.radius=void 0!==e?e:1;this.phi=void 0!==t?t:0;this.theta=void 0!==r?r:0;return this}Object.assign(wu.prototype,{set:function(e,t,r){this.radius=e;this.phi=t;this.theta=r;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.phi=e.phi;this.theta=e.theta;return this},makeSafe:function(){var e=1e-6;this.phi=Math.max(e,Math.min(Math.PI-e,this.phi));return this},setFromVector3:function(e){this.radius=e.length();if(0===this.radius){this.theta=0;this.phi=0}else{this.theta=Math.atan2(e.x,e.z);this.phi=Math.acos(Ut.clamp(e.y/this.radius,-1,1))}return this}});function Su(e,t,r){this.radius=void 0!==e?e:1;this.theta=void 0!==t?t:0;this.y=void 0!==r?r:0;return this}Object.assign(Su.prototype,{set:function(e,t,r){this.radius=e;this.theta=t;this.y=r;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.theta=e.theta;this.y=e.y;return this},setFromVector3:function(e){this.radius=Math.sqrt(e.x*e.x+e.z*e.z);this.theta=Math.atan2(e.x,e.z);this.y=e.y;return this}});function Tu(e,t){this.min=void 0!==e?e:new Dt(Infinity,Infinity);this.max=void 0!==t?t:new Dt(-Infinity,-Infinity)}Object.assign(Tu.prototype,{set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Dt;return function t(r,n){var i=e.copy(n).multiplyScalar(.5);this.min.copy(r).sub(i);this.max.copy(r).add(i);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){if(void 0===e){console.warn("THREE.Box2: .getCenter() target is now required");e=new Dt}return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){if(void 0===e){console.warn("THREE.Box2: .getSize() target is now required");e=new Dt}return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){if(void 0===t){console.warn("THREE.Box2: .getParameter() target is now required");t=new Dt}return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){if(void 0===t){console.warn("THREE.Box2: .clampPoint() target is now required");t=new Dt}return t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Dt;return function t(r){var n=e.copy(r).clamp(this.min,this.max);return n.sub(r).length()}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Mu(e){pi.call(this);this.material=e;this.render=function(){}}Mu.prototype=Object.create(pi.prototype);Mu.prototype.constructor=Mu;Mu.prototype.isImmediateRenderObject=true;function Eu(e,t,r,n){this.object=e;this.size=void 0!==t?t:1;var i=void 0!==r?r:16711680;var a=void 0!==n?n:1;var o=0;var s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new Oi;var c=new Ai(2*o*3,3);l.addAttribute("position",c);zo.call(this,l,new Fo({color:i,linewidth:a}));this.matrixAutoUpdate=false;this.update()}Eu.prototype=Object.create(zo.prototype);Eu.prototype.constructor=Eu;Eu.prototype.update=function(){var e=new Ft;var t=new Ft;var r=new Gt;return function n(){var i=["a","b","c"];this.object.updateMatrixWorld(true);r.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld;var o=this.geometry.attributes.position;var s=this.object.geometry;if(s&&s.isGeometry){var l=s.vertices;var c=s.faces;var u=0;for(var h=0,f=c.length;h<f;h++){var p=c[h];for(var d=0,m=p.vertexNormals.length;d<m;d++){var v=l[p[i[d]]];var g=p.vertexNormals[d];e.copy(v).applyMatrix4(a);t.copy(g).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e);o.setXYZ(u,e.x,e.y,e.z);u+=1;o.setXYZ(u,t.x,t.y,t.z);u+=1}}}else if(s&&s.isBufferGeometry){var y=s.attributes.position;var x=s.attributes.normal;var u=0;for(var d=0,m=y.count;d<m;d++){e.set(y.getX(d),y.getY(d),y.getZ(d)).applyMatrix4(a);t.set(x.getX(d),x.getY(d),x.getZ(d));t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e);o.setXYZ(u,e.x,e.y,e.z);u+=1;o.setXYZ(u,t.x,t.y,t.z);u+=1}}o.needsUpdate=true}}();function Au(e,t){pi.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var r=new Oi;var n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,a=1,o=32;i<o;i++,a++){var s=i/o*Math.PI*2;var l=a/o*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(l),Math.sin(l),1)}r.addAttribute("position",new Ai(n,3));var c=new Fo({fog:false});this.cone=new zo(r,c);this.add(this.cone);this.update()}Au.prototype=Object.create(pi.prototype);Au.prototype.constructor=Au;Au.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};Au.prototype.update=function(){var e=new Ft;var t=new Ft;return function r(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3;var i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n);e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(t.sub(e));void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();function Ru(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,Ru(e.children[r]));return t}function Pu(e){var t=Ru(e);var r=new Oi;var n=[];var i=[];var a=new oi(0,0,1);var o=new oi(0,1,0);for(var s=0;s<t.length;s++){var l=t[s];if(l.parent&&l.parent.isBone){n.push(0,0,0);n.push(0,0,0);i.push(a.r,a.g,a.b);i.push(o.r,o.g,o.b)}}r.addAttribute("position",new Ai(n,3));r.addAttribute("color",new Ai(i,3));var c=new Fo({vertexColors:w,depthTest:false,depthWrite:false,transparent:true});zo.call(this,r,c);this.root=e;this.bones=t;this.matrix=e.matrixWorld;this.matrixAutoUpdate=false}Pu.prototype=Object.create(zo.prototype);Pu.prototype.constructor=Pu;Pu.prototype.updateMatrixWorld=function(){var e=new Ft;var t=new kt;var r=new kt;return function n(i){var a=this.bones;var o=this.geometry;var s=o.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var l=0,c=0;l<a.length;l++){var u=a[l];if(u.parent&&u.parent.isBone){t.multiplyMatrices(r,u.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(c,e.x,e.y,e.z);t.multiplyMatrices(r,u.parent.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(c+1,e.x,e.y,e.z);c+=2}}o.getAttribute("position").needsUpdate=true;pi.prototype.updateMatrixWorld.call(this,i)}}();function Cu(e,t,r){this.light=e;this.light.updateMatrixWorld();this.color=r;var n=new Ks(t,4,2);var i=new Fi({wireframe:true,fog:false});ji.call(this,n,i);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=false;this.update()}Cu.prototype=Object.create(ji.prototype);Cu.prototype.constructor=Cu;Cu.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};Cu.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};function Lu(e,t){pi.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var r=new Fo({fog:false});var n=new Oi;n.addAttribute("position",new xi(new Float32Array(15),3));this.line=new Go(n,r);this.add(this.line);this.update()}Lu.prototype=Object.create(pi.prototype);Lu.prototype.constructor=Lu;Lu.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};Lu.prototype.update=function(){var e=.5*this.light.width;var t=.5*this.light.height;var r=this.line.geometry.attributes.position;var n=r.array;n[0]=e;n[1]=-t;n[2]=0;n[3]=e;n[4]=t;n[5]=0;n[6]=-e;n[7]=t;n[8]=0;n[9]=-e;n[10]=-t;n[11]=0;n[12]=e;n[13]=-t;n[14]=0;r.needsUpdate=true;void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};function Ou(e,t,r){pi.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=r;var n=new ns(t);n.rotateY(.5*Math.PI);this.material=new Fi({wireframe:true,fog:false});void 0===this.color&&(this.material.vertexColors=w);var i=n.getAttribute("position");var a=new Float32Array(3*i.count);n.addAttribute("color",new xi(a,3));this.add(new ji(n,this.material));this.update()}Ou.prototype=Object.create(pi.prototype);Ou.prototype.constructor=Ou;Ou.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};Ou.prototype.update=function(){var e=new Ft;var t=new oi;var r=new oi;return function n(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var a=i.geometry.getAttribute("color");t.copy(this.light.color);r.copy(this.light.groundColor);for(var o=0,s=a.count;o<s;o++){var l=o<s/2?t:r;a.setXYZ(o,l.r,l.g,l.b)}a.needsUpdate=true}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function Iu(e,t,r,n){e=e||10;t=t||10;r=new oi(void 0!==r?r:4473924);n=new oi(void 0!==n?n:8947848);var i=t/2;var a=e/t;var o=e/2;var s=[],l=[];for(var c=0,u=0,h=-o;c<=t;c++,h+=a){s.push(-o,0,h,o,0,h);s.push(h,0,-o,h,0,o);var f=c===i?r:n;f.toArray(l,u);u+=3;f.toArray(l,u);u+=3;f.toArray(l,u);u+=3;f.toArray(l,u);u+=3}var p=new Oi;p.addAttribute("position",new Ai(s,3));p.addAttribute("color",new Ai(l,3));var d=new Fo({vertexColors:w});zo.call(this,p,d)}Iu.prototype=Object.create(zo.prototype);Iu.prototype.constructor=Iu;function Bu(e,t,r,n,i,a){e=e||10;t=t||16;r=r||8;n=n||64;i=new oi(void 0!==i?i:4473924);a=new oi(void 0!==a?a:8947848);var o=[];var s=[];var l,c;var u,h,f,p,d;for(h=0;h<=t;h++){u=h/t*(2*Math.PI);l=Math.sin(u)*e;c=Math.cos(u)*e;o.push(0,0,0);o.push(l,0,c);d=1&h?i:a;s.push(d.r,d.g,d.b);s.push(d.r,d.g,d.b)}for(h=0;h<=r;h++){d=1&h?i:a;p=e-e/r*h;for(f=0;f<n;f++){u=f/n*(2*Math.PI);l=Math.sin(u)*p;c=Math.cos(u)*p;o.push(l,0,c);s.push(d.r,d.g,d.b);u=(f+1)/n*(2*Math.PI);l=Math.sin(u)*p;c=Math.cos(u)*p;o.push(l,0,c);s.push(d.r,d.g,d.b)}}var m=new Oi;m.addAttribute("position",new Ai(o,3));m.addAttribute("color",new Ai(s,3));var v=new Fo({vertexColors:w});zo.call(this,m,v)}Bu.prototype=Object.create(zo.prototype);Bu.prototype.constructor=Bu;function Uu(e,t,r,n){this.object=e;this.size=void 0!==t?t:1;var i=void 0!==r?r:16776960;var a=void 0!==n?n:1;var o=0;var s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Oi;var c=new Ai(2*o*3,3);l.addAttribute("position",c);zo.call(this,l,new Fo({color:i,linewidth:a}));this.matrixAutoUpdate=false;this.update()}Uu.prototype=Object.create(zo.prototype);Uu.prototype.constructor=Uu;Uu.prototype.update=function(){var e=new Ft;var t=new Ft;var r=new Gt;return function n(){this.object.updateMatrixWorld(true);r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld;var a=this.geometry.attributes.position;var o=this.object.geometry;var s=o.vertices;var l=o.faces;var c=0;for(var u=0,h=l.length;u<h;u++){var f=l[u];var p=f.normal;e.copy(s[f.a]).add(s[f.b]).add(s[f.c]).divideScalar(3).applyMatrix4(i);t.copy(p).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e);a.setXYZ(c,e.x,e.y,e.z);c+=1;a.setXYZ(c,t.x,t.y,t.z);c+=1}a.needsUpdate=true}}();function Du(e,t,r){pi.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=r;void 0===t&&(t=1);var n=new Oi;n.addAttribute("position",new Ai([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Fo({fog:false});this.lightPlane=new Go(n,i);this.add(this.lightPlane);n=new Oi;n.addAttribute("position",new Ai([0,0,0,0,0,1],3));this.targetLine=new Go(n,i);this.add(this.targetLine);this.update()}Du.prototype=Object.create(pi.prototype);Du.prototype.constructor=Du;Du.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};Du.prototype.update=function(){var e=new Ft;var t=new Ft;var r=new Ft;return function n(){e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);r.subVectors(t,e);this.lightPlane.lookAt(r);if(void 0!==this.color){this.lightPlane.material.color.set(this.color);this.targetLine.material.color.set(this.color)}else{this.lightPlane.material.color.copy(this.light.color);this.targetLine.material.color.copy(this.light.color)}this.targetLine.lookAt(r);this.targetLine.scale.z=r.length()}}();function ku(e){var t=new Oi;var r=new Fo({color:16777215,vertexColors:_});var n=[];var i=[];var a={};var o=new oi(16755200);var s=new oi(16711680);var l=new oi(43775);var c=new oi(16777215);var u=new oi(3355443);h("n1","n2",o);h("n2","n4",o);h("n4","n3",o);h("n3","n1",o);h("f1","f2",o);h("f2","f4",o);h("f4","f3",o);h("f3","f1",o);h("n1","f1",o);h("n2","f2",o);h("n3","f3",o);h("n4","f4",o);h("p","n1",s);h("p","n2",s);h("p","n3",s);h("p","n4",s);h("u1","u2",l);h("u2","u3",l);h("u3","u1",l);h("c","t",c);h("p","c",u);h("cn1","cn2",u);h("cn3","cn4",u);h("cf1","cf2",u);h("cf3","cf4",u);function h(e,t,r){f(e,r);f(t,r)}function f(e,t){n.push(0,0,0);i.push(t.r,t.g,t.b);void 0===a[e]&&(a[e]=[]);a[e].push(n.length/3-1)}t.addAttribute("position",new Ai(n,3));t.addAttribute("color",new Ai(i,3));zo.call(this,t,r);this.camera=e;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=a;this.update()}ku.prototype=Object.create(zo.prototype);ku.prototype.constructor=ku;ku.prototype.update=function(){var e,t;var r=new Ft;var n=new di;function i(i,a,o,s){r.set(a,o,s).unproject(n);var l=t[i];if(void 0!==l){var c=e.getAttribute("position");for(var u=0,h=l.length;u<h;u++)c.setXYZ(l[u],r.x,r.y,r.z)}}return function r(){e=this.geometry;t=this.pointMap;var a=1,o=1;n.projectionMatrix.copy(this.camera.projectionMatrix);i("c",0,0,-1);i("t",0,0,1);i("n1",-a,-o,-1);i("n2",a,-o,-1);i("n3",-a,o,-1);i("n4",a,o,-1);i("f1",-a,-o,1);i("f2",a,-o,1);i("f3",-a,o,1);i("f4",a,o,1);i("u1",.7*a,1.1*o,-1);i("u2",.7*-a,1.1*o,-1);i("u3",0,2*o,-1);i("cf1",-a,0,1);i("cf2",a,0,1);i("cf3",0,-o,1);i("cf4",0,o,1);i("cn1",-a,0,-1);i("cn2",a,0,-1);i("cn3",0,-o,-1);i("cn4",0,o,-1);e.getAttribute("position").needsUpdate=true}}();function Nu(e,t){this.object=e;void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(24);var i=new Oi;i.setIndex(new xi(r,1));i.addAttribute("position",new xi(n,3));zo.call(this,i,new Fo({color:t}));this.matrixAutoUpdate=false;this.update()}Nu.prototype=Object.create(zo.prototype);Nu.prototype.constructor=Nu;Nu.prototype.update=function(){var e=new qt;return function t(r){void 0!==r&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&e.setFromObject(this.object);if(e.isEmpty())return;var n=e.min;var i=e.max;var a=this.geometry.attributes.position;var o=a.array;o[0]=i.x;o[1]=i.y;o[2]=i.z;o[3]=n.x;o[4]=i.y;o[5]=i.z;o[6]=n.x;o[7]=n.y;o[8]=i.z;o[9]=i.x;o[10]=n.y;o[11]=i.z;o[12]=i.x;o[13]=i.y;o[14]=n.z;o[15]=n.x;o[16]=i.y;o[17]=n.z;o[18]=n.x;o[19]=n.y;o[20]=n.z;o[21]=i.x;o[22]=n.y;o[23]=n.z;a.needsUpdate=true;this.geometry.computeBoundingSphere()}}();Nu.prototype.setFromObject=function(e){this.object=e;this.update();return this};function Fu(e,t){this.type="Box3Helper";this.box=e;var r=void 0!==t?t:16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1];var a=new Oi;a.setIndex(new xi(n,1));a.addAttribute("position",new Ai(i,3));zo.call(this,a,new Fo({color:r}));this.geometry.computeBoundingSphere()}Fu.prototype=Object.create(zo.prototype);Fu.prototype.constructor=Fu;Fu.prototype.updateMatrixWorld=function(e){var t=this.box;if(t.isEmpty())return;t.getCenter(this.position);t.getSize(this.scale);this.scale.multiplyScalar(.5);pi.prototype.updateMatrixWorld.call(this,e)};function Gu(e,t,r){this.type="PlaneHelper";this.plane=e;this.size=void 0===t?1:t;var n=void 0!==r?r:16776960;var i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0];var a=new Oi;a.addAttribute("position",new Ai(i,3));a.computeBoundingSphere();Go.call(this,a,new Fo({color:n}));var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1];var s=new Oi;s.addAttribute("position",new Ai(o,3));s.computeBoundingSphere();this.add(new ji(s,new Fi({color:n,opacity:.2,transparent:true,depthWrite:false})))}Gu.prototype=Object.create(Go.prototype);Gu.prototype.constructor=Gu;Gu.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8);this.scale.set(.5*this.size,.5*this.size,t);this.lookAt(this.plane.normal);pi.prototype.updateMatrixWorld.call(this,e)};var zu;var Hu;function Vu(e,t,r,n,i,a){pi.call(this);void 0===n&&(n=16776960);void 0===r&&(r=1);void 0===i&&(i=.2*r);void 0===a&&(a=.2*i);if(void 0===zu){zu=new Oi;zu.addAttribute("position",new Ai([0,0,0,0,1,0],3));Hu=new ll(0,.5,1,5,1);Hu.translate(0,-.5,0)}this.position.copy(t);this.line=new Go(zu,new Fo({color:n}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new ji(Hu,new Fi({color:n}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(e);this.setLength(r,i,a)}Vu.prototype=Object.create(pi.prototype);Vu.prototype.constructor=Vu;Vu.prototype.setDirection=function(){var e=new Ft;var t;return function r(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{e.set(n.z,0,-n.x).normalize();t=Math.acos(n.y);this.quaternion.setFromAxisAngle(e,t)}}}();Vu.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e);void 0===r&&(r=.2*t);this.line.scale.set(1,Math.max(0,e-t),1);this.line.updateMatrix();this.cone.scale.set(r,t,r);this.cone.position.y=e;this.cone.updateMatrix()};Vu.prototype.setColor=function(e){this.line.material.color.copy(e);this.cone.material.color.copy(e)};function ju(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];var r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1];var n=new Oi;n.addAttribute("position",new Ai(t,3));n.addAttribute("color",new Ai(r,3));var i=new Fo({vertexColors:w});zo.call(this,n,i)}ju.prototype=Object.create(zo.prototype);ju.prototype.constructor=ju;function Wu(e,t,r,n,i,a,o){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new vi(e,t,r,i,a,o)}var Xu=0;var qu=1;function Yu(e){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return e}function Zu(e){void 0===e&&(e=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");e.isMultiMaterial=true;e.materials=e;e.clone=function(){return e.slice()};return e}function Ju(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new jo(e,t)}function Qu(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Bo(e)}function Ku(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new jo(e,t)}function $u(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new Vo(e)}function eh(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new Vo(e)}function th(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new Vo(e)}function rh(e,t,r){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new Ft(e,t,r)}function nh(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return new xi(e,t).setDynamic(true)}function ih(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new bi(e,t)}function ah(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new _i(e,t)}function oh(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new wi(e,t)}function sh(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new Si(e,t)}function lh(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new Ti(e,t)}function ch(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new Mi(e,t)}function uh(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new Ei(e,t)}function hh(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new Ai(e,t)}function fh(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new Ri(e,t)}Bl.create=function(e,t){console.log("THREE.Curve.create() has been deprecated");e.prototype=Object.create(Bl.prototype);e.prototype.constructor=e;e.prototype.getPoint=t;return e};Object.assign(sc.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=new yi;for(var r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new Ft(i.x,i.y,i.z||0))}return t}});Object.assign(lc.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(e)}});function ph(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Hl.call(this,e);this.type="catmullrom";this.closed=true}ph.prototype=Object.create(Hl.prototype);function dh(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Hl.call(this,e);this.type="catmullrom"}dh.prototype=Object.create(Hl.prototype);function mh(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");Hl.call(this,e);this.type="catmullrom"}mh.prototype=Object.create(Hl.prototype);Object.assign(mh.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function vh(e){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new ju(e)}function gh(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Nu(e,t)}function yh(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new zo(new ol(e.geometry),new Fo({color:void 0!==t?t:16777215}))}Iu.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Pu.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function xh(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new zo(new Zo(e.geometry),new Fo({color:void 0!==t?t:16777215}))}Object.assign(kc.prototype,{extractUrlBase:function(e){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return Nc.extractUrlBase(e)}});function bh(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Rl(e)}function _h(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new Cl(e)}Object.assign(Tu.prototype,{center:function(e){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},size:function(e){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign(qt.prototype,{center:function(e){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionSphere:function(e){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)},size:function(e){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(e)}});Hi.prototype.center=function(e){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(e)};Object.assign(Ut,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(e){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return Ut.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return Ut.ceilPowerOfTwo(e)}});Object.assign(Gt.prototype,{flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},multiplyVector3:function(e){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(kt.prototype,{extractPosition:function(e){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},getPosition:function(){var e;return function t(){void 0===e&&(e=new Ft);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector4:function(e){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");e.transformDirection(this)},crossVector:function(e){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,a){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(e,t,n,r,i,a)}});Zt.prototype.isIntersectionLine=function(e){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(e)};Nt.prototype.multiplyVector3=function(e){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return e.applyQuaternion(this)};Object.assign(zi.prototype,{isIntersectionBox:function(e){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionPlane:function(e){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(e)},isIntersectionSphere:function(e){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)}});Object.assign(Vi.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(e,t){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(e,t)},midpoint:function(e){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(e)},normal:function(e){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(e)},plane:function(e){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(e)}});Object.assign(Vi,{barycoordFromPoint:function(e,t,r,n,i){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return Vi.getBarycoord(e,t,r,n,i)},normal:function(e,t,r,n){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return Vi.getNormal(e,t,r,n)}});Object.assign(cc.prototype,{extractAllPoints:function(e){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(e)},extrude:function(e){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new Xs(this,e)},makeGeometry:function(e){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new nl(this,e)}});Object.assign(Dt.prototype,{fromAttribute:function(e,t,r){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Ft.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(t,e)},applyProjection:function(e){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(e)},fromAttribute:function(e,t,r){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Vt.prototype,{fromAttribute:function(e,t,r){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(yi.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});Object.assign(pi.prototype,{getChildByName:function(e){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}});Object.defineProperties(pi.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(Uo.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(Do.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(Bl.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=e}});Eo.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==t&&(this.filmGauge=t);this.setFocalLength(e)};Object.defineProperties(uc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=e}}});Object.defineProperties(xi.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}});Object.assign(Oi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(Oi.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.assign(qs.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(fu.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(Ni.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new oi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=e===y}}});Object.defineProperties(yl.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return false},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Gi.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=e}}});Object.assign(Po.prototype,{getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}});Object.defineProperties(Po.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.");return},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(bo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.");return},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.");return},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.");return},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(jt.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=e}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=e}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=e}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=e}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=e}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=e}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=e}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=e}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=e}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=e}}});Object.defineProperties(Ro.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});ru.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;var r=new Kc;r.load(e,function(e){t.setBuffer(e)});return this};iu.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};eu.prototype.updateCubeMap=function(e,t){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(e,t)};var wh={merge:function(e,t,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;if(t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();n=t.matrix;t=t.geometry}e.merge(t,n,r)},center:function(e){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return e.center()}};var Sh={crossOrigin:void 0,loadTexture:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Il;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,void 0,n);t&&(a.mapping=t);return a},loadTextureCube:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ol;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,void 0,n);t&&(a.mapping=t);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Th(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project().");e.project(t)};this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");e.unproject(t)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Mh(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}}var Eh={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function Ah(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},72:function(e,t){},9:function(e,t,r){"use strict";(function(e,n){r.d(t,"k",function(){return i});r.d(t,"m",function(){return o});r.d(t,"l",function(){return a});r.d(t,"i",function(){return l});r.d(t,"a",function(){return c});r.d(t,"b",function(){return u});r.d(t,"c",function(){return h});r.d(t,"d",function(){return f});r.d(t,"e",function(){return p});r.d(t,"f",function(){return d});r.d(t,"g",function(){return m});r.d(t,"h",function(){return v});r.d(t,"j",function(){return g});var i="undefined"!==typeof window?window:"undefined"!==typeof e&&e.exports&&"undefined"!==typeof n?n:this||{};var a=function(e,t){var r={},n=e.document,i=e.GreenSockGlobals=e.GreenSockGlobals||e;if(i.TweenLite)return i.TweenLite;var a=function(e){var t=e.split("."),r=i,n;for(n=0;n<t.length;n++)r[t[n]]=r=r[t[n]]||{};return r},o=a("com.greensock"),s=1e-10,l=function(e){var t=[],r=e.length,n;for(n=0;n!==r;t.push(e[n++]));return t},c=function(){},u=function(){var e=Object.prototype.toString,t=e.call([]);return function(r){return null!=r&&(r instanceof Array||"object"===typeof r&&!!r.push&&e.call(r)===t)}}(),h,f,p,d,m,v={},g=function(e,t,n,o){this.sc=v[e]?v[e].sc:[];v[e]=this;this.gsClass=null;this.func=n;var s=[];this.check=function(l){var c=t.length,u=c,h,f,p,d;while(--c>-1)if((h=v[t[c]]||new g(t[c],[])).gsClass){s[c]=h.gsClass;u--}else l&&h.sc.push(this);if(0===u&&n){f=("com.greensock."+e).split(".");p=f.pop();d=a(f.join("."))[p]=this.gsClass=n.apply(n,s);o&&(i[p]=r[p]=d);for(c=0;c<this.sc.length;c++)this.sc[c].check()}};this.check(true)},y=e._gsDefine=function(e,t,r,n){return new g(e,t,r,n)},x=o._class=function(e,t,r){t=t||function(){};y(e,[],function(){return t},r);return t};y.globals=i;var b=[0,0,1,1],_=x("easing.Ease",function(e,t,r,n){this._func=e;this._type=r||0;this._power=n||0;this._params=t?b.concat(t):b},true),w=_.map={},S=_.register=function(e,t,r,n){var i=t.split(","),a=i.length,s=(r||"easeIn,easeOut,easeInOut").split(","),l,c,u,h;while(--a>-1){c=i[a];l=n?x("easing."+c,null,true):o.easing[c]||{};u=s.length;while(--u>-1){h=s[u];w[c+"."+h]=w[h+c]=l[h]=e.getRatio?e:e[h]||new e}}};p=_.prototype;p._calcEnd=false;p.getRatio=function(e){if(this._func){this._params[0]=e;return this._func.apply(null,this._params)}var t=this._type,r=this._power,n=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);1===r?n*=n:2===r?n*=n*n:3===r?n*=n*n*n:4===r&&(n*=n*n*n*n);return 1===t?1-n:2===t?n:e<.5?n/2:1-n/2};h=["Linear","Quad","Cubic","Quart","Quint,Strong"];f=h.length;while(--f>-1){p=h[f]+",Power"+f;S(new _(null,null,1,f),p,"easeOut",true);S(new _(null,null,2,f),p,"easeIn"+(0===f?",easeNone":""));S(new _(null,null,3,f),p,"easeInOut")}w.linear=o.easing.Linear.easeIn;w.swing=o.easing.Quad.easeInOut;var T=x("events.EventDispatcher",function(e){this._listeners={};this._eventTarget=e||this});p=T.prototype;p.addEventListener=function(e,t,r,n,i){i=i||0;var a=this._listeners[e],o=0,s,l;this!==d||m||d.wake();null==a&&(this._listeners[e]=a=[]);l=a.length;while(--l>-1){s=a[l];s.c===t&&s.s===r?a.splice(l,1):0===o&&s.pr<i&&(o=l+1)}a.splice(o,0,{c:t,s:r,up:n,pr:i})};p.removeEventListener=function(e,t){var r=this._listeners[e],n;if(r){n=r.length;while(--n>-1)if(r[n].c===t){r.splice(n,1);return}}};p.dispatchEvent=function(e){var t=this._listeners[e],r,n,i;if(t){r=t.length;r>1&&(t=t.slice(0));n=this._eventTarget;while(--r>-1){i=t[r];i&&(i.up?i.c.call(i.s||n,{type:e,target:n}):i.c.call(i.s||n))}}};var M=e.requestAnimationFrame,E=e.cancelAnimationFrame,A=Date.now||function(){return(new Date).getTime()},R=A();h=["ms","moz","webkit","o"];f=h.length;while(--f>-1&&!M){M=e[h[f]+"RequestAnimationFrame"];E=e[h[f]+"CancelAnimationFrame"]||e[h[f]+"CancelRequestAnimationFrame"]}x("Ticker",function(e,t){var r=this,i=A(),a=!(false===t||!M)&&"auto",o=500,l=33,u="tick",h,f,p,v,g,y=function(e){var t=A()-R,n,a;t>o&&(i+=t-l);R+=t;r.time=(R-i)/1e3;n=r.time-g;if(!h||n>0||true===e){r.frame++;g+=n+(n>=v?.004:v-n);a=true}true!==e&&(p=f(y));a&&r.dispatchEvent(u)};T.call(r);r.time=r.frame=0;r.tick=function(){y(true)};r.lagSmoothing=function(e,t){if(!arguments.length)return o<1/s;o=e||1/s;l=Math.min(t,o,0)};r.sleep=function(){if(null==p)return;a&&E?E(p):clearTimeout(p);f=c;p=null;r===d&&(m=false)};r.wake=function(e){null!==p?r.sleep():e?i+=-R+(R=A()):r.frame>10&&(R=A()-o+5);f=0===h?c:a&&M?M:function(e){return setTimeout(e,1e3*(g-r.time)+1|0)};r===d&&(m=true);y(2)};r.fps=function(e){if(!arguments.length)return h;h=e;v=1/(h||60);g=this.time+v;r.wake()};r.useRAF=function(e){if(!arguments.length)return a;r.sleep();a=e;r.fps(h)};r.fps(e);setTimeout(function(){"auto"===a&&r.frame<5&&"hidden"!==(n||{}).visibilityState&&r.useRAF(false)},1500)});p=o.Ticker.prototype=new o.events.EventDispatcher;p.constructor=o.Ticker;var P=x("core.Animation",function(e,t){this.vars=t=t||{};this._duration=this._totalDuration=e||0;this._delay=Number(t.delay)||0;this._timeScale=1;this._active=true===t.immediateRender;this.data=t.data;this._reversed=true===t.reversed;if(!Z)return;m||d.wake();var r=this.vars.useFrames?Y:Z;r.add(this,r._time);this.vars.paused&&this.paused(true)});d=P.ticker=new o.Ticker;p=P.prototype;p._dirty=p._gc=p._initted=p._paused=false;p._totalTime=p._time=0;p._rawPrevTime=-1;p._next=p._last=p._onUpdate=p._timeline=p.timeline=null;p._paused=false;var C=function(){m&&A()-R>2e3&&("hidden"!==(n||{}).visibilityState||!d.lagSmoothing())&&d.wake();var e=setTimeout(C,2e3);e.unref&&e.unref()};C();p.play=function(e,t){null!=e&&this.seek(e,t);return this.reversed(false).paused(false)};p.pause=function(e,t){null!=e&&this.seek(e,t);return this.paused(true)};p.resume=function(e,t){null!=e&&this.seek(e,t);return this.paused(false)};p.seek=function(e,t){return this.totalTime(Number(e),false!==t)};p.restart=function(e,t){return this.reversed(false).paused(false).totalTime(e?-this._delay:0,false!==t,true)};p.reverse=function(e,t){null!=e&&this.seek(e||this.totalDuration(),t);return this.reversed(true).paused(false)};p.render=function(e,t,r){};p.invalidate=function(){this._time=this._totalTime=0;this._initted=this._gc=false;this._rawPrevTime=-1;!this._gc&&this.timeline||this._enabled(true);return this};p.isActive=function(){var e=this._timeline,t=this._startTime,r;return!e||!this._gc&&!this._paused&&e.isActive()&&(r=e.rawTime(true))>=t&&r<t+this.totalDuration()/this._timeScale-1e-7};p._enabled=function(e,t){m||d.wake();this._gc=!e;this._active=this.isActive();true!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,true));return false};p._kill=function(e,t){return this._enabled(false,false)};p.kill=function(e,t){this._kill(e,t);return this};p._uncache=function(e){var t=e?this:this.timeline;while(t){t._dirty=true;t=t.timeline}return this};p._swapSelfInParams=function(e){var t=e.length,r=e.concat();while(--t>-1)"{self}"===e[t]&&(r[t]=this);return r};p._callback=function(e){var t=this.vars,r=t[e],n=t[e+"Params"],i=t[e+"Scope"]||t.callbackScope||this,a=n?n.length:0;switch(a){case 0:r.call(i);break;case 1:r.call(i,n[0]);break;case 2:r.call(i,n[0],n[1]);break;default:r.apply(i,n)}};p.eventCallback=function(e,t,r,n){if("on"===(e||"").substr(0,2)){var i=this.vars;if(1===arguments.length)return i[e];if(null==t)delete i[e];else{i[e]=t;i[e+"Params"]=u(r)&&-1!==r.join("").indexOf("{self}")?this._swapSelfInParams(r):r;i[e+"Scope"]=n}"onUpdate"===e&&(this._onUpdate=t)}return this};p.delay=function(e){if(!arguments.length)return this._delay;this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay);this._delay=e;return this};p.duration=function(e){if(!arguments.length){this._dirty=false;return this._duration}this._duration=this._totalDuration=e;this._uncache(true);this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),true);return this};p.totalDuration=function(e){this._dirty=false;return arguments.length?this.duration(e):this._totalDuration};p.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();return this.totalTime(e>this._duration?this._duration:e,t)};p.totalTime=function(e,t,r){m||d.wake();if(!arguments.length)return this._totalTime;if(this._timeline){e<0&&!r&&(e+=this.totalDuration());if(this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,i=this._timeline;e>n&&!r&&(e=n);this._startTime=(this._paused?this._pauseTime:i._time)-(this._reversed?n-e:e)/this._timeScale;i._dirty||this._uncache(false);if(i._timeline)while(i._timeline){i._timeline._time!==(i._startTime+i._totalTime)/i._timeScale&&i.totalTime(i._totalTime,true);i=i._timeline}}this._gc&&this._enabled(true,false);if(this._totalTime!==e||0===this._duration){U.length&&Q();this.render(e,t,false);U.length&&Q()}}return this};p.progress=p.totalProgress=function(e,t){var r=this.duration();return arguments.length?this.totalTime(r*e,t):r?this._time/r:this.ratio};p.startTime=function(e){if(!arguments.length)return this._startTime;if(e!==this._startTime){this._startTime=e;this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)}return this};p.endTime=function(e){return this._startTime+(false!=e?this.totalDuration():this.duration())/this._timeScale};p.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,r;e=e||s;if(this._timeline&&this._timeline.smoothChildTiming){t=this._pauseTime;r=t||0===t?t:this._timeline.totalTime();this._startTime=r-(r-this._startTime)*this._timeScale/e}this._timeScale=e;r=this.timeline;while(r&&r.timeline){r._dirty=true;r.totalDuration();r=r.timeline}return this};p.reversed=function(e){if(!arguments.length)return this._reversed;if(e!=this._reversed){this._reversed=e;this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,true)}return this};p.paused=function(e){if(!arguments.length)return this._paused;var t=this._timeline,r,n;if(e!=this._paused&&t){m||e||d.wake();r=t.rawTime();n=r-this._pauseTime;if(!e&&t.smoothChildTiming){this._startTime+=n;this._uncache(false)}this._pauseTime=e?r:null;this._paused=e;this._active=this.isActive();if(!e&&0!==n&&this._initted&&this.duration()){r=t.smoothChildTiming?this._totalTime:(r-this._startTime)/this._timeScale;this.render(r,r===this._totalTime,true)}}this._gc&&!e&&this._enabled(true,false);return this};var L=x("core.SimpleTimeline",function(e){P.call(this,0,e);this.autoRemoveChildren=this.smoothChildTiming=true});p=L.prototype=new P;p.constructor=L;p.kill()._gc=false;p._first=p._last=p._recent=null;p._sortChildren=false;p.add=p.insert=function(e,t,r,n){var i,a;e._startTime=Number(t||0)+e._delay;e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime));e.timeline&&e.timeline._remove(e,true);e.timeline=e._timeline=this;e._gc&&e._enabled(true,true);i=this._last;if(this._sortChildren){a=e._startTime;while(i&&i._startTime>a)i=i._prev}if(i){e._next=i._next;i._next=e}else{e._next=this._first;this._first=e}e._next?e._next._prev=e:this._last=e;e._prev=i;this._recent=e;this._timeline&&this._uncache(true);return this};p._remove=function(e,t){if(e.timeline===this){t||e._enabled(false,true);e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next);e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev);e._next=e._prev=e.timeline=null;e===this._recent&&(this._recent=this._last);this._timeline&&this._uncache(true)}return this};p.render=function(e,t,r){var n=this._first,i;this._totalTime=this._time=this._rawPrevTime=e;while(n){i=n._next;(n._active||e>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,r):n.render((e-n._startTime)*n._timeScale,t,r));n=i}};p.rawTime=function(){m||d.wake();return this._totalTime};var O=x("TweenLite",function(t,r,n){P.call(this,r,n);this.render=O.prototype.render;if(null==t)throw"Cannot tween a null target.";this.target=t="string"!==typeof t?t:O.selector(t)||t;var i=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),a=this.vars.overwrite,o,c,h;this._overwrite=a=null==a?q[O.defaultOverwrite]:"number"===typeof a?a>>0:q[a];if((i||t instanceof Array||t.push&&u(t))&&"number"!==typeof t[0]){this._targets=h=l(t);this._propLookup=[];this._siblings=[];for(o=0;o<h.length;o++){c=h[o];if(!c){h.splice(o--,1);continue}if("string"===typeof c){c=h[o--]=O.selector(c);"string"===typeof c&&h.splice(o+1,1);continue}if(c.length&&c!==e&&c[0]&&(c[0]===e||c[0].nodeType&&c[0].style&&!c.nodeType)){h.splice(o--,1);this._targets=h=h.concat(l(c));continue}this._siblings[o]=K(c,this,false);1===a&&this._siblings[o].length>1&&ee(c,this,null,1,this._siblings[o])}}else{this._propLookup={};this._siblings=K(t,this,false);1===a&&this._siblings.length>1&&ee(t,this,null,1,this._siblings)}if(this.vars.immediateRender||0===r&&0===this._delay&&false!==this.vars.immediateRender){this._time=-s;this.render(Math.min(0,-this._delay))}},true),I=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},B=function(e,t){var r={},n;for(n in e)if(!X[n]&&(!(n in t)||"transform"===n||"x"===n||"y"===n||"width"===n||"height"===n||"className"===n||"border"===n)&&(!V[n]||V[n]&&V[n]._autoCSS)){r[n]=e[n];delete e[n]}e.css=r};p=O.prototype=new P;p.constructor=O;p.kill()._gc=false;p.ratio=0;p._firstPT=p._targets=p._overwrittenProps=p._startAt=null;p._notifyPluginsOfEnabled=p._lazy=false;O.version="2.0.2";O.defaultEase=p._ease=new _(null,null,1,1);O.defaultOverwrite="auto";O.ticker=d;O.autoSleep=120;O.lagSmoothing=function(e,t){d.lagSmoothing(e,t)};O.selector=e.$||e.jQuery||function(t){var r=e.$||e.jQuery;if(r){O.selector=r;return r(t)}n||(n=e.document);return n?n.querySelectorAll?n.querySelectorAll(t):n.getElementById("#"===t.charAt(0)?t.substr(1):t):t};var U=[],D={},k=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,N=/[\+-]=-?[\.\d]/,F=function(e){var t=this._firstPT,r=1e-6,n;while(t){n=t.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:t.c*e+t.s;t.m?n=t.m.call(this._tween,n,this._target||t.t,this._tween):n<r&&n>-r&&!t.blob&&(n=0);t.f?t.fp?t.t[t.p](t.fp,n):t.t[t.p](n):t.t[t.p]=n;t=t._next}},G=function(e,t,r,n){var i=[],a=0,o="",s=0,l,c,u,h,f,p,d;i.start=e;i.end=t;e=i[0]=e+"";t=i[1]=t+"";if(r){r(i);e=i[0];t=i[1]}i.length=0;l=e.match(k)||[];c=t.match(k)||[];if(n){n._next=null;n.blob=1;i._firstPT=i._applyPT=n}f=c.length;for(h=0;h<f;h++){d=c[h];p=t.substr(a,t.indexOf(d,a)-a);o+=p||!h?p:",";a+=p.length;s?s=(s+1)%5:"rgba("===p.substr(-5)&&(s=1);if(d===l[h]||l.length<=h)o+=d;else{if(o){i.push(o);o=""}u=parseFloat(l[h]);i.push(u);i._firstPT={_next:i._firstPT,t:i,p:i.length-1,s:u,c:("="===d.charAt(1)?parseInt(d.charAt(0)+"1",10)*parseFloat(d.substr(2)):parseFloat(d)-u)||0,f:0,m:s&&s<4?Math.round:0}}a+=d.length}o+=t.substr(a);o&&i.push(o);i.setRatio=F;N.test(t)&&(i.end=null);return i},z=function(e,t,r,n,i,a,o,s,l){"function"===typeof n&&(n=n(l||0,e));var c=typeof e[t],u="function"!==c?"":t.indexOf("set")||"function"!==typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),h="get"!==r?r:u?o?e[u](o):e[u]():e[t],f="string"===typeof n&&"="===n.charAt(1),p={t:e,p:t,s:h,f:"function"===c,pg:0,n:i||t,m:a?"function"===typeof a?a:Math.round:0,pr:0,c:f?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-h||0},d;if("number"!==typeof h||"number"!==typeof n&&!f)if(o||isNaN(h)||!f&&isNaN(n)||"boolean"===typeof h||"boolean"===typeof n){p.fp=o;d=G(h,f?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):n,s||O.defaultStringFilter,p);p={t:d,p:"setRatio",s:0,c:1,f:2,pg:0,n:i||t,pr:0,m:0}}else{p.s=parseFloat(h);f||(p.c=parseFloat(n)-p.s||0)}if(p.c){(p._next=this._firstPT)&&(p._next._prev=p);this._firstPT=p;return p}},H=O._internals={isArray:u,isSelector:I,lazyTweens:U,blobDif:G},V=O._plugins={},j=H.tweenLookup={},W=0,X=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Y=P._rootFramesTimeline=new L,Z=P._rootTimeline=new L,J=30,Q=H.lazyRender=function(){var e=U.length,t;D={};while(--e>-1){t=U[e];if(t&&false!==t._lazy){t.render(t._lazy[0],t._lazy[1],true);t._lazy=false}}U.length=0};Z._startTime=d.time;Y._startTime=d.frame;Z._active=Y._active=true;setTimeout(Q,1);P._updateRoot=O.render=function(){var e,t,r;U.length&&Q();Z.render((d.time-Z._startTime)*Z._timeScale,false,false);Y.render((d.frame-Y._startTime)*Y._timeScale,false,false);U.length&&Q();if(d.frame>=J){J=d.frame+(parseInt(O.autoSleep,10)||120);for(r in j){t=j[r].tweens;e=t.length;while(--e>-1)t[e]._gc&&t.splice(e,1);0===t.length&&delete j[r]}r=Z._first;if((!r||r._paused)&&O.autoSleep&&!Y._first&&1===d._listeners.tick.length){while(r&&r._paused)r=r._next;r||d.sleep()}}};d.addEventListener("tick",P._updateRoot);var K=function(e,t,r){var n=e._gsTweenID,i,a;j[n||(e._gsTweenID=n="t"+W++)]||(j[n]={target:e,tweens:[]});if(t){i=j[n].tweens;i[a=i.length]=t;if(r)while(--a>-1)i[a]===t&&i.splice(a,1)}return j[n].tweens},$=function(e,t,r,n){var i=e.vars.onOverwrite,a,o;i&&(a=i(e,t,r,n));i=O.onOverwrite;i&&(o=i(e,t,r,n));return false!==a&&false!==o},ee=function(e,t,r,n,i){var a,o,l,c;if(1===n||n>=4){c=i.length;for(a=0;a<c;a++)if((l=i[a])!==t)l._gc||l._kill(null,e,t)&&(o=true);else if(5===n)break;return o}var u=t._startTime+s,h=[],f=0,p=0===t._duration,d;a=i.length;while(--a>-1)if((l=i[a])===t||l._gc||l._paused);else if(l._timeline!==t._timeline){d=d||te(t,0,p);0===te(l,d,p)&&(h[f++]=l)}else l._startTime<=u&&l._startTime+l.totalDuration()/l._timeScale>u&&((p||!l._initted)&&u-l._startTime<=2e-10||(h[f++]=l));a=f;while(--a>-1){l=h[a];c=l._firstPT;2===n&&l._kill(r,e,t)&&(o=true);if(2!==n||!l._firstPT&&l._initted&&c){if(2!==n&&!$(l,t))continue;l._enabled(false,false)&&(o=true)}}return o},te=function(e,t,r){var n=e._timeline,i=n._timeScale,a=e._startTime;while(n._timeline){a+=n._startTime;i*=n._timeScale;if(n._paused)return-100;n=n._timeline}a/=i;return a>t?a-t:r&&a===t||!e._initted&&a-t<2*s?s:(a+=e.totalDuration()/e._timeScale/i)>t+s?0:a-t-s};p._init=function(){var e=this.vars,t=this._overwrittenProps,r=this._duration,n=!!e.immediateRender,i=e.ease,a,o,s,l,c,u;if(e.startAt){if(this._startAt){this._startAt.render(-1,true);this._startAt.kill()}c={};for(l in e.startAt)c[l]=e.startAt[l];c.data="isStart";c.overwrite=false;c.immediateRender=true;c.lazy=n&&false!==e.lazy;c.startAt=c.delay=null;c.onUpdate=e.onUpdate;c.onUpdateParams=e.onUpdateParams;c.onUpdateScope=e.onUpdateScope||e.callbackScope||this;this._startAt=O.to(this.target||{},0,c);if(n)if(this._time>0)this._startAt=null;else if(0!==r)return}else if(e.runBackwards&&0!==r)if(this._startAt){this._startAt.render(-1,true);this._startAt.kill();this._startAt=null}else{0!==this._time&&(n=false);s={};for(l in e)X[l]&&"autoCSS"!==l||(s[l]=e[l]);s.overwrite=0;s.data="isFromStart";s.lazy=n&&false!==e.lazy;s.immediateRender=n;this._startAt=O.to(this.target,0,s);if(n){if(0===this._time)return}else{this._startAt._init();this._startAt._enabled(false);this.vars.immediateRender&&(this._startAt=null)}}this._ease=i=i?i instanceof _?i:"function"===typeof i?new _(i,e.easeParams):w[i]||O.defaultEase:O.defaultEase;e.easeParams instanceof Array&&i.config&&(this._ease=i.config.apply(i,e.easeParams));this._easeType=this._ease._type;this._easePower=this._ease._power;this._firstPT=null;if(this._targets){u=this._targets.length;for(a=0;a<u;a++)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],t?t[a]:null,a)&&(o=true)}else o=this._initProps(this.target,this._propLookup,this._siblings,t,0);o&&O._onPluginEvent("_onInitAllProps",this);t&&(this._firstPT||"function"!==typeof this.target&&this._enabled(false,false));if(e.runBackwards){s=this._firstPT;while(s){s.s+=s.c;s.c=-s.c;s=s._next}}this._onUpdate=e.onUpdate;this._initted=true};p._initProps=function(t,r,n,i,a){var o,s,l,c,h,f;if(null==t)return false;D[t._gsTweenID]&&Q();this.vars.css||t.style&&t!==e&&t.nodeType&&V.css&&false!==this.vars.autoCSS&&B(this.vars,t);for(o in this.vars){f=this.vars[o];if(X[o])f&&(f instanceof Array||f.push&&u(f))&&-1!==f.join("").indexOf("{self}")&&(this.vars[o]=f=this._swapSelfInParams(f,this));else if(V[o]&&(c=new V[o])._onInitTween(t,this.vars[o],this,a)){this._firstPT=h={_next:this._firstPT,t:c,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:c._priority,m:0};s=c._overwriteProps.length;while(--s>-1)r[c._overwriteProps[s]]=this._firstPT;(c._priority||c._onInitAllProps)&&(l=true);(c._onDisable||c._onEnable)&&(this._notifyPluginsOfEnabled=true);h._next&&(h._next._prev=h)}else r[o]=z.call(this,t,o,"get",f,o,0,null,this.vars.stringFilter,a)}if(i&&this._kill(i,t))return this._initProps(t,r,n,i,a);if(this._overwrite>1&&this._firstPT&&n.length>1&&ee(t,this,r,this._overwrite,n)){this._kill(r,t);return this._initProps(t,r,n,i,a)}this._firstPT&&(false!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(D[t._gsTweenID]=true);return l};p.render=function(e,t,r){var n=this._time,i=this._duration,a=this._rawPrevTime,o,l,c,u;if(e>=i-1e-7&&e>=0){this._totalTime=this._time=i;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1;if(!this._reversed){o=true;l="onComplete";r=r||this._timeline.autoRemoveChildren}if(0===i&&(this._initted||!this.vars.lazy||r)){this._startTime===this._timeline._duration&&(e=0);if((a<0||e<=0&&e>=-1e-7||a===s&&"isPause"!==this.data)&&a!==e){r=true;a>s&&(l="onReverseComplete")}this._rawPrevTime=u=!t||e||a===e?e:s}}else if(e<1e-7){this._totalTime=this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(0!==n||0===i&&a>0){l="onReverseComplete";o=this._reversed}if(e<0){this._active=false;if(0===i&&(this._initted||!this.vars.lazy||r)){a>=0&&!(a===s&&"isPause"===this.data)&&(r=true);this._rawPrevTime=u=!t||e||a===e?e:s}}(!this._initted||this._startAt&&this._startAt.progress())&&(r=true)}else{this._totalTime=this._time=e;if(this._easeType){var h=e/i,f=this._easeType,p=this._easePower;(1===f||3===f&&h>=.5)&&(h=1-h);3===f&&(h*=2);1===p?h*=h:2===p?h*=h*h:3===p?h*=h*h*h:4===p&&(h*=h*h*h*h);this.ratio=1===f?1-h:2===f?h:e/i<.5?h/2:1-h/2}else this.ratio=this._ease.getRatio(e/i)}if(this._time===n&&!r)return;if(!this._initted){this._init();if(!this._initted||this._gc)return;if(!r&&this._firstPT&&(false!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)){this._time=this._totalTime=n;this._rawPrevTime=a;U.push(this);this._lazy=[e,t];return}this._time&&!o?this.ratio=this._ease.getRatio(this._time/i):o&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}false!==this._lazy&&(this._lazy=false);this._active||!this._paused&&this._time!==n&&e>=0&&(this._active=true);if(0===n){this._startAt&&(e>=0?this._startAt.render(e,true,r):l||(l="_dummyGS"));this.vars.onStart&&(0===this._time&&0!==i||t||this._callback("onStart"))}c=this._firstPT;while(c){c.f?c.t[c.p](c.c*this.ratio+c.s):c.t[c.p]=c.c*this.ratio+c.s;c=c._next}if(this._onUpdate){e<0&&this._startAt&&-1e-4!==e&&this._startAt.render(e,true,r);t||(this._time!==n||o||r)&&this._callback("onUpdate")}if(l&&(!this._gc||r)){e<0&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,true,r);if(o){this._timeline.autoRemoveChildren&&this._enabled(false,false);this._active=false}!t&&this.vars[l]&&this._callback(l);0===i&&this._rawPrevTime===s&&u!==s&&(this._rawPrevTime=0)}};p._kill=function(e,t,r){"all"===e&&(e=null);if(null==e&&(null==t||t===this.target)){this._lazy=false;return this._enabled(false,false)}t="string"!==typeof t?t||this._targets||this.target:O.selector(t)||t;var n=r&&this._time&&r._startTime===this._startTime&&this._timeline===r._timeline,i=this._firstPT,a,o,s,l,c,h,f,p,d;if((u(t)||I(t))&&"number"!==typeof t[0]){a=t.length;while(--a>-1)this._kill(e,t[a],r)&&(h=true)}else{if(this._targets){a=this._targets.length;while(--a>-1)if(t===this._targets[a]){c=this._propLookup[a]||{};this._overwrittenProps=this._overwrittenProps||[];o=this._overwrittenProps[a]=e?this._overwrittenProps[a]||{}:"all";break}}else{if(t!==this.target)return false;c=this._propLookup;o=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(c){f=e||c;p=e!==o&&"all"!==o&&e!==c&&("object"!==typeof e||!e._tempKill);if(r&&(O.onOverwrite||this.vars.onOverwrite)){for(s in f)if(c[s]){d||(d=[]);d.push(s)}if((d||!e)&&!$(this,r,t,d))return false}for(s in f){if(l=c[s]){if(n){l.f?l.t[l.p](l.s):l.t[l.p]=l.s;h=true}l.pg&&l.t._kill(f)&&(h=true);if(!l.pg||0===l.t._overwriteProps.length){l._prev?l._prev._next=l._next:l===this._firstPT&&(this._firstPT=l._next);l._next&&(l._next._prev=l._prev);l._next=l._prev=null}delete c[s]}p&&(o[s]=1)}!this._firstPT&&this._initted&&i&&this._enabled(false,false)}}return h};p.invalidate=function(){this._notifyPluginsOfEnabled&&O._onPluginEvent("_onDisable",this);this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null;this._notifyPluginsOfEnabled=this._active=this._lazy=false;this._propLookup=this._targets?{}:[];P.prototype.invalidate.call(this);if(this.vars.immediateRender){this._time=-s;this.render(Math.min(0,-this._delay))}return this};p._enabled=function(e,t){m||d.wake();if(e&&this._gc){var r=this._targets,n;if(r){n=r.length;while(--n>-1)this._siblings[n]=K(r[n],this,true)}else this._siblings=K(this.target,this,true)}P.prototype._enabled.call(this,e,t);if(this._notifyPluginsOfEnabled&&this._firstPT)return O._onPluginEvent(e?"_onEnable":"_onDisable",this);return false};O.to=function(e,t,r){return new O(e,t,r)};O.from=function(e,t,r){r.runBackwards=true;r.immediateRender=false!=r.immediateRender;return new O(e,t,r)};O.fromTo=function(e,t,r,n){n.startAt=r;n.immediateRender=false!=n.immediateRender&&false!=r.immediateRender;return new O(e,t,n)};O.delayedCall=function(e,t,r,n,i){return new O(t,0,{delay:e,onComplete:t,onCompleteParams:r,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:r,immediateRender:false,lazy:false,useFrames:i,overwrite:0})};O.set=function(e,t){return new O(e,0,t)};O.getTweensOf=function(e,t){if(null==e)return[];e="string"!==typeof e?e:O.selector(e)||e;var r,n,i,a;if((u(e)||I(e))&&"number"!==typeof e[0]){r=e.length;n=[];while(--r>-1)n=n.concat(O.getTweensOf(e[r],t));r=n.length;while(--r>-1){a=n[r];i=r;while(--i>-1)a===n[i]&&n.splice(r,1)}}else if(e._gsTweenID){n=K(e).concat();r=n.length;while(--r>-1)(n[r]._gc||t&&!n[r].isActive())&&n.splice(r,1)}return n||[]};O.killTweensOf=O.killDelayedCallsTo=function(e,t,r){if("object"===typeof t){r=t;t=false}var n=O.getTweensOf(e,t),i=n.length;while(--i>-1)n[i]._kill(r,e)};var re=x("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(",");this._propName=this._overwriteProps[0];this._priority=t||0;this._super=re.prototype},true);p=re.prototype;re.version="1.19.0";re.API=2;p._firstPT=null;p._addTween=z;p.setRatio=F;p._kill=function(e){var t=this._overwriteProps,r=this._firstPT,n;if(null!=e[this._propName])this._overwriteProps=[];else{n=t.length;while(--n>-1)null!=e[t[n]]&&t.splice(n,1)}while(r){if(null!=e[r.n]){r._next&&(r._next._prev=r._prev);if(r._prev){r._prev._next=r._next;r._prev=null}else this._firstPT===r&&(this._firstPT=r._next)}r=r._next}return false};p._mod=p._roundProps=function(e){var t=this._firstPT,r;while(t){r=e[this._propName]||null!=t.n&&e[t.n.split(this._propName+"_").join("")];r&&"function"===typeof r&&(2===t.f?t.t._applyPT.m=r:t.m=r);t=t._next}};O._onPluginEvent=function(e,t){var r=t._firstPT,n,i,a,o,s;if("_onInitAllProps"===e){while(r){s=r._next;i=a;while(i&&i.pr>r.pr)i=i._next;(r._prev=i?i._prev:o)?r._prev._next=r:a=r;(r._next=i)?i._prev=r:o=r;r=s}r=t._firstPT=a}while(r){r.pg&&"function"===typeof r.t[e]&&r.t[e]()&&(n=true);r=r._next}return n};re.activate=function(e){var t=e.length;while(--t>-1)e[t].API===re.API&&(V[(new e[t])._propName]=e[t]);return true};y.plugin=function(e){if(!e||!e.propName||!e.init||!e.API)throw"illegal plugin definition.";var t=e.propName,r=e.priority||0,n=e.overwriteProps,i={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=x("plugins."+t.charAt(0).toUpperCase()+t.substr(1)+"Plugin",function(){re.call(this,t,r);this._overwriteProps=n||[]},true===e.global),o=a.prototype=new re(t),s;o.constructor=a;a.API=e.API;for(s in i)"function"===typeof e[s]&&(o[i[s]]=e[s]);a.version=e.version;re.activate([a]);return a};h=e._gsQueue;if(h){for(f=0;f<h.length;f++)h[f]();for(p in v)v[p].func||e.console.log("GSAP encountered missing dependency: "+p)}m=false;return O}(i,"TweenLite");var o=i.GreenSockGlobals;var s=o.com.greensock;var l=s.core.SimpleTimeline;var c=s.core.Animation;var u=o.Ease;var h=o.Linear;var f=h;var p=o.Power1;var d=o.Power2;var m=o.Power3;var v=o.Power4;var g=o.TweenPlugin;var y=s.events.EventDispatcher}).call(t,r(219)(e),r(34))}},[216]);return{page:e.default}});